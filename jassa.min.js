(function e(t,r,a){function n(s,o){if(!r[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,a)}return r[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<a.length;s++)n(a[s]);return n})({1:[function(e,module,t){var Jassa=e("./index.js");if(typeof define=="function"&&define.amd){define("Jassa",function(){return Jassa})}else{window.Jassa=Jassa}},{"./index.js":89}],2:[function(e,module,t){var r=function(){function e(e,t){var r;for(var a=1,n=arguments.length;a<n;a++){t=arguments[a];for(r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}}return e}function t(e){if(!e){return[]}if("toArray"in Object(e)){return e.toArray()}var t=e.length||0,r=new Array(t);while(t--){r[t]=e[t]}return r}var a=function(){};var n="[object Function]";var i=Object.prototype.toString;function s(e){return i.call(e)===n}function o(e){var t=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return t.length===1&&!t[0]?[]:t}function l(e,t){var r=e.length,a=t.length;while(a--){e[r+a]=t[a]}return e}function c(e,t){return function(){var r=l([e.bind(this)],arguments);return t.apply(this,r)}}var u=function(){for(var e in{toString:1}){if(e==="toString"){return false}}return true}();function d(){}function p(){var n=null,i=t(arguments);if(s(i[0])){n=i.shift()}function o(){this.initialize.apply(this,arguments)}e(o,r.Methods);o.superclass=n;o.subclasses=[];if(n){d.prototype=n.prototype;o.prototype=new d;n.subclasses.push(o)}for(var l=0,c=i.length;l<c;l++){o.addMethods(i[l])}if(!o.prototype.initialize){o.prototype.initialize=a}o.prototype.constructor=o;return o}function h(e){var t=this.superclass&&this.superclass.prototype,r=Object.keys(e);if(u){if(e.toString!==Object.prototype.toString){r.push("toString")}if(e.valueOf!==Object.prototype.valueOf){r.push("valueOf")}}for(var a=0,n=r.length;a<n;a++){var i=r[a],l=e[i];if(t&&s(l)&&o(l)[0]==="$super"){var d=l;l=c(function(e){return function(){return t[e].apply(this,arguments)}}(i),d);l.valueOf=function(e){return function(){return e.valueOf.call(e)}}(d);l.toString=function(e){return function(){return e.toString.call(e)}}(d)}this.prototype[i]=l}return this}return{create:p,Methods:{addMethods:h}}}();module.exports=r},{}],3:[function(e,module,t){var r;var a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var n;var i;var s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var o;function l(e){a.lastIndex=0;return a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function c(e,t){var r,a,s,u,d=n,p,h=t[e];if(h&&typeof h==="object"&&typeof h.toJSON==="function"){h=h.toJSON(e)}if(typeof o==="function"){h=o.call(t,e,h)}switch(typeof h){case"string":return l(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h){return"null"}n+=i;p=[];if(Object.prototype.toString.apply(h)==="[object Array]"){u=h.length;for(r=0;r<u;r+=1){p[r]=c(r,h)||"null"}s=p.length===0?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+d+"]":"["+p.join(",")+"]";n=d;return s}if(o&&typeof o==="object"){u=o.length;for(r=0;r<u;r+=1){if(typeof o[r]==="string"){a=o[r];s=c(a,h);if(s){p.push(l(a)+(n?": ":":")+s)}}}}else{var v=Object.keys(h).sort();for(r in v){a=v[r];if(Object.prototype.hasOwnProperty.call(h,a)){s=c(a,h);if(s){p.push(l(a)+(n?": ":":")+s)}}}}s=p.length===0?"{}":n?"{\n"+n+p.join(",\n"+n)+"\n"+d+"}":"{"+p.join(",")+"}";n=d;return s}}var u=function(e,t,r){var a;n="";i="";if(typeof r==="number"){for(a=0;a<r;a+=1){i+=" "}}else if(typeof r==="string"){i=r}o=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return c("",{"":e})};r={stringify:u};module.exports=r},{}],4:[function(e,module,t){"use strict";var r={Class:e("./Class"),JSONCanonical:e("./JSONCanonical")};module.exports=r},{"./Class":2,"./JSONCanonical":3}],5:[function(e,module,t){var r=e("lodash.foreach");var a=e("lodash.uniq");var n=e("../ext/Class");var i=e("../sparql/ExprUtils");var s=e("./ElementsAndExprs");var o=n.create({classLabel:"jassa.facete.ConstraintManager",initialize:function(e){this.constraints=e||[]},isEmpty:function(){var e=this.constraints.length===0;return e},shallowClone:function(){var e=new o(this.constraints.slice(0));return e},getConstraintsByPath:function(e){var t=[];var r=this.constraints;r.forEach(function(r){var a=r.getDeclaredPaths();var n=a.some(function(t){var r=t.equals(e);return r});if(n){t.push(r)}});return t},getConstrainedSteps:function(e){var t=[];var r=e.getSteps();var n=this.constraints;for(var i=0;i<n.length;++i){var s=n[i];var o=s.getDeclaredPaths();for(var l=0;l<o.length;++l){var c=o[l];var u=c.getSteps();var d=u.length-r.length;var p=c.startsWith(e);if(d==1&&p){var h=u[u.length-1];t.push(h)}}}var v=a(t,function(e){return""+e});return v},getConstraints:function(){return this.constraints},addConstraint:function(e){this.constraints.push(e)},addConstraints:function(e){var t=this;e.forEach(function(e){t.addConstraint(e)})},removeConstraint:function(e){var t=false;var r=this.constraints;var a=[];for(var n=0;n<r.length;++n){var i=r[n];if(!i.equals(e)){a.push(i)}else{t=true}}this.constraints=a;return t},toggleConstraint:function(e){var t=this.removeConstraint(e);if(!t){this.addConstraint(e)}},createElementsAndExprs:function(e,t){var a=[];var n=[];var o={};var l=this;this.constraints.forEach(function(r){var n=r.getDeclaredPaths();var s=n.join(" ");if(t){var l=n.some(function(e){var r=t.equals(e);return r});if(l){return}}n.forEach(function(t){var r=e.forPath(t);var n=r.getElements();a.push.apply(a,n)});var c=r.createElementsAndExprs(e);var u=c.getElements();var d=c.getExprs();if(u){a.push.apply(a,u)}if(d&&d.length>0){var p=o[s];if(!p){p=[];o[s]=p}var h=i.andify(d);p.push(h)}});r(o,function(e){var t=i.orify(e);n.push(t)});var c=new s(a,n);return c}});module.exports=o},{"../ext/Class":2,"../sparql/ExprUtils":228,"./ElementsAndExprs":9,"lodash.foreach":534,"lodash.uniq":684}],6:[function(e,module,t){var r=e("../sparql/ElementUtils");var a=e("../sparql/expr/ExprVar");var n=e("../sparql/expr/E_Lang");var i=e("../sparql/expr/E_LangMatches");var s=e("../sparql/expr/E_Regex");var o=e("../sparql/expr/E_Equals");var l=e("../sparql/NodeValueUtils");var c=e("../sparql/element/ElementTriplesBlock");var u=e("./ElementsAndExprs");var d=e("../sparql/Concept");var p=e("../sparql/ConceptUtils");var h={createConstraintExists:function(e,t){var a=e.forPath(t);var n=r.createElementsTriplesBlock(a.getTriples());var i=new u(n,[]);return i},createConstraintLang:function(e,t,s){var o=e.forPath(t);var l=o.getVar();var c=new a(l);var d=r.createElementsTriplesBlock(o.getTriples());var p=s;var h=[new i(new n(c),p)];var v=new u(d,h);return v},createConstraintRegex:function(e,t,n){var i=e.forPath(t);var o=i.getVar();var l=new a(o);var c=r.createElementsTriplesBlock(i.getTriples());var d=n;var p=[new s(l,d,"i")];var h=new u(c,p);return h},createConstraintEquals:function(e,t,n){var i=e.forPath(t);var s=i.getVar();var c=new a(s);var d=r.createElementsTriplesBlock(i.getTriples());var p=l.makeNode(n);var h=[new o(c,p)];var v=new u(d,h);return v},createConstraintConcept:function(e,t,r){var a=e.forPath(t);var n=a.getVar();var i=new c(a.getTriples());var s=new d(i,n);var o=p.createCombinedConcept(s,r,true,false);var l=[];var h=new u([o.getElement()],l);return h}};module.exports=h},{"../sparql/Concept":220,"../sparql/ConceptUtils":221,"../sparql/ElementUtils":224,"../sparql/NodeValueUtils":233,"../sparql/element/ElementTriplesBlock":257,"../sparql/expr/E_Equals":269,"../sparql/expr/E_Lang":273,"../sparql/expr/E_LangMatches":274,"../sparql/expr/E_Regex":282,"../sparql/expr/ExprVar":293,"./ElementsAndExprs":9}],7:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/collection/HashMap");var n=e("../rdf/NodeUtils");var i=e("../rdf/NodeFactory");var s=e("../sparql/element/ElementSubQuery");var o=e("../sparql/element/ElementUnion");var l=e("../sparql/element/ElementFilter");var c=e("../sparql/element/ElementGroup");var u=e("../sparql/Query");var d=e("../sparql/Concept");var p=e("../sparql/ConceptUtils");var h=e("../sparql/NodeValueUtils");var v=e("../sparql/expr/ExprVar");var f=e("../sparql/expr/E_OneOf");var g=e("../sparql/expr/E_Equals");var m=e("../service/list_service/ListServiceSparqlQuery");var x=e("../service/lookup_service/LookupService");var _=e("./FacetUtils");var b=e("../sparql/Relation");var S=e("../sparql/RelationUtils");var y=e("../sparql/VarUtils");var C=e("../sponate/agg/AggMap");var w=e("../sponate/agg/AggTransform");var E=e("../sponate/agg/AggLiteral");var k=e("../sponate/binding_mapper/BindingMapperExpr");var q=e("../sponate/LookupServiceUtils");var L=e("../sponate/ServiceUtils");var j=e("../util/shared");var U=j.Promise;var T=e("../sparql/QueryUtils");var A={createAggMapCount:function(e,t){var r=new C(new k(new v(e)),new w(new E(new k(new v(t))),n.getValue));return r},execQueries:function(e,t,r,n){var i=T.createQueryUnionSubQueries(t,[r,n]);var s;if(i){var o=this.createAggMapCount(r,n);s=L.execAgg(e,i,o)}else{s=U.resolve(new a)}return s},createQueriesPreCountCore:function(e,t,r,a){var n=e.getDefaultRelation();var i=e.getPropertyToRelation();var s=r.map(function(e){var r=i.get(e);if(!r){r=n}var s=a(r,e,t);return s});return s},createQueriesPreCount:function(e,t,r,a){var n=this.createQueriesPreCountCore(e,t,r,function(e,t,r){var n=S.createQueryRawSize(e,t,r,a);return n});return n},createQueriesExactCount:function(e,t,r){var a=this.createQueriesExactCountSingle(e,t,r);return a},createQueriesExactCountSingle:function(e,t,r){var a=this.createQueriesPreCountCore(e,t,r,function(e,t,r){var a=e.getSourceVar();var n=new l(new g(new v(a),h.makeNode(t)));var i=new b(new c([e.getElement(),n]),a,e.getTargetVar());var s=S.createQueryDistinctValueCount(i,r);return s});return a},createQueriesExactCountMulti:function(e,t,r){var a=e.getSourceVar();var n=e.getDefaultRelation();var i=e.getPropertyToRelation();var s=[];var o=[];r.forEach(function(e){var r=i.get(e);if(!r){s.push(e)}else{var a=S.createQueryDistinctValueCount(r,t);o.push(a)}});var u=n;var d=new l(new f(new v(a),s));var p=new b(new c([u.getElement(),d]),u.getSourceVar(),u.getTargetVar());var h=S.createQueryDistinctValueCount(p,t);o.push(h);return o}};module.exports=A},{"../ext/Class":2,"../rdf/NodeFactory":97,"../rdf/NodeUtils":98,"../service/list_service/ListServiceSparqlQuery":157,"../service/lookup_service/LookupService":162,"../sparql/Concept":220,"../sparql/ConceptUtils":221,"../sparql/NodeValueUtils":233,"../sparql/Query":237,"../sparql/QueryUtils":239,"../sparql/Relation":240,"../sparql/RelationUtils":241,"../sparql/VarUtils":246,"../sparql/element/ElementFilter":251,"../sparql/element/ElementGroup":252,"../sparql/element/ElementSubQuery":256,"../sparql/element/ElementUnion":258,"../sparql/expr/E_Equals":269,"../sparql/expr/E_OneOf":281,"../sparql/expr/ExprVar":293,"../sponate/LookupServiceUtils":316,"../sponate/ServiceUtils":324,"../sponate/agg/AggLiteral":342,"../sponate/agg/AggMap":343,"../sponate/agg/AggTransform":347,"../sponate/binding_mapper/BindingMapperExpr":350,"../util/collection/HashMap":378,"../util/shared":387,"./FacetUtils":20}],8:[function(e,module,t){var r=e("./FacetUtils");var a=e("../sparql/element/ElementGroup");var n=e("../sparql/element/ElementOptional");var i=e("./Path");var s={createElementTable:function(e,t){var s=r.createConceptResources(e,new i,false);var o=e.getRootFacetNode();var l=t.map(function(e){var t=o.forPath(e);var r=t.getElements(true);var i=new a(r);var s;if(r.length!==0){s=new n(i)}else{s=i}return s});var c=[];c.push.apply(c,s.getElements());c.push.apply(c,l);var u=new a(c);var d=u.flatten();return d}};module.exports=s},{"../sparql/element/ElementGroup":252,"../sparql/element/ElementOptional":254,"./FacetUtils":20,"./Path":21}],9:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/ElementUtils");var n=r.create({initialize:function(e,t){this.elements=e;this.exprs=t},getElements:function(){return this.elements},getExprs:function(){return this.exprs},toElements:function(){var e=[];var t=a.createFilterElements(this.exprs);e.push.apply(e,this.elements);e.push.apply(e,t);return e}});module.exports=n},{"../ext/Class":2,"../sparql/ElementUtils":224}],10:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/ConceptUtils");var n=e("./FacetNode");var i=e("./ConstraintManager");var s=r.create({classLabel:"jassa.facete.FacetConfig",initialize:function(e,t,r){this.baseConcept=e||a.createSubjectConcept();this.rootFacetNode=t||n.createRoot(this.baseConcept.getVar());this.constraintManager=r||new i},getBaseConcept:function(){return this.baseConcept},setBaseConcept:function(e){this.baseConcept=e},getRootFacetNode:function(){return this.rootFacetNode},setRootFacetNode:function(e){this.rootFacetNode=e},getConstraintManager:function(){return this.constraintManager},setConstraintManager:function(e){this.constraintManager=e}});module.exports=s},{"../ext/Class":2,"../sparql/ConceptUtils":221,"./ConstraintManager":5,"./FacetNode":11}],11:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeFactory");var n=e("../sparql/element/ElementTriplesBlock");var i=e("../sparql/GenSym");var s=e("../sparql/VarUtils");var o=e("./Path");var l=e("./Step");var c=e("./VarNode");var u=e("../util/collection/HashMap");var d=r.create({initialize:function(e,t,r,a){this.parent=r;this.root=a;if(!this.root){if(this.parent){this.root=r.root}else{this.root=this}}this.varNode=e;this.step=t;this._isActive=true;this.idToChild=new u},hashCode:function(){var e=this.idToChild.hashCode()*3;return e},equals:function(e){throw new Error("Should not be called")},getRootNode:function(){return this.root},isRoot:function(){var e=this.parent?false:true;return e},getVar:function(){var e=this.varNode.getVariableName();var t=a.createVar(e);return t},getVariable:function(){if(!this.warningShown){this.warningShown=true}return this.getVar()},getStep:function(){return this.step},getParent:function(){return this.parent},getPath:function(){var e=[];var t=this;while(t!=this.root){e.push(t.getStep());t=t.getParent()}e.reverse();var r=new o(e);return r},forPath:function(e){var t=e.getSteps();var r=this;t.forEach(function(e){r=r.forStep(e)});return r},getSteps:function(){return this.steps},isActiveDirect:function(){return this._isActive},getElements:function(){var e=[];var t=this.getTriples();if(t.length>0){var r=new n(t);e.push(r)}return e},getTriples:function(){var e=[];this.getTriples2(e);return e},getTriples2:function(e){this.createDirectTriples2(e);if(this.parent){this.parent.getTriples2(e)}return e},createDirectTriples:function(){var e=[];this.createDirectTriples2(e);return e},createDirectTriples2:function(e){if(this.step){var t=this.parent.getVariable();var r=this.getVariable();var a=this.step.createElement(t,r,this.generator);var n=a.getTriples();e.push.apply(e,n)}return e},isActive:function(){if(!this._isActive){return false}if(this.parent){return this.parent.isActive()}return true},attachToParent:function(){if(!this.parent){return}this.parent[this.id]=this;this.parent.attachToParent()},forProperty:function(e,t){var r=new l(e,t);var a=this.forStep(r);return a},forStep:function(e){var t=this.idToChild.get(e);if(!t){var r=this.varNode.forStep(e);t=new d(r,e,this,this.root);this.idToChild.put(e,t)}return t},copyExclude:function(){var e=new d;console.log("Now root:",e);this.root.copyExcludeRec(e,this);return e},copyExcludeRec:function(e,t){console.log("Copy:",this,e);if(this===t){return}this.copyTo(e);this.steps.forEach(function(r){var a=r.step;var n=r.child;console.log("child:",a,n);if(n===t){return}var i=e.forStep(a);console.log("New child:",i);n.copyExcludeRec(i,t)})}});d.createRoot=function(e,t){var r=e?e.getName():s.s.getName();t=t?t:new i("fv");var a=new c(r,t);var n=new d(a);return n};module.exports=d},{"../ext/Class":2,"../rdf/NodeFactory":97,"../sparql/GenSym":229,"../sparql/VarUtils":246,"../sparql/element/ElementTriplesBlock":257,"../util/collection/HashMap":378,"./Path":21,"./Step":26,"./VarNode":29}],12:[function(e,module,t){var r=e("../ext/Class");var a=e("../service/ListFilter");var n=r.create({initialize:function(e,t,r){this._isExpanded=!!e;this._isInverse=!!t;this.listFilter=r||new a},getListFilter:function(){return this.listFilter},setListFilter:function(e){this.listFilter=e},isExpanded:function(){return this._isExpanded},setExpanded:function(e){this._isExpanded=e},isInverse:function(){return this._isInverse},setInverse:function(e){this._isInverse=e}});module.exports=n},{"../ext/Class":2,"../service/ListFilter":126}],13:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.sourceVar=e;this.defaultRelation=t;this.propertyToRelation=r},getSourceVar:function(){return this.sourceVar},getDefaultRelation:function(){return this.defaultRelation},getPropertyToRelation:function(){return this.propertyToRelation}});module.exports=a},{"../ext/Class":2}],14:[function(e,module,t){var r=e("../ext/Class");var a=e("./FacetServiceUtils");var n=e("./facet_service/FacetServiceFn");var i=e("./facet_service/FacetServiceClientIndex");var s=e("../sparql/BestLabelConfig");var o=e("../sponate/LookupServiceUtils");var l=e("./facet_service/FacetServiceTransformConcept");var c=e("../service/list_service/ListServiceTransformItem");var u=e("../service/list_service/ListServiceTransformItems");var d=e("../sponate/MappedConceptUtils");var p=e("../sparql/LabelUtils");var h=e("../sparql/search/KeywordSearchUtils");var v=e("../util/collection/HashMap");var f=r.create({initialize:function(e,t){this.facetService=e;this.defaultSparqlService=t},create:function(){return this.facetService},labelConfig:function(e){e=e||new s;this._labelConfigLabels(e);this._labelConfigFilter(e);return this},tagFn:function(e){this.facetService=new n(this.facetService,function(t){var r=new c(t,e);return r});return this},pathToTags:function(e,t){e=e||new v;t=t||"tags";this.facetService=new n(this.facetService,function(r){var a=new u(r,function(r){r.forEach(function(r){var a=r.val;var n=a.path;var i=e.get(n);if(!i){i={};e.put(n,i)}a[t]=i});return r});return a});return this},_labelConfigFilter:function(e){var t=function(t){var r;if(t){var a=p.createRelationPrefLabels(e);r=h.createConceptRegex(a,t,true)}else{r=null}return r};this.facetService=new l(this.facetService,t);return this},_labelConfigLabels:function(e,t){t=t||"labelInfo";var r=this;this.facetService=new n(this.facetService,function(a){var n=new u(a,function(a){var n=d.createMappedConceptBestLabel(e);var i=o.createLookupServiceMappedConcept(r.defaultSparqlService,n);var s=a.map(function(e){return e.val.property});var l=i.lookup(s).then(function(e){a.forEach(function(r){r.val[t]=e.get(r.val.property)});return a});return l});return n});return this},index:function(){var e=function(e){var t;if(e!=null){var r=new RegExp(e,"mi");t=function(e){var t=e.val.labelInfo||{id:e.key.getUri(),displayLabel:e.key.getUri(),hiddenLabels:[]};var a=r.test(t.id);var n=a||r.test(t.displayLabel);var i=n||t.hiddenLabels&&t.hiddenLabels.some(function(e){return r.test(e)});return i}}else{t=function(e){return true}}return t};this.facetService=new i(this.facetService,e,100);return this}});f.core=function(e,t){var r=a.createFacetService(e,t);var n=new f(r,e);return n};module.exports=f},{"../ext/Class":2,"../service/list_service/ListServiceTransformItem":160,"../service/list_service/ListServiceTransformItems":161,"../sparql/BestLabelConfig":216,"../sparql/LabelUtils":232,"../sparql/search/KeywordSearchUtils":304,"../sponate/LookupServiceUtils":316,"../sponate/MappedConceptUtils":319,"../util/collection/HashMap":378,"./FacetServiceUtils":15,"./facet_service/FacetServiceClientIndex":44,"./facet_service/FacetServiceFn":45,"./facet_service/FacetServiceTransformConcept":50}],15:[function(e,module,t){var r=e("../sparql/ConceptUtils");var a=e("./FacetNode");var n=e("./facet_concept_supplier/FacetConceptSupplierExact");var i=e("./facet_concept_supplier/FacetConceptSupplierDeclared");var s=e("./facet_service/FacetServiceSparql");var o=e("./facet_service/FacetServiceTransformConcept");var l=e("./facet_service/FacetServiceClientIndex");var c=e("./facet_service/FacetServiceLookup");var u=e("../sparql/LabelUtils");var d=e("../sparql/search/KeywordSearchUtils");var p=e("./FacetConfig");var h=e("./ConstraintManager");var v=e("../sparql/BestLabelConfig");var f=e("../sponate/MappedConceptUtils");var g=e("../sponate/LookupServiceUtils");var m=e("../service/lookup_service/LookupServiceMulti");var x=e("../service/lookup_service/LookupServiceKeyMap");var _=e("../service/lookup_service/LookupServiceTransformKey");var b=e("../service/lookup_service/LookupServiceFn");var S=e("../service/lookup_service/LookupServiceConst");var y=e("./FacetUtils");var C=e("./lookup_service/LookupServiceFacetCount");var w=e("./lookup_service/LookupServiceFacetPreCount");var E=e("./lookup_service/LookupServiceFacetExactCount");var k=e("./Step");var q=e("./Path");var L={createFacetConceptSupplier:function(e){var t=new i(e);return t},createFacetService:function(e,t){var r=L.createFacetConceptSupplier(t);var a=new s(e,r);var n=function(r){var a;if(r==null){a=new m({id:new x,countInfo:new S({count:0,hasMoreItems:true})})}else{var n=y.createFacetRelationIndex(t,r);var i=new w(e,n);var s=new E(e,n);var o=new C(i,s);a=new m({id:new x,valueCountInfo:o})}return a};a=new c(a,n);return a}};module.exports=L},{"../service/lookup_service/LookupServiceConst":166,"../service/lookup_service/LookupServiceFn":169,"../service/lookup_service/LookupServiceKeyMap":172,"../service/lookup_service/LookupServiceMulti":175,"../service/lookup_service/LookupServiceTransformKey":179,"../sparql/BestLabelConfig":216,"../sparql/ConceptUtils":221,"../sparql/LabelUtils":232,"../sparql/search/KeywordSearchUtils":304,"../sponate/LookupServiceUtils":316,"../sponate/MappedConceptUtils":319,"./ConstraintManager":5,"./FacetConfig":10,"./FacetNode":11,"./FacetUtils":20,"./Path":21,"./Step":26,"./facet_concept_supplier/FacetConceptSupplierDeclared":40,"./facet_concept_supplier/FacetConceptSupplierExact":41,"./facet_service/FacetServiceClientIndex":44,"./facet_service/FacetServiceLookup":46,"./facet_service/FacetServiceSparql":48,"./facet_service/FacetServiceTransformConcept":50,"./lookup_service/LookupServiceFacetCount":58,"./lookup_service/LookupServiceFacetExactCount":59,"./lookup_service/LookupServiceFacetPreCount":60}],16:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/BestLabelConfig");var n=e("./FacetConfig");var i=e("../util/collection/HashMap");var s=e("./FacetTreeState");var o=e("../service/ListFilter");var l=r.create({initialize:function(e,t,r,o,l,c){this.facetConfig=e||new n;this.bestLiteralConfig=t||new a;this.facetTreeState=r||new s;this.pathToTags=o||new i;this.tagFn=c},getFacetConfig:function(){return this.facetConfig},getFacetTreeState:function(){return this.facetTreeState},getBestLiteralConfig:function(){return this.bestLiteralConfig},getPathToTags:function(){return this.pathToTags},getTagFn:function(){return this.tagFn}});module.exports=l},{"../ext/Class":2,"../service/ListFilter":126,"../sparql/BestLabelConfig":216,"../util/collection/HashMap":378,"./FacetConfig":10,"./FacetTreeState":19}],17:[function(e,module,t){var r=e("./Step");var a=e("./Path");var n=e("./PathHead");var i=e("../util/shared");var s=i.Promise;var o=e("./FacetNodeState");var l=e("../service/ListFilter");var c=e("../util/ObjectUtils");var u=e("../util/PromiseUtils");var d={fetchFacetTree:function(e,t,r){var a=d.fetchFacetTreePathRec(e,t,r).then(function(e){var t=r==null?e.outgoing.children[0]:e;return t});return a},fetchFacetTreePathRec:function(e,t,r){r=r||null;var a=t.getPathExpansions();var i=t.getPathToDirection();var s=r?a.contains(r):true;var o=i.get(r)||1;var l=[];if(s){var c;var d;if(o==null||o===1||o===2){c=r?new n(r,false):null;d=this.fetchFacetTreePathHeadRec(e,t,c);l.push(d)}else{l.push(null)}if(o===-1||o===2){c=r?new n(r,true):null;d=this.fetchFacetTreePathHeadRec(e,t,c);l.push(d)}else{l.push(null)}}return u.all(l).spread(function(e,t){var a={path:r,isExpanded:s,outgoing:e,incoming:t};return a})},fetchFacetTreePathHeadRec:function(e,t,r){var a=t.getPathHeadToFilter();var n=a.get(r)||new l(null,10);var i=s.resolve(e.prepareListService(r)).then(function(e){var t=e.fetchItems(n.getConcept(),n.getLimit(),n.getOffset());var r=e.fetchCount(n.getConcept());return[t,r]}).spread(function(a,i){var s=a.map(function(e){return e.val});var o=s.map(function(r){var a=r.path;if(!a){throw new Error("Could not obtain a path for the sub facets of "+JSON.stringify(r))}var n=d.fetchFacetTreePathRec(e,t,a);return n});var l=u.all(o).then(function(e){s.forEach(function(t,r){var a=e[r];c.extend(t,a)});var t={path:r?r.getPath():null,pathHead:r,childCountInfo:i,listFilter:n,children:s};return t});return l});return i}};module.exports=d},{"../service/ListFilter":126,"../util/ObjectUtils":365,"../util/PromiseUtils":367,"../util/shared":387,"./FacetNodeState":12,"./Path":21,"./PathHead":22,"./Step":26}],18:[function(e,module,t){var r=e("./facet_tree_service/FacetTreeService");var a=e("../util/collection/HashMap");var n=e("./FacetServiceBuilder");var i=e("./FacetNodeState");var s={createFacetTreeService:function(e,t){var a=t.getFacetConfig();var i=t.getPathToTags();var s=function(e){var r=t.getTagFn();if(r){e=r(e)}return e};var o=n.core(e,a).labelConfig().index().pathToTags(i).tagFn(s).create();var l=new r(o,t.getFacetTreeState());return l}};module.exports=s},{"../util/collection/HashMap":378,"./FacetNodeState":12,"./FacetServiceBuilder":14,"./facet_tree_service/FacetTreeService":52}],19:[function(e,module,t){var r=e("../ext/Class");var a=e("../service/ListFilter");var n=e("../util/collection/HashMap");var i=e("../util/collection/HashSet");var s=r.create({initialize:function(e,t,r){this.pathExpansions=e||new i;this.pathToDirection=t||new n;this.pathHeadToFilter=r||new n},getPathExpansions:function(){return this.pathExpansions},getPathToDirection:function(){return this.pathToDirection},getPathHeadToFilter:function(){return this.pathHeadToFilter}});module.exports=s},{"../ext/Class":2,"../service/ListFilter":126,"../util/collection/HashMap":378,"../util/collection/HashSet":379}],20:[function(e,module,t){var r=e("../sparql/Concept");var a=e("../sparql/Relation");var n=e("../util/collection/HashMap");var i=e("../rdf/NodeFactory");var s=e("../rdf/Triple");var o=e("../rdf/NodeUtils");var l=e("../sparql/expr/ExprVar");var c=e("../sparql/expr/E_Equals");var u=e("../sparql/expr/NodeValue");var d=e("../sparql/NodeValueUtils");var p=e("../sparql/expr/E_LogicalNot");var h=e("../sparql/expr/E_OneOf");var v=e("../sparql/element/ElementGroup");var f=e("../sparql/element/ElementFilter");var g=e("../sparql/element/ElementTriplesBlock");var m=e("../sparql/PatternUtils");var x=e("../sparql/ElementUtils");var _=e("../sparql/VarUtils");var b=e("./Step");var S=e("./StepUtils");var y=e("./StepRelation");var C=e("./FacetRelationIndex");var w=e("./PathHead");var E={createConceptResources:function(e,t,a){var n=e.getBaseConcept();var i=e.getRootFacetNode();var s=e.getConstraintManager();var o=a?t:null;var l=s.createElementsAndExprs(i,o);var c=l.getElements();var u=l.getExprs();var d=i.forPath(t);var p=d.getVar();var h=n.getElements();var g=d.getElements();var m=[];m.push.apply(m,g);m.push.apply(m,c);if(n.isSubjectConcept()){if(m.length===0){m=h}}else{m.push.apply(m,h)}var x=u.map(function(e){var t=new f(e);return t});m.push.apply(m,x);var _=new v(m).flatten();var b=new r(_,p);return b},createConceptFacets:function(e,t){var a=this.createRelationFacets(e,t);var n=new r(a.getElement(),a.getSourceVar());return n},createRelationFacets:function(e,t,r){var n=t.getPath();var i=t.isInverse();var o=e.getBaseConcept();var u=e.getRootFacetNode();var p=e.getConstraintManager();var h=null;if(r){h=new b(r.getUri(),i)}var x=null;if(h){x=n.copyAppendStep(h)}var S=p.createElementsAndExprs(u,x);var y=S.toElements();var C=u.forPath(n);var w=C.getVar();var E=o.getElements();var k;if(o.isSubjectConcept()){k=y}else{k=E.concat(y)}var q=m.getVarsMentioned(k);var L=_.freshVar("p",q);var j=_.freshVar("o",q);var U=!i?new s(w,L,j):new s(j,L,w);k.push(new g([U]));if(h){var T=new l(L);var A=new c(T,d.makeNode(r));k.push(new f(A))}var F=C.getElements();k.push.apply(k,F);var N=new v(k).flatten();var V=new a(N,L,j);return V},createStepRelationsProperties:function(e,t,r,n){var i=[];var s=t.getPath();var l=t.isInverse();var c=e.getBaseConcept();var u=e.getRootFacetNode();var d=e.getConstraintManager();var p=r.map(o.getUri);var h=u.forPath(s);var f=d.getConstrainedSteps(s);var g=f.filter(function(e){var t=e.isInverse()===l;if(!t){return false}var r=p.indexOf(e.getPropertyName())>=0;var a=n?!r:r;return a});var m=g.map(S.getPropertyName);var x=[];var _=[];r.forEach(function(e){if(m.indexOf(e.getUri())>=0){_.push(e)}else{x.push(e)}});var b=this.createStepRelations(e,s,g);i.push.apply(i,b);var C=this.createRelationFacets(e,t);var w=this.createElementFilterBindVar(C.getSourceVar(),x,false);if(w!=null){C=new a(new v([C.getElement(),w]),C.getSourceVar(),C.getTargetVar())}if(x.length>0||n){var E=new y(null,C);i.push(E)}return i},createFacetRelationIndex:function(e,t){var r=E.createStepRelationsProperties(e,t,[],true);var a=r.length>0?r[0].getRelation().getSourceVar():null;var s=new n;var o=null;r.forEach(function(e){var t=e.getStep();var r=e.getRelation();var a=t?i.createUri(t.getPropertyName()):null;if(a){s.put(a,r)}else{o=r}});var l=new C(a,o,s);return l},createElementFilterBindVar:function(e,t,r){var a=null;if(t.length>0){var n=new h(new l(e),t);if(r){n=new p(n)}a=new f(n)}return a},createStepRelations:function(e,t,r){var a=this;var n=r.map(function(r){var n=a.createStepRelation(e,t,r);return n});return n},createStepRelation:function(e,t,r){var a=r.getPropertyName();var n=i.createUri(a);var s=new w(t,r.isInverse());var o=this.createRelationFacets(e,s,n);var l=new y(r,o);return l}};module.exports=E},{"../rdf/NodeFactory":97,"../rdf/NodeUtils":98,"../rdf/Triple":100,"../sparql/Concept":220,"../sparql/ElementUtils":224,"../sparql/NodeValueUtils":233,"../sparql/PatternUtils":234,"../sparql/Relation":240,"../sparql/VarUtils":246,"../sparql/element/ElementFilter":251,"../sparql/element/ElementGroup":252,"../sparql/element/ElementTriplesBlock":257,"../sparql/expr/E_Equals":269,"../sparql/expr/E_LogicalNot":278,"../sparql/expr/E_OneOf":281,"../sparql/expr/ExprVar":293,"../sparql/expr/NodeValue":294,"../util/collection/HashMap":378,"./FacetRelationIndex":13,"./PathHead":22,"./Step":26,"./StepRelation":27,"./StepUtils":28}],21:[function(e,module,t){var r=e("../ext/Class");var a=e("./Step");var n=r.create({classLabel:"jassa.facete.Path",initialize:function(e){this.steps=e?e:[]},getParent:function(){var e=this.steps.length;var t=e===0?null:new n(this.steps.slice(0,e-1));return t},getLength:function(){return this.steps.length},isEmpty:function(){var e=this.steps.length===0;return e},toString:function(){var e=this.steps.join(" ");return e},concat:function(e){var t=new n(this.steps.concat(e.steps));return t},getLastStep:function(){var e=this.steps;var t=e.length;var r;if(t===0){r=null}else{r=e[t-1]}return r},getSteps:function(){return this.steps},slice:function(e,t){var r=this.steps.slice(e,t);var a=new n(r);return a},startsWith:function(e){var t=e.steps.length;if(t>this.steps.length){return false}for(var r=0;r<t;++r){var a=this.steps[r];var n=e.steps[r];if(!a.equals(n)){return false}}return true},hashCode:function(){if(this.hash==null){this.hash=this.steps.reduce(function(e,t){var r=e+t.hashCode();return r},1357)}return this.hash},equals:function(e){
if(!e){return false}var t=this.steps.length;if(t!=e.steps.length){return false}var r=this.startsWith(e);return r},copyAppendStep:function(e){var t=this.steps.slice(0);t.push(e);var r=new n(t);return r},toJson:function(){var e=[];var t=this.steps;for(var r=0;r<t.length;++r){var a=t[r];var n=a.toJson();e.push(n)}return e},getPropertyNames:function(){var e=[];var t=this.steps;for(var r=0;r<t.length;++r){var a=t[r];var n=a.getPropertyName();e.push(n)}return e}});n.fromJson=function(e){var t=[];for(var r=0;r<e.length;++r){var i=e[r];var s=a.fromJson(i);t.push(s)}var o=new n(t);return o};n.parse=function(e){e=e.trim();var t=e.length!==0?e.split(" "):[];var r=t.map(function(e){return a.parse(e)});var i=new n(r);return i};module.exports=n},{"../ext/Class":2,"./Step":26}],22:[function(e,module,t){var r=e("../ext/Class");var a=e("./Path");var n=e("../util/ObjectUtils");var i=r.create({initialize:function(e,t){this.path=e;this._isInverse=!!t},getPath:function(){return this.path},equals:function(e){var t=this===e||this._isInverse===e._isInverse&&n.isEqual(this.path,e.path);return t},hashCode:function(){if(this.hash==null){this.hash=(this._isInverse?3:7)*this.path.hashCode()}return this.hash},isInverse:function(){return this._isInverse},toString:function(){return""+this.path+(this._isInverse?" (inverse)":"")},up:function(e){var t=this.path.slice(0,-1);e=e==null?this._isInverse:e;var r=new i(t,e);return r}});i.parse=function(e,t){var r=a.parse(e);var n=new i(r,!!t);return n};module.exports=i},{"../ext/Class":2,"../util/ObjectUtils":365,"./Path":21}],23:[function(e,module,t){var r=e("lodash.uniq");var a=e("../rdf/NodeFactory");var n=e("./FacetNode");var i=e("../sparql/VarUtils");var s=e("../sparql/ElementUtils");var o=e("../sparql/Relation");var l={createRelation:function(e,t){t=t||i.s;var r=n.createRoot(t);var a=r.forPath(e);var l=a.getElements();var c=s.groupIfNeeded(l);var u=a.getVar();var d=new o(c,t,u);return d},getUris:function(e){var t=e?e.getSteps():[];var n=t.map(function(e){return e.getPropertyName()});n=r(n);var i=n.map(function(e){var t=a.createUri(e);return t});return i}};module.exports=l},{"../rdf/NodeFactory":97,"../sparql/ElementUtils":224,"../sparql/Relation":240,"../sparql/VarUtils":246,"./FacetNode":11,"lodash.uniq":684}],24:[function(e,module,t){var r=e("../rdf/NodeFactory");var a=e("../sparql/Query");var n=e("../sparql/expr/ExprVar");var i=e("../sparql/SortCondition");var s=[];var o=e("../sparql/expr/E_LogicalNot");var l=e("../sparql/expr/E_Bound");var c={createQueryFacet:function(e,t){if(!e){return null}var c=t.isDistinct();var u=new a;u.setQueryPattern(e);var d=t.getColumns();var p={};var h=[];var v=[];d.forEach(function(e){var t=e.getId();var a=r.createVar(t);var i=new n(a);var o=e.getAggregator();if(o){h.push(t);var l=o.getName();var c=s[l];if(!c){throw new Error("No aggExprFactory for "+l)}var d=c.createExpr(i);i=d;u.getProject().add(a,i)}else{v.push(t);u.getProject().add(a)}p[t]=i});if(h.length>0){v.forEach(function(e){var t=p[e];u.getGroupBy().push(t)});c=false}var f=t.getLimitAndOffset();u.setLimit(f.getLimit());u.setOffset(f.getOffset());var g=t.getSortConditions();g.forEach(function(e){var t=e.getColumnId();var r=p[t];if(!r){console.log("[ERROR] Should not happen");throw new Error("Should not happen")}var a=e.getSortDir();var n=e.getSortType();var s=null;switch(n){case"null":if(h.indexOf(t)<0){if(a>0){s=new i(new o(new l(r)),1)}else if(a<0){s=new i(new l(r),1)}}break;case"data":s=!a?null:new i(r,a);break;default:throw new Error("Should not happen")}if(s){u.getOrderBy().push(s)}});u.setDistinct(c);return u}}},{"../rdf/NodeFactory":97,"../sparql/Query":237,"../sparql/SortCondition":242,"../sparql/expr/E_Bound":267,"../sparql/expr/E_LogicalNot":278,"../sparql/expr/ExprVar":293}],25:[function(e,module,t){},{}],26:[function(e,module,t){var r=e("lodash.isequal");var a=e("../ext/Class");var n=e("../rdf/NodeFactory");var i=e("../rdf/Triple");var s=e("../sparql/element/ElementTriplesBlock");var o=e("../util/ObjectUtils");var l=a.create({classLabel:"jassa.facete.Step",initialize:function(e,t){this.type="property";this.propertyName=e;this._isInverse=t},toJson:function(){var e={isInverse:this.isInverse,propertyName:this.propertyName};return e},getPropertyName:function(){return this.propertyName},isInverse:function(){return this._isInverse},equals:function(e){var t=this._isInverse===e._isInverse&&this.propertyName===e.propertyName;return t},hashCode:function(){if(this.hash==null){this.hash=(this._isInverse?3:7)*o.hashCodeStr(this.propertyName)}return this.hash},toString:function(){if(this._isInverse){return"<"+this.propertyName}else{return this.propertyName}},createElement:function(e,t,r){var a=n.createUri(this.propertyName);var o;if(this._isInverse){o=new i(t,a,e)}else{o=new i(e,a,t)}var l=new s([o]);return l}});l.fromJson=function(e){var t=e.propertyName;var r=e.IsInverse();var a=new l(t,r);return a};l.parse=function(e){var t;if(e.charAt(0)==="<"){t=new l(e.substring(1),true)}else{t=new l(e,false)}return t};module.exports=l},{"../ext/Class":2,"../rdf/NodeFactory":97,"../rdf/Triple":100,"../sparql/element/ElementTriplesBlock":257,"../util/ObjectUtils":365,"lodash.isequal":564}],27:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.step=e;this.relation=t},getStep:function(){return this.step},getRelation:function(){return this.relation},toString:function(){return this.step+": "+this.relation}});module.exports=a},{"../ext/Class":2}],28:[function(e,module,t){var r={getPropertyName:function(e){var t=e.getPropertyName();return t}};module.exports=r},{}],29:[function(e,module,t){var r=e("lodash.foreach");var a=e("../ext/Class");var n=e("./VarNode");var i=e("./Step");var s=e("../util/collection/HashMap");var o=e("../util/ObjectUtils");var n=a.create({initialize:function(e,t,r,a,n){this.variableName=e;this.generator=t;this.step=r;this.parent=a;this.root=n;if(!this.root){if(this.parent){this.root=a.root}else{this.root=this}}this.idToChild=new s},hashCode:function(){var e=o.hashCodeStr(this.variableName)*(this.step?this.step.hashCode():7);return e},equals:function(e){throw new Error("Should not be called")},isRoot:function(){var e=this.parent?false:true;return e},getVariableName:function(){return this.variableName},getStop:function(e){return this.step},getSteps:function(){return this.steps},forProperty:function(e,t){var r=new i(e,t);var a=this.forStep(r);return a},forStep:function(e){var t=this.idToChild.get(e);if(!t){var r=this.generator.next();t=new n(r,this.generator,e,this);this.idToChild.put(e,t)}return t},findNodeByVarName:function(e){if(this.variableName===e){return this}var t=[];r(this.idToChild,function(e){t.push(e)});for(var a=0;a<t.length;++a){var n=t[a];var i=n.findNodeByVarName(e);if(i){return i}}return null}});module.exports=n},{"../ext/Class":2,"../util/ObjectUtils":365,"../util/collection/HashMap":378,"./Step":26,"./VarNode":29,"lodash.foreach":534}],30:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getName:function(){throw new Error("Override me")},getDeclaredPaths:function(){console.log("[ERROR] Override me");throw new Error("Override me")},createElementsAndExprs:function(e){throw new Error("Override me")},equals:function(){throw new Error("Override me")},hashCode:function(){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],31:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Constraint");var n=r.create(a,{initialize:function(e,t){this.name=e;this.path=t},getName:function(){return this.name},getDeclaredPaths:function(){return[this.path]},getDeclaredPath:function(){return this.path}});module.exports=n},{"../../ext/Class":2,"./Constraint":30}],32:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ObjectUtils");var n=e("./ConstraintBasePath");var i=r.create(n,{initialize:function($super,e,t,r){$super(e,t);this.value=r},getValue:function(){return this.value},equals:function(e){if(!e instanceof n){return false}var t=this.name==e.name;var r=this.path.equals(e.path);var a=this.value.equals(e.value);var i=t&&r&&a;return i},hashCode:function(){var e=a.hashCode(this,true);return e}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./ConstraintBasePath":31}],33:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePath");var i=e("../../util/ObjectUtils");var s=r.create(n,{classLabel:"jassa.facete.ConstraintConcept",initialize:function($super,e,t){$super("concept",e);this.concept=t},createElementsAndExprs:function(e){var t=a.createConstraintConcept(e,this.path,this.concept);return t},equals:function(e){var t=e&&this.path.equals(e.path)&&""+this.concept===""+e.concept;return t},hashCode:function(){var e=i.hashCode(this,true);return e}});module.exports=s},{"../../ext/Class":2,"../../util/ObjectUtils":365,"../ConstraintUtils":6,"./ConstraintBasePath":31}],34:[function(e,module,t){},{}],35:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePathValue");var i=r.create(n,{classLabel:"jassa.facete.ConstraintEquals",initialize:function($super,e,t){$super("equals",e,t)},createElementsAndExprs:function(e){var t=a.createConstraintEquals(e,this.path,this.value);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePathValue":32}],36:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePath");var i=r.create(n,{classLabel:"jassa.facete.ConstraintExists",initialize:function($super,e){$super("exists",e)},createElementsAndExprs:function(e){var t=a.createConstraintExists(e,this.path);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePath":31}],37:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePathValue");var i=r.create(n,{classLabel:"jassa.facete.ConstraintLang",initialize:function($super,e,t){$super("lang",e,t)},createElementsAndExprs:function(e){var t=a.createConstraintLang(e,this.path,this.value);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePathValue":32}],38:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePathValue");var i=r.create(n,{classLabel:"jassa.facete.ConstraintRegex",initialize:function($super,e,t){$super("regex",e,t)},createElementsAndExprs:function(e){var t=a.createConstraintRegex(e,this.path,this.value.getLiteralLexicalForm());return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePathValue":32}],39:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getConcept:function(e){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],40:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetConceptSupplierExact");var n=e("../../sparql/CannedConceptUtils");var i=r.create(a,{initialize:function($super,e){$super(e)},getConcept:function($super,e){var t=this.facetConfig;var r=e.getPath();var a=t.getConstraintManager();var i=t.getBaseConcept();var s=i.isSubjectConcept();var o=r.isEmpty();var l=a.isEmpty();var c=s&&o&&l;var u=c?n.createConceptDeclaredProperties(i.getVar()):$super(e);return u}});module.exports=i},{"../../ext/Class":2,"../../sparql/CannedConceptUtils":219,"./FacetConceptSupplierExact":41}],41:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/Concept");var n=e("../FacetUtils");var i=e("./FacetConceptSupplier");var s=r.create(i,{initialize:function(e){this.facetConfig=e},getConcept:function(e){var t=n.createRelationFacets(this.facetConfig,e);var r=new a(t.getElement(),t.getSourceVar());return r}});module.exports=s},{"../../ext/Class":2,"../../sparql/Concept":220,"../FacetUtils":20,"./FacetConceptSupplier":39}],42:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashMap");var n=e("../FacetUtils");var i=e("./FacetConceptSupplier");var s=r.create({initialize:function(e,t){this.facetConceptSupplierFallback=e;this.pathHeadToConcept=t||new a},getPathHeadToConcept:function(){return this.pathHeadToConcept},getConcept:function(e){var t=this.pathHeadToConcept.get(e);var r=t||this.facetConceptSupplierFallback.getConcept(e);return r}});module.exports=s},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../FacetUtils":20,"./FacetConceptSupplier":39}],43:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({prepareListService:function(e){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],44:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../service/list_service/ListServiceArray");var n=e("../../service/list_service/ListServiceTransformItem");var i=e("../../util/shared");var s=i.Promise;var o=r.create({initialize:function(e,t,r){this.facetService=e;this.filterSupplierFn=t;this.itemLimit=r||100},prepareListService:function(e){var t=this;var r=s.resolve(this.facetService.prepareListService(e)).then(function(e){var r=e.fetchCount(null,t.itemLimit);return[r,e]}).spread(function(e,r){var n=e.hasMoreItems?r:r.fetchItems().then(function(e){var r=new a(e,t.filterSupplierFn);return r});return n});return r}});module.exports=o},{"../../ext/Class":2,"../../service/list_service/ListServiceArray":150,"../../service/list_service/ListServiceTransformItem":160,"../../util/shared":387}],45:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetService");var n=r.create(a,{initialize:function(e,t){this.facetService=e;this.fn=t},prepareListService:function(e){var t=this;var r=this.facetService.prepareListService(e).then(function(e){var r=t.fn(e);return r});return r}});module.exports=n},{"../../ext/Class":2,"./FacetService":43}],46:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetService");var n=e("../../util/collection/HashMap");var i=e("../../service/list_service/ListServiceConceptKeyLookup");var s=e("../../service/list_service/ListServiceTransformItem");var o=r.create(a,{initialize:function(e,t){this.facetService=e;this.fnLookupService=t},prepareListService:function(e){var t=this.fnLookupService(e);var r=this.facetService.prepareListService(e).then(function(e){e=new i(e,t,function(e){var t=e.val.property;return t});return e});return r}});module.exports=o},{"../../ext/Class":2,"../../service/list_service/ListServiceConceptKeyLookup":153,"../../service/list_service/ListServiceTransformItem":160,"../../util/collection/HashMap":378,"./FacetService":43}],47:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetService");var n=e("../../util/collection/HashMap");var i=r.create(a,{initialize:function(e,t){this.facetServiceFallback=e;this.pathHeadToFacetService=this.pathHeadToFacetService||new n},getPathHeadToFacetService:function(){return this.pathHeadToFacetService},prepareListService:function(e){var t=this.pathHeadToFacetService.get(e);var r=t||this.facetServiceFallback;var a=r.prepareListService(e);return a}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":378,"./FacetService":43}],48:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeFactory");var n=e("../../sparql/Concept");var i=e("../../sparql/ConceptUtils");var s=e("../../service/list_service/ListServiceArray");var o=e("../../service/list_service/ListServiceSparqlQuery");var l=e("../../service/list_service/ListServiceTransformItem");var c=e("./FacetService");var u=e("../FacetUtils");var d=e("../../sparql/RelationUtils");var p=e("../../sparql/VarUtils");var h=e("../Step");var v=e("../Path");var f=e("../../util/shared");var g=f.Promise;var m=r.create(c,{initialize:function(e,t){this.sparqlService=e;this.facetConceptSupplier=t},prepareListService:function(e){var t;if(e==null){var r=new v;var n=[{key:r,val:{path:r,property:a.createUri("http://facete.aksw.org/resource/rootFacet")}}];t=new s(n,function(e){return function(e){return true}})}else{var c=this.facetConceptSupplier.getConcept(e);var u=i.createQueryList(c);t=new o(this.sparqlService,u,c.getVar(),false);t=new l(t,function(t){var r=t.key;var a=new h(r.getUri(),e.isInverse());var n=e.getPath().copyAppendStep(a);var i={key:r,val:{path:n,property:r}};return i})}var d=g.resolve(t);return d}});module.exports=m},{"../../ext/Class":2,"../../rdf/NodeFactory":97,"../../service/list_service/ListServiceArray":150,"../../service/list_service/ListServiceSparqlQuery":157,"../../service/list_service/ListServiceTransformItem":160,"../../sparql/Concept":220,"../../sparql/ConceptUtils":221,"../../sparql/RelationUtils":241,"../../sparql/VarUtils":246,"../../util/shared":387,"../FacetUtils":20,"../Path":21,"../Step":26,"./FacetService":43}],49:[function(e,module,t){},{}],50:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../service/list_service/ListServiceTransformConcept");var n=e("./FacetService");var i=r.create({initialize:function(e,t){this.facetService=e;this.fnTransform=t},prepareListService:function(e){var t=this.facetService.prepareListService(e);var r=this;var n=t.then(function(e){var t=new a(e,r.fnTransform);return t});return n}});module.exports=i},{"../../ext/Class":2,"../../service/list_service/ListServiceTransformConcept":158,"./FacetService":43}],51:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createFacetService:function(e,t){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],52:[function(e,module,t){var r=e("../../ext/Class");var a=e("../FacetTreeServiceHelpers");var n=r.create({initialize:function(e,t){this.facetService=e;this.facetTreeState=t},fetchFacetTree:function(e){var t=a.fetchFacetTree(this.facetService,this.facetTreeState,e);return t}});module.exports=n},{"../../ext/Class":2,"../FacetTreeServiceHelpers":17}],53:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({prepareConcept:function(e,t){throw new Error("Method not overridden")}});module.exports=a},{"../../ext/Class":2}],54:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetValueConceptService");var n=e("../FacetUtils");var i=e("../../util/shared");var s=i.Promise;var o=r.create({initialize:function(e){this.facetConfig=e},prepareConcept:s.method(function(e,t){var r=n.createConceptResources(this.facetConfig,e,t);return r})});module.exports=o},{"../../ext/Class":2,"../../util/shared":387,"../FacetUtils":20,"./FacetValueConceptService":53}],55:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeUtils");var n=e("../../sparql/Relation");var i=e("../../sparql/RelationUtils");var s=e("../FacetUtils.js");var o=e("../../sparql/Binding");var l=e("../../sparql/ElementUtils");var c=e("../../sparql/ConceptUtils");var u=e("../../service/ServiceUtils");var d=e("../../service/list_service/ListServiceSparqlQuery");var p=e("../../service/list_service/ListServiceTransformItem");var h=e("../../sparql/SortCondition");var v=r.create({initialize:function(e,t,r){this.sparqlService=e;this.rowLimit=r||1e5;this.facetConfig=t},prepareTableService:function(e,t){var r=s.createConceptResources(this.facetConfig,e,t);var v=this.facetConfig.getRootFacetNode().getVar();var f=this;var g=u.fetchCountRows(this.sparqlService,r.getElement(),this.rowLimit).then(function(t){var s=t.hasMoreItems===false;var u;var g;var m;if(s){var x=new n(r.getElement(),r.getVar(),v);m=l.freshVar(x.getElement(),"c");g=i.createQueryDistinctValueCount(x,m);g.getOrderBy().push(new h(g.getProject().getExpr(m),"desc"));u=new d(f.sparqlService,g,r.getVar())}else{m=null;g=c.createQueryList(r);u=new d(f.sparqlService,g,r.getVar())}u=new p(u,function(t){var r=t.val;var n=r.getBindings();var i=n[0]||new o;var l=m?a.getValue(i.get(m)):null;var c={key:t.key,val:{node:t.key,path:e,countInfo:{hasMoreItems:!s,count:l}}};return c});return u});return g}});module.exports=v},{"../../ext/Class":2,"../../rdf/NodeUtils":98,"../../service/ServiceUtils":135,"../../service/list_service/ListServiceSparqlQuery":157,"../../service/list_service/ListServiceTransformItem":160,"../../sparql/Binding":217,"../../sparql/ConceptUtils":221,"../../sparql/ElementUtils":224,"../../sparql/Relation":240,"../../sparql/RelationUtils":241,"../../sparql/SortCondition":242,"../FacetUtils.js":20}],56:[function(e,module,t){"use strict";var r={ConstraintManager:e("./ConstraintManager"),ConstraintUtils:e("./ConstraintUtils"),CountUtils:e("./CountUtils"),ElementUtils:e("./ElementUtils"),ElementsAndExprs:e("./ElementsAndExprs"),FacetConfig:e("./FacetConfig"),FacetNode:e("./FacetNode"),FacetNodeState:e("./FacetNodeState"),FacetRelationIndex:e("./FacetRelationIndex"),FacetServiceBuilder:e("./FacetServiceBuilder"),FacetServiceUtils:e("./FacetServiceUtils"),FacetTreeConfig:e("./FacetTreeConfig"),FacetTreeServiceHelpers:e("./FacetTreeServiceHelpers"),FacetTreeServiceUtils:e("./FacetTreeServiceUtils"),FacetTreeState:e("./FacetTreeState"),FacetUtils:e("./FacetUtils"),ListFilter:e("../service/ListFilter"),Path:e("./Path"),PathHead:e("./PathHead"),QueryUtils:e("./QueryUtils"),ServiceUtils:e("./ServiceUtils"),Step:e("./Step"),StepRelation:e("./StepRelation"),StepUtils:e("./StepUtils"),VarNode:e("./VarNode"),Constraint:e("./constraint/Constraint"),ConstraintBasePath:e("./constraint/ConstraintBasePath"),ConstraintBasePathValue:e("./constraint/ConstraintBasePathValue"),ConstraintConcept:e("./constraint/ConstraintConcept"),ConstraintElementFactoryBBoxRange:e("./constraint/ConstraintElementFactoryBBoxRange"),ConstraintEquals:e("./constraint/ConstraintEquals"),ConstraintExists:e("./constraint/ConstraintExists"),ConstraintLang:e("./constraint/ConstraintLang"),ConstraintRegex:e("./constraint/ConstraintRegex"),FacetConceptSupplier:e("./facet_concept_supplier/FacetConceptSupplier"),FacetConceptSupplierDeclared:e("./facet_concept_supplier/FacetConceptSupplierDeclared"),FacetConceptSupplierExact:e("./facet_concept_supplier/FacetConceptSupplierExact"),FacetConceptSupplierMeta:e("./facet_concept_supplier/FacetConceptSupplierMeta"),FacetService:e("./facet_service/FacetService"),FacetServiceClientIndex:e("./facet_service/FacetServiceClientIndex"),FacetServiceFn:e("./facet_service/FacetServiceFn"),FacetServiceLookup:e("./facet_service/FacetServiceLookup"),FacetServiceMeta:e("./facet_service/FacetServiceMeta"),FacetServiceSparql:e("./facet_service/FacetServiceSparql"),FacetServiceTagger:e("./facet_service/FacetServiceTagger"),FacetServiceTransformConcept:e("./facet_service/FacetServiceTransformConcept"),FacetSystem:e("./facet_system/FacetSystem"),FacetTreeService:e("./facet_tree_service/FacetTreeService"),FacetValueConceptService:e("./facet_value_concept_service/FacetValueConceptService"),FacetValueConceptServiceExact:e("./facet_value_concept_service/FacetValueConceptServiceExact"),FacetValueService:e("./facet_value_service/FacetValueService"),LookupServiceConstraintLabels:e("./lookup_service/LookupServiceConstraintLabels"),LookupServiceFacetCount:e("./lookup_service/LookupServiceFacetCount"),LookupServiceFacetExactCount:e("./lookup_service/LookupServiceFacetExactCount"),LookupServiceFacetPreCount:e("./lookup_service/LookupServiceFacetPreCount"),LookupServicePathLabels:e("./lookup_service/LookupServicePathLabels"),Aggregator:e("./table/Aggregator"),ColumnView:e("./table/ColumnView"),FilterString:e("./table/FilterString"),QueryFactoryFacetTable:e("./table/QueryFactoryFacetTable"),SortCondition:e("./table/SortCondition"),TableConfigFacet:e("./table/TableConfigFacet"),TableMod:e("./table/TableMod"),TableUtils:e("./table/TableUtils"),PathUtils:e("./PathUtils")};module.exports=r},{"../service/ListFilter":126,"./ConstraintManager":5,"./ConstraintUtils":6,"./CountUtils":7,"./ElementUtils":8,"./ElementsAndExprs":9,"./FacetConfig":10,"./FacetNode":11,"./FacetNodeState":12,"./FacetRelationIndex":13,"./FacetServiceBuilder":14,"./FacetServiceUtils":15,"./FacetTreeConfig":16,"./FacetTreeServiceHelpers":17,"./FacetTreeServiceUtils":18,"./FacetTreeState":19,"./FacetUtils":20,"./Path":21,"./PathHead":22,"./PathUtils":23,"./QueryUtils":24,"./ServiceUtils":25,"./Step":26,"./StepRelation":27,"./StepUtils":28,"./VarNode":29,"./constraint/Constraint":30,"./constraint/ConstraintBasePath":31,"./constraint/ConstraintBasePathValue":32,"./constraint/ConstraintConcept":33,"./constraint/ConstraintElementFactoryBBoxRange":34,"./constraint/ConstraintEquals":35,"./constraint/ConstraintExists":36,"./constraint/ConstraintLang":37,"./constraint/ConstraintRegex":38,"./facet_concept_supplier/FacetConceptSupplier":39,"./facet_concept_supplier/FacetConceptSupplierDeclared":40,"./facet_concept_supplier/FacetConceptSupplierExact":41,"./facet_concept_supplier/FacetConceptSupplierMeta":42,"./facet_service/FacetService":43,"./facet_service/FacetServiceClientIndex":44,"./facet_service/FacetServiceFn":45,"./facet_service/FacetServiceLookup":46,"./facet_service/FacetServiceMeta":47,"./facet_service/FacetServiceSparql":48,"./facet_service/FacetServiceTagger":49,"./facet_service/FacetServiceTransformConcept":50,"./facet_system/FacetSystem":51,"./facet_tree_service/FacetTreeService":52,"./facet_value_concept_service/FacetValueConceptService":53,"./facet_value_concept_service/FacetValueConceptServiceExact":54,"./facet_value_service/FacetValueService":55,"./lookup_service/LookupServiceConstraintLabels":57,"./lookup_service/LookupServiceFacetCount":58,"./lookup_service/LookupServiceFacetExactCount":59,"./lookup_service/LookupServiceFacetPreCount":60,"./lookup_service/LookupServicePathLabels":61,"./table/Aggregator":62,"./table/ColumnView":63,"./table/FilterString":64,"./table/QueryFactoryFacetTable":65,"./table/SortCondition":66,"./table/TableConfigFacet":67,"./table/TableMod":68,"./table/TableUtils":69}],57:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeUtils");var n=e("../../service/lookup_service/LookupServiceBase");var i=e("./LookupServicePathLabels");var s=e("../../util/collection/HashMap");var o=e("../../util/shared");var l=o.Promise;var c=e("../../util/PromiseUtils");var u=r.create(n,{initialize:function(e,t){this.lookupServiceNodeLabels=e;this.lookupServicePathLabels=t||new i(e)},lookup:function(e){var t=[];var r=[];e.forEach(function(e){var a=e.getDeclaredPaths();var n=e.getValue?e.getValue():null;t.push.apply(t,a);if(n&&n.isUri()){r.push(n)}});var n=this.lookupServiceNodeLabels.lookup(r);var i=this.lookupServicePathLabels.lookup(t);var o=c.all([n,i]).spread(function(t,r){var n=new s;e.forEach(function(e){var i=e.getDeclaredPath();var s=e.getValue();var o=s&&s.isUri()?t.get(s):null;o=o||a.toPrettyString(s);var l=r.get(i);var c=l+" = "+o;n.put(e,c)});return n});return o}});module.exports=u},{"../../ext/Class":2,"../../rdf/NodeUtils":98,"../../service/lookup_service/LookupServiceBase":163,"../../util/PromiseUtils":367,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServicePathLabels":61}],58:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashMap");var n=e("../../sparql/VarUtils");var i=e("../CountUtils");var s=e("../../service/lookup_service/LookupService");var o=e("../../util/shared");var l=o.Promise;var c=r.create(s,{initialize:function(e,t){this.lsPreCount=e;this.lsExactCount=t},lookup:function(e){var t=this;var r=l.resolve(this.lsPreCount.lookup(e)).then(function(e){var r=e.entries();var a=[];r.forEach(function(e){var t=e.key;var r=e.val;if(!r.hasMoreItems){a.push(t)}});var n=t.lsExactCount.lookup(a);return[e,n]}).spread(function(t,r){var n=new a;e.forEach(function(e){var a=r.get(e);a=a||t.get(e);if(!a){throw new Error("Should not happen")}n.put(e,a)});return n});return r}});module.exports=c},{"../../ext/Class":2,"../../service/lookup_service/LookupService":162,"../../sparql/VarUtils":246,"../../util/collection/HashMap":378,"../../util/shared":387,"../CountUtils":7}],59:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/VarUtils");var n=e("../CountUtils");var i=e("../../util/collection/HashMap");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.sparqlService=e;this.facetRelationIndex=t},lookup:function(e){var t=a.c;var r=n.createQueriesExactCount(this.facetRelationIndex,t,e,this.rowLimit);var s=n.execQueries(this.sparqlService,r,this.facetRelationIndex.getSourceVar(),t);var o=s.then(function(e){var t=new i;var r=e.entries();r.forEach(function(e){var r=e.key;var a=e.val;var n={count:a,hasMoreItems:false};t.put(r,n)});return t});return o}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":162,"../../sparql/VarUtils":246,"../../util/collection/HashMap":378,"../CountUtils":7}],60:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/VarUtils");var n=e("../CountUtils");var i=e("../../util/collection/HashMap");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.sparqlService=e;this.facetRelationIndex=t;this.rowLimit=1e4},lookup:function(e){var t=this.rowLimit;var r=a.c;var s=n.createQueriesPreCount(this.facetRelationIndex,r,e,t+1);var o=n.execQueries(this.sparqlService,s,this.facetRelationIndex.getSourceVar(),r);var l=o.then(function(e){var r=new i;var a=e.entries();a.forEach(function(e){var a=e.key;var n=e.val;var i=n>t;var s={count:i?t:n,hasMoreItems:i};r.put(a,s)});return r});return l}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":162,"../../sparql/VarUtils":246,"../../util/collection/HashMap":378,"../CountUtils":7}],61:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.flatten");var n=e("lodash.uniq");var i=e("../../service/lookup_service/LookupServiceBase");var s=e("../../rdf/NodeFactory");var o=e("../../util/collection/HashMap");var l=r.create(i,{initialize:function(e){this.lookupServiceBase=e},lookup:function(e){var t=e.map(function(e){var t=e.getSteps().map(function(e){return e.getPropertyName()});return t});t=a(t);t=n(t);t=t.map(function(e){return s.createUri(e)});var r=this.lookupServiceBase.lookup(t).then(function(t){var r=new o;e.forEach(function(e){var a=e.getSteps().reduce(function(e,r){var a=e;var n=s.createUri(r.getPropertyName());var i=t.get(n);var o=i.displayLabel||"(no label found)";a=a===""?a:a+"&raquo;";a+=o;a=!r.isInverse()?a:a+"&sup1";return a},"");if(a===""){a="Items"}r.put(e,a)});return r});return r}});module.exports=l},{"../../ext/Class":2,"../../rdf/NodeFactory":97,"../../service/lookup_service/LookupServiceBase":163,"../../util/collection/HashMap":378,"lodash.flatten":465,"lodash.uniq":684}],62:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.name=e;this.attrs=t},getName:function(){return this.name},getAttrs:function(){return this.attrs}});module.exports=a},{"../../ext/Class":2}],63:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.tableMod=e;this.columnId=t},getId:function(){return this.columnId},getSortConditions:function(){var e={};var t=this.columnId;this.tableMod.getSortConditions().forEach(function(r){var a=r.getColumnId();if(a===t){var n=r.getSortType();e[n]=r.getSortDir()}});return e},getAggregator:function(){var e=this.tableMod.getAggregator(this.columnId);return e},setAggregator:function(e){this.tableMod.getAggregators()[this.columnId]=e}});module.exports=a},{"../../ext/Class":2}],64:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.str=e;this.mode=t}})},{"../../ext/Class":2}],65:[function(e,module,t){},{}],66:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t,r){this.columnId=e;this.sortDir=t==null?1:t;this.sortType=r||"data"},getColumnId:function(){return this.columnId},getSortType:function(){return this.sortType},setSortType:function(e){this.sortType=e},getSortDir:function(){return this.sortDir},setSortDir:function(e){this.sortDir=e}});module.exports=a},{"../../ext/Class":2}],67:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/CollectionUtils");var n=e("./TableMod");var i=e("../ElementUtils");var s=e("../Path");var o=e("../../sparql/Concept");

var l=e("../../util/ArrayUtils");var c=e("../../util/collection/ArrayList");var u=r.create({initialize:function(e,t,r){this.facetConfig=e;this.tableMod=t||new n;this.paths=r||[]},getFacetConfig:function(){return this.facetConfig},getTableMod:function(){return this.tableMod},getPaths:function(){return this.paths},getPath:function(e){var t=this.tableMod.getColumnIds().indexOf(e);var r=this.paths[t];return r},getColumnId:function(e){var t=l.firstIndexOf(this.paths,e);var r=this.tableMod.getColumnIds()[t];return r},removeColumn:function(e){var t=this.getPath(e);l.removeItem(this.paths,t)},getColIdForPath:function(e){var t=this.facetConfig.getRootFacetNode();var r=t.forPath(e);var a=r.getVar().getName();return a},togglePath:function(e){var t=new c(this.paths);var r=a.toggleItem(t,e);var n=this.getColIdForPath(e);if(r){this.tableMod.addColumn(n)}else{this.tableMod.removeColumn(n)}},createDataConcept:function(){var e=new s;var t=this.paths.slice(0);if(!l.contains(this.paths,e)){t.push(e)}var r=i.createElementTable(this.facetConfig,t);var a=this.facetConfig.getRootFacetNode();var n=a.getVar();var c=new o(r,n);return c}});module.exports=u},{"../../ext/Class":2,"../../sparql/Concept":220,"../../util/ArrayUtils":357,"../../util/CollectionUtils":360,"../../util/collection/ArrayList":375,"../ElementUtils":8,"../Path":21,"./TableMod":68}],68:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ArrayUtils");var n=e("./ColumnView");var i=e("../../util/collection/HashMap");var s=r.create({initialize:function(){this.columnIds=[];this.colIdToColView=new i;this.sortConditions=[];this.colIdToAgg=new i;this.limit=null;this.offset=null;this._isDistinct=true},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e},isDistinct:function(){return this._isDistinct},setDistinct:function(e){this._isDistinct=e},getColumnIds:function(){return this.columnIds},getColumn:function(e){return this.colIdToColView[e]},getColumns:function(){var e=this;var t=this.columnIds.map(function(t){var r=e.colIdToColView[t];return r});return t},getSortConditions:function(){return this.sortConditions},getLimitAndOffset:function(){return this.limitAndOffset},getAggregator:function(e){var t=this.colIdToAgg[e];return t},getAggregators:function(){return this.colIdToAgg},addColumn:function(e,t){var r=this.colIdToColView[e];if(r){throw new Error("Column "+e+" already part of the table")}r=new n(this,e);this.colIdToColView[e]=r;if(!t){this.columnIds.push(e)}return r},removeColumn:function(e){delete this.colIdToColView[e];var t=this;a.filter(this.columnIds,function(t){var r=e!=t;return r});a.filter(this.sortConditions,function(t){var r=e!=t.getColumnId()});delete this.colIdToAgg[e]}});module.exports=s},{"../../ext/Class":2,"../../util/ArrayUtils":357,"../../util/collection/HashMap":378,"./ColumnView":63}],69:[function(e,module,t){var r={createNgGridColumnDefs:function(e){var t=e.getColumns();var r=t.forEach(function(e){var t={field:e.getId(),displayName:e.getId()};return t});return r}};module.exports=r},{}],70:[function(e,module,t){var r=e("../ext/Class");var a=r.create({createExpr:function(e){throw new Error("Not implemented")}});module.exports=a},{"../ext/Class":2}],71:[function(e,module,t){var r=e("../ext/Class");var a=e("./BboxExprFactory");var n=e("./GeoExprUtils");var i=r.create(a,{initialize:function(e,t,r){this.xVar=e;this.yVar=t;this.castNode=r},createExpr:function(e){var t=n.createExprWgs84Intersects(this.xVar,this.yVar,e,this.castNode);return t}});module.exports=i},{"../ext/Class":2,"./BboxExprFactory":70,"./GeoExprUtils":77}],72:[function(e,module,t){var r=e("../ext/Class");var a=e("./BboxExprFactory");var n=e("./GeoExprUtils");var i=r.create(a,{initialize:function(e,t,r){this.wktVar=e;this.intersectsFnName=t;this.geomFromTextFnName=r},createExpr:function(e){var t=n.createExprOgcIntersects(this.wktVar,e,this.intersectsFnName,this.geomFromTextFnName);return t}});module.exports=i},{"../ext/Class":2,"./BboxExprFactory":70,"./GeoExprUtils":77}],73:[function(e,module,t){var r=e("../ext/Class");var a=e("./Point");var n=e("./Range");var i=r.create({initialize:function(e,t,r,a){this.left=e;this.right=r;this.bottom=t;this.top=a},containsPoint:function(e){return e.x>=this.left&&e.x<this.right&&e.y>=this.bottom&&e.y<this.top},getCenter:function(){return new a(.5*(this.left+this.right),.5*(this.bottom+this.top))},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},contains:function(e){return e.left>=this.left&&e.right<this.right&&e.bottom>=this.bottom&&e.top<this.top},rangeX:function(){return new n(this.left,this.right)},rangeY:function(){return new n(this.bottom,this.top)},overlap:function(e){if(!e.rangeX||!e.rangeY){console.error("Missing range");throw"Error"}var t=this.rangeX().getOverlap(e.rangeX());if(!t){return null}var r=this.rangeY().getOverlap(e.rangeY());if(!r){return null}return new i(t.min,r.min,r.max,t.max)},isOverlap:function(e){var t=this.overlap(e);return t!=null},toString:function(){return"["+this.left+" - "+this.right+", "+this.bottom+" - "+this.top+"]"}});i.createFromJson=function(e){var t=new i(e.left,e.bottom,e.right,e.top);return t};module.exports=i},{"../ext/Class":2,"./Point":83,"./Range":87}],74:[function(e,module,t){var r=e("../ext/Class");var a=e("lodash.flatten");var n=e("lodash.uniq");var i=e("../service/data_service/DataService");var s=e("../vocab/wgs84");var o=e("../rdf/NodeFactory");var l=e("../util/shared");var c=l.Promise;var u=e("./Bounds");var d=e("./QuadTree");var p=e("./GeoExprUtils");var h=function(){return false};var v=e("../util/PromiseUtils");var f=r.create(i,{initialize:function(e,t,r,a){this.listServiceBbox=e;var n=new u(-180,-90,180,90);this.quadTree=new d(n,18,0);this.maxItemsPerTileCount=r||25;this.maxGlobalItemCount=t||50;this.aquireDepth=a||2},fetchData:function(e){var t=this.runWorkflow(e).then(function(e){var t=e.map(function(e){return e.data.docs});var r=t.filter(function(e){return e});r=a(r,true);e.forEach(function(e){if(e.isLoaded){return}var t=p.boundsToWkt(e.getBounds());var a={key:t,val:{id:t,zoomClusterBounds:e.getBounds(),wkt:t}};r.push(a)});return r});return t},runCheckGlobal:function(){var e;var t=this.quadTree.getRootNode();if(!t.checkedGlobal){var r=this.listServiceBbox.fetchCount(null,this.maxGlobalItemCount);e=r.then(function(e){var r=!e.hasMoreItems;t.canUseGlobal=r;t.checkedGlobal=true;return r})}else{e=c.resolve(t.canUseGlobal).cancellable()}return e},runWorkflow:function(e){var t=this.quadTree.getRootNode();var r=this;var a=this.runCheckGlobal().then(function(a){var n;if(a){n=r.runGlobalWorkflow(t)}else{n=r.runTiledWorkflow(e)}return n.then(function(e){return e})});return a},runGlobalWorkflow:function(e){var t=this;var r=this.listServiceBbox.fetchItems(null).then(function(r){t.loadTaskAction(e,r);return[e]});return r},runTiledWorkflow:function(e){var t=this;var r=this.quadTree.aquireNodes(e,this.aquireDepth);r.forEach(function(e){if(!e.data){e.data={}}});r.forEach(function(e){if(e.isCountComplete()&&e.infMinItemCount===0){e.isLoaded=true}});var a=r.filter(function(e){return t.isCountingNeeded(e)});var n=this.createCountTasks(a);var i=v.all(n).then(function(){var e=r.filter(function(e){return t.isLoadingNeeded(e)});var a=t.createLoadTasks(e);return v.all(a).then(function(){return r})});return i},createCountTask:function(e){var t=this;var r=t.maxItemsPerTileCount;var a=this.listServiceBbox.fetchCount(e.getBounds(),r);var n=a.then(function(t){var r=t.count;e.setMinItemCount(t.count);if(r===0){e.isLoaded=true}});return n},isCountingNeeded:function(e){return!(this.isTooManyGeoms(e)||e.isCountComplete())},isLoadingNeeded:function(e){var t=e.isLoaded||e.isCountComplete()&&e.infMinItemCount===0||this.isTooManyGeoms(e);return!t},isTooManyGeoms:function(e){return e.infMinItemCount>=this.maxItemsPerTileCount},createCountTasks:function(e){var t=this;var r=e.map(function(e){return t.createCountTask(e)}).filter(function(e){return e});return r},loadTaskAction:function(e,t){e.data.docs=t;e.isLoaded=true},createLoadTasks:function(e){var t=this;var r=e.map(function(e){var r=t.listServiceBbox.fetchItems(e.getBounds()).then(function(r){t.loadTaskAction(e,r)});return r});return r},finalizeLoading:function(e){var t=[];e.forEach(function(e){if(e.parent){t.push(e.parent)}});t=n(t);var r=function(t){var r=e.indexOf(t);if(r>=0){e[r]=undefined}};var a=false;do{a=false;for(var i in t){var s=t[i];var o=s.children;var l=h(s);if(!l){continue}a=true;o.forEach(r);e.push(s);if(s.parent){t.push(s.parent)}break}}while(a===true);e=e.filter(function(e){return e})}});module.exports=f},{"../ext/Class":2,"../rdf/NodeFactory":97,"../service/data_service/DataService":146,"../util/PromiseUtils":367,"../util/shared":387,"../vocab/wgs84":393,"./Bounds":73,"./GeoExprUtils":77,"./QuadTree":85,"lodash.flatten":465,"lodash.uniq":684}],75:[function(e,module,t){var r=e("../sparql/Concept");var a=e("../sparql/element/ElementString");var n=e("../sparql/VarUtils");var i={conceptWgs84:new r(a.create("?s <http://www.w3.org/2003/01/geo/wgs84_pos#long> ?x ;  <http://www.w3.org/2003/01/geo/wgs84_pos#lat> ?y"),n.s),conceptGeoVocab:new r(a.create("?s <http://www.opengis.net/ont/geosparql#asWKT> ?w"),n.s)};module.exports=i},{"../sparql/Concept":220,"../sparql/VarUtils":246,"../sparql/element/ElementString":255}],76:[function(e,module,t){var r=e("../service/LookupServiceUtils");var a=e("../service/lookup_service/LookupServiceConst");var n=e("../service/lookup_service/LookupServiceTransform");var i=e("../service/list_service/ListServiceAugmenter");var s=e("../service/list_service/AugmenterLookup");var o=e("../sparql/BestLabelConfig");var l=e("./ListServiceBbox");var c=e("./DataServiceBboxCache");var r=e("../sponate/LookupServiceUtils");var u=e("../sponate/MappedConceptUtils");var d={createGeoDataSourceLabels:function(e,t,d,p){if(p==null){p={}}var h=new l(e,t,d);var v=new o;var f=u.createMappedConceptBestLabel(v);var g=r.createLookupServiceMappedConcept(e,f);g=new n(g,function(e,t){var r={shortLabel:e};return r});var m=new s(g);h=new i(h,m);var x=new a(p);var _=new s(x);h=new i(h,_);var b=new c(h,1500,500,2);return b}};module.exports=d},{"../service/LookupServiceUtils":129,"../service/list_service/AugmenterLookup":148,"../service/list_service/ListServiceAugmenter":151,"../service/lookup_service/LookupServiceConst":166,"../service/lookup_service/LookupServiceTransform":178,"../sparql/BestLabelConfig":216,"../sponate/LookupServiceUtils":316,"../sponate/MappedConceptUtils":319,"./DataServiceBboxCache":74,"./ListServiceBbox":82}],77:[function(e,module,t){var r=e("../sparql/NodeValueUtils");var a=e("../sparql/expr/ExprVar");var n=e("../sparql/expr/E_Cast");var i=e("../sparql/expr/NodeValue");var s=e("../sparql/expr/E_LogicalAnd");var o=e("../sparql/expr/E_Function");var l=e("../sparql/expr/E_GreaterThan");var c=e("../sparql/expr/E_LessThan");var u={createExprWgs84Intersects:function(e,t,n,i){var u=new a(e);var d=new a(t);if(i){var p=i.getUri();u=new o(p,[u]);d=new o(p,[d])}var h=r.makeDecimal(n.left);var v=r.makeDecimal(n.right);var f=r.makeDecimal(n.bottom);var g=r.makeDecimal(n.top);var m=new s(new s(new l(u,h),new c(u,v)),new s(new l(d,f),new c(d,g)));return m},createExprOgcIntersects:function(e,t,n,i){var s="http://www.opengis.net/rdf#";n=n||s+"intersects";i=i||s+"geomFromText";var l=new a(e);var c=this.boundsToWkt(t);var u=r.makeString(c);var d=new o(n,[l,new o(i,[u])]);return d},boundsToWkt:function(e){var t=e.left;var r=e.bottom;var a=e.right;var n=e.top;var i="POLYGON(("+t+" "+r+","+a+" "+r+","+a+" "+n+","+t+" "+n+","+t+" "+r+"))";return i}};module.exports=u},{"../sparql/NodeValueUtils":233,"../sparql/expr/E_Cast":268,"../sparql/expr/E_Function":270,"../sparql/expr/E_GreaterThan":271,"../sparql/expr/E_LessThan":275,"../sparql/expr/E_LogicalAnd":277,"../sparql/expr/ExprVar":293,"../sparql/expr/NodeValue":294}],78:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/Concept");var n=e("../sparql/element/ElementGroup");var i=e("../sparql/element/ElementFilter");var s=e("../sponate/MappedConcept");var o=r.create({classLabel:"GeoMapFactory",initialize:function(e,t){this.mappedConcept=e;this.bboxExprFactory=t},createMap:function(e){var t=this.createMapForBounds(e);return t},createMapForGlobal:function(){var e=this.createMapForBounds(null);return e},createMapForBounds:function(e){var t=this.mappedConcept;var r=this.bboxExprFactory;var o=t.getConcept();var l=t.getAgg();var c=o.getElement();var u=c;if(e){var d=r.createExpr(e);var p=new i(d);u=new n([c,p])}var h=new a(u,o.getVar());var v=new s(h,l);return v}});module.exports=o},{"../ext/Class":2,"../sparql/Concept":220,"../sparql/element/ElementFilter":251,"../sparql/element/ElementGroup":252,"../sponate/MappedConcept":317}],79:[function(e,module,t){var r=e("./BboxExprFactoryWkt");var a=e("./BboxExprFactoryWgs84");var n=e("./GeoMapUtils");var i=e("./GeoMapFactory");var s=e("../sparql/VarUtils");var o=e("../sparql/Concept");var l=e("../sparql/element/ElementTriplesBlock");var c=e("../rdf/NodeFactory");var u=e("../rdf/Triple");var d=e("../vocab/rdf");var p=e("../vocab/xsd");var h=e("../sponate/SponateUtils");var v="bif:st_intersects";var f="bif:st_geomFromText";var g={wgs84MapFactory:new i(n.wgs84GeoView,new a(s.x,s.y)),wgs84CastMapFactory:new i(n.wgs84GeoView,new a(s.x,s.y,p.xdouble)),ogcVirtMapFactory:new i(n.ogcGeoView,new r(s.w,v,f)),createWktMapFactory:function(e,t,a){e=e||"http://www.opengis.net/ont/geosparql#asWKT";t=t||v;a=a||f;var n=c.createUri(e);var d=new o(new l([new u(s.s,n,s.w)]),s.s);var p=h.parseSpec({name:"geoMap-"+e,template:[{id:""+d.getVar(),wkt:""+s.w}],from:d.getElement()});var g=new i(p,new r(s.w,t,a));return g}};module.exports=g},{"../rdf/NodeFactory":97,"../rdf/Triple":100,"../sparql/Concept":220,"../sparql/VarUtils":246,"../sparql/element/ElementTriplesBlock":257,"../sponate/SponateUtils":325,"../vocab/rdf":391,"../vocab/xsd":394,"./BboxExprFactoryWgs84":71,"./BboxExprFactoryWkt":72,"./GeoMapFactory":78,"./GeoMapUtils":80}],80:[function(e,module,t){var r=e("../sparql/VarUtils");var a=e("../rdf/NodeFactory");var n=e("../sparql/Concept");var i=e("./GeoConceptUtils");var s=e("../sponate/SponateUtils");var o={wgs84GeoView:s.parseSpec({name:"lonlat",template:[{id:i.conceptWgs84.getVar(),lon:""+r.x,lat:""+r.y,wkt:[""+r.x,""+r.y,function(e,t){var r="POINT("+e+" "+t+")";return r}]}],from:i.conceptWgs84.getElement()}),ogcGeoView:s.parseSpec({name:"lonlat",template:[{id:i.conceptGeoVocab.getVar(),wkt:""+r.w}],from:i.conceptGeoVocab.getElement()})};module.exports=o},{"../rdf/NodeFactory":97,"../sparql/Concept":220,"../sparql/VarUtils":246,"../sponate/SponateUtils":325,"./GeoConceptUtils":75}],81:[function(e,module,t){var r=e("../rdf/node/Node");var a=e("../sparql/expr/ExprVar");var n=e("../sparql/expr/NodeValue");var i=e("../sparql/expr/E_LogicalAnd");var s=e("../sparql/expr/E_LogicalOr");var o=e("../sparql/expr/E_Function");var l=e("../sparql/expr/E_Cast");var c=e("../sparql/expr/E_GreaterThan");var u=e("../sparql/expr/E_LessThan");var d={boundsToWkt:function(e){var t=e.left;var r=e.bottom;var a=e.right;var n=e.top;var i="POLYGON(("+t+" "+r+","+a+" "+r+","+a+" "+n+","+t+" "+n+","+t+" "+r+"))";return i},createFilterOgcIntersects:function(e,t){var r="http://www.opengis.net/rdf#";var n=new a(e);var i=this.boundsToWkt(t);var s=new o(r+"intersects",n,new o(r+"geomFromText",i));return s},createWgsFilter:function(e,t,s,o){var d=new a(e);var p=new a(t);if(o){d=new l(d,o);p=new l(p,o)}var h=n.makeNode(r.forValue(s.left));var v=n.makeNode(r.forValue(s.right));var f=n.makeNode(r.forValue(s.bottom));var g=n.makeNode(r.forValue(s.top));var m=new i(new i(new c(d,h),new u(d,v)),new i(new c(p,f),new u(p,g)));return m}};module.exports=d},{"../rdf/node/Node":110,"../sparql/expr/E_Cast":268,"../sparql/expr/E_Function":270,"../sparql/expr/E_GreaterThan":271,"../sparql/expr/E_LessThan":275,"../sparql/expr/E_LogicalAnd":277,"../sparql/expr/E_LogicalOr":279,"../sparql/expr/ExprVar":293,"../sparql/expr/NodeValue":294}],82:[function(e,module,t){var r=e("../ext/Class");var a=e("../service/list_service/ListService");var n=e("../sponate/facade/StoreFacade");var i=r.create(a,{initialize:function(e,t,r){this.sparqlService=e;this.geoMapFactory=t;this.concept=r},createListService:function(e){var t=new n(this.sparqlService);var r=this.geoMapFactory.createMap(e);var a={name:"geoMap",template:r};t.addMap(a);var i=t.geoMap.getListService();return i},fetchItems:function(e,t,r){var a=this.createListService(e);var n=a.fetchItems(this.concept,t,r);return n},fetchCount:function(e,t,r){var a=this.createListService(e);var n=a.fetchCount(this.concept,t,r);return n}});module.exports=i},{"../ext/Class":2,"../service/list_service/ListService":149,"../sponate/facade/StoreFacade":355}],83:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.x=e;this.y=t},getX:function(){return this.x},getY:function(){return this.y}});module.exports=a},{"../ext/Class":2}],84:[function(e,module,t){var r={lonlatToWkt:function(e){var t=this.pointToWkt(e.lon,e.lat);return t},xyToWkt:function(e){var t=this.pointToWkt(e.x,e.y);return t},pointToWkt:function(e,t){var r="POINT ("+e+" "+t+")";return r},wktPointRegex:/^\s*POINT\s*\(\s*([^\s]+)\s+([^)]+)\)\s*$/i,isWktPoint:function(e){var t=this.wktPointRegex.exec(e);var r=!!t;return r},wktToXy:function(e){var t=this.wktPointRegex.exec(e);if(!t){return null}var r=t[1];var a=t[2];var n={x:parseFloat(r),y:parseFloat(a)};return n}};module.exports=r},{}],85:[function(e,module,t){var r=e("../ext/Class");var a=e("./QuadTreeNode");var n=r.create({initialize:function(e,t,r){if(r==null){r=.25}this.node=new a(null,e,t,0,r);this.idToNodes=[]},getRootNode:function(){return this.node},aquireNodes:function(e,t){return this.node.aquireNodes(e,t)},query:function(e,t){return this.node.query(e,t)},insert:function(e){}});module.exports=n},{"../ext/Class":2,"./QuadTreeNode":86}],86:[function(e,module,t){var r=e("../ext/Class");var a=e("./Point");var n=e("./Bounds");var i=e("lodash.reduce");var s=r.create({initialize:function(e,t,r,a,n,i){this.parent=e;this.parentChildIndex=i;this._bounds=t;this._maxDepth=r;this._depth=a;this._k=n;this.isLoaded=false;this.children=null;this.data={};this._minItemCount=null;this.infMinItemCount=null;this.idToPos={};this._classConstructor=s},getId:function(){var e=this.parent;var t=e?e.getId():"";var r=this.parentChildIndex!=null?this.parentChildIndex:"r";var a=t+r;return a},isLeaf:function(){return this.children==null},addItem:function(e,t){this.idToPos[e]=t},addItems:function(e){for(var t in e){var r=e[t];this.addItem(t,r)}},removeItem:function(e){delete this.idToPos[e]},setMinItemCount:function(e){this._minItemCount=e;this.infMinItemCount=e;if(this.parent){this.parent.updateInfMinItemCount()}},getMinItemCount:function(){return this._minItemCount},isCountComplete:function(){if(this.getMinItemCount()!=null){return true}if(this.children){var e=i(this.children,function(e,t){return e&&t.isCountComplete()},true);return e}return false},updateInfMinItemCount:function(){if(!this.children&&this._minItemCount!=null){return}var e=0;this.children.forEach(function(t,r){if(t._minItemCount!=null){e+=t._minItemCount}else if(t.infMinItemCount){e+=t.infMinItemCount}});this.infMinItemCount=e;if(this.parent){this.parent.updateInfMinItemCount()}},getBounds:function(){return this._bounds},getCenter:function(){return this._bounds.getCenter()},subdivide:function(){var e=this._depth+1;var t=this.getCenter();var r=this._k*.5*this._bounds.getWidth();var a=this._k*.5*this._bounds.getHeight();this.children=[];this.children[s.TOP_LEFT]=new this._classConstructor(this,new n(this._bounds.left,t.y-a,t.x+r,this._bounds.top),this._maxDepth,e,this._k,s.TOP_LEFT);this.children[s.TOP_RIGHT]=new this._classConstructor(this,new n(t.x-r,t.y-a,this._bounds.right,this._bounds.top),this._maxDepth,e,this._k,s.TOP_RIGHT);this.children[s.BOTTOM_LEFT]=new this._classConstructor(this,new n(this._bounds.left,this._bounds.bottom,t.x+r,t.y+a),this._maxDepth,e,this._k,s.BOTTOM_LEFT);this.children[s.BOTTOM_RIGHT]=new this._classConstructor(this,new n(t.x-r,this._bounds.bottom,this._bounds.right,t.y+a),this._maxDepth,e,this._k,s.BOTTOM_RIGHT)},getOverlaps:function(e){},query:function(e,t){var r=[];this.queryRec(e,r,t);return r},queryRec:function(e,t,r){if(!this._bounds.isOverlap(e)){return}var a=e.getWidth()/this._bounds.getWidth();var n=e.getHeight()/this._bounds.getHeight();var i=Math.max(a,n);if(this.isLoaded||!this.children||i>=r){t.push(this);return}for(var s in this.children){var o=this.children[s];o.queryRec(e,r,t)}},splitFor:function(e,t,r){if(!this._bounds.isOverlap(e)){return}if(this.isLoaded){if(r){r.push(this)}return}var a=e.getWidth()/this._bounds.getWidth();var n=e.getHeight()/this._bounds.getHeight();var i=Math.max(a,n);if(i>=t||this._depth>=this._maxDepth){if(r){r.push(this)}return}if(!this.children){this.subdivide()}for(var s=0;s<this.children.length;++s){var o=this.children[s];o.splitFor(e,t,r)}},aquireNodes:function(e,t){var r=[];this.splitFor(e,t,r);return r},unlink:function(){if(!this.parent){return}for(var e in this.parent.children){var t=this.parent.children[e];if(t==this){this.parent.children=new s(this.parent,this._bounds,this._depth,this._k)}}}});s.TOP_LEFT=0;s.TOP_RIGHT=1;s.BOTTOM_LEFT=2;s.BOTTOM_RIGHT=3;module.exports=s},{"../ext/Class":2,"./Bounds":73,"./Point":83,"lodash.reduce":597}],87:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.min=e;this.max=t},getOverlap:function(e){var t=Math.max(this.min,e.min);var r=Math.min(this.max,e.max);return t>r?null:new a(t,r)}});module.exports=a},{"../ext/Class":2}],88:[function(e,module,t){"use strict";var r={BboxExprFactory:e("./BboxExprFactory"),BboxExprFactoryWgs84:e("./BboxExprFactoryWgs84"),BboxExprFactoryWkt:e("./BboxExprFactoryWkt"),Bounds:e("./Bounds"),DataServiceBboxCache:e("./DataServiceBboxCache"),GeoConceptUtils:e("./GeoConceptUtils"),GeoDataSourceUtils:e("./GeoDataSourceUtils"),GeoExprUtils:e("./GeoExprUtils"),GeoMapFactory:e("./GeoMapFactory"),GeoMapFactoryUtils:e("./GeoMapFactoryUtils"),GeoMapUtils:e("./GeoMapUtils"),GeoUtils:e("./GeoUtils"),ListServiceBbox:e("./ListServiceBbox"),Point:e("./Point"),PointUtils:e("./PointUtils"),QuadTree:e("./QuadTree"),QuadTreeNode:e("./QuadTreeNode"),Range:e("./Range")};module.exports=r},{"./BboxExprFactory":70,"./BboxExprFactoryWgs84":71,"./BboxExprFactoryWkt":72,"./Bounds":73,"./DataServiceBboxCache":74,"./GeoConceptUtils":75,"./GeoDataSourceUtils":76,"./GeoExprUtils":77,"./GeoMapFactory":78,"./GeoMapFactoryUtils":79,"./GeoMapUtils":80,"./GeoUtils":81,"./ListServiceBbox":82,"./Point":83,"./PointUtils":84,"./QuadTree":85,"./QuadTreeNode":86,"./Range":87}],89:[function(e,module,t){var r=e("./util/shared");var Jassa=function(t,a){r.Promise=t;r.ajax=a;return{ext:e("./ext"),util:e("./util"),rdf:e("./rdf"),io:e("./io"),vocab:e("./vocab"),sparql:e("./sparql"),service:e("./service"),sponate:e("./sponate"),facete:e("./facete"),geo:e("./geo")}};Jassa.ext=e("./ext");module.exports=Jassa},{"./ext":4,"./facete":56,"./geo":88,"./io":91,"./rdf":109,"./service":147,"./sparql":296,"./sponate":356,"./util":386,"./util/shared":387,"./vocab":389}],90:[function(e,module,t){var r=e("../rdf/Triple");var a=e("../rdf/GraphImpl");var n=e("../rdf/NodeFactory");var i=e("../rdf/NodeUtils");var s={containsTriple:function(e,t){},triplesToTalisRdfJson:function(e,t){t=t||{};e.forEach(function(e){s.tripleToTalisRdfJson(e,t)});return t},tripleToTalisRdfJson:function(e,t){t=t||{};var r=e.getSubject();var a=r.isUri()?r.getUri():""+r;var n=t[a]=t[a]||{};var s=e.getPredicate().getUri();var o=n[s]=n[s]||[];var l=e.getObject();var c=i.toTalisRdfJson(l);o.push(c)},talisRdfJsonToGraph:function(e){var t=this.talisRdfJsonToTriples(e);var r=new a;r.addAll(t);return r},talisRdfJsonToTriples:function(e){var t=[];var a=Object.keys(e);a.sort();a.forEach(function(a){var i=n.createUri(a);var o=e[a];var l=Object.keys(o);l.sort();l.forEach(function(e){var a=n.createUri(e);var l=o[e];l.forEach(function(e){var o=s.createTalisRdfJsonObjectWithDefaults(e);try{var l=n.createFromTalisRdfJson(o);var c=new r(i,a,l);t.push(c)}catch(u){console.log("Error: could not create node from "+e)}})})});return t},shortForm:function(e,t){var r=t?t.shortForm(e):e;if(r===e){r="<"+e+">"}return r},talisRdfJsonToTurtle:function(e,t){var r=Object.keys(e);r.sort();var a="";r.forEach(function(r){a+=s.shortForm(r,t)+"\n";var i=e[r];var o=Object.keys(i);o.sort();o.forEach(function(e){a+="    "+s.shortForm(e,t);var r=i[e];var o=r.map(function(e){var r=s.createTalisRdfJsonObjectWithDefaults(e);var a;try{var i=n.createFromTalisRdfJson(r);a=i.isUri()?s.shortForm(i.getUri(),t):""+i}catch(o){a="\n";a+="        // Invalid data for RDF generation:\n";a+="        // raw: "+JSON.stringify(e)+"\n";a+="        // defaults: "+JSON.stringify(e)+"\n";a+="        // "+o+"\n";a+="\n"}return a});a+=" "+o.join(", ")+" ; \n"});a+="    . \n"});return a},createTalisRdfJsonObjectWithDefaults:function(e){var t={type:e.type||"literal",value:e.value||"",lang:e.lang||"",datatype:e.datatype||""};return t}};module.exports=s},{"../rdf/GraphImpl":94,"../rdf/NodeFactory":97,"../rdf/NodeUtils":98,"../rdf/Triple":100}],91:[function(e,module,t){"use strict";var r={TalisRdfJsonUtils:e("./TalisRdfJsonUtils")};module.exports=r},{"./TalisRdfJsonUtils":90}],92:[function(e,module,t){var r=e("../ext/Class");var a=r.create({classLabel:"AnonId",getLabelString:function(){throw new Error("not implemented")}});module.exports=a},{"../ext/Class":2}],93:[function(e,module,t){var r=e("../ext/Class");var a=e("./AnonId");var n=r.create(a,{classLabel:"AnonIdStr",initialize:function(e){this.label=e},getLabelString:function(){return this.label},toString:function(){return this.label}});module.exports=n},{"../ext/Class":2,"./AnonId":92}],94:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/collection/HashSet");var n=e("./Triple");var i=e("./TripleUtils");var s=r.create({initialize:function(e){this.triples=e||new a;var t=this},isEmpty:function(){var e=this.triples.isEmpty();return e},equals:function(){throw new Error("Not implemented yet")},hashCode:function(){var e=this.triples.hashCode();return e},add:function(e){var t=this.triples.add(e);return t},remove:function(e){var t=this.triples.remove(e);return t},removeAll:function(e){this.triples.removeAll(e)},removeMatch:function(e){var t=[];this.triples.forEach(function(r){var a=i.matches(e,r);if(a){t.push(r)}});this.removeAll(t)},forEach:function(e){this.triples.forEach(e)},map:function(e){this.triples.map(e)},contains:function(e){var t=this.triples.contains(e);return t},addAll:function(e){var t=this;e.forEach(function(e){t.add(e)})},clear:function(){this.triples.clear()},toArray:function(){var e=this.triples.entries();return e},size:function(){var e=this.triples.size();return e}});module.exports=s},{"../ext/Class":2,"../util/collection/HashSet":379,"./Triple":100,"./TripleUtils":101}],95:[function(e,module,t){var r=e("../util/collection/HashSet");var a={extractUris:function(e){var t=new r;e.forEach(function(e){e.toArray().forEach(function(e){if(e!=null&&e.isUri()){t.add(e.getUri())}})});var a=t.entries();return a}};module.exports=a},{"../util/collection/HashSet":379}],96:[function(e,module,t){var r=e("../ext/Class");var a=e("./node/Node_Concrete");var n=function(e){var t=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"');return t};var i=r.create(a,{classLabel:"jassa.rdf.LiteralLabel",initialize:function(e,t,r,a){this.val=e;this.lex=t;this.lang=r;this.dtype=a},getValue:function(){return this.val},getLexicalForm:function(){return this.lex instanceof String?this.lex:this.lex.toString()},getLanguage:function(){return this.lang},getDatatype:function(){return this.dtype},toString:function(){var e=this.dtype?this.dtype.getUri():null;var t=n(this.lex);var r;if(e){r='"'+t+'"^^<'+e+">"}else{r='"'+t+'"'+(this.lang?"@"+this.lang:"")}return r}});module.exports=i},{"../ext/Class":2,"./node/Node_Concrete":112}],97:[function(e,module,t){var r=e("./AnonIdStr");var a=e("./node/Var");var n=e("./node/Node");var i=e("./node/Node_Uri");var s=e("./node/Node_Blank");var o=e("./node/Node_Literal");var l=e("./LiteralLabel");var c=e("./TypeMapper");var u=e("./rdf_datatype/DefaultRdfDatatypes");var d=e("../util/ObjectUtils");var p=/"([^"\\]*(\\.[^"\\]*)*)"/;var h=function(e){var t;if(e.charAt(0)==="<"){t=e.slice(1,-1)}else{throw new Error("[ERROR] Cannot deal with "+e)}return t};var v={createAnon:function(e){return new s(e)},createUri:function(e){return new i(e)},createVar:function(e){return new a(e)},createPlainLiteral:function(e,t){if(t==null){t=""}var r=new l(e,e,t);return new o(r)},createTypedLiteralFromValue:function(e,t){var r=u[t];if(!r){var a=c.getInstance();r=a.getSafeTypeByName(t)}var n=r.unparse(e);var i=null;var s=new l(e,n,i,r);return new o(s)},createTypedLiteralFromString:function(e,t){var r=u[t];if(!r){var a=c.getInstance();r=a.getSafeTypeByName(t)}if(!r){throw new Error("Internal error: No datatype object for: "+t+"("+typeof t+")")}var n=r.parse(e);var i=e;var s="";var d=new l(n,i,s,r);return new o(d)},createFromTalisRdfJson:function(e){if(!e||typeof e.type==="undefined"){throw new Error("Invalid node: "+JSON.stringify(e))}var t;var a=e.datatype;switch(e.type){case"bnode":var n=new r(e.value);t=new v.createAnon(n);break;case"uri":t=v.createUri(e.value);break;case"literal":if(!d.isEmptyString(a)){t=v.createTypedLiteralFromString(e.value,a)}else{var i=e.lang||e["xml:lang"];t=v.createPlainLiteral(e.value,i)}break;case"typed-literal":t=v.createTypedLiteralFromString(e.value,a);break;default:console.log("Unknown type: '"+e.type+"'");throw new Error("Bailing out")}return t},parseRdfTerm:function(e){if(!e){throw new Error("[ERROR] Null Pointer Exception")}e=e.trim();if(e.length===0){throw new Error("[ERROR] Empty string")}var t=e.charAt(0);var a;switch(t){case"<":var n=e.slice(1,-1);a=v.createUri(n);break;case"_":var i=new r(e);a=v.createAnon(i);break;case'"':var s=p.exec(e);var o=s[0];var l=o.slice(1,-1);var c=o.length;var u=e.charAt(c);if(!u){a=v.createTypedLiteralFromString(l,"http://www.w3.org/2001/XMLSchema#string")}switch(u){case"":case"@":var d=e.substr(c+1);a=v.createPlainLiteral(l,d);break;case"^":var f=e.substr(c+2);var g=h(f);a=v.createTypedLiteralFromString(l,g);break;default:throw new Error("[ERROR] Excepted @ or ^^")}break;default:throw new Error("Could not parse "+e)}return a}};module.exports=v},{"../util/ObjectUtils":365,"./AnonIdStr":93,"./LiteralLabel":96,"./TypeMapper":102,"./node/Node":110,"./node/Node_Blank":111,"./node/Node_Literal":114,"./node/Node_Uri":115,"./node/Var":117,"./rdf_datatype/DefaultRdfDatatypes":119}],98:[function(e,module,t){var r=e("../util/UriUtils");var a=e("./rdf_datatype/TypedValue");var n={matches:function(e,t){var r=t&&(e==null||t.equals(e));return r},getSubstitute:function(e,t){var r=t(e);if(!r){r=e}return r},pushVar:function(e,t){if(t.isVariable()){var r=false;e.forEach(function(e){r=r||t.equals(e)});if(!r){e.push(t)}}return e},getLang:function(e){var t=e&&e.isLiteral()?e.getLiteralLanguage():null;return t},getUri:function(e){var t=e&&e.isUri()?e.getUri():null;return t},toPrettyString:function(e,t){var a;if(e==null){a=null}else if(e.isUri()){var n=e.getUri();if(t){a=t.shortForm(n);if(a===n){a=r.extractLabel(n)}}else{a=r.extractLabel(n)}}else{a=""+this.getValue(e)}return a},getValue:function(e){var t;if(e==null){t=null}else if(e.isUri()){t=e.getUri()}else if(e.isBlank()){t=e.toString()}else if(e.isLiteral()){var r=e.getLiteralValue();t=r instanceof a?r.getLexicalValue():r}else{throw new Error("Unknow node type: ",e)}return t},toTalisRdfJson:function(e){var t;if(e==null){t=null}else if(e.isUri()){t={type:"uri",value:e.getUri()}}else if(e.isBlank()){t={type:"bnode",value:e.toString()}}else if(e.isLiteral()){t={type:"literal",value:e.getLiteralLexicalForm(),datatype:e.getLiteralDatatypeUri(),lang:e.getLiteralLanguage()}}else{
t={type:"unknown"}}return t}};module.exports=n},{"../util/UriUtils":374,"./rdf_datatype/TypedValue":123}],99:[function(e,module,t){var r=e("lodash.foreach");var a=e("../ext/Class");var n=e("../util/CurieUtils");var i=e("../util/PrefixUtils");var s=e("./GraphUtils");var o=function(e,t){if(t===""){return true}if(e==null||t==null){return false}e=String(e);t=String(t);return e.length>=t.length&&e.slice(0,t.length)===t};var l=function(e){return typeof e==="function"};var c=function(e,t){var r;for(r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}return e};var u=a.create({initialize:function(e){this.prefixes=e?e:{}},expandPrefix:function(e){var t=i.parseCurie(e);var r;if(t==null){r=e}else{var a=this.prefixes[t.key];r=a?a+t.val:e}return r},getNsPrefixMap:function(){return this.prefixes},getNsPrefixURI:function(e){return this.prefixes[e]},getNsURIPrefix:function(e){var t=null;var a=null;var n=function(r,n){if(o(e,r)){if(!a||r.length>a.length){t=n;a=r}}};var i=this.prefixes;while(i!=null){r(i,n);i=Object.getPrototypeOf(i)}return t},qnameFor:function(){},removeNsPrefix:function(e){delete this.prefixes[e]},samePrefixMappingAs:function(){throw new Error("Not implemented yet - Sorry")},setNsPrefix:function(e,t){this.prefixes[e]=t;return this},setNsPrefixes:function(e){var t=l(e.getNsPrefixMap)?e.getNsPrefixMap():e;for(var r in t){if(t.hasOwnProperty(r)){var a=t[r];this.setNsPrefix(r,a)}}return this},shortForm:function(e){var t=this.getNsURIPrefix(e);var r;if(t){var a=this.prefixes[t];var i=e.substring(a.length);var s=n.isValidSparqlLocalName(i);r=s?t+":"+i:e}else{r=e}return r},addPrefix:function(e,t){this.prefixes[e]=t},addJson:function(e){c(this.prefixes,e)},getJson:function(){return this.prefixes},toString:function(){var e=i.prefixObjectToString(this.prefixes);return e},retainByGraph:function(e){var t=this;var r={};var a=s.extractUris(e);a.forEach(function(e){var a=t.getNsURIPrefix(e);if(a!=null){r[a]=t.getNsPrefixURI(a)}});var n=new u(r);return n}});module.exports=u},{"../ext/Class":2,"../util/CurieUtils":361,"../util/PrefixUtils":366,"./GraphUtils":95,"lodash.foreach":534}],100:[function(e,module,t){var r=e("../ext/Class");var a=e("./NodeUtils");var n=r.create({classLabel:"jassa.rdf.Triple",initialize:function(e,t,r){this.subject=e;this.predicate=t;this.object=r},equals:function(e){var t=this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object);return t},hashCode:function(){if(this.hash==null){this.hash=this.subject.hashCode()+3*this.predicate.hashCode()+7*this.object.hashCode()}return this.hash},toString:function(){return this.subject+" "+this.predicate+" "+this.object},copySubstitute:function(e){var t=new n(a.getSubstitute(this.subject,e),a.getSubstitute(this.predicate,e),a.getSubstitute(this.object,e));return t},getSubject:function(){return this.subject},getPredicate:function(){return this.predicate},getObject:function(){return this.object},getVarsMentioned:function(){var e=[];a.pushVar(e,this.subject);a.pushVar(e,this.predicate);a.pushVar(e,this.object);return e},toArray:function(){var e=[this.subject,this.predicate,this.object];return e}});module.exports=n},{"../ext/Class":2,"./NodeUtils":98}],101:[function(e,module,t){var r=e("lodash.uniq");var a=e("./NodeUtils");var n={uniqTriples:function(e){var t=r(e,false,function(e){return e.toString()});return t},matches:function(e,t){var r=e.toArray();var n=t.toArray();var i=true;for(var s=0;s<3;++s){var o=r[s];var l=n[s];var c=a.matches(o,l);if(!c){i=false;break}}return i},getNodeAt:function(e,t){if(e==null){t=null}var r;switch(t){case 0:r=e.getSubject();break;case 1:r=e.getPredicate();break;case 2:r=e.getObject();break;default:r=null}return r}};module.exports=n},{"./NodeUtils":98,"lodash.uniq":684}],102:[function(e,module,t){var r=e("../ext/Class");var a=e("./rdf_datatype/DefaultRdfDatatypes");var n=e("./rdf_datatype/BaseDatatype");var i={enableSilentAcceptanceOfUnknownDatatypes:true};var s=null;var o=r.create({classLabel:"jassa.rdf.TypeMapper",initialize:function(e){this.uriToDt=e},getSafeTypeByName:function(e){var t=this.uriToDt;var r=t[e];if(r==null){if(e==null){return null}else{if(i.enableSilentAcceptanceOfUnknownDatatypes){r=new n(e);this.registerDatatype(r)}else{console.log("Attempted to created typed literal using an unknown datatype - "+e);throw new Error("Bailing out")}}}return r},registerDatatype:function(e){var t=e.getUri();this.uriToDt[t]=e}});o.staticInstance=null;o.getInstance=function(){if(o.staticInstance==null){o.staticInstance=new o(a)}return o.staticInstance};module.exports=o},{"../ext/Class":2,"./rdf_datatype/BaseDatatype":118,"./rdf_datatype/DefaultRdfDatatypes":119}],103:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"DatatypeLabel",parse:function(){throw new Error("Not implemented")},unparse:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2}],104:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelDate",parse:function(e){var t=!e?null:new Date(e);return t},unparse:function(e){var t=!e?null:e.toString();return t}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":103}],105:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelFloat",parse:function(e){return parseFloat(e)},unparse:function(e){return e.toString()}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":103}],106:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelInteger",parse:function(e){return parseInt(e,10)},unparse:function(e){return e.toString()}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":103}],107:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelString",parse:function(e){return e},unparse:function(e){return e.toString()}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":103}],108:[function(e,module,t){var r=e("./DatatypeLabelInteger");var a=e("./DatatypeLabelFloat");var n=e("./DatatypeLabelString");var i=e("./DatatypeLabelDate");var s={xinteger:new r,xfloat:new a,xdouble:new a,xstring:new n,date:new i,dateTime:new i,decimal:new a};module.exports=s},{"./DatatypeLabelDate":104,"./DatatypeLabelFloat":105,"./DatatypeLabelInteger":106,"./DatatypeLabelString":107}],109:[function(e,module,t){"use strict";var r={AnonId:e("./AnonId"),AnonIdStr:e("./AnonIdStr"),GraphImpl:e("./GraphImpl"),LiteralLabel:e("./LiteralLabel"),NodeFactory:e("./NodeFactory"),NodeUtils:e("./NodeUtils"),PrefixMappingImpl:e("./PrefixMappingImpl"),Triple:e("./Triple"),TripleUtils:e("./TripleUtils"),TypeMapper:e("./TypeMapper"),DatatypeLabel:e("./datatype/DatatypeLabel"),DatatypeLabelDate:e("./datatype/DatatypeLabelDate"),DatatypeLabelFloat:e("./datatype/DatatypeLabelFloat"),DatatypeLabelInteger:e("./datatype/DatatypeLabelInteger"),DatatypeLabelString:e("./datatype/DatatypeLabelString"),DefaultDatatypeLabels:e("./datatype/DefaultDatatypeLabels"),Node:e("./node/Node"),Node_Blank:e("./node/Node_Blank"),Node_Concrete:e("./node/Node_Concrete"),Node_Fluid:e("./node/Node_Fluid"),Node_Literal:e("./node/Node_Literal"),Node_Uri:e("./node/Node_Uri"),Node_Variable:e("./node/Node_Variable"),Var:e("./node/Var"),BaseDatatype:e("./rdf_datatype/BaseDatatype"),DefaultRdfDatatypes:e("./rdf_datatype/DefaultRdfDatatypes"),RdfDatatype:e("./rdf_datatype/RdfDatatype"),RdfDatatypeBase:e("./rdf_datatype/RdfDatatypeBase"),RdfDatatypeLabel:e("./rdf_datatype/RdfDatatypeLabel"),TypedValue:e("./rdf_datatype/TypedValue")};module.exports=r},{"./AnonId":92,"./AnonIdStr":93,"./GraphImpl":94,"./LiteralLabel":96,"./NodeFactory":97,"./NodeUtils":98,"./PrefixMappingImpl":99,"./Triple":100,"./TripleUtils":101,"./TypeMapper":102,"./datatype/DatatypeLabel":103,"./datatype/DatatypeLabelDate":104,"./datatype/DatatypeLabelFloat":105,"./datatype/DatatypeLabelInteger":106,"./datatype/DatatypeLabelString":107,"./datatype/DefaultDatatypeLabels":108,"./node/Node":110,"./node/Node_Blank":111,"./node/Node_Concrete":112,"./node/Node_Fluid":113,"./node/Node_Literal":114,"./node/Node_Uri":115,"./node/Node_Variable":116,"./node/Var":117,"./rdf_datatype/BaseDatatype":118,"./rdf_datatype/DefaultRdfDatatypes":119,"./rdf_datatype/RdfDatatype":120,"./rdf_datatype/RdfDatatypeBase":121,"./rdf_datatype/RdfDatatypeLabel":122,"./rdf_datatype/TypedValue":123}],110:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"Node",getUri:function(){throw new Error("not a URI node")},getName:function(){throw new Error("is not a variable node")},getBlankNodeId:function(){throw new Error("is not a blank node")},getBlankNodeLabel:function(){throw new Error("is not a blank node")},getLiteral:function(){throw new Error("is not a literal node")},getLiteralValue:function(){throw new Error("is not a literal node")},getLiteralLexicalForm:function(){throw new Error("is not a literal node")},getLiteralDatatype:function(){throw new Error("is not a literal node")},getLiteralDatatypeUri:function(){throw new Error("is not a literal node")},isBlank:function(){return false},isUri:function(){return false},isLiteral:function(){return false},isVariable:function(){return false},equals:function(){throw new Error("not overridden")},hashCode:function(){throw new Error("not overridden")}});module.exports=a},{"../../ext/Class":2}],111:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Concrete");var n=e("../../util/ObjectUtils");var i=r.create(a,{classLabel:"jassa.rdf.Node_Blank",initialize:function(e){this.anonId=e},isBlank:function(){return true},getBlankNodeId:function(){return this.anonId},getBlankNodeLabel:function(){return this.anonId.getLabelString()},hashCode:function(){if(this.hash==null){var e=this.anonId.getLabelString();this.hash=n.hashCodeStr(e)}return this.hash},equals:function(e){var t=e!=null&&e.anonId!=null&&e.anonId.getLabelString!=null&&this.anonId.getLabelString()===e.anonId.getLabelString();return t},toString:function(){return"_:"+this.anonId}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./Node_Concrete":112}],112:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node");var n=r.create(a,{classLabel:"jassa.rdf.Node_Concrete",isConcrete:function(){return true}});module.exports=n},{"../../ext/Class":2,"./Node":110}],113:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node");var n=r.create(a,{classLabel:"jassa.rdf.Node_Fluid",isConcrete:function(){return false}});module.exports=n},{"../../ext/Class":2,"./Node":110}],114:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Concrete");var n=e("../../util/ObjectUtils");var i=r.create(a,{classLabel:"Node_Literal",initialize:function(e){this.literalLabel=e},isLiteral:function(){return true},getLiteral:function(){return this.literalLabel},getLiteralValue:function(){return this.literalLabel.getValue()},getLiteralLexicalForm:function(){return this.literalLabel.getLexicalForm()},getLiteralDatatype:function(){return this.literalLabel.getDatatype()},getLiteralDatatypeUri:function(){var e=this.getLiteralDatatype();var t=e?e.getUri():null;return t},getLiteralLanguage:function(){return this.literalLabel.getLanguage()},hashCode:function(){if(this.hash==null){this.hash=n.hashCodeStr(this.getLiteralLexicalForm())+3*n.hashCodeStr(this.getLiteralDatatypeUri())+7*n.hashCodeStr(this.getLiteralLanguage())}return this.hash},equals:function(e){var t=e!=null&&e.isLiteral!=null&&e.isLiteral()&&this.getLiteralLexicalForm()===e.getLiteralLexicalForm()&&this.getLiteralDatatypeUri()===e.getLiteralDatatypeUri()&&this.getLiteralLanguage()===e.getLiteralLanguage();return t},toString:function(){return this.literalLabel.toString()}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./Node_Concrete":112}],115:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Concrete");var n=e("../../util/ObjectUtils");var i=r.create(a,{classLabel:"jassa.rdf.Node_Uri",initialize:function(e){this.uri=e},isUri:function(){return true},getUri:function(){return this.uri},toString:function(){return"<"+this.uri+">"},hashCode:function(){if(this.hash==null){this.hash=n.hashCodeStr(this.uri)}return this.hash},equals:function(e){var t=e!=null&&e.isUri!=null&&e.isUri()&&this.uri===e.uri;return t}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./Node_Concrete":112}],116:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Fluid");var n=r.create(a,{classLabel:"jassa.rdf.Node_Variable",isVariable:function(){return true}});module.exports=n},{"../../ext/Class":2,"./Node_Fluid":113}],117:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Variable");var n=e("../../util/ObjectUtils");var i=r.create(a,{classLabel:"Var",initialize:function(e){this.name=e},getName:function(){return this.name},toString:function(){return"?"+this.name},hashCode:function(){if(this.hash==null){this.hash=n.hashCodeStr(this.name)}return this.hash},equals:function(e){var t=e!=null&&e.isVariable!=null&&e.isVariable()&&this.name===e.name;return t}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./Node_Variable":116}],118:[function(e,module,t){var r=e("../../ext/Class");var a=e("./RdfDatatype");var n=e("./TypedValue");var i=r.create(a,{classLabel:"jassa.rdf.BaseDatatype",initialize:function(e){this.datatypeUri=e},getUri:function(){return this.datatypeUri},unparse:function(e){var t;if(e instanceof n){t=e.getLexicalValue()}else{t=e.toString()}return t},parse:function(e){return new n(e,this.datatypeUri)},toString:function(){return"Datatype ["+this.datatypeUri+"]"}});module.exports=i},{"../../ext/Class":2,"./RdfDatatype":120,"./TypedValue":123}],119:[function(e,module,t){var r=e("../../vocab/xsd");var a=e("../datatype/DefaultDatatypeLabels");var n=e("./RdfDatatypeLabel");var i={};var s=function(e,t){var r=e.getUri();i[r]=new n(r,t)};s(r.xint,a.xinteger);s(r.xlong,a.xinteger);s(r.xinteger,a.xinteger);s(r.xstring,a.xstring);s(r.xfloat,a.xfloat);s(r.xdouble,a.xdouble);s(r.decimal,a.xfloat);s(r.date,a.date);s(r.dateTime,a.dateTime);module.exports=i},{"../../vocab/xsd":394,"../datatype/DefaultDatatypeLabels":108,"./RdfDatatypeLabel":122}],120:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"RdfDatatype",getUri:function(){throw new Error("Not implemented")},unparse:function(){throw new Error("Not implemented")},parse:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2}],121:[function(e,module,t){var r=e("../../ext/Class");var a=e("./RdfDatatype");var n=r.create(a,{classLabel:"jassa.rdf.RdfDatatypeBase",initialize:function(e){this.uri=e},getUri:function(){return this.uri}});module.exports=n},{"../../ext/Class":2,"./RdfDatatype":120}],122:[function(e,module,t){var r=e("../../ext/Class");var a=e("./RdfDatatypeBase");var n=r.create(a,{classLabel:"jassa.rdf.RdfDatatype_Label",initialize:function($super,e,t){$super(e);this.datatypeLabel=t},parse:function(e){return this.datatypeLabel.parse(e)},unparse:function(e){return this.datatypeLabel.unparse(e)}});module.exports=n},{"../../ext/Class":2,"./RdfDatatypeBase":121}],123:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.rdf.TypedValue",initialize:function(e,t){this.lexicalValue=e;this.datatypeUri=t},getLexicalValue:function(){return this.lexicalValue},getDatatypeUri:function(){return this.datatypeUri}});module.exports=a},{"../../ext/Class":2}],124:[function(e,module,t){var r=e("lodash.defaults");var a=function(e){var t=e?e.length>1?e:e[0]||null:null;return t};var n={createSparqlUpdateAjaxSpec:function(e,t,n,i,s,o){var l={update:e,"using-graph-uri":a(n),"using-named-graph-uri":a(i)};var c={url:t,type:"POST",dataType:"json",crossDomain:true,traditional:true,data:l};r(l,s);r(c,o);return c},createSparqlRequestAjaxSpec:function(e,t,n,i,s){var o=a(t);var l={query:n,"default-graph-uri":o};var c={url:e,dataType:"json",crossDomain:true,traditional:true,data:l};r(l,i);r(c,s);return c}};module.exports=n},{"lodash.defaults":395}],125:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/ExprUtils");var n=r.create({initialize:function(e,t){this.sparqlService=e;this.element=t},lookupByIterator:function(e){var t=[];while(e.hasNext()){var r=e.nextBinding();var n=a.bindingToExprs(r);var i=n.join(", ");t.push({binding:r,exprs:n,exprsKey:i})}}});module.exports=n},{"../ext/Class":2,"../sparql/ExprUtils":228}],126:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.concept=e;this.limit=t;this.offset=r},getConcept:function(){return this.concept},setConcept:function(e){this.concept=e},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e}});module.exports=a},{"../ext/Class":2}],127:[function(e,module,t){var r=e("../sparql/ConceptUtils");var a=e("./list_service/ListServiceSparqlQuery");var n={createTargetListService:function(e,t,n){var i=r.createTargetConcept(t,n);var s=r.createQueryList(i);var o=new a(e,s,i.getVar());return o}};module.exports=n},{"../sparql/ConceptUtils":221,"./list_service/ListServiceSparqlQuery":157}],128:[function(e,module,t){},{}],129:[function(e,module,t){var r=e("../util/collection/HashMap");var a=e("../util/shared");var n=a.Promise;var i=e("../util/PromiseUtils");var s={lookup:function(e,t){var r;if(!e||!t){r=n.resolve([])}else{r=e.lookup(t)}return r},zip:function(e,t){var a=i.all(t).then(function(){var t=new r;for(var a=0;a<e.length;++a){var n=e[a];var i=arguments[a];t.put(n,i)}return t});return a},unmapKeys:function(e,t,a){var n=new r;e.forEach(function(e){var r=t(e);var i=a.get(r);n.put(e,i)});return n},fetchItemsMapped:function(e,t,r){var a=t.map(r);var n=e.fetchItems(a).then(function(e){var a=s.unmapKeys(t,r,e);return a});return n},fetchCountsMapped:function(e,t,r){var a=t.map(r);var n=e.fetchCounts(a).then(function(e){var a=s.unmapKeys(t,r,e);return a});return n}};module.exports=s},{"../util/PromiseUtils":367,"../util/collection/HashMap":378,"../util/shared":387}],130:[function(e,module,t){var r={computeRange:function(e,t,r){var a=t||0;var n=a%r;a-=n;var i=e;var s=null;if(i){s=i;var o=i%r;var l=o?r-o:0;i+=l}var c={limit:i,offset:a,subLimit:s,subOffset:n};return c}};module.exports=r},{}],131:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.query=e;var r=e.getOffset();var a=e.getLimit();this.nextOffset=r||0;this.nextRemaining=a==null?null:a;this.pageSize=t},getPageSize:function(){return this.pageSize},next:function(){var e=this.nextOffset===0?null:this.nextOffset;this.query.setOffset(e);if(this.nextRemaining==null){this.query.setLimit(this.pageSize);this.nextOffset+=this.pageSize}else{var t=Math.min(this.pageSize,this.nextRemaining);this.nextOffset+=t;this.nextRemaining-=t;if(t===0){return null}this.query.setLimit(t)}return this.query}});module.exports=a},{"../ext/Class":2}],132:[function(e,module,t){var r=e("../ext/Class");var a=e("./cache/CacheSimple");var n=r.create({initialize:function(e,t){this.executionCache=e?e:{};this.resultCache=t?t:new a},getExecutionCache:function(){return this.executionCache},getResultCache:function(){return this.resultCache}});module.exports=n},{"../ext/Class":2,"./cache/CacheSimple":140}],133:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.varNames=e||[];this.bindings=t||[]},getVarNames:function(){return this.varNames},getBindings:function(){return this.bindings},toString:function(){return"ResultSetPart: vars="+this.varNames+", bindings="+this.bindings}});module.exports=a},{"../ext/Class":2}],134:[function(e,module,t){var r=e("../util/collection/HashMap");var a=e("../util/collection/IteratorArray");var n=e("../sparql/VarUtils");var i=e("./result_set/ResultSetArrayIteratorBinding");var s=e("./ResultSetPart");var o=e("../sparql/Binding");var l=e("../rdf/Triple");var c=e("../rdf/GraphImpl");var u={jsonToResultSet:function(e){var t=e.head.vars;var r=e.results.bindings;var n=r.map(function(e){var t=o.fromTalisJson(e);return t});var s=new a(n);var l=new i(s,t);return l},partition:function(e,t){var a=e.getVarNames();var n=new r;while(e.hasNext()){var i=e.next();var o=i.get(t);var l=n.get(o);if(l==null){l=new s(a);n.put(o,l)}l.getBindings().push(i)}return n},createResultSetFromBindings:function(e,t){var r=new a(e);var n=new i(r,t);return n},createEmptyResultSet:function(e){var t=e.getProjectVars();var r=n.getVarNames(t);var a=this.createResultSetFromBindings([],r);return a},resultSetToGraph:function(e,t,r,a){var n=e.getBindings();var i=this.bindingsToGraph(n,t,r,a);return i},bindingsToGraph:function(e,t,r,a){var n=new c;e.forEach(function(e){var i=new l(e.get(t),e.get(r),e.get(a));n.add(i)});return n}};module.exports=u},{"../rdf/GraphImpl":94,"../rdf/Triple":100,"../sparql/Binding":217,"../sparql/VarUtils":246,"../util/collection/HashMap":378,"../util/collection/IteratorArray":382,"./ResultSetPart":133,"./result_set/ResultSetArrayIteratorBinding":192}],135:[function(e,module,t){var r=e("lodash.union");var a=e("../util/shared");var n=a.Promise;var i=e("./result_set/ResultSetArrayIteratorBinding");var s=e("../util/ArrayUtils");var o=e("../util/collection/IteratorArray");var l=e("../sparql/expr/ExprVar");var c=e("../sparql/element/ElementFilter");var u=e("../sparql/expr/E_OneOf");var d=e("../sparql/element/ElementSubQuery");var p=e("../sparql/VarUtils");var h=e("../sparql/Binding");var v=e("../sparql/ConceptUtils");var f=e("../sparql/ElementUtils");var g=e("../sparql/QueryUtils");var m=e("./ResultSetUtils");var x=e("../util/PromiseUtils");var _={constrainQueryVar:function(e,t,r){var a=new l(t);var n=this.constrainQueryExprVar(e,a,r);return n},constrainQueryExprVar:function(e,t,r){var a=e.clone();var n=new c(new u(t,r));a.getElements().push(n);return a},chunkQuery:function(e,t,r,a){var n=s.chunk(r,a);var i=new l(t);var o=this;var c=n.map(function(){var t=o.constrainQueryExprVar(e,i,r);return t});return c},mergeResultSets:function(e){var t=[];var a=[];e.forEach(function(e){var n=e.getVarNames();a=r(a,n);var i=e.getIterator().getArray();t.push.apply(t,i)});var n=new o(t);var s=new i(n,a);return s},execSelectForNodes:function(e,t,r,a,n){var i=this.chunkQuery(t,r,a,n);var s=i.map(function(t){var r=e.createQueryExecution(t);var a=r.execSelect();return a});var o=x.all(s);var l=this;var c=o.then(function(){var e=l.mergeResultSets(arguments);return e});return c},consumeResultSet:function(e){while(e.hasNext()){e.nextBinding()}},resultSetToList:function(e,t){var r=[];while(e.hasNext()){var a=e.nextBinding();var n=a.get(t);r.push(n)}return r},resultSetToInt:function(e,t){var r=null;if(e.hasNext()){var a=e.nextBinding();var n=a.get(t);r=n.getLiteralValue()}return r},fetchList:function(e,t){var r=this;var a=e.execSelect().then(function(e){var a=r.resultSetToList(e,t);return a});return a},fetchInt:function(e,t,r){var a=e.createQueryExecution(t);var n=this.fetchIntQe(a,r);return n},fetchIntQe:function(e,t){var r=this;var a=e.execSelect().then(function(e){var a=r.resultSetToInt(e,t);return a});return a},fetchCountConcept:n.method(function(e,t,r,a){var n=v.freshVar(t);var i=r==null?null:r+1;var s=a==null?null:a+1;var o=v.createQueryCount(t,n,i,s);return _.fetchInt(e,o,n).then(function(e){var t=a!=null?null:r!=null?e>r:false;var n={hasMoreItems:t,count:t?r:e,itemLimit:r,rowLimit:a};return n})}),fetchCountRows:function(e,t,r){var a=f.freshVar(t,"c");var n=f.createQueryCountRows(t,a,r+1);var i=this.fetchInt(e,n,a).then(function(e){var t={count:Math.min(e,r),hasMoreItems:e>r,rowLimit:r};return t});return i},fetchCountQuery:n.method(function(e,t,r,a){var n=[new d(t)];var i=t.getVarsMentioned();var s=p.createVarGen("c",i);var o=s.next();var l=g.createQueryCount(n,null,null,o,null,null,null);var c=e.createQueryExecution(l);c.setTimeout(r);return _.fetchIntQe(c,o).then(function(e){return{count:e,limit:null,hasMoreItems:false}}).caught(function(){var t=g.createQueryCount(n,a+1,null,o,null,null,null);var r=e.createQueryExecution(t);return _.fetchIntQe(r,o).then(function(e){return{count:e,limit:a,hasMoreItems:e>a}})})}),fetchItemsConcept:function(e,t,r,a){var n=v.createQueryList(t,r,a);var i=e.createQueryExecution(n);var s=i.execSelect().then(function(e){var r=_.resultSetToList(e,t.getVar());return r});return s},execDescribeViaSelect:function(e,t){var r=g.createQueryDescribeViaSelect(t,p.s,p.p,p.o);var a=e.createQueryExecution(r);var n=a.execSelect().then(function(e){var t=m.resultSetToGraph(e,p.s,p.p,p.o);return t});return n}};module.exports=_},{"../sparql/Binding":217,"../sparql/ConceptUtils":221,"../sparql/ElementUtils":224,"../sparql/QueryUtils":239,"../sparql/VarUtils":246,"../sparql/element/ElementFilter":251,"../sparql/element/ElementSubQuery":256,"../sparql/expr/E_OneOf":281,"../sparql/expr/ExprVar":293,"../util/ArrayUtils":357,"../util/PromiseUtils":367,"../util/collection/IteratorArray":382,"../util/shared":387,"./ResultSetUtils":134,"./result_set/ResultSetArrayIteratorBinding":192,"lodash.union":661}],136:[function(e,module,t){var r=e("../ext/Class");var a=e("./sparql_service/SparqlServiceHttp");var n=e("./sparql_service/SparqlServicePaginate");var i=e("./sparql_service/SparqlServicePageExpand");var s=e("./sparql_service/SparqlServiceCache");var o=e("./sparql_service/SparqlServiceVirtFix");var l=e("./sparql_service/SparqlServiceLimit");var c=e("./sparql_service/SparqlServiceConsoleLog");var u=r.create({initialize:function(e){this.sparqlService=e},create:function(){return this.sparqlService},log:function(){this.sparqlService=new c(this.sparqlService);return this},paginate:function(e){this.sparqlService=new n(this.sparqlService,e);return this},pageExpand:function(e){this.sparqlService=new i(this.sparqlService,e);return this},cache:function(e){this.sparqlService=new s(this.sparqlService,e);return this},virtFix:function(){this.sparqlService=new o(this.sparqlService);return this},limit:function(e){this.sparqlService=new l(this.sparqlService,e);return this}});u.http=function(e,t,r,n){var i=new a(e,t,r,n);var s=new u(i);return s};module.exports=u},{"../ext/Class":2,"./sparql_service/SparqlServiceCache":196,"./sparql_service/SparqlServiceConsoleLog":197,"./sparql_service/SparqlServiceHttp":202,"./sparql_service/SparqlServiceLimit":203,"./sparql_service/SparqlServicePageExpand":204,"./sparql_service/SparqlServicePaginate":205,"./sparql_service/SparqlServiceVirtFix":207}],137:[function(e,module,t){var r=e("lodash.uniq");var a=e("lodash.foreach");var n=e("../sparql/VarUtils");var i=e("./ServiceUtils");var s=e("../util/collection/IteratorArray");var o=e("./result_set/ResultSetArrayIteratorBinding");var l=e("../util/shared");var c=l.Promise;var u={bindingToJsMap:function(e,t){var r={};e.forEach(function(e){var a=e.getName();r[a]=t.get(e)});return r},createNgGridOptionsFromQuery:function(e){if(!e){return[]}var t=e.getProjectVars();var r=n.getVarNames(t);var a=r.map(function(e){var t={field:e,displayName:e};return t});return a},fetchCount:function(e,t,r,a){var n;if(!e||!t){n=new c(function(e){e(0)})}else{t=t.clone();t.setLimit(null);t.setOffset(null);n=i.fetchCountQuery(e,t,r,a)}return n},fetchData:function(e,t,r,a){if(!e||!t){var n=new s([]);var i=[];var l=new o(n,i);return new c(function(e){e(l)})}t=t.clone();t.setLimit(r);t.setOffset(a);var d=e.createQueryExecution(t);var p=d.execSelect().then(function(e){var r=[];var a=t.getProjectVars();while(e.hasNext()){var n=e.next();var i=u.bindingToJsMap(a,n);r.push(i)}return r});return p},collectNodes:function(e){var t=[];e.forEach(function(e){a(e,function(e){if(e!=null){t.push(e)}else{console.log("should not happen")}})});t=r(t,false,function(e){return e.toString()});return t},fetchSchemaTableConfigFacet:function(e,t){var r=e.getPaths();var a=t.lookup(r);var n=a.then(function(t){var a=r.map(function(r){var a={field:e.getColumnId(r),displayName:t.get(r),path:r};return a});var n={colDefs:a};return n});return n},transformToNodeLabels:function(e,t){var r=this.collectNodes(t);var n=e.lookup(r);var i=n.then(function(e){var r=t.map(function(t){var r={};a(t,function(t,a){var n=e.get(t);r[a]={node:t,displayLabel:n?n.displayLabel:"(no label)"}});return r});return r});return i}};module.exports=u},{"../sparql/VarUtils":246,"../util/collection/IteratorArray":382,"../util/shared":387,"./ServiceUtils":135,"./result_set/ResultSetArrayIteratorBinding":192,"lodash.foreach":534,"lodash.uniq":684}],138:[function(e,module,t){var r=e("../sparql/QuadUtils");var a=e("../sparql/update/UpdateDataInsert");var n=e("../sparql/update/UpdateDataDelete");var i=e("../util/PromiseUtils");var s={performUpdate:function(e,t,r){var a=[];var n;var o=s.createDeleteRequest(t.removed,r);if(o){n=e.createUpdateExecution(o).execUpdate();a.push(n)}var l=s.createInsertRequest(t.added,r);if(l){n=e.createUpdateExecution(l).execUpdate();a.push(n)}var c=i.all(a);return c},createInsertRequest:function(e,t){var n;if(e&&!e.isEmpty()){var i=r.triplesToQuads(e);n=""+new a(i)}else{n=null}return n},createDeleteRequest:function(e,t){var a;if(e&&!e.isEmpty()){var i=r.triplesToQuads(e);a=""+new n(i)}else{a=null}return a}};module.exports=s},{"../sparql/QuadUtils":236,"../sparql/update/UpdateDataDelete":306,"../sparql/update/UpdateDataInsert":307,"../util/PromiseUtils":367}],139:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getItem:function(e){throw new Error("not implemented")},setItem:function(e,t){throw new Error("not implemented")}});module.exports=a},{"../../ext/Class":2}],140:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Cache");var n=e("../../util/ObjectUtils");var i=r.create(a,{initialize:function(e){this.data=e||{}},getItem:function(e){var t=this.data[e];return t},setItem:function(e,t){this.data[e]=t},clear:function(){n.clear(this.data)}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./Cache":139}],141:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("../../util/ObjectUtils");var i=e("../../util/collection/HashMap");var s=e("./CacheSimple");var o=a.create({initialize:function(){this.serviceToGraphsToCache={}},getCache:function(e,t){var r=this.serviceToGraphsToCache[e];if(!r){r=new i;this.serviceToGraphsToCache[e]=r}var a=r.get(t);if(!a){a=new s;r.put(t,a)}var n=a;return n},invalidate:function(e,t,a){if(!e){r(this.serviceToGraphsToCache,function(e){e.entries().forEach(function(e){var t=e.val;t.clear()})})}else{if(!t){var n=this.serviceToGraphsToCache[e];if(n){n.entries().forEach(function(e){var t=e.val;t.clear()})}}else{var i=this.serviceToGraphsToCache[e];if(i){i.clear()}}}}});module.exports=o},{"../../ext/Class":2,"../../util/ObjectUtils":365,"../../util/collection/HashMap":378,"./CacheSimple":140,"lodash.foreach":534}],142:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.v=e;this.orders=[];this.restrictions=[];this.subCriteria=[]},createCriteria:function(e,t,r){var n=new a;this.subCriteria.push({property:e})},add:function(e){},getVar:function(){return this.v},addOrder:function(e){this.orders.push(e)},toSparqlString:function(){},createListService:function(){}});module.exports=a},{"../../ext/Class":2}],143:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.property=e;this._isAscending=t},isAscending:function(){return this._isAscending}});module.exports=a},{"../../ext/Class":2}],144:[function(e,module,t){var r={gt:function(e,t){}};module.exports=r},{}],145:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){}});module.exports=a},{"../../ext/Class":2}],146:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({fetchData:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2}],147:[function(e,module,t){"use strict";var r={AjaxUtils:e("./AjaxUtils"),BindingLookup:e("./BindingLookup"),ListFilter:e("./ListFilter"),
LookupServiceBuilder:e("./LookupServiceBuilder"),LookupServiceUtils:e("./LookupServiceUtils"),PageExpandUtils:e("./PageExpandUtils"),QueryPaginator:e("./QueryPaginator"),RequestCache:e("./RequestCache"),ResultSetPart:e("./ResultSetPart"),ResultSetUtils:e("./ResultSetUtils"),ServiceUtils:e("./ServiceUtils"),SparqlServiceBuilder:e("./SparqlServiceBuilder"),TableServiceUtils:e("./TableServiceUtils"),SparqlCacheSupplier:e("./cache/SparqlCacheSupplier"),Cache:e("./cache/Cache"),CacheSimple:e("./cache/CacheSimple"),Criteria:e("./criteria/Criteria"),Order:e("./criteria/Order"),Restrictions:e("./criteria/Restrictions"),ServiceBuilder:e("./criteria/ServiceBuilder"),DataService:e("./data_service/DataService"),AugmenterLookup:e("./list_service/AugmenterLookup"),ListService:e("./list_service/ListService"),ListServiceArray:e("./list_service/ListServiceArray"),ListServiceAugmenter:e("./list_service/ListServiceAugmenter"),ListServiceConcept:e("./list_service/ListServiceConcept"),ListServiceConceptKeyLookup:e("./list_service/ListServiceConceptKeyLookup"),ListServiceFn:e("./list_service/ListServiceFn"),ListServiceIndexSubString:e("./list_service/ListServiceIndexSubString"),ListServicePageExpand:e("./list_service/ListServicePageExpand"),ListServiceSparqlQuery:e("./list_service/ListServiceSparqlQuery"),ListServiceTransformConcept:e("./list_service/ListServiceTransformConcept"),ListServiceTransformConceptMode:e("./list_service/ListServiceTransformConceptMode"),ListServiceTransformItem:e("./list_service/ListServiceTransformItem"),ListServiceTransformItems:e("./list_service/ListServiceTransformItems"),ListServiceUtils:e("./ListServiceUtils"),LookupService:e("./lookup_service/LookupService"),LookupServiceBase:e("./lookup_service/LookupServiceBase"),LookupServiceCache:e("./lookup_service/LookupServiceCache"),LookupServiceChunker:e("./lookup_service/LookupServiceChunker"),LookupServiceConst:e("./lookup_service/LookupServiceConst"),LookupServiceDelegateBase:e("./lookup_service/LookupServiceDelegateBase"),LookupServiceFn:e("./lookup_service/LookupServiceFn"),LookupServiceGraphSparql:e("./lookup_service/LookupServiceGraphSparql"),LookupServiceIdFilter:e("./lookup_service/LookupServiceIdFilter"),LookupServiceKeyMap:e("./lookup_service/LookupServiceKeyMap"),LookupServiceListServiceSparql:e("./lookup_service/LookupServiceListServiceSparql"),LookupServiceMap:e("./lookup_service/LookupServiceMap"),LookupServiceFallback:e("./lookup_service/LookupServiceFallback"),LookupServiceMulti:e("./lookup_service/LookupServiceMulti"),LookupServiceSparqlQuery:e("./lookup_service/LookupServiceSparqlQuery"),LookupServiceTimeout:e("./lookup_service/LookupServiceTimeout"),LookupServiceTransform:e("./lookup_service/LookupServiceTransform"),LookupServiceTransformKey:e("./lookup_service/LookupServiceTransformKey"),QueryCacheBindingHashSingle:e("./query_cache/QueryCacheBindingHashSingle"),QueryCacheNodeFactory:e("./query_cache/QueryCacheNodeFactory"),QueryCacheNodeFactoryImpl:e("./query_cache/QueryCacheNodeFactoryImpl"),QueryExecution:e("./query_execution/QueryExecution"),QueryExecutionCache:e("./query_execution/QueryExecutionCache"),QueryExecutionDelegate:e("./query_execution/QueryExecutionDelegate"),QueryExecutionFailover:e("./query_execution/QueryExecutionFailover"),QueryExecutionHttp:e("./query_execution/QueryExecutionHttp"),QueryExecutionPageExpand:e("./query_execution/QueryExecutionPageExpand"),QueryExecutionPaginate:e("./query_execution/QueryExecutionPaginate"),UpdateExecutionHttp:e("./query_execution/UpdateExecutionHttp"),ResultSet:e("./result_set/ResultSet"),ResultSetArrayIteratorBinding:e("./result_set/ResultSetArrayIteratorBinding"),ResultSetHashJoin:e("./result_set/ResultSetHashJoin"),SparqlService:e("./sparql_service/SparqlService"),SparqlServiceBaseString:e("./sparql_service/SparqlServiceBaseString"),SparqlServiceCache:e("./sparql_service/SparqlServiceCache"),SparqlServiceConsoleLog:e("./sparql_service/SparqlServiceConsoleLog"),SparqlServiceFactory:e("./sparql_service/SparqlServiceFactory"),SparqlServiceFactoryConst:e("./sparql_service/SparqlServiceFactoryConst"),SparqlServiceFactoryDefault:e("./sparql_service/SparqlServiceFactoryDefault"),SparqlServiceFailover:e("./sparql_service/SparqlServiceFailover"),SparqlServiceHttp:e("./sparql_service/SparqlServiceHttp"),SparqlServiceLimit:e("./sparql_service/SparqlServiceLimit"),SparqlServicePageExpand:e("./sparql_service/SparqlServicePageExpand"),SparqlServicePaginate:e("./sparql_service/SparqlServicePaginate"),SparqlServiceReliableLimit:e("./sparql_service/SparqlServiceReliableLimit"),SparqlServiceVirtFix:e("./sparql_service/SparqlServiceVirtFix"),SparqlUpdateBaseString:e("./sparql_service/SparqlUpdateBaseString"),SparqlUpdateHttp:e("./sparql_service/SparqlUpdateHttp"),TableService:e("./table_service/TableService"),TableServiceDelegateBase:e("./table_service/TableServiceDelegateBase"),TableServiceFacet:e("./table_service/TableServiceFacet"),TableServiceListService:e("./table_service/TableServiceListService"),TableServiceNodeLabels:e("./table_service/TableServiceNodeLabels"),TableServiceQuery:e("./table_service/TableServiceQuery"),UpdateUtils:e("./UpdateUtils")};module.exports=r},{"./AjaxUtils":124,"./BindingLookup":125,"./ListFilter":126,"./ListServiceUtils":127,"./LookupServiceBuilder":128,"./LookupServiceUtils":129,"./PageExpandUtils":130,"./QueryPaginator":131,"./RequestCache":132,"./ResultSetPart":133,"./ResultSetUtils":134,"./ServiceUtils":135,"./SparqlServiceBuilder":136,"./TableServiceUtils":137,"./UpdateUtils":138,"./cache/Cache":139,"./cache/CacheSimple":140,"./cache/SparqlCacheSupplier":141,"./criteria/Criteria":142,"./criteria/Order":143,"./criteria/Restrictions":144,"./criteria/ServiceBuilder":145,"./data_service/DataService":146,"./list_service/AugmenterLookup":148,"./list_service/ListService":149,"./list_service/ListServiceArray":150,"./list_service/ListServiceAugmenter":151,"./list_service/ListServiceConcept":152,"./list_service/ListServiceConceptKeyLookup":153,"./list_service/ListServiceFn":154,"./list_service/ListServiceIndexSubString":155,"./list_service/ListServicePageExpand":156,"./list_service/ListServiceSparqlQuery":157,"./list_service/ListServiceTransformConcept":158,"./list_service/ListServiceTransformConceptMode":159,"./list_service/ListServiceTransformItem":160,"./list_service/ListServiceTransformItems":161,"./lookup_service/LookupService":162,"./lookup_service/LookupServiceBase":163,"./lookup_service/LookupServiceCache":164,"./lookup_service/LookupServiceChunker":165,"./lookup_service/LookupServiceConst":166,"./lookup_service/LookupServiceDelegateBase":167,"./lookup_service/LookupServiceFallback":168,"./lookup_service/LookupServiceFn":169,"./lookup_service/LookupServiceGraphSparql":170,"./lookup_service/LookupServiceIdFilter":171,"./lookup_service/LookupServiceKeyMap":172,"./lookup_service/LookupServiceListServiceSparql":173,"./lookup_service/LookupServiceMap":174,"./lookup_service/LookupServiceMulti":175,"./lookup_service/LookupServiceSparqlQuery":176,"./lookup_service/LookupServiceTimeout":177,"./lookup_service/LookupServiceTransform":178,"./lookup_service/LookupServiceTransformKey":179,"./query_cache/QueryCacheBindingHashSingle":180,"./query_cache/QueryCacheNodeFactory":181,"./query_cache/QueryCacheNodeFactoryImpl":182,"./query_execution/QueryExecution":183,"./query_execution/QueryExecutionCache":184,"./query_execution/QueryExecutionDelegate":185,"./query_execution/QueryExecutionFailover":186,"./query_execution/QueryExecutionHttp":187,"./query_execution/QueryExecutionPageExpand":188,"./query_execution/QueryExecutionPaginate":189,"./query_execution/UpdateExecutionHttp":190,"./result_set/ResultSet":191,"./result_set/ResultSetArrayIteratorBinding":192,"./result_set/ResultSetHashJoin":193,"./sparql_service/SparqlService":194,"./sparql_service/SparqlServiceBaseString":195,"./sparql_service/SparqlServiceCache":196,"./sparql_service/SparqlServiceConsoleLog":197,"./sparql_service/SparqlServiceFactory":198,"./sparql_service/SparqlServiceFactoryConst":199,"./sparql_service/SparqlServiceFactoryDefault":200,"./sparql_service/SparqlServiceFailover":201,"./sparql_service/SparqlServiceHttp":202,"./sparql_service/SparqlServiceLimit":203,"./sparql_service/SparqlServicePageExpand":204,"./sparql_service/SparqlServicePaginate":205,"./sparql_service/SparqlServiceReliableLimit":206,"./sparql_service/SparqlServiceVirtFix":207,"./sparql_service/SparqlUpdateBaseString":208,"./sparql_service/SparqlUpdateHttp":209,"./table_service/TableService":210,"./table_service/TableServiceDelegateBase":211,"./table_service/TableServiceFacet":212,"./table_service/TableServiceListService":213,"./table_service/TableServiceNodeLabels":214,"./table_service/TableServiceQuery":215}],148:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ObjectUtils");var n=r.create({initialize:function(e,t,r){this.lookupService=e;this.itemToKeyFn=t||function(e){return e.key};this.mergeFn=r||function(e,t){var r=a.extend(e,t);return r}},augment:function(e){var t=e.map(this.itemToKeyFn);var r=this;var a=this.lookupService.lookup(t).then(function(a){for(var n=0;n<t.length;++n){var i=t[n];var s=e[n];var o=a.get(i);e[n]=r.mergeFn(s,o)}return e});return a}});module.exports=n},{"../../ext/Class":2,"../../util/ObjectUtils":365}],149:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({fetchItems:function(e,t,r){throw new Error("Not implemented")},fetchCount:function(e,t,r){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2}],150:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ServiceUtils");var n=e("./ListService");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e,t){this.items=e;this.fnFilterSupplier=t},fetchItems:function(e,t,r){var a=this.fnFilterSupplier(e);var n=this.items.filter(a);var i=r||0;var o=t?i+t:n.length;var l=n.slice(i,o);return s.resolve(l)},fetchCount:function(e,t,r){var a=this.fnFilterSupplier(e);var n=this.items.filter(a);var i=n.length;var o=t!=null?Math.min(i,t):i;var l={count:o,hasMoreItems:o<i};return s.resolve(l)}});module.exports=o},{"../../ext/Class":2,"../../util/shared":387,"../ServiceUtils":135,"./ListService":149}],151:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=r.create(a,{initialize:function(e,t){this.listService=e;this.augmenter=t},fetchItems:function(e,t,r){var a=this;var n=this.listService.fetchItems(e,t,r).then(function(e){var t=a.augmenter.augment(e);return t});return n},fetchCount:function(e,t,r){var a=this.listService.fetchCount(e,t,r);return a}});module.exports=n},{"../../ext/Class":2,"./ListService":149}],152:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ServiceUtils");var n=e("./ListService");var i=r.create(n,{initialize:function(e){this.sparqlService=e},fetchItems:function(e,t,r){var n=a.fetchItemsConcept(this.sparqlService,e,t,r);return n},fetchCount:function(e,t,r){var n=a.fetchCountConcept(this.sparqlService,e,t,r);return n}});module.exports=i},{"../../ext/Class":2,"../ServiceUtils":135,"./ListService":149}],153:[function(e,module,t){var r=e("lodash.values");var a=e("../../ext/Class");var n=e("./ListService");var i=e("../ServiceUtils");var s=e("../../util/shared");var o=s.Promise;var l=e("../../sparql/ConceptUtils");var c=e("../../util/ObjectUtils");var u=a.create(n,{initialize:function(e,t,r,a,n){this.keyListService=e;this.keyLookupService=t;this.keyFn=r||function(e){return e};this.resolveFn=function(e,t){c.extend(e.val||e,t);return e};this.isLeftJoin=n==null?true:n},fetchItems:function(e,t,r){var a=this;var n=o.resolve(this.keyListService.fetchItems(e,t,r)).then(function(e){var t=e.map(a.keyFn);return[e,a.keyLookupService.lookup(t)]}).spread(function(e,t){var r=e.map(function(e){var r=a.keyFn(e);var n=t.get(r);var i=a.resolveFn(e,n);return i});return r});return n},fetchCount:o.method(function(e,t,r){var a;if(this.isLeftJoin){a=this.keyListService.fetchCount(e,t,r)}else{var n=this;a=this.keyListService.fetchItems(e,t).then(function(e){var t=e.map(n.keyFn);return n.keyLookupService.lookup(t)}).then(function(e){var r=e.keys();var a=r.length;var n={count:a,hasMoreItems:t==null?false:null};return n})}return a})});module.exports=u},{"../../ext/Class":2,"../../sparql/ConceptUtils":221,"../../util/ObjectUtils":365,"../../util/shared":387,"../ServiceUtils":135,"./ListService":149,"lodash.values":739}],154:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=r.create(a,{initialize:function(e){this.listServiceFn=e},fetchItems:function(e,t,r){var a=this.listServiceFn();var n=a.fetchItems(e,t,r);return n},fetchCount:function(e,t,r){var a=this.listServiceFn();var n=a.fetchCount(e,t,r);return n}});module.exports=n},{"../../ext/Class":2,"./ListService":149}],155:[function(e,module,t){var r=e("../../ext/Class");var a=e("../PageExpandUtils");var n=e("./ListService");var i=r.create(n,{initialize:function(e,t,r,a,n){this.delegate=e;this.filterSupplierFn=t;this.countThreshold=r||1e3;this.itemLimit=a;this.rowLimit=n;this.strToPromise={}},getBestCandKey:function(e){e=e||"";var t=Object.keys(this.strToPromise);var r=this;var a=t.filter(function(t){var r=e.indexOf(t)!==-1;return r});var n=null;var i=null;a.forEach(function(t){var a=r.strToPromise[t];if(a.isFulfilled()){var s=a.value();var o=s?s.length:null;if(o!=null&&(i==null||o<i)){n=t;i=o}}else{if(i==null&&e.indexOf(n)!==-1){n=e}}});return n},filterEntries:function(e,t){var r=this.filterSupplierFn(e);var a=t.filter(r);return a},fetchItems:function(e,t,r){var a=this;var n=this.strToPromise[""];if(n==null||n.isRejected()){n=this.fetchItemsForStr(null)}var i=n.then(function(t){var r=t||e!=null&&a.fetchItemsForStr(e);return r}).then(function(n){var i=r||0;var s=i+(t||n.length);var o=n?a.filterEntries(e,n).slice(i,s):a.delegate.fetchItems(e,t,r);return o});return i},fetchItemsForStr:function(e){var t=this.getBestCandKey(e);var r=t!=null?this.strToPromise[t]:r=this.fetchForStr(e);return r},removeSubsumedStrs:function(e){var t=this;var r=Object.keys(this.strToPromise);r.forEach(function(r){if(e!==r&&r.indexOf(e)!==-1){delete t.strToPromise[r]}})},fetchForStr:function(e){var t=this;if(e===""){e=null}var r=this.delegate.fetchCount(e,this.itemLimit,this.rowLimit).then(function(r){var a=null;if(r.hasMoreItems===false&&r.count<t.countThreshold){a=t.delegate.fetchItems(e).then(function(r){t.removeSubsumedStrs(e);return r})}return a});var a=e||"";this.strToPromise[a]=r;return r},fetchCount:function(e,t,r){var a=this;var n=this.getBestCandKey(e);var i;if(n!=null){var s=this.strToPromise[n];i=s.then(function(n){var i;if(!n){i=a.delegate.fetchCount(e,t,r)}else{var s=a.filterEntries(e,n);i={count:s.length,hasMoreItems:false}}return i})}else{i=this.delegate.fetchCount(e,t,r)}return i}});module.exports=i},{"../../ext/Class":2,"../PageExpandUtils":130,"./ListService":149}],156:[function(e,module,t){var r=e("../../ext/Class");var a=e("../PageExpandUtils");var n=e("./ListService");var i=r.create(n,{initialize:function(e,t){this.listService=e;this.pageSize=t},fetchItems:function(e,t,r){var n=a.computeRange(t,r,this.pageSize);var i=this.listService.fetchItems(e,n.limit,n.offset);var s=i.then(function(e){var t=n.subLimit?n.subOffset+n.subLimit:e.length;var r=e.slice(n.subOffset,t);return r});return s},fetchCount:function(e,t,r){var a=this.listService.fetchCount(e,t,r);return a}});module.exports=i},{"../../ext/Class":2,"../PageExpandUtils":130,"./ListService":149}],157:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.values");var n=e("../../util/shared");var i=n.Promise;var s=e("../../sparql/Concept");var o=e("../../sparql/ConceptUtils");var l=e("../ServiceUtils");var c=e("../ResultSetUtils");var u=e("./ListService");var d=r.create(u,{initialize:function(e,t,r,a){if(t.getLimit()||t.getOffset()){throw new Error("Limit and offset in attribute queries not yet supported")}this.sparqlService=e;this.attrQuery=t;this.attrVar=r;this.isLeftJoin=a},fetchItems:function(e,t,r){var n=this.attrVar;if(!e){e=o.createSubjectConcept()}var i=o.createAttrQuery(this.attrQuery,n,this.isLeftJoin,e,t,r);var s=this.sparqlService.createQueryExecution(i);var l=s.execSelect().then(function(e){var t=c.partition(e,n);var r=t.entries();var i=a(r);return i});return l},fetchCount:function(e,t,r){if(!e){e=o.createSubjectConcept()}var a;if(this.isLeftJoin){var n=o.createAttrQuery(this.attrQuery,this.attrVar,this.isLeftJoin,e,t,null);a=new s(n.getQueryPattern(),this.attrVar)}else{var i=new s(this.attrQuery.getQueryPattern(),this.attrVar);a=o.createCombinedConcept(i,e,true,false,false)}var c=l.fetchCountConcept(this.sparqlService,a,t,r);return c}});module.exports=d},{"../../ext/Class":2,"../../sparql/Concept":220,"../../sparql/ConceptUtils":221,"../../util/shared":387,"../ResultSetUtils":134,"../ServiceUtils":135,"./ListService":149,"lodash.values":739}],158:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=r.create(a,{initialize:function(e,t){this.listService=e;this.fnTransformConcept=t;if(!t){throw new Error("No transformation function provided")}},fetchItems:function(e,t,r){var a=this.fnTransformConcept(e);var n=this.listService.fetchItems(a,t,r);return n},fetchCount:function(e,t,r){var a=this.fnTransformConcept(e);var n=this.listService.fetchCount(a,t,r);return n}});module.exports=n},{"../../ext/Class":2,"./ListService":149}],159:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=e("../../sparql/search/KeywordSearchUtils");var i={regex:n.createConceptRegexLabelOnly,fulltext:n.createConceptBifContains};var s=r.create({initialize:function(e,t,r){this.listService=e;this.labelRelationFn=t;this.idToFilterFn=r||i},createConcept:function(e){var t;if(e==null||e.searchString==null||e.searchString.trim()===""){t=null}else{var r=this.labelRelationFn();var a=e.mode?e.mode:"default";var n=this.idToFilterFn[a];if(!n){throw new Error('No filter function registered for mode "'+a+'"')}t=n(r,e.searchString)}return t},fetchItems:function(e,t,r){var a=this.createConcept(e);var n=this.listService.fetchItems(a,t,r);return n},fetchCount:function(e,t,r){var a=this.createConcept(e);var n=this.listService.fetchCount(a,t,r);return n}});module.exports=s},{"../../ext/Class":2,"../../sparql/search/KeywordSearchUtils":304,"./ListService":149}],160:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=r.create(a,{initialize:function(e,t){this.listService=e;this.fnTransformItem=t},fetchItems:function(e,t,r){var a=this;var n=this.listService.fetchItems(e,t,r).then(function(e){if(e==null){throw new Error("Should not happen")}var t=e.map(a.fnTransformItem);return t});return n},fetchCount:function(e,t,r){var a=this.listService.fetchCount(e,t,r);return a}});module.exports=n},{"../../ext/Class":2,"./ListService":149}],161:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=e("../../util/shared");var i=n.Promise;var s=r.create(a,{initialize:function(e,t){this.listService=e;this.fnTransformItems=t},fetchItems:function(e,t,r){var a=this;var n=this.listService.fetchItems(e,t,r).then(function(e){var t=a.fnTransformItems(e);return t});return n},fetchCount:function(e,t,r){var a=this.listService.fetchCount(e,t,r);return a}});module.exports=s},{"../../ext/Class":2,"../../util/shared":387,"./ListService":149}],162:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getIdStr:function(){throw new Error("Not overridden")},lookup:function(e){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],163:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=r.create(a,{getIdStr:function(e){var t=e.toString();return t}});module.exports=n},{"../../ext/Class":2,"./LookupService":162}],164:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.uniq");var n=e("lodash.find");var i=e("./LookupServiceDelegateBase");var s=e("../RequestCache");var o=e("../../util/collection/HashMap");var l=e("../../util/PromiseUtils");var c=r.create(i,{initialize:function($super,e,t){$super(e);this.requestCache=t||new s},lookup:function(e){var t=this;var r=a(e,false,function(e){var r=t.getIdStr(e);return r});var i=new o;var s=this.requestCache.getResultCache();var c=this.requestCache.getExecutionCache();var u=[];var d=[];var p=[];r.forEach(function(e){var r=t.getIdStr(e);var a=s.getItem(r);if(!a){var o=c[r];if(o){d.push(e);var l=n(p,function(e){var t=e===o;return t});if(!l){p.push(o)}}else{u.push(e);d.push(e)}}else{i.put(e,a)}});if(u.length>0){var h=this.fetchAndCache(u);p.push(h)}var v=l.all(p).then(function(e){d.forEach(function(t){var r=null;n(e,function(e){r=e.get(t);return Boolean(r)});if(r){i.put(t,r)}});return i});return v},fetchAndCache:function(e){var t=this.requestCache.getResultCache();var r=this.requestCache.getExecutionCache();var a=this;var n=this.delegate.lookup(e);var i=n.then(function(n){var i=new o;e.forEach(function(e){var r=a.getIdStr(e);var s=n.get(e);t.setItem(r,s);i.put(e,s)});e.forEach(function(e){var t=a.getIdStr(e);delete r[t]});return i});e.forEach(function(e){var t=a.getIdStr(e);r[t]=i});return i}});module.exports=c},{"../../ext/Class":2,"../../util/PromiseUtils":367,"../../util/collection/HashMap":378,"../RequestCache":132,"./LookupServiceDelegateBase":167,"lodash.find":401,"lodash.uniq":684}],165:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.uniq");var n=e("../../util/ArrayUtils");var i=e("../../util/collection/HashMap");var s=e("./LookupServiceDelegateBase");var o=e("../../util/PromiseUtils");var l=r.create(s,{initialize:function($super,e,t){$super(e);this.maxChunkSize=t},lookup:function(e){var t=this;var r=a(e,false,function(e){var r=t.getIdStr(e);return r});var s=n.chunk(r,this.maxChunkSize);var l=s.map(function(e){var r=t.delegate.lookup(e);return r});var c=o.all(l).then(function(e){var t=new i;e.forEach(function(e){t.putMap(e)});return t});return c}});module.exports=l},{"../../ext/Class":2,"../../util/ArrayUtils":357,"../../util/PromiseUtils":367,"../../util/collection/HashMap":378,"./LookupServiceDelegateBase":167,"lodash.uniq":684}],166:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e){this.data=e},lookup:function(e){var t=new n;var r=this;e.forEach(function(e){t.put(e,r.data)});var a=s.resolve(t);return a}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServiceBase":163}],167:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=r.create(a,{initialize:function(e){this.delegate=e},getIdStr:function(e){var t=this.delegate.getIdStr(e);return t}});module.exports=n},{"../../ext/Class":2,"./LookupService":162}],168:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e,t,r,a){this.primaryLookupService=e;this.fallbackLookupService=t;this.acceptFn=r||function(e,t){return e!=null};this.resolveFn=a||function(e,t,r){return e}},lookup:function(e){var t=this;var r=this.primaryLookupService.lookup(e).then(function(r){var a=e.filter(function(e){var a=r.get(e);var n=t.acceptFn(a,e);return n});var i=t.fallbackLookupService.lookup(a).then(function(e){var i=new n;i.putEntries(r.entries());var s=e.entries();a.forEach(function(a){var n=r.get(a);var s=e.get(a);var o=t.resolveFn(s,n,a);i.put(a,o)});return i});return i});return r}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServiceBase":163}],169:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e){this.fn=e},lookup:s.method(function(e){var t=new n;var r=this;e.forEach(function(e){var a=r.fn(e);if(typeof a!=="undefined"){t.put(e,a)}});return t})});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServiceBase":163}],170:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceBase");var n=e("../ServiceUtils");var i=e("../../util/collection/HashMap");var s=e("../../rdf/GraphImpl");var o=r.create(a,{initialize:function(e){this.sparqlService=e},lookup:function(e){var t=n.execDescribeViaSelect(this.sparqlService,e);var r=t.then(function(t){var r=new i;e.forEach(function(e){r.put(e,new s)});t.forEach(function(e){var t=e.getSubject();var a=r.get(t);if(!a){console.log("Should not happen")}else{a.add(e)}});return r});return r}});module.exports=o},{"../../ext/Class":2,"../../rdf/GraphImpl":94,"../../util/collection/HashMap":378,"../ServiceUtils":135,"./LookupServiceBase":163}],171:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=r.create(a,{initialize:function($super,e,t){$super(e);this.predicateFn=t},lookup:function(e){var t=e.filter(this.predicateFn);var r=this.delegate.lookup(t);return r}});module.exports=n},{"../../ext/Class":2,"./LookupServiceDelegateBase":167}],172:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=e("../../util/ObjectUtils");var i=e("../../util/collection/HashMap");var s=e("../../util/shared");var o=s.Promise;var l=r.create(a,{initialize:function(e){this.fnTransformKey=e||n.identity},lookup:function(e){var t=new i;var r=this;e.forEach(function(e){var a=r.fnTransformKey(e);t.put(e,a)});return o.resolve(t)}});module.exports=l},{"../../ext/Class":2,"../../util/ObjectUtils":365,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupService":162}],173:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/shared");var n=a.Promise;var i=e("../../util/collection/HashMap");var s=e("../../sparql/Concept");var o=e("../../sparql/VarUtils");var l=e("../../sparql/expr/ExprVar");var c=e("../../sparql/expr/E_OneOf");var u=e("../../sparql/element/ElementFilter");var d=e("./LookupServiceBase");var p=r.create(d,{initialize:function(e){this.listService=e},lookup:function(e){var t=o.s;var r=new u(new c(new l(t),e));var a=new s(r,t);var n=this.listService.fetchItems(a).then(function(e){var t=new i;t.putEntries(e);return t});return n}});module.exports=p},{"../../ext/Class":2,"../../sparql/Concept":220,"../../sparql/VarUtils":246,"../../sparql/element/ElementFilter":251,"../../sparql/expr/E_OneOf":281,"../../sparql/expr/ExprVar":293,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServiceBase":163}],174:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e){this.map=e},lookup:s.method(function(e){var t=new n;var r=this;e.forEach(function(e){var a=r.map.get(e);t.put(e,a)});return t})});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServiceBase":163}],175:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e){this.attrToLookupService=e},lookup:function(e){var t=this;var r={};var a=Object.keys(this.attrToLookupService);a.forEach(function(a){var n=t.attrToLookupService[a];if(n){r[a]=n.lookup(e)}else{r[a]=null}});var i=s.props(r).then(function(t){var r=new n;e.forEach(function(e){var n={};a.forEach(function(r){var a=t[r];var i=a?a.get(e):null;n[r]=i});r.put(e,n)});return r});return i}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupService":162}],176:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/shared");var n=a.Promise;var i=e("../../util/collection/HashMap");var s=e("../../sparql/expr/ExprVar");var o=e("../../sparql/expr/E_OneOf");var l=e("../../sparql/element/ElementFilter");var c=e("../../sparql/element/ElementGroup");var u=e("../ResultSetUtils");var d=e("./LookupServiceBase");var p=r.create(d,{initialize:function(e,t,r){this.sparqlService=e;this.query=t;this.v=r},lookup:function(e){var t=e.some(function(e){var t=e==null;return t});if(t){throw new Error("Lookup requests must not include null values as it most likely indicates a problem")}var r=this.v;var a;if(e.length===0){a=n.resolve(new i)}else{var d=this.query.clone();var p=new l(new o(new s(r),e));var h=new c([d.getQueryPattern(),p]);d.setQueryPattern(h);var v=this.sparqlService.createQueryExecution(d);a=v.execSelect().then(function(e){var t=u.partition(e,r);return t})}return a}});module.exports=p},{"../../ext/Class":2,"../../sparql/element/ElementFilter":251,"../../sparql/element/ElementGroup":252,"../../sparql/expr/E_OneOf":281,"../../sparql/expr/ExprVar":293,"../../util/collection/HashMap":378,"../../util/shared":387,"../ResultSetUtils":134,"./LookupServiceBase":163}],177:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=function(){var e;var t;var r=new s(function(){e=arguments[0];t=arguments[1]});return{resolve:e,reject:t,promise:r}};var l=r.create(a,{initialize:function($super,e,t,r){$super(e);this.delayInMs=t;this.maxRefreshCount=r||0;this.idStrToId={};this.currentDeferred=null;this.currentPromise=null;this.currentTimer=null;this.currentRefreshCount=0},getIdStr:function(e){var t=this.delegate.getIdStr(e);return t},lookup:function(e){if(!this.currentDeferred){this.currentDeferred=o();this.currentPromise=this.currentDeferred.promise()}var t=this;e.forEach(function(e){var r=t.getIdStr(e);var a=t.idStrToId[r];if(!a){t.idStrToId[r]=e}});if(!this.currentTimer){this.startTimer()}var r=this.currentPromise.then(function(t){var r=new n;e.forEach(function(e){var a=t.get(e);r.put(e,a)});return r});return r},startTimer:function(){var e=this;var t=this.currentRefreshCount;var r=e.currentDeferred;this.currentTimer=setTimeout(function(){if(e.maxRefreshCount<0||t<e.maxRefreshCount){++e.currentRefreshCount;e.startTimer();return}var a=[];for(var n in e.idStrToId){a.push(e.idStrToId[n])}e.idStrToId={};e.currentRefreshCount=0;e.currentDeferred=null;e.currentTimer=null;e.delegate.lookup(a).then(function(e){r.resolve(e)})},this.delayInMs)}});module.exports=l},{"../../ext/Class":2,"../../util/collection/HashMap":378,"../../util/shared":387,"./LookupServiceDelegateBase":167}],178:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=r.create(a,{initialize:function($super,e,t,r){$super(e);this.fnTransform=t;this.fnNullHandler=r},lookup:function(e){var t=this.fnTransform;var r=this.fnNullHandler;var a=this.delegate.lookup(e).then(function(a){e.forEach(function(e){var n=a.get(e);if(n!=null){var i=t(n,e);a.put(e,i)}else if(r){n=r(e);if(n!=null){a.put(e,n)}}});return a});return a}});module.exports=n},{"../../ext/Class":2,"./LookupServiceDelegateBase":167}],179:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=e("../../util/collection/HashMap");var i=r.create(a,{initialize:function($super,e,t){$super(e);this.fnKey=t},lookup:function(e){var t=this;var r=new n;e.forEach(function(e){var a=t.fnKey(e);r.put(a,e)});var a=r.keys();var i=this.delegate.lookup(a).then(function(e){var t=new n;e.entries().forEach(function(e){var a=r.get(e.key);t.put(a,e.val)});return t});return i}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":378,"./LookupServiceDelegateBase":167}],180:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/ExprEvaluatorImpl");var n=e("../../util/collection/IteratorArray");var i=e("../result_set/ResultSetArrayIteratorBinding");var s=e("../../sparql/expr/E_OneOf");var o=e("../../sparql/element/ElementFilter");var l=e("../../util/shared");

var c=l.Promise;var u=e("../../util/PromiseUtils");var d=r.create({initialize:function(e,t,r){this.sparqlService=e;this.query=t;this.indexExpr=r;this.maxChunkSize=50;this.exprEvaluator=new a;this.nodeToBindings={};this.nodeMisses={}},fetchResultSet:function(e){var t=this;var r=this.nodeToBindings;var a=this.analyze(e);var s=[];a.cachedNodes.forEach(function(e){var t=r.getItem(e.toString());s.push.apply(s,t)});var o=a.nonCachedChunks.map(function(e){var r=t.fetchChunk(e);return r});var l=u.all(o);var c=this.exprEvaluator;var d=this.indexExpr;return l.then(function(){var e={};for(var t=0;t<arguments.length;++t){var a=arguments[t];while(a.hasNext()){var o=a.nextBinding();s.push(o);var l=c.eval(d,o);var u=l.toString();e[u]=l;var p=r.getItem(u);if(p==null){p=[];r.setItem(u,p)}p.push(o)}}var h=new n(s);var v=new i(h);return v})},fetchChunk:function(e){var t=this.query.clone();var r=new s(this.indexExpr,e);var a=new o([r]);t.getElements().push(a);var n=this.sparqlService.createQueryExecution(t);var i=n.execSelect();return i},analyze:function(e){var t=this.nodeToBindings;var r=[];var a=[];e.forEach(function(e){var n=t.getItem(e.toString());if(n==null){a.push(e)}else{r.push(e)}});var n=this.maxChunkSize;var i=[];for(var s=0;s<a.length;s+=n){var o=e.slice(s,s+n);i.push(o)}var l={cachedNodes:r,nonCachedNodes:a,nonCachedChunks:i,maxChunkSize:n};return l}});module.exports=d},{"../../ext/Class":2,"../../sparql/ExprEvaluatorImpl":226,"../../sparql/element/ElementFilter":251,"../../sparql/expr/E_OneOf":281,"../../util/PromiseUtils":367,"../../util/collection/IteratorArray":382,"../../util/shared":387,"../result_set/ResultSetArrayIteratorBinding":192}],181:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createQueryCache:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],182:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryCacheNodeFactory");var n=e("./QueryCacheBindingHashSingle");var i=r.create(a,{initialize:function(){this.keyToCache={}},createQueryCache:function(e,t,r){var a="cache:/"+e.getServiceId()+"/"+e.getServiceState()+"/"+t+"/"+r;console.log("cache requested with id: "+a);var i=this.keyToCache.getItem(a);if(i==null){i=new n(e,t,r);this.keyToCache.addItem(a,i)}return i}});module.exports=i},{"../../ext/Class":2,"./QueryCacheBindingHashSingle":180,"./QueryCacheNodeFactory":181}],183:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({execSelect:function(){throw new Error("Not overridden")},execAsk:function(){throw new Error("Not overridden")},execDescribeTriples:function(){throw new Error("Not overridden")},execConstructTriples:function(){throw new Error("Not overridden")},setTimeout:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],184:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../../util/collection/IteratorArray");var i=e("../result_set/ResultSetArrayIteratorBinding");var s=e("../../util/CacheUtils");var o=r.create(a,{initialize:function(e,t,r){this.queryExecution=e;this.cacheKey=t;this.requestCache=r},createResultSetFromCacheData:function(e){var t=new n(e.bindings);var r=e.varNames;var a=new i(t,r);return a},setTimeout:function(e){this.queryExecution.setTimeout(e)},execSelect:function(){var e=this.cacheKey;var t=this.requestCache;var r=t.getResultCache();var a=t.getExecutionCache();var n=this;var i=s.cacheExecutionAndResult(a,r,e,function(){var e=n.queryExecution.execSelect().then(function(e){var t={bindings:e.getBindings(),varNames:e.getVarNames()};return t});return e});var o=i.then(function(e){var t=n.createResultSetFromCacheData(e);return t});return o}});module.exports=o},{"../../ext/Class":2,"../../util/CacheUtils":358,"../../util/collection/IteratorArray":382,"../result_set/ResultSetArrayIteratorBinding":192,"./QueryExecution":183}],185:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=r.create(a,{initialize:function(e,t){this.sparqlService=e;this.query=t;this.timeout=null},setTimeout:function(e){this.timeout=e},createQueryExecution:function(e){var t=this.sparqlService.createQueryExecution(e||this.query);t.setTimeout(this.timeout);return t},execSelect:function(){var e=this.createQueryExecution().execSelect(this.query);return e},execAsk:function(){var e=this.createQueryExecution().execAsk(this.query);return e}});module.exports=n},{"../../ext/Class":2,"./QueryExecution":183}],186:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../QueryPaginator");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=e("../../util/shared");var l=o.Promise;var c=r.create(a,{initialize:function(e){this.sparqlServices=e;this.timeoutInMillis=null},execSelect:function(){var e=this.sparqlServices.createQueryExecution(this.query);e.setTimeout(this.timeoutInMillis);return e},setTimeout:function(e){this.timeoutInMillis=e}});module.exports=c},{"../../ext/Class":2,"../../util/collection/IteratorArray":382,"../../util/shared":387,"../QueryPaginator":131,"../result_set/ResultSetArrayIteratorBinding":192,"./QueryExecution":183}],187:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../ResultSetUtils");var i=e("../AjaxUtils");var s=e("../../util/shared");var o=s.ajax;var l=s.Promise;var c=r.create(a,{initialize:function(e,t,r,a,n){this.queryString=e;this.serviceUri=t;this.defaultGraphUris=r;this.ajaxOptions=a||{};this.httpArgs=n},execSelect:function(){var e=this.execAny().then(function(e){var t;try{t=n.jsonToResultSet(e)}catch(r){console.log("Error processing result set. Response was: ",e);throw r}return t});return e},execAsk:function(){var e=this.execAny().then(function(e){return e.boolean});return e},execConstructTriples:function(){throw new Error("Not implemented yet")},execDescribeTriples:function(){throw new Error("Not implemented yet")},setTimeout:function(e){this.ajaxOptions.timeout=e},getTimeout:function(){return this.ajaxOptions.timeout},execAny:function(){var e=i.createSparqlRequestAjaxSpec(this.serviceUri,this.defaultGraphUris,this.queryString,this.httpArgs,this.ajaxOptions);var t=o(e);return t}});module.exports=c},{"../../ext/Class":2,"../../util/shared":387,"../AjaxUtils":124,"../ResultSetUtils":134,"./QueryExecution":183}],188:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecutionDelegate");var n=e("../PageExpandUtils");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=r.create(a,{initialize:function($super,e,t,r){$super(e,t);this.pageSize=r},execSelect:function(){var e=this.query.clone();var t=n.computeRange(e.getLimit(),e.getOffset(),this.pageSize);e.setLimit(t.limit);e.setOffset(t.offset);var r=this.createQueryExecution(e);var a=r.execSelect();var o=a.then(function(e){var r=e.getIterator().getArray();var a=t.subLimit?t.subOffset+t.subLimit:r.length;var n=r.slice(t.subOffset,a);var o=e.getVarNames();var l=new i(n);var c=new s(l,o);return c});return o}});module.exports=o},{"../../ext/Class":2,"../../util/collection/IteratorArray":382,"../PageExpandUtils":130,"../result_set/ResultSetArrayIteratorBinding":192,"./QueryExecutionDelegate":185}],189:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../QueryPaginator");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=e("../../util/shared");var l=o.Promise;var c=r.create(a,{initialize:function(e,t,r){this.defaultPageSize=1e3;this.sparqlService=e;this.query=t;this.pageSize=r;this.timeoutInMillis=null},executeSelectRec:l.method(function(e,t){var r=e.next();if(!r){return t}var a=this;var n=this.sparqlService.createQueryExecution(r);n.setTimeout(this.timeoutInMillis);var o=n.execSelect().then(function(n){if(!n){throw new Error("Null result set for query: "+r)}var o;if(!t){o=n}else{var l=t.getIterator().getArray();var c=n.getIterator().getArray();var u=l.concat(c);var d=new i(u);o=new s(d)}var p=n.getIterator().getArray().length;var h=e.getPageSize();var v=p===0||p<h;if(!v){o=a.executeSelectRec(e,o)}return o});return o}),execSelect:function(){var e=this.query.clone();var t=this.pageSize||c.defaultPageSize;var r=new n(e,t);return this.executeSelectRec(r,null)},setTimeout:function(e){this.timeoutInMillis=e;if(!c.timeoutMsgShown){console.log("[WARN] Only preliminary timeout implementation for paginated query execution.");c.timeoutMsgShown=true}}});module.exports=c},{"../../ext/Class":2,"../../util/collection/IteratorArray":382,"../../util/shared":387,"../QueryPaginator":131,"../result_set/ResultSetArrayIteratorBinding":192,"./QueryExecution":183}],190:[function(e,module,t){var r=e("../../ext/Class");var a=e("../AjaxUtils");var n=e("../../util/shared");var i=n.ajax;var s=n.Promise;var o=r.create({initialize:function(e,t,r,a,n,i){this.queryString=e;this.serviceUri=t;this.usingGraphUris=r;this.usingNamedGraphUris=a;this.ajaxOptions=n||{};this.httpArgs=i},execUpdate:function(){var e=this.execAny();return e},setTimeout:function(e){this.ajaxOptions.timeout=e},getTimeout:function(){return this.ajaxOptions.timeout},execAny:function(){var e=a.createSparqlUpdateAjaxSpec(this.queryString,this.serviceUri,this.usingGraphUris,this.usingNamedGraphUris,this.httpArgs,this.ajaxOptions);var t=i(e);return t}});module.exports=o},{"../../ext/Class":2,"../../util/shared":387,"../AjaxUtils":124}],191:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/Iterator");var n=r.create(a,{getVarNames:function(){throw new Error("Override me")}});module.exports=n},{"../../ext/Class":2,"../../util/collection/Iterator":380}],192:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ResultSet");var n=r.create(a,{initialize:function(e,t){this.itBinding=e;this.varNames=t},hasNext:function(){return this.itBinding.hasNext()},next:function(){return this.nextBinding()},nextBinding:function(){return this.itBinding.next()},getVarNames:function(){return this.varNames},getBindings:function(){return this.itBinding.getArray()},getIterator:function(){return this.itBinding}});module.exports=n},{"../../ext/Class":2,"./ResultSet":191}],193:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/IteratorAbstract");var n=r.create(a,{initialize:function(e,t,r,a){this.rsA=e;this.serviceB=t;this.elementB=r;this.expr=a;e.getVarsMentioned();a.getVarsMentioned()},$prefetch:function(){}});module.exports=n},{"../../ext/Class":2,"../../util/collection/IteratorAbstract":381}],194:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getServiceId:function(){throw new Error("[ERROR] Method not overridden")},getStateHash:function(){throw new Error("[ERROR] Method not overridden")},createQueryExecution:function(e){throw new Error("[ERROR] Method not overridden")}});module.exports=a},{"../../ext/Class":2}],195:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=r.create(a,{createQueryExecution:function(e){var t;if(Object.toString(e)==="[object String]"){t=this.createQueryExecutionStr(e)}else{t=this.createQueryExecutionObj(e)}return t},createQueryExecutionObj:function(e){var t=e.toString();var r=this.createQueryExecutionStr(t);return r},createQueryExecutionStr:function(){throw new Error("Not implemented")}});module.exports=n},{"../../ext/Class":2,"./SparqlService":194}],196:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../RequestCache");var i=e("../query_execution/QueryExecutionCache");var s=r.create(a,{initialize:function(e,t){this.sparqlService=e;this.requestCache=t||new n},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"cached:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=this.sparqlService.getServiceId();var r=this.sparqlService.getStateHash();var a=""+e;var n=t+"-"+r+a;var s=this.sparqlService.createQueryExecution(e);var o=new i(s,n,this.requestCache);return o}});module.exports=s},{"../../ext/Class":2,"../RequestCache":132,"../query_execution/QueryExecutionCache":184,"./SparqlService":194}],197:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=r.create(a,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"console-log:"+this.sparqlService.hashCode()},createQueryExecution:function(e){console.log("SparqlServiceConsoleLog saw query: "+e);var t=this.sparqlService.createQueryExecution(e);return t}});module.exports=n},{"../../ext/Class":2,"./SparqlService":194}],198:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createSparqlService:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],199:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.sparqlService=e},createSparqlService:function(){var e=this.sparqlService;if(e==null){throw new Error("[ERROR] Creation of a SPARQL service requested, but none was provided")}return e},setSparqlService:function(e){this.sparqlService=e}});module.exports=a},{"../../ext/Class":2}],200:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlServiceHttp");var n=e("./SparqlServiceCache");var i=r.create({initialize:function(){this.hashToCache={}},createSparqlService:function(e,t){var r=new a(e,t);r=new n(r);var i=r.getStateHash();var s=this.hashToCache[i];var o;if(s){o=s}else{this.hashToCache[i]=r;o=r}return o}});module.exports=i},{"../../ext/Class":2,"./SparqlServiceCache":196,"./SparqlServiceHttp":202}],201:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../query_execution/QueryExecutionFailover");var i=r.create(a,{initialize:function(e){this.sparqlServices=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"failover:"+this.sparqlService.hashCode()},createQueryExecution:function(e){return new n(this.sparqlServices)}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionFailover":186,"./SparqlService":194}],202:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.defaults");var n=e("./SparqlServiceBaseString");var i=e("../query_execution/QueryExecutionHttp");var s=e("../../ext/JSONCanonical");var o=r.create(n,{initialize:function(e,t,r,a){this.serviceUri=e;this.defaultGraphUris=t;this.ajaxOptions=r;this.httpArgs=a},getServiceId:function(){return this.serviceUri},getStateHash:function(){var e=s.stringify(this.defaultGraphUris);e+=s.stringify(this.httpArgs);return e},hashCode:function(){return this.getServiceId()+"/"+this.getStateHash()},setDefaultGraphs:function(e){this.defaultGraphUris=e},getDefaultGraphs:function(){return this.defaultGraphUris},createQueryExecutionStr:function(e){var t=a({},this.ajaxOptions);var r=new i(e,this.serviceUri,this.defaultGraphUris,t,this.httpArgs);return r},createQueryExecutionObj:function($super,e){if(true){if(e.flatten){var t=e;e=t.flatten()}}var r=$super(e);return r}});module.exports=o},{"../../ext/Class":2,"../../ext/JSONCanonical":3,"../query_execution/QueryExecutionHttp":187,"./SparqlServiceBaseString":195,"lodash.defaults":395}],203:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=r.create(a,{initialize:function(e,t){this.sparqlService=e;this.maxLimit=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"maxLimit:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=e.getLimit();if(t==null||t>this.maxLimit){e=e.clone();e.setLimit(this.maxLimit)}var r=this.sparqlService.createQueryExecution(e);return r}});module.exports=n},{"../../ext/Class":2,"./SparqlService":194}],204:[function(e,module,t){var r=e("../../ext/Class");var a=e("../query_execution/QueryExecutionPageExpand");var n=e("./SparqlService");var i=r.create(n,{initialize:function(e,t){this.sparqlService=e;this.pageSize=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"page-expand:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=new a(this.sparqlService,e,this.pageSize);return t}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionPageExpand":188,"./SparqlService":194}],205:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../query_execution/QueryExecutionPaginate");var i=r.create(a,{initialize:function(e,t){this.defaultPageSize=1e3;this.sparqlService=e;this.pageSize=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"paginate:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=new n(this.sparqlService,e,this.pageSize);return t}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionPaginate":189,"./SparqlService":194}],206:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../../sparql/element/ElementGroup");var i=r.create({initialize:function(e){},createQueryExecution:function(e){},applyTransform:function(e){var t=e.getQueryPattern();if(t instanceof n){var r=t.getArgs();var a=[];var i=[];r.forEach(function(){})}}});module.exports=i},{"../../ext/Class":2,"../../sparql/element/ElementGroup":252,"./SparqlService":194}],207:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../../sparql/expr/ExprAggregator");var i=e("../../sparql/Query");var s=e("../../sparql/element/ElementSubQuery");var o=r.create(a,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"virtfix:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=e.getOrderBy();var r=e.getLimit();var a=e.getOffset();var n=a!=null&&r==null;var o=e.getAggregators().length>0;var l=t.length>0&&(r||a)||o;var c=n||l;var u=c?e.clone():e;if(n){r=2e9;u.setLimit(r)}if(l){var d=u;d.setLimit(null);d.setOffset(null);var p=new s(d);u=new i;u.setQueryPattern(p);u.setLimit(r);u.setOffset(a);u.setQueryResultStar(true)}var h=this.sparqlService.createQueryExecution(u);return h}});module.exports=o},{"../../ext/Class":2,"../../sparql/Query":237,"../../sparql/element/ElementSubQuery":256,"../../sparql/expr/ExprAggregator":285,"./SparqlService":194}],208:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=r.create(a,{createUpdateExecution:function(e){var t;if(Object.toString(e)==="[object String]"){t=this.createUpdateExecutionStr(e)}else{t=this.createUpdateExecutionObj(e)}return t},createUpdateExecutionObj:function(e){var t=e.toString();var r=this.createUpdateExecutionStr(t);return r},createUpdateExecutionStr:function(){throw new Error("Not implemented")}});module.exports=n},{"../../ext/Class":2,"./SparqlService":194}],209:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.defaults");var n=e("./SparqlUpdateBaseString");var i=e("../query_execution/UpdateExecutionHttp");var s=e("../../ext/JSONCanonical");var o=r.create(n,{initialize:function(e,t,r,a,n){this.serviceUri=e;this.usingGraphUris=t;this.usingNamedGraphUris=r;this.ajaxOptions=a;this.httpArgs=n},getServiceId:function(){return this.serviceUri},getStateHash:function(){var e="using:"+s.stringify(this.usingGraphUris);e+="usingNamed:"+s.stringify(this.usingNamedGraphUris);e+=s.stringify(this.httpArgs);return e},hashCode:function(){return this.getServiceId()+"/"+this.getStateHash()},createUpdateExecutionStr:function(e){var t=a({},this.ajaxOptions);var r=new i(e,this.serviceUri,this.usingGraphUris,this.usingNamedGraphUris,t,this.httpArgs);return r}});module.exports=o},{"../../ext/Class":2,"../../ext/JSONCanonical":3,"../query_execution/UpdateExecutionHttp":190,"./SparqlUpdateBaseString":208,"lodash.defaults":395}],210:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({fetchSchema:function(){throw new Error("Override me")},fetchCount:function(e){throw new Error("Override me")},fetchData:function(e,t){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],211:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableService");var n=r.create(a,{initialize:function(e){this.delegate=e},fetchSchema:function(){var e=this.delegate.fetchSchema();return e},fetchCount:function(){var e=this.delegate.fetchCount();return e},fetchData:function(){var e=this.delegate.fetchData();return e}});module.exports=n},{"../../ext/Class":2,"./TableService":210}],212:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableServiceNodeLabels");var n=e("../TableServiceUtils");var i=r.create(a,{initialize:function($super,e,t,r,a){$super(e,r);this.tableConfigFacet=t;this.lookupServicePathLabels=a},fetchSchema:function(){var e=n.fetchSchemaTableConfigFacet(this.tableConfigFacet,this.lookupServicePathLabels);return e}});module.exports=i},{"../../ext/Class":2,"../TableServiceUtils":137,"./TableServiceNodeLabels":214}],213:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.listService=e},fetchCount:function(e,t){this.listService.fetchCount(null,e,t)},fetchData:function(){}});module.exports=a},{"../../ext/Class":2}],214:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableServiceDelegateBase");var n=e("../TableServiceUtils");var i=r.create(a,{initialize:function($super,e,t){$super(e);this.lookupServiceNodeLabels=t},fetchData:function(e,t){var r=this.delegate.fetchData(e,t);var a=this;var i=r.then(function(e){var t=n.transformToNodeLabels(a.lookupServiceNodeLabels,e);return t});return i}});module.exports=i},{"../../ext/Class":2,"../TableServiceUtils":137,"./TableServiceDelegateBase":211}],215:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableService");var n=e("../TableServiceUtils");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e,t,r,a){this.sparqlService=e;this.query=t;this.timeoutInMillis=r||3e3;this.secondaryCountLimit=a||1e3},fetchSchema:function(){var e={colDefs:n.createNgGridOptionsFromQuery(this.query)};return new s(function(t){t(e)})},fetchCount:function(){var e=n.fetchCount(this.sparqlService,this.query,this.timeoutInMillis,this.secondaryCountLimit);return e},fetchData:function(e,t){var r=n.fetchData(this.sparqlService,this.query,e,t);return r}});module.exports=o},{"../../ext/Class":2,"../../util/shared":387,"../TableServiceUtils":137,"./TableService":210}],216:[function(e,module,t){var r=e("../ext/Class");var a=e("../vocab/rdfs");var n=e("./VarUtils");var i=r.create({initialize:function(e,t,r,i,s){this.langs=e||["en",""];this.predicates=t||[a.label];this.subjectVar=i||n.x;this.predicateVar=s||n.y;this.objectVar=r||n.z},getLangs:function(){return this.langs},getPredicates:function(){return this.predicates},getSubjectVar:function(){return this.subjectVar},getPredicateVar:function(){return this.predicateVar},getObjectVar:function(){return this.objectVar},toString:function(){var e=["BestLabelConfig",this.langs,this.predicates,this.subjectVar,this.predicateVar,this.objectVar].join(", ");return e}});module.exports=i},{"../ext/Class":2,"../vocab/rdfs":392,"./VarUtils":246}],217:[function(e,module,t){var r=e("../rdf/NodeFactory");var a=e("../rdf/node/Var");var n=function(e){this.varNameToEntry=e?e:{}};n.create=function(e){var t={};for(var a in e){var i=e[a];t[a]={v:r.createVar(a),node:i}}var s=new n(t);return s};n.fromTalisJson=function(e){var t={};for(var a in e){var i=e[a];var s=r.createFromTalisRdfJson(i);t[a]=s}var o=n.create(t);return o};n.prototype={put:function(e,t){this.varNameToEntry[e.getName()]={v:e,node:t}},get:function(e){if(!(e instanceof a)){throw new Error("var not an instance of Var")}var t=e.getName();var r=this.varNameToEntry[t];var n=r?r.node:null;return n},entries:function(){var e=[];for(var t in this.varNameToEntry){var r=this.varNameToEntry[t];e.push(r)}var a=e.sort(function(e,t){return e.v.getName()>t.v.getName()?1:-1});return a},toString:function(){var e=this.entries();var t=e.map(function(e){return'"'+e.v.getName()+'": "'+e.node+'"'});var r="{"+t.join(", ")+"}";return r},getVars:function(){var e=[];for(var t in this.varNameToEntry){var r=this.varNameToEntry[t];e.push(r.v)}return e}};module.exports=n},{"../rdf/NodeFactory":97,"../rdf/node/Var":117}],218:[function(e,module,t){var r=e("../vocab/xsd");var a=e("../rdf/NodeFactory");var n=e("./Binding");var i={cloneBinding:function(e){var t=new n;var r=e.entries();r.forEach(function(e){t.put(e.v,e.node)});return t},cloneBindings:function(e){var t=e.map(function(e){var t=i.cloneBinding(e);return t});return t},addRowIds:function(e,t,n){n=n||0;e.forEach(function(e,i){var s=n+i;var o=a.createTypedLiteralFromString(""+s,r.xinteger);e.put(t,o)});return e}};module.exports=i},{"../rdf/NodeFactory":97,"../vocab/xsd":394,"./Binding":217}],219:[function(e,module,t){var r=e("../vocab/rdf");var a=e("../vocab/owl");var n=e("../rdf/Triple");var i=e("../sparql/element/ElementTriplesBlock");var s=e("../sparql/element/ElementFilter");var o=e("../sparql/element/ElementGroup");var l=e("../sparql/expr/E_LogicalOr");var c=e("../sparql/expr/E_Equals");var u=e("../sparql/expr/ExprVar");var d=e("../sparql/Concept");var p=e("../sparql/NodeValueUtils");var h=e("../sparql/VarUtils");var v={createConceptDeclaredProperties:function(e,t){e=e||h.s;t=t||h.o;var v=new u(t);var f=p.makeNode(r.Property);var g=p.makeNode(a.DatatypeProperty);var m=p.makeNode(a.ObjectProperty);var x=p.makeNode(a.AnnotationProperty);var _=new d(new o([new i([new n(e,r.type,t)]),new s(new l(new c(v,f),new l(new c(v,g),new l(new c(v,m),new c(v,x)))))]),e);return _}};module.exports=v},{"../rdf/Triple":100,"../sparql/Concept":220,"../sparql/NodeValueUtils":233,"../sparql/VarUtils":246,"../sparql/element/ElementFilter":251,"../sparql/element/ElementGroup":252,"../sparql/element/ElementTriplesBlock":257,"../sparql/expr/E_Equals":269,"../sparql/expr/E_LogicalOr":279,"../sparql/expr/ExprVar":293,"../vocab/owl":390,"../vocab/rdf":391}],220:[function(e,module,t){var r=e("../ext/Class");var a=e("./ElementUtils");var n=e("./element/ElementGroup");var i=e("./element/ElementTriplesBlock");var s=r.create({classLabel:"jassa.sparql.Concept",initialize:function(e,t){this.element=e;this.variable=t},toJson:function(){var e={element:JSON.parse(JSON.stringify(this.element)),variable:this.variable};return e},getElement:function(){return this.element},getVarsMentioned:function(){var e=this.getElement().getVarsMentioned();return e},hasTriples:function(){var e=this.getElements();var t=a.getElementsDirectTriples(e);var r=t.length>0;return r},getElements:function(){var e;if(this.element instanceof n){e=this.element.elements}else{e=[this.element]}return e},getVar:function(){return this.variable},getVariable:function(){if(!this.warningShown){this.warningShown=true}return this.getVar()},toString:function(){return""+this.element+"; "+this.variable},isSubjectConcept:function(){var e=false;var t=this.variable;var r=this.element;if(r instanceof i){var a=r.triples;if(a.length===1){var n=a[0];var s=n.getSubject();var o=n.getPredicate();var l=n.getObject();e=t.equals(s)&&o.isVariable()&&l.isVariable()}}return e},createOptimizedConcept:function(){var e=this.getElement();var t=e.flatten();var r=new s(t,this.variable);return r},getOptimizedElement:function(){return null}});s.createFromElements=function(e,t){var r;if(e.length==1){r=e[0]}else{r=new n(e)}var a=new s(r,t);return a};module.exports=s},{"../ext/Class":2,"./ElementUtils":224,"./element/ElementGroup":252,"./element/ElementTriplesBlock":257}],221:[function(e,module,t){var r=e("../rdf/node/Node");var a=e("../rdf/NodeFactory");var n=e("../rdf/Triple");var i=e("../util/collection/HashMap");var s=e("./../vocab/rdf");var o=e("./VarUtils");var l=e("./ElementUtils");var c=e("./expr/ExprAggregator");var u=e("./agg/AggCount");var d=e("./expr/ExprVar");var p=e("./expr/E_Equals");var h=e("./element/ElementTriplesBlock");var v=e("./element/ElementOptional");var f=e("./element/ElementSubQuery");var g=e("./element/ElementGroup");var m=e("./element/ElementFilter");var x=e("./QueryUtils");var _=e("./NodeValueUtils");var b=e("./Query");var S=e("./Concept");var y={createTargetConcept:function(e,t){var r;var a=t.getElement().getVarsMentioned();var n=e.getElement().getVarsMentioned();var i=[t.getSourceVar()];var s=[e.getVar()];var o=l.createJoinVarMap(a,n,i,s);var c=l.createRenamedElement(e.getElement(),o);var u=t.getElement();var d=t.getTargetVar();if(e.isSubjectConcept()){if(t.isEmpty()){r=e}else{r=new S(u,d)}}else{var p=new g([c,u]);r=new S(p,d)}return r},createVarMap:function(e,t){var r=e.getElement();var a=t.getElement();var n=r.getVarsMentioned();var i=a.getVarsMentioned();var s=[e.getVar()];var o=[t.getVar()];var c=l.createJoinVarMap(n,i,s,o);return c},createRenamedConcept:function(e,t){var r=this.createVarMap(e,t);var a=e.getVar();var n=t.getElement();var i=l.createRenamedElement(n,r);var s=new S(i,a);return s},renameVars:function(e,t){var r=o.fnSubst(t);var a=r(e.getVar());var n=e.getElement().copySubstitute(r);var i=new S(n,a);return i},createCombinedConcept:function(e,t,r,n,s){var o=e.getVar();var l=t.getVar();if(!l.equals(o)){var c=new i;c.put(l,o);var u=a.createVar("cc_"+o.getName());c.put(o,u);t=this.renameVars(t,c)}var d;if(r){d=this.createRenamedConcept(e,t)}else{d=t}var p=d.getElements();var h=e.getElement();var m;if(p.length>0){if(d.isSubjectConcept()){m=e.getElement()}else{var x=[];if(n){h=new v(e.getElement())}x.push(h);if(s){p=[new f(d.asQuery())]}x.push.apply(x,p);m=new g(x);m=m.flatten()}}else{m=h}var _=new S(m,o);return _},createSubjectConcept:function(e,t,r){e=e||o.s;t=t||o._p_;r=r||o._o_;var a=new h([new n(e,t,r)]);var i=new S(a,e);return i},createTypeConcept:function(e,t){var i=e instanceof r?e:a.createUri(e);var o=!t?a.createVar("s"):t instanceof r?t:a.createVar(t);var l=new S(new h([new n(o,s.type,i)]),o);return l},createQueryList:function(e,t,r){var a=new b;a.setDistinct(true);a.setLimit(t);a.setOffset(r);a.getProject().add(e.getVar());a.setQueryPattern(e.getElement());return a},freshVar:function(e,t){t=t||"c";var r=e.getVarsMentioned();var a=o.createVarGen(t,r);var n=a.next();return n},wrapAsSubQuery:function(e,t){var r=new f(e);var a=new b;a.setQuerySelectType();a.getProject().add(t);a.setQueryPattern(r);return a},createQueryCount:function(e,t,r,a){var n=this.createQueryList(e);if(a!=null){n.setDistinct(false);n.setLimit(a);n=this.wrapAsSubQuery(n,e.getVar());n.setDistinct(true)}if(r!=null){n.setLimit(r)}var i=new f(n);var s=new b;s.setQuerySelectType();s.getProject().add(t,new c(null,new u));s.setQueryPattern(i);return s},createQueryRawSize:function(e,t,r,a){var n=e.getVar();var i=e.getElement();var s=new d(n);var o=_.makeNode(t);var l=new m(new p(s,o));var h=new g([i,l]).flatten();if(a!=null){var v=new b;v.setQuerySelectType();v.getProject().add(n);v.setQueryPattern(h);v.setLimit(a);h=new f(v)}var x=new b;x.setQuerySelectType();x.getProject().add(n);x.getProject().add(r,new c(null,new u));x.setQueryPattern(h);x.getGroupBy().push(s);return x},isGroupedOnlyByVar:function(e,t){var r=false;var a=e.getGroupBy().length===1;if(a){var n=e.getGroupBy()[0];if(n instanceof d){var i=n.asVar();r=i.equals(t)}}return r},isDistinctConceptVar:function(e,t){var r=e.isDistinct();var a=e.getProjectVars();var n=!e.isQueryResultStar()&&a&&a.length===1;var i=r&&n&&a[0].equals(t);return i},isConceptQuery:function(e,t){var r=this.isGroupedOnlyByVar(e,t);var a=this.isDistinctConceptVar(e,t);var n=r||a;return n},createAttrQuery:function(e,t,r,a,n,i){
var s=new S(new f(e),t);var o=y.createRenamedConcept(s,a);var l=this.isConceptQuery(e,t);var c;if(l){c=e.clone();if(!o.isSubjectConcept()){var u=new g([e.getQueryPattern(),o.getElement()]);u=u.flatten();c.setQueryPattern(u)}c.setLimit(n);c.setOffset(i)}else{var d=n!=null||i!=null;var p;if(d){var h;if(r){h=o}else{var m;if(o.isSubjectConcept()){m=e.getQueryPattern()}else{m=new g([e.getQueryPattern(),o.getElement()])}h=new S(m,t)}var x=y.createQueryList(h,n,i);p=new f(x)}else{p=o.getElement()}var _=e.clone();var b=_.getQueryPattern();var C;if(!d&&(!a||a.isSubjectConcept())){C=b}else{if(r){C=new g([p,new v(b)])}else{C=new g([b,p])}}_.setQueryPattern(C);c=_}return c}};module.exports=y},{"../rdf/NodeFactory":97,"../rdf/Triple":100,"../rdf/node/Node":110,"../util/collection/HashMap":378,"./../vocab/rdf":391,"./Concept":220,"./ElementUtils":224,"./NodeValueUtils":233,"./Query":237,"./QueryUtils":239,"./VarUtils":246,"./agg/AggCount":247,"./element/ElementFilter":251,"./element/ElementGroup":252,"./element/ElementOptional":254,"./element/ElementSubQuery":256,"./element/ElementTriplesBlock":257,"./expr/E_Equals":269,"./expr/ExprAggregator":285,"./expr/ExprVar":293}],222:[function(e,module,t){},{}],223:[function(e,module,t){var r={joinElements:function(e,t){var r=t.map(function(e){return e.toString()});var a=r.filter(function(e){return e.length!==0});return a.join(e)}};module.exports=r},{}],224:[function(e,module,t){var r=e("lodash.uniq");var a=e("./element/ElementTriplesBlock");var n=e("./element/ElementFilter");var i=e("./element/ElementGroup");var s=e("./element/ElementSubQuery");var o=e("./../rdf/TripleUtils");var l=e("./VarUtils");var c=e("./GenSym");var u=e("./GeneratorBlacklist");var d=e("../util/collection/HashBidiMap");var p=e("../rdf/NodeFactory");var h=e("./Query");var v=e("./expr/ExprAggregator");var f=e("./agg/AggCount");var g={isEmpty:function(e){var t=e==null||e instanceof i&&e.getArgs().length===0;return t},groupIfNeeded:function(e){var t=e.length!=1?new i(e):e[0];return t},createQueryCountRows:function(e,t,r){var a;if(r==null){a=e}else{var n=new h;n.setQuerySelectType();n.setQueryPattern(e);n.setQueryResultStar(true);n.setLimit(r);a=new s(e)}var i=new h;i.setQuerySelectType();i.setQueryPattern(a);i.getProject().add(t,new v(null,new f));return i},createFilterElements:function(e){var t=e.map(function(e){var t=new n(e);return t});return t},createElementsTriplesBlock:function(e){var t=[];if(e.length>0){var r=new a(e);t.push(r)}return t},createDistinctVarMap:function(e,t,r){var a=e.map(l.getVarName);if(r==null){var n=new c("v");r=new u(n,a)}var i=new d;t.forEach(function(e){var t=e.getName();var n;if(a.indexOf(t)!==-1){var s=r.next();n=p.createVar(s)}else{n=e}i.put(e,n)});return i},createJoinVarMap:function(e,t,r,a,n){if(r.length!==a.length){console.log("[ERROR] Cannot join on different number of columns");throw"Bailing out"}var i=g.createDistinctVarMap(e,t,n);for(var s=0;s<r.length;++s){var o=r[s];var l=a[s];i.put(l,o)}return i},createRenamedElement:function(e,t){var r=l.fnSubst(t);var a=e.copySubstitute(r);return a},getElementsDirectTriples:function(e){var t=[];for(var r=0;r<e.length;++r){var n=e[r];if(n instanceof a){t.push.apply(t,n.triples)}}return t},freshVar:function(e,t){var r=this.freshVarGen(e,t);var a=r.next();return a},freshVarGen:function(e,t){t=t||"v";var r=e.getVarsMentioned();var a=l.freshVarGen(t,r);return a}};module.exports=g},{"../rdf/NodeFactory":97,"../util/collection/HashBidiMap":377,"./../rdf/TripleUtils":101,"./GenSym":229,"./GeneratorBlacklist":231,"./Query":237,"./VarUtils":246,"./agg/AggCount":247,"./element/ElementFilter":251,"./element/ElementGroup":252,"./element/ElementSubQuery":256,"./element/ElementTriplesBlock":257,"./expr/ExprAggregator":285,"lodash.uniq":684}],225:[function(e,module,t){var r=e("../ext/Class");var a=r.create({eval:function(){throw new Error("Not overridden")}});module.exports=a},{"../ext/Class":2}],226:[function(e,module,t){var r=e("../ext/Class");var a=e("./expr/NodeValue");var n=e("./NodeValueUtils");var i=e("./ExprEvaluator");var s=r.create(i,{eval:function(e,t){var r;var a;if(e.isVar()){a=e.getExprVar();r=this.evalExprVar(a,t)}else if(e.isFunction()){a=e.getFunction();r=this.evalExprFunction(a,t)}else if(e.isConstant()){a=e.getConstant();r=this.evalConstant(a,t)}else{throw new Error("Unsupported expr type")}return r},evalExprVar:function(e,t){var r=e.asVar();var i=t.get(r);var s;if(i==null){return a.nvNothing}else{s=n.makeNode(i)}return s},evalExprFunction:function(){},evalNodeValue:function(){}});module.exports=s},{"../ext/Class":2,"./ExprEvaluator":225,"./NodeValueUtils":233,"./expr/NodeValue":294}],227:[function(e,module,t){var r={newBinaryExpr:function(e,t){if(t.length!==2){throw new Error("Invalid argument")}var r=t[0];var a=t[1];var n=new e(r,a);return n},newUnaryExpr:function(e,t){if(t.length!==1){throw new Error("Invalid argument")}var r=t[0];var a=new e(r);return a},joinElements:function(e,t){var r=t.map(function(e){return e.toString()});var a=r.filter(function(e){return e.length!==0});return a.join(e)}};module.exports=r},{}],228:[function(e,module,t){var r=e("./expr/ExprVar");var a=e("./expr/NodeValue");var n=e("./NodeValueUtils");var i=e("./expr/E_Equals");var s=e("./expr/E_LogicalAnd");var o=e("./expr/E_LogicalOr");var l={copySubstitute:function(e,t){var r=function(e){var r=null;if(e.isVar()){var a=t.get(e);if(a!=null){r=a}}if(r==null){r=e}return r};var a=e.copySubstitute(r);return a},bindingToExprs:function(e,t){if(t==null){t=e.getVars()}var a=[];t.forEach(function(t){var s=new r(t);var o=e.get(t);var l=n.makeNode(o);var c=new i(s,l);a.push(c)});return a},opify:function(e,t){var r=e;var a=[];while(r.length>1){for(var n=0;n<r.length;n+=2){var i=r[n];if(n+1===r.length){a.push(i);break}var s=r[n+1];var o=t(i,s);a.push(o)}r=a;a=[]}return r[0]},andify:function(e){var t=this.opify(e,function(e,t){return new s(e,t)});return t},orify:function(e){var t=this.opify(e,function(e,t){return new o(e,t)});return t}};module.exports=l},{"./NodeValueUtils":233,"./expr/E_Equals":269,"./expr/E_LogicalAnd":277,"./expr/E_LogicalOr":279,"./expr/ExprVar":293,"./expr/NodeValue":294}],229:[function(e,module,t){var r=e("../ext/Class");var a=e("./Generator");var n=r.create(a,{initialize:function(e,t){this.prefix=e?e:"v";this.nextValue=t?t:0},next:function(){++this.nextValue;var e=this.prefix+"_"+this.nextValue;return e}});n.create=function(e){var t=new n(e,0);return t};module.exports=n},{"../ext/Class":2,"./Generator":230}],230:[function(e,module,t){var r=e("../ext/Class");var a=r.create({next:function(){throw new Error("Override me")}});module.exports=a},{"../ext/Class":2}],231:[function(e,module,t){var r=e("../ext/Class");var a=e("./Generator");var n=r.create(a,{initialize:function(e,t){this.generator=e;this.blacklist=t},next:function(){var e;do{e=this.generator.next()}while(this.blacklist.indexOf(e)!==-1);return e}});module.exports=n},{"../ext/Class":2,"./Generator":230}],232:[function(e,module,t){var r=e("../rdf/Triple");var a=e("../rdf/NodeFactory");var n=e("./NodeValueUtils");var i=e("./expr/ExprVar");var s=e("./expr/E_OneOf");var o=e("./expr/E_LangMatches");var l=e("./expr/E_LogicalOr");var c=e("./expr/E_Lang");var u=e("./expr/E_Bound");var d=e("./expr/E_Regex");var p=e("./expr/E_Str");var h=e("./ExprUtils");var v=e("./Concept");var f=e("./Relation");var g=e("./ConceptUtils");var m=e("./element/ElementTriplesBlock");var x=e("./element/ElementGroup");var _=e("./element/ElementOptional");var b=e("./element/ElementFilter");var S=e("./VarUtils");var y={createRelationPrefLabels:function(e){var t=e.getLangs();var a=e.getPredicates();var l=e.getSubjectVar();var u=e.getPredicateVar();var d=e.getObjectVar();var p=new i(l);var v=new i(u);var g=new i(d);var _=t.map(function(e){var t=new o(new c(g),n.makeString(e));return t});var S=h.orify(_);var y=new s(v,a);var C=[];C.push(new m([new r(l,u,d)]));C.push(new b(y));C.push(new b(S));var w=new x(C);var E=new f(w,l,d);return E}};module.exports=y},{"../rdf/NodeFactory":97,"../rdf/Triple":100,"./Concept":220,"./ConceptUtils":221,"./ExprUtils":228,"./NodeValueUtils":233,"./Relation":240,"./VarUtils":246,"./element/ElementFilter":251,"./element/ElementGroup":252,"./element/ElementOptional":254,"./element/ElementTriplesBlock":257,"./expr/E_Bound":267,"./expr/E_Lang":273,"./expr/E_LangMatches":274,"./expr/E_LogicalOr":279,"./expr/E_OneOf":281,"./expr/E_Regex":282,"./expr/E_Str":283,"./expr/ExprVar":293}],233:[function(e,module,t){var r=e("../rdf/NodeFactory");var a=e("./expr/NodeValue");var n=e("./expr/NodeValueNode");var i=e("../rdf/AnonIdStr");var s=e("../vocab/xsd");var o={nvNothing:new a(r.createAnon(new i("node value nothing"))),createLiteral:function(e,t){var a=r.createTypedLiteralFromValue(e,t);var i=new n(a);return i},makeString:function(e){return o.createLiteral(e,s.xstring.getUri())},makeInteger:function(e){return o.createLiteral(e,s.xint.getUri())},makeDecimal:function(e){return o.createLiteral(e,s.decimal.getUri())},makeFloat:function(e){return o.createLiteral(e,s.xfloat.getUri())},makeNode:function(e){var t=new n(e);return t}};module.exports=o},{"../rdf/AnonIdStr":93,"../rdf/NodeFactory":97,"../vocab/xsd":394,"./expr/NodeValue":294,"./expr/NodeValueNode":295}],234:[function(e,module,t){var r=e("lodash.union");var a=function(e){return typeof e==="function"};var n={getVarsMentioned:function(e){var t=e.reduce(function(e,t){var n=t.getVarsMentioned;if(!n||!a(n)){console.log("[ERROR] .getVarsMentioned not found on object ",t)}var i=t.getVarsMentioned();var s=r(e,i);return s},[]);return t}};module.exports=n},{"lodash.union":661}],235:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeUtils");var n=e("../rdf/NodeFactory");var i=e("../rdf/Triple");var s=r.create({classLabel:"jassa.sparql.Quad",initialize:function(e,t,r,a){this.graph=e||s.defaultGraphNodeGenerated;this.subject=t;this.predicate=r;this.object=a},asTriple:function(){var e=new i(this.subject,this.predicate,this.object);return e},toString:function(){return this.graph+" "+this.subject+" "+this.predicate+" "+this.object},copySubstitute:function(e){var t=new s(a.getSubstitute(this.graph,e),a.getSubstitute(this.subject,e),a.getSubstitute(this.predicate,e),a.getSubstitute(this.object,e));return t},getGraph:function(){return this.graph},getSubject:function(){return this.subject},getPredicate:function(){return this.predicate},getObject:function(){return this.object},getVarsMentioned:function(){var e=[];a.pushVar(e,this.graph);a.pushVar(e,this.subject);a.pushVar(e,this.predicate);a.pushVar(e,this.object);return e}});s.defaultGraphNodeGenerated=n.createUri("urn:x-arq:DefaultGraphNode");s.defaultGraphIri=n.createUri("urn:x-arq:DefaultGraph");s.unionGraph=n.createUri("urn:x-arq:UnionGraph");s.createFromTriple=function(e,t){e=e||s.defaultGraphNodeGenerated;var r=new s(e,t.subject,t.predicate,t.object);return r};module.exports=s},{"../ext/Class":2,"../rdf/NodeFactory":97,"../rdf/NodeUtils":98,"../rdf/Triple":100}],236:[function(e,module,t){var r=e("../util/collection/HashMap");var a=e("../rdf/Triple");var n=e("./element/ElementGroup");var i=e("./element/ElementTriplesBlock");var s=e("./element/ElementNamedGraph");var o=e("./ElementUtils");var l=e("./Quad");var c={triplesToQuads:function(e,t){var r=e.map(function(e){var r=new l.createFromTriple(t,e);return r});return r},quadsToElement:function(e){var t=this.groupByGraph(e);var r=this.groupToElement(t);return r},groupByGraph:function(e){var t=new r;e.forEach(function(e){var r=e.getGraph();var a=t.getOrCreate(r,[]);a.push(e)});return t},groupToElement:function(e){var t=e.entries();var r=t.map(function(e){var t=e.key;var r=e.val;var a=r.map(function(e){return e.asTriple()});var n=new i(a);var o=t==null||t.equals(l.defaultGraphNodeGenerated)?n:new s(t,n);return o});var a=new n(r);return a}};module.exports=c},{"../rdf/Triple":100,"../util/collection/HashMap":378,"./ElementUtils":224,"./Quad":235,"./element/ElementGroup":252,"./element/ElementNamedGraph":253,"./element/ElementTriplesBlock":257}],237:[function(e,module,t){var r=e("../ext/Class");var a=e("lodash.union");var n=e("../util/ObjectUtils");var i=e("./VarExprList");var s=e("../util/ArrayUtils");var o=e("./ElementHelpers");var l=e("./ElementUtils");var c=e("./QueryType");var u=e("./expr/ExprAggregator");var d=r.create({classLabel:"jassa.sparql.Query",initialize:function(){this.type=0;this.distinct=false;this.reduced=false;this.queryResultStar=false;this.projectVars=new i;this.groupBy=[];this.orderBy=[];this.queryPattern=null;this.constructTemplate=null;this.limit=null;this.offset=null},getAggregators:function(){var e=this.getProject().entries();var t=[];e.forEach(function(e){var r=e.expr;if(r instanceof u){var a=r.getAggregator();t.push(a)}});return t},setQuerySelectType:function(){this.type=0},isQueryResultStar:function(){return this.queryResultStar},setQueryResultStar:function(e){this.queryResultStar=e},getQueryPattern:function(){return this.queryPattern},setQueryPattern:function(e){this.queryPattern=e},getProjectVars:function(){var e=this.projectVars?this.projectVars.getVars():null;return e},setProjectVars:function(e){this.projectVars=e},getProject:function(){return this.projectVars},getGroupBy:function(){return this.groupBy},getOrderBy:function(){return this.orderBy},getLimit:function(){return this.limit},getOffset:function(){return this.offset},toStringOrderBy:function(){var e=this.orderBy&&this.orderBy.length>0?"Order By "+this.orderBy.join(" ")+" ":"";return e},toStringGroupBy:function(){var e=this.groupBy&&this.groupBy.length>0?"Group By "+this.groupBy.join(" ")+" ":"";return e},clone:function(){return this.copySubstitute(n.identity)},flatten:function(){var e=this.clone();e.queryPattern=this.queryPattern?this.queryPattern.flatten():null;return e},getVarsMentioned:function(){if(!d.warnGetVarsMentioned){console.log("[WARN] sparql.Query.getVarsMentioned(): Not implemented properly yet. Things may break!");d.warnGetVarsMentioned=true}var e=this.queryPattern.getVarsMentioned();return e},copySubstitute:function(e){var t=new d;t.type=this.type;t.distinct=this.distinct;t.reduced=this.reduced;t.queryResultStar=this.queryResultStar;t.limit=this.limit;t.offset=this.offset;t.projectVars=this.projectVars.copySubstitute(e);if(this.constructTemplate){t.constructTemplate=this.constructTemplate.copySubstitute(e)}t.orderBy=this.orderBy==null?null:this.orderBy.map(function(t){return t.copySubstitute(e)});t.groupBy=this.groupBy==null?null:this.groupBy.map(function(t){return t.copySubstitute(e)});t.queryPattern=this.queryPattern.copySubstitute(e);return t},setOptions:function(e){if(typeof e==="undefined"){return}if(typeof e.limit!=="undefined"){this.setLimit(e.limit)}if(typeof e.offset!=="undefined"){this.setOffset(e.offset)}if(typeof e.distinct!=="undefined"){this.setDistinct(e.distinct)}},setOffset:function(e){this.offset=e?e:null},setLimit:function(e){if(e===0){this.limit=0}else{this.limit=e?e:null}},isDistinct:function(){return this.distinct},setDistinct:function(e){this.distinct=e===true},isReduced:function(){return this.reduced},setReduced:function(e){this.reduced=e===true},toString:function(){switch(this.type){case c.Select:return this.toStringSelect();case c.Construct:return this.toStringConstruct()}},toStringProjection:function(){var e=this.queryResultStar?"*":this.projectVars.toString();return e},toStringLimitOffset:function(){var e="";if(this.limit!=null){e+=" Limit "+this.limit}if(this.offset!=null){e+=" Offset "+this.offset}return e},toStringSelect:function(){var e=this.distinct?"Distinct ":"";var t="Select "+e+this.toStringProjection()+" {"+this.queryPattern+"} "+this.toStringGroupBy()+this.toStringOrderBy()+this.toStringLimitOffset();return t},toStringConstruct:function(){var e="Construct "+this.constructTemplate+" {"+this.queryPattern+"}"+this.toStringOrderBy()+this.toStringLimitOffset();return e}});module.exports=d},{"../ext/Class":2,"../util/ArrayUtils":357,"../util/ObjectUtils":365,"./ElementHelpers":223,"./ElementUtils":224,"./QueryType":238,"./VarExprList":244,"./expr/ExprAggregator":285,"lodash.union":661}],238:[function(e,module,t){var r={};r.Unknown=-1;r.Select=0;r.Construct=1;r.Ask=2;r.Describe=3;module.exports=r},{}],239:[function(e,module,t){var r=e("../rdf/Triple");var a=e("./expr/ExprVar");var n=e("./expr/E_OneOf");var i=e("./expr/ExprAggregator");var s=e("./agg/AggCount");var o=e("./element/ElementFilter");var l=e("./element/ElementGroup");var c=e("./element/ElementUnion");var u=e("./element/ElementSubQuery");var d=e("./element/ElementTriplesBlock");var p=e("./Query");var h={createQueryCount:function(e,t,r,n,o,c,d){var h=e.length===1?e[0]:new l(e);var v=r?new a(r):null;var f;var g=t||c||o&&o.length>0;if(g){var m=new p;m.setQueryPattern(h);if(o){for(var x=0;x<o.length;++x){var _=o[x];m.getProject().add(_)}}if(r){m.getProject().add(r)}if(m.getProjectVars().length===0){m.setQueryResultStar(true)}m.setDistinct(c);m.setLimit(t);f=new u(m)}else{f=new l(e)}var b=new p;b.setQueryPattern(f);if(o){o.forEach(function(e){b.getProject().add(e);b.getGroupBy().push(new a(e))})}b.getProject().add(n,new i(null,new s));return b},createQueryUnionSubQueries:function(e,t){var r;if(e.length===0){r=null}else{if(e.length===1){r=e[0]}else{t=t||e[0].getProjectVars();var a=e.map(function(e){var t=new u(e);return t});var n=new c(a);r=new p;r.setQuerySelectType();t.forEach(function(e){r.getProject().add(e)});r.setQueryPattern(n)}}return r},createQueryDescribeViaSelect:function(e,t,i,s){var c=new p;c.setQuerySelectType();c.setDistinct(true);var u=new l([new d([new r(t,i,s)]),new o(new n(new a(t),e))]);c.setQueryPattern(u);c.getProject().add(t);c.getProject().add(i);c.getProject().add(s);return c}};module.exports=h},{"../rdf/Triple":100,"./Query":237,"./agg/AggCount":247,"./element/ElementFilter":251,"./element/ElementGroup":252,"./element/ElementSubQuery":256,"./element/ElementTriplesBlock":257,"./element/ElementUnion":258,"./expr/E_OneOf":281,"./expr/ExprAggregator":285,"./expr/ExprVar":293}],240:[function(e,module,t){var r=e("../ext/Class");var a=e("./ElementUtils");var n=r.create({initialize:function(e,t,r){this.element=e;this.sourceVar=t;this.targetVar=r},getElement:function(){return this.element},getSourceVar:function(){return this.sourceVar},getTargetVar:function(){return this.targetVar},isEmpty:function(){var e=a.isEmpty(this.element);return e},toString:function(){var e="("+[this.element,this.sourceVar,this.targetVar].join("; ")+")";return e}});module.exports=n},{"../ext/Class":2,"./ElementUtils":224}],241:[function(e,module,t){var r=e("./Relation");var a=e("./Query");var n=e("./expr/ExprVar");var i=e("./expr/ExprAggregator");var s=e("./element/ElementSubQuery");var o=e("./agg/AggCountVarDistinct");var l=e("./Concept");var c=e("./ConceptUtils");var u={createQueryDistinctValueCount:function(e,t){var r=new a;var s=r.getProject();s.add(e.getSourceVar());s.add(t,new i(null,new o(new n(e.getTargetVar()))));r.setQueryPattern(e.getElement());r.getGroupBy().push(new n(e.getSourceVar()));return r},createQueryRawSize:function(e,t,r,a){var n=new l(e.getElement(),e.getSourceVar());var i=c.createQueryRawSize(n,t,r,a);return i},createQueryValueCount:function(e,t,r,s){var l=new a;var c=l.getProject();c.add(e.getSourceVar());c.add(r,new i(null,new o(new n(e.getTargetVar()))));l.setQueryPattern(e.getElement());l.getGroupBy().push(new n(e.getSourceVar()))},createRelationDistinctValueCount:function(e,t){var a=this.createQueryDistinctValueCount(e,t);var n=new s(a);var i=new r(n,e.getSourceVar(),t);return i}};module.exports=u},{"./Concept":220,"./ConceptUtils":221,"./Query":237,"./Relation":240,"./agg/AggCountVarDistinct":248,"./element/ElementSubQuery":256,"./expr/ExprAggregator":285,"./expr/ExprVar":293}],242:[function(e,module,t){var r=e("../ext/Class");var a=r.create({classLabel:"jassa.sparql.SortCondition",initialize:function(e,t){this.expr=e;this.direction=t},getExpr:function(){return this.expr},getDirection:function(){return this.direction},toString:function(){var e;if(this.direction==="asc"){e="Asc("+this.expr+")"}else if(this.direction==="desc"){e="Desc("+this.expr+")"}else{e=""+this.expr}return e},copySubstitute:function(e){var t=this.expr.copySubstitute(e);var r=new a(t,this.direction);return r}});module.exports=a},{"../ext/Class":2}],243:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeFactory");var n=e("./VarUtils");var i=r.create({classLabel:"jassa.sparql.SparqlString",initialize:function(e,t){this.value=e;this.varsMentioned=t?t:[]},toString:function(){return this.value},getString:function(){return this.value},copySubstitute:function(e){var t=this.value;var r=[];var a="@@@@";var n=new RegExp(a,"g");this.varsMentioned.forEach(function(n){var i="\\?"+n.getName()+"([^\\w])?";var s=new RegExp(i,"g");var o=e(n);if(o){var l;if(o.isVariable()){l=a+o.getName();r.push(o)}else{l=o.toString()}t=t.replace(s,l+"$1")}else{r.push(n)}});t=t.replace(n,"?");return new i(t,r)},getVarsMentioned:function(){return this.varsMentioned}});i.create=function(e,t){var r;if(t!=null){r=t.map(function(e){return a.createVar(e)})}else{r=n.extractSparqlVars(e)}var s=new i(e,r);return s};module.exports=i},{"../ext/Class":2,"../rdf/NodeFactory":97,"./VarUtils":246}],244:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/collection/HashMap");var n=r.create({initialize:function(){this.vars=[];this.varToExpr=new a},contains:function(e){var t=this.vars.some(function(t){var r=t.equals(e);return r});return t},getVars:function(){return this.vars},getExpr:function(e){var t=this.varToExpr.get(e);return t},getExprMap:function(){return this.varToExpr},add:function(e,t){this.vars.push(e);if(t){this.varToExpr.put(e,t)}},addAll:function(e){this.vars.push.apply(this.vars,e)},entries:function(){var e=this;var t=this.vars.map(function(t){var r=e.varToExpr.get(t);return{v:t,expr:r}});return t},copySubstitute:function(e){var t=new n;var r=this.entries();for(var a=0;a<r.length;++a){var i=r[a];var s=e(i.v);var o=i.expr?i.expr.copySubstitute(e):null;t.add(s,o)}return t},toString:function(){var e=[];var t=this.entries();for(var r=0;r<t.length;++r){var a=t[r];var n=a.v;var i=a.expr;if(i){e.push("("+i+" As "+n+")")}else{e.push(n.toString())}}var s=e.join(" ");return s}});module.exports=n},{"../ext/Class":2,"../util/collection/HashMap":378}],245:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeFactory");var n=r.create({initialize:function(e){this.genSym=e},next:function(){var e=this.genSym.next();var t=a.createVar(e);return t}});module.exports=n},{"../ext/Class":2,"../rdf/NodeFactory":97}],246:[function(e,module,t){var r=e("./GenSym");var a=e("./GeneratorBlacklist");var n=e("./VarGen");var i=e("../rdf/NodeFactory");var s=e("../util/StringUtils");var o={g:i.createVar("g"),s:i.createVar("s"),p:i.createVar("p"),o:i.createVar("o"),_s_:i.createVar("_s_"),_p_:i.createVar("_p_"),_o_:i.createVar("_o_"),v:i.createVar("v"),w:i.createVar("w"),x:i.createVar("x"),y:i.createVar("y"),z:i.createVar("z"),a:i.createVar("a"),b:i.createVar("b"),c:i.createVar("c"),createVars:function(e){var t=e.map(function(e){return i.createVar(e)});return t},getVarName:function(e){return e.getName()},getVarNames:function(e){var t=e.map(function(e){return e.getName()});return t},createVarGen:function(e,t){if(!e){e="v"}var i=this.getVarNames(t);var s=r.create(e);var o=new a(s,i);var l=new n(o);return l},varPattern:/\?(\w+)/g,extractSparqlVars:function(e){var t=s.extractAllRegexMatches(this.varPattern,e,1);var r=[];for(var a=0;a<t.length;++a){var n=t[a];var o=i.createVar(n);r.push(o)}return r},freshVarGen:function(e,t){var i=o.getVarNames(t);var s=r.create(e);var l=new a(s,i);var c=new n(l);return c},freshVar:function(e,t){var r=this.freshVarGen(e,t);var a=r.next();return a},fnSubst:function(e){var t=function(t){var r=e.get(t);return r};return t}};module.exports=o},{"../rdf/NodeFactory":97,"../util/StringUtils":372,"./GenSym":229,"./GeneratorBlacklist":231,"./VarGen":245}],247:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(){},copySubstitute:function(e){return new a},getVarsMentioned:function(){return[]},toString:function(){return"Count(*)"}});module.exports=a},{"../../ext/Class":2}],248:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){var t=this.expr.copySubstitute(e);var r=new a(t);return r},getVarsMentioned:function(){return this.expr.getVarsMentioned()},toString:function(){var e="Count(Distinct "+this.expr+")";return e}});module.exports=a},{"../../ext/Class":2}],249:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.sparql.Element"});module.exports=a},{"../../ext/Class":2}],250:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.union");var n=e("../../rdf/NodeUtils");var i=e("./Element");var s=r.create(i,{classLabel:"jassa.sparql.ElementBind",initialize:function(e,t){this.expr=t;this.variable=e},getArgs:function(){return[]},getExpr:function(){return this.expr},getVar:function(){return this.variable},getVarsMentioned:function(){return a(this.expr.getVarsMentioned(),this.variable)},copy:function(){return new s(this.variable,this.expr)},copySubstitute:function(e){return new s(n.getSubstitute(this.variable,e),this.expr.copySubstitute(e))},flatten:function(){return this},toString:function(){return"bind("+this.expr+" as "+this.variable+")"}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeUtils":98,"./Element":249,"lodash.union":661}],251:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprUtils");var n=e("./Element");var i=r.create(n,{classLabel:"jassa.sparql.ElementFilter",initialize:function(e){if(Array.isArray(e)){throw new Error("[WARN] Array argument for filter is deprecated")}this.expr=e},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}var t=new i(this.expr);return t},copySubstitute:function(e){var t=this.expr.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},flatten:function(){return this},toString:function(){return"Filter("+this.expr+")"}});module.exports=i},{"../../ext/Class":2,"../ExprUtils":228,"./Element":249}],252:[function(e,module,t){var r=e("lodash.uniq");var a=e("../../ext/Class");var n=e("./Element");var i=e("./ElementFilter");var s=e("./ElementTriplesBlock");var o=e("../../rdf/TripleUtils");var l=e("./../ElementHelpers");var c=e("../PatternUtils");var u=a.create(n,{classLabel:"jassa.sparql.ElementGroup",initialize:function(e){this.elements=e?e:[];if(!Array.isArray(this.elements)){throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)}},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new u(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new u(t)},getVarsMentioned:function(){var e=c.getVarsMentioned(this.elements);return e},toString:function(){return l.joinElements(" . ",this.elements)},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t});var t=[];e.forEach(function(e){if(e instanceof u){t.push.apply(t,e.elements)}else{t.push(e)}});var a=[];var n=[];var l=[];t.forEach(function(e){if(e instanceof s){a.push.apply(a,e.getTriples())}else if(e instanceof i){n.push(e)}else{l.push(e)}});var c=[];if(a.length>0){var d=o.uniqTriples(a);c.push(new s(d))}c.push.apply(c,l);var p=r(n,false,function(e){return e.toString()});c.push.apply(c,p);var h=c.length===1?c[0]:new u(c);return h}});module.exports=u},{"../../ext/Class":2,"../../rdf/TripleUtils":101,"../PatternUtils":234,"./../ElementHelpers":223,"./Element":249,"./ElementFilter":251,"./ElementTriplesBlock":257,"lodash.uniq":684}],253:[function(e,module,t){var r=e("lodash.union");var a=e("../../rdf/NodeUtils");var n=e("../../ext/Class");var i=e("./Element");var s=n.create(i,{classLabel:"jassa.sparql.ElementNamedGraph",initialize:function(e,t){this.node=e;this.element=t},getArgs:function(){return[this.element]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=new s(this.node,e[0]);return t},getVarsMentioned:function(){var e=this.element.getVarsMentioned();if(this.node.isVar()){e=r(e,this.node)}return e},copySubstitute:function(e){return new s(a.getSubstitute(this.node,e),this.element.copySubstitute(e))},flatten:function(){var e=new s(this.element.flatten());return e},toString:function(){var e=this.node!=null?"Graph "+this.node+" { "+this.element+" }":"{ "+this.element+" }";return e}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeUtils":98,"./Element":249,"lodash.union":661}],254:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Element");var n=r.create(a,{classLabel:"jassa.sparql.ElementOptional",initialize:function(e){this.optionalElement=e;if(!(e instanceof a)){throw new Error(this.classLabel+" only accepts an instance of Element as the argument")}},getArgs:function(){return[this.optionalElement]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=new n(e[0]);return t},getVarsMentioned:function(){return this.optionalElement.getVarsMentioned()},copySubstitute:function(e){return new n(this.optionalElement.copySubstitute(e))},flatten:function(){var e=new n(this.optionalElement.flatten());return e},toString:function(){return"Optional {"+this.optionalElement+"}"}});module.exports=n},{"../../ext/Class":2,"./Element":249}],255:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Element");var n=e("../SparqlString");var i=r.create(a,{classLabel:"jassa.sparql.ElementString",initialize:function(e){this.sparqlString=e},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}return this},toString:function(){return this.sparqlString.getString()},copySubstitute:function(e){var t=this.sparqlString.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},flatten:function(){return this}});i.create=function(e,t){var r=n.create(e,t);var a=new i(r);return a};module.exports=i},{"../../ext/Class":2,"../SparqlString":243,"./Element":249}],256:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Element");var n=r.create(a,{classLabel:"jassa.sparql.ElementSubQuery",initialize:function(e){this.query=e},getQuery:function(){return this.query},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}var t=new n(this.query);return t},toString:function(){return"{ "+this.query+" }"},copySubstitute:function(e){return new n(this.query.copySubstitute(e))},flatten:function(){return new n(this.query.flatten())},getVarsMentioned:function(){return this.query.getVarsMentioned()}});module.exports=n},{"../../ext/Class":2,"./Element":249}],257:[function(e,module,t){var r=e("lodash.union");var a=e("../../ext/Class");var n=e("../../rdf/TripleUtils");var i=e("./Element");var s=a.create(i,{classLabel:"jassa.sparql.ElementTriplesBlock",initialize:function(e){this.triples=e?e:[]},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}var t=new s(this.triples);return t},getTriples:function(){return this.triples},addTriples:function(e){this.triples=this.triples.concat(e)},uniq:function(){this.triples=n.uniqTriples(this.triples)},copySubstitute:function(e){var t=this.triples.map(function(t){return t.copySubstitute(e)});return new s(t)},getVarsMentioned:function(){var e=[];this.triples.forEach(function(t){e=r(e,t.getVarsMentioned())});return e},flatten:function(){var e=n.uniqTriples(this.triples);var t=new s(e);return t},toString:function(){return this.triples.join(" . ")}});module.exports=s},{"../../ext/Class":2,"../../rdf/TripleUtils":101,"./Element":249,"lodash.union":661}],258:[function(e,module,t){var r=e("lodash.uniq");var a=e("../../ext/Class");var n=e("./Element");var i=e("./ElementFilter");var s=e("./ElementTriplesBlock");var o=e("../../rdf/TripleUtils");

var l=e("./../ElementHelpers");var c=e("../PatternUtils");var u=a.create(n,{classLabel:"jassa.sparql.ElementUnion",initialize:function(e){this.elements=e?e:[];if(!Array.isArray(this.elements)){throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)}},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new u(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new u(t)},getVarsMentioned:function(){var e=c.getVarsMentioned(this.elements);return e},toString:function(){var e="{"+this.elements.join(" } Union {")+"}";return e},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t});var t=new u(e);return t}});module.exports=u},{"../../ext/Class":2,"../../rdf/TripleUtils":101,"../PatternUtils":234,"./../ElementHelpers":223,"./Element":249,"./ElementFilter":251,"./ElementTriplesBlock":257,"lodash.uniq":684}],259:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createElement:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],260:[function(e,module,t){var r=e("../../ext/Class");var a=e("../element/ElementGroup");var n=e("./ElementFactory");var i=r.create(n,{initialize:function(e,t,r){this.simplify=e;this.elementFactories=t;this.forceGroup=r},isSimplify:function(){return this.simplify},getElementFactories:function(){return this.elementFactories},isForceGroup:function(){return this.forceGroup},createElement:function(){var e=this.elementFactories.map(function(e){var t=e.createElement();return t});var t=e.filter(function(e){return e!=null});var r=new a(t);if(this.simplify){r=r.flatten()}if(!this.forceGroup){var n=r.getArgs();if(n.length===1){r=n[0]}}return r}});module.exports=i},{"../../ext/Class":2,"../element/ElementGroup":252,"./ElementFactory":259}],261:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ElementFactory");var n=r.create(a,{initialize:function(e){this.element=e},createElement:function(){return this.element}});module.exports=n},{"../../ext/Class":2,"./ElementFactory":259}],262:[function(e,module,t){var r=e("../../ext/Class");var a=e("../join/JoinType");var n=e("../ElementUtils");var i=e("../element/ElementOptional");var s=e("../element/ElementGroup");var o=e("./ElementFactory");var l=r.create(o,{initialize:function(e,t,r,n,i){this.elementFactoryA=e;this.elementFactoryB=t;this.joinVarsA=r;this.joinVarsB=n;this.joinType=i?i:a.INNER_JOIN},createElement:function(){var e=this.elementFactoryA.createElement();var t=this.elementFactoryB.createElement();var r=e.getVarsMentioned();var o=t.getVarsMentioned();var l=n.createJoinVarMap(o,r,this.joinVarsB,this.joinVarsA);e=n.createRenamedElement(e,l);if(this.joinType===a.LEFT_JOIN){t=new i(t)}var c=new s([e,t]);return c}});module.exports=l},{"../../ext/Class":2,"../ElementUtils":224,"../element/ElementGroup":252,"../element/ElementOptional":254,"../join/JoinType":303,"./ElementFactory":259}],263:[function(e,module,t){var r=e("../../ext/Class");var a=e("../join/JoinType");var n=e("../join/JoinBuilder");var i=e("../element/ElementGroup");var s=e("./ElementFactory");var o=r.create(s,{initialize:function(e,t,r){this.conceptFactoryA=e;this.conceptFactoryB=t;this.joinType=r||a.INNER_JOIN},createElement:function(){var e=this.conceptFactoryA.createConcept();var t=this.conceptFactoryB.createConcept();var r=e.getElement();var a=t.getElement();if(t.isSubjectConcept()){return r}var s=[e.getVar()];var o=[t.getVar()];var l=n.create(r);var c=l.joinAny(this.joinType,s,a,o);var u=c.getJoinBuilder();var d=u.getElements();var p=new i(d);return p}});module.exports=o},{"../../ext/Class":2,"../element/ElementGroup":252,"../join/JoinBuilder":297,"../join/JoinType":303,"./ElementFactory":259}],264:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getElement:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],265:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ElementSupplier");var n=r.create(a,{initialize:function(e){this.element=e},getElement:function(){return this.element},setElement:function(e){this.element=e}});module.exports=n},{"../../ext/Class":2,"./ElementSupplier":264}],266:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ElementSupplier");var n=r.create(a,{initialize:function(e){this.elementFn=e},getElement:function(){return this.elementFn}});module.exports=n},{"../../ext/Class":2,"./ElementSupplier":264}],267:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new n(this.expr.copySubstitute(e))},getVarsMentioned:function(){var e=this.expr.getVarsMentioned();return e},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){return"bound("+this.expr+")"}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":227}],268:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.expr=e;this.node=t},copySubstitute:function(e){return new a(this.expr.copySubstitute(e),this.node.copySubstitute(e))}});module.exports=a},{"../../ext/Class":2}],269:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=r.create(a,{initialize:function($super,e,t){$super("=",e,t)},copySubstitute:function(e){return new n(this.left.copySubstitute(e),this.right.copySubstitute(e))},$copy:function(e,t){return new n(e,t)},toString:function(){return"("+this.left+" = "+this.right+")"},eval:function(){}});module.exports=n},{"../../ext/Class":2,"./ExprFunction2":289}],270:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionN");var n=r.create(a,{initialize:function($super,e,t){$super(e,t)},copy:function(e){var t=new n(this.name,e);return t},toString:function(){var e="<"+this.name+">("+this.getArgs().join(", ")+")";return e}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionN":291}],271:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=e("../ExprHelpers");var i=r.create(a,{initialize:function($super,e,t){$super(">",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" > "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":227,"./ExprFunction2":289}],272:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new n(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){return"isIri("+this.expr+")"},getVarsMentioned:function(){return this.expr.getVarsMentioned()}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":227}],273:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new n(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){return"lang("+this.expr+")"},getVarsMentioned:function(){return this.expr.getVarsMentioned()}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":227}],274:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=e("../PatternUtils");var i=r.create({initialize:function(e,t){this.left=e;this.right=t},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},getArgs:function(){return[this.left,this.right]},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"langMatches("+this.left+", "+this.right+")"},getVarsMentioned:function(){var e=n.getVarsMentioned(this.getArgs());return e}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":227,"../PatternUtils":234}],275:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=e("../ExprHelpers");var i=r.create(a,{initialize:function($super,e,t){$super("<",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" < "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":227,"./ExprFunction2":289}],276:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e,t){this.expr=e;this.pattern=t},copySubstitute:function(e){return new n(this.expr.copySubstitute(e),this.pattern)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){var e=this.pattern.replace("'","\\'");return"("+this.expr+" Like '"+e+"')"}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":227}],277:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=e("./ExprFunction2");var i=r.create(n,{initialize:function($super,e,t){$super("&&",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" && "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":227,"./ExprFunction2":289}],278:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=e("./ExprFunction1");var i=r.create(n,{initialize:function(e){this.expr=e},copySubstitute:function(e){return new i(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(i,e);return t},toString:function(){return"(!"+this.expr+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":227,"./ExprFunction1":288}],279:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=e("../ExprHelpers");var i=r.create(a,{initialize:function($super,e,t){$super("||",e,t)},copySubstitute:function(e){var t=this.left.copySubstitute(e);var r=this.right.copySubstitute(e);var a=new i(t,r);return a},getArgs:function(){return[this.left,this.right]},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" || "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":227,"./ExprFunction2":289}],280:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction0");var n=r.create(a,{initialize:function($super,e){$super("jassa.sparql.E_NotExists");this.element=e},getVarsMentioned:function(){return this.element.getVarsMentioned()},$copy:function(){return new n(this.element)},toString:function(){return"Not Exists ("+this.element+") "}});module.exports=n},{"../../ext/Class":2,"./ExprFunction0":287}],281:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=function(e,t){var r=t(e);if(!r){r=e}return r};var i=r.create(a,{initialize:function(e,t){this.lhsExpr=e;if(!Array.isArray(t)){throw new Error("nodes must be an array")}this.nodes=t},getVarsMentioned:function(){var e=this.lhsExpr.getVarsMentioned();return e},copySubstitute:function(e){var t=this.nodes.map(function(t){return n(t,e)});return new i(this.lhsExpr.copySubstitute(e),t)},toString:function(){if(!this.nodes||this.nodes.length===0){return"FALSE"}else{return"("+this.lhsExpr+" in ("+this.nodes.join(", ")+"))"}}});module.exports=i},{"../../ext/Class":2,"./Expr":284}],282:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=r.create(a,{initialize:function(e,t,r){this.expr=e;this.pattern=t;this.flags=r},copySubstitute:function(e){return new n(this.expr.copySubstitute(e),this.pattern,this.flags)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=e[0];var r=new n(t,this.pattern,this.flags);return r},toString:function(){var e=this.pattern.replace('"','\\"');var t=this.flags?', "'+this.flags.replace('"','\\"')+'"':"";return"regex("+this.expr+', "'+e+'"'+t+")"}});module.exports=n},{"../../ext/Class":2,"./Expr":284}],283:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction1");var n=r.create(a,{initialize:function($super,e){$super("str",e)},getVarsMentioned:function(){return this.subExpr.getVarsMentioned()},copy:function(e){return new n(e[0])},toString:function(){return"str("+this.subExpr+")"}});module.exports=n},{"../../ext/Class":2,"./ExprFunction1":288}],284:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({isFunction:function(){return false},isVar:function(){return false},isConstant:function(){return false},getFunction:function(){throw new Error("Override me")},getExprVar:function(){throw new Error("Override me")},getConstant:function(){throw new Error("Override me")},copySubstitute:function(){throw new Error("Override me")},copy:function(){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],285:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeUtils");var n=e("../ExprHelpers");var i=r.create({initialize:function(e,t){this.v=e;this.agg=t},copySubstitute:function(e){var t=a.getSubstitute(this.v,e);var r=this.agg.copySubstitute(e);var n=new i(t,r);return n},getAggregator:function(){return this.agg},getArgs:function(){return[]},copy:function(e){var t=new i(this.v,this.agg);return t},toString:function(){return this.agg.toString()},getVarsMentioned:function(){var e=this.agg.getVarsMentioned();return e}});module.exports=i},{"../../ext/Class":2,"../../rdf/NodeUtils":98,"../ExprHelpers":227}],286:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=r.create(a,{getName:function(){throw new Error("Implement me")},isFunction:function(){return true},getFunction:function(){return this}});module.exports=n},{"../../ext/Class":2,"./Expr":284}],287:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e){$super(e)},getArgs:function(){return[]},copy:function(e){if(e&&e.length>0){throw new Error("Invalid argument")}var t=this.$copy(e);return t}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":290}],288:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e,t){$super(e);this.subExpr=t},getArgs:function(){return[this.subExpr]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=this.$copy(e);return t},getSubExpr:function(){return this.subExpr}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":290}],289:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e,t,r){$super(e);this.left=t;this.right=r},getArgs:function(){return[this.left,this.right]},copy:function(e){if(e.length!==2){throw new Error("Invalid argument")}var t=this.$copy(e[0],e[1]);return t},getLeft:function(){return this.left},getRight:function(){return this.right}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":290}],290:[function(e,module,t){var r=e("../../ext/Class");var a=e("../PatternUtils");var n=e("./ExprFunction");var i=r.create(n,{initialize:function(e){this.name=e},copySubstitute:function(e){var t=this.getArgs();var r=t.map(function(t){var r=t.copySubstitute(e);return r});var a=this.copy(r);return a},getVarsMentioned:function(){var e=a.getVarsMentioned(this.getArgs());return e},toString:function(){var e=this.name+"("+this.getArgs().join(", ")+")";return e}});module.exports=i},{"../../ext/Class":2,"../PatternUtils":234,"./ExprFunction":286}],291:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e,t){$super(e,t);this.args=t},getArgs:function(){return this.args}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":290}],292:[function(e,module,t){var r=e("../../ext/Class");var a=e("../SparqlString");var n=e("./Expr");var i=r.create(n,{classLabel:"jassa.sparql.ExprString",initialize:function(e){this.sparqlString=e},copySubstitute:function(e){var t=this.sparqlString.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}return this},toString:function(){return"(!"+this.expr+")"},create:function(e,t){var r=new i(a.create(e,t));return r}});module.exports=i},{"../../ext/Class":2,"../SparqlString":243,"./Expr":284}],293:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=e("./../NodeValueUtils");var i=r.create(a,{classLabel:"ExprVar",initialize:function(e){this.v=e},eval:function(e){var t=e.get(this.v);var r=n.makeNode(t);return r},copySubstitute:function(e){var t=e(this.v);var r;if(t==null){r=this}else if(t.isVariable()){r=new i(t)}else{r=n.makeNode(t)}return r},getArgs:function(){return[]},copy:function(e){if(e&&e.length>0){throw new Error("Invalid argument")}var t=new i(this.v);return t},isVar:function(){return true},getExprVar:function(){return this},asVar:function(){return this.v},getVarsMentioned:function(){return[this.v]},toString:function(){return this.v.toString()}});module.exports=i},{"../../ext/Class":2,"./../NodeValueUtils":233,"./Expr":284}],294:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=e("../../vocab/xsd");var i=e("../../rdf/NodeFactory");var s=r.create(a,{initialize:function(e){this.node=e},isConstant:function(){return true},getConstant:function(){return this},getArgs:function(){return[]},getVarsMentioned:function(){return[]},asNode:function(){throw new Error("makeNode is not overridden")},copySubstitute:function(){return this},toString:function(){var e=this.node;var t;if(e.isLiteral()){if(e.getLiteralDatatypeUri()===n.xstring.getUri()){var r=e.getLiteralLexicalForm();t="'"+r+"'"}else if(e.dataType===n.xdouble.value){return parseFloat(this.node.value)}}else{t=e.toString()}return t},eval:function(e){return this}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":97,"../../vocab/xsd":394,"./Expr":284}],295:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../vocab/xsd");var n=e("./NodeValue");var i=r.create(n,{initialize:function(e){this.node=e},asNode:function(){return this.node},toString:function(){var e=this.node;var t=null;if(e.isLiteral()){if(e.getLiteralDatatypeUri()===a.xstring.getUri()){t='"'+e.getLiteralLexicalForm()+'"'}}if(t==null){t=e.toString()}return t}});module.exports=i},{"../../ext/Class":2,"../../vocab/xsd":394,"./NodeValue":294}],296:[function(e,module,t){"use strict";var r={BestLabelConfig:e("./BestLabelConfig"),Binding:e("./Binding"),BindingUtils:e("./BindingUtils"),CannedConceptUtils:e("./CannedConceptUtils"),Concept:e("./Concept"),ConceptUtils:e("./ConceptUtils"),DiffUtils:e("./DiffUtils"),ElementHelpers:e("./ElementHelpers"),ElementUtils:e("./ElementUtils"),ExprEvaluator:e("./ExprEvaluator"),ExprEvaluatorImpl:e("./ExprEvaluatorImpl"),ExprHelpers:e("./ExprHelpers"),ExprUtils:e("./ExprUtils"),GenSym:e("./GenSym"),Generator:e("./Generator"),GeneratorBlacklist:e("./GeneratorBlacklist"),LabelUtils:e("./LabelUtils"),NodeValueUtils:e("./NodeValueUtils"),PatternUtils:e("./PatternUtils"),Quad:e("./Quad"),QuadUtils:e("./QuadUtils"),Query:e("./Query"),QueryType:e("./QueryType"),QueryUtils:e("./QueryUtils"),Relation:e("./Relation"),RelationUtils:e("./RelationUtils"),SortCondition:e("./SortCondition"),SparqlString:e("./SparqlString"),VarExprList:e("./VarExprList"),VarGen:e("./VarGen"),VarUtils:e("./VarUtils"),AggCount:e("./agg/AggCount"),AggCountVarDistinct:e("./agg/AggCountVarDistinct"),Element:e("./element/Element"),ElementBind:e("./element/ElementBind"),ElementFilter:e("./element/ElementFilter"),ElementGroup:e("./element/ElementGroup"),ElementNamedGraph:e("./element/ElementNamedGraph"),ElementOptional:e("./element/ElementOptional"),ElementString:e("./element/ElementString"),ElementSubQuery:e("./element/ElementSubQuery"),ElementTriplesBlock:e("./element/ElementTriplesBlock"),ElementUnion:e("./element/ElementUnion"),ElementFactory:e("./element_factory/ElementFactory"),ElementFactoryCombine:e("./element_factory/ElementFactoryCombine"),ElementFactoryConst:e("./element_factory/ElementFactoryConst"),ElementFactoryJoin:e("./element_factory/ElementFactoryJoin"),ElementFactoryJoinConcept:e("./element_factory/ElementFactoryJoinConcept"),ElementSupplier:e("./element_supplier/ElementSupplier"),ElementSupplierConst:e("./element_supplier/ElementSupplierConst"),ElementSupplierFn:e("./element_supplier/ElementSupplierFn"),E_Bound:e("./expr/E_Bound"),E_Cast:e("./expr/E_Cast"),E_Equals:e("./expr/E_Equals"),E_Function:e("./expr/E_Function"),E_GreaterThan:e("./expr/E_GreaterThan"),E_Lang:e("./expr/E_Lang"),E_IsIri:e("./expr/E_IsIri"),E_LangMatches:e("./expr/E_LangMatches"),E_LessThan:e("./expr/E_LessThan"),E_Like:e("./expr/E_Like"),E_LogicalAnd:e("./expr/E_LogicalAnd"),E_LogicalNot:e("./expr/E_LogicalNot"),E_LogicalOr:e("./expr/E_LogicalOr"),E_NotExists:e("./expr/E_NotExists"),E_OneOf:e("./expr/E_OneOf"),E_Regex:e("./expr/E_Regex"),E_Str:e("./expr/E_Str"),Expr:e("./expr/Expr"),ExprAggregator:e("./expr/ExprAggregator"),ExprFunction:e("./expr/ExprFunction"),ExprFunction0:e("./expr/ExprFunction0"),ExprFunction1:e("./expr/ExprFunction1"),ExprFunction2:e("./expr/ExprFunction2"),ExprFunctionBase:e("./expr/ExprFunctionBase"),ExprFunctionN:e("./expr/ExprFunctionN"),ExprString:e("./expr/ExprString"),ExprVar:e("./expr/ExprVar"),NodeValue:e("./expr/NodeValue"),NodeValueNode:e("./expr/NodeValueNode"),JoinBuilder:e("./join/JoinBuilder"),JoinBuilderUtils:e("./join/JoinBuilderUtils"),JoinInfo:e("./join/JoinInfo"),JoinNode:e("./join/JoinNode"),JoinNodeInfo:e("./join/JoinNodeInfo"),JoinTargetState:e("./join/JoinTargetState"),JoinType:e("./join/JoinType"),KeywordSearchUtils:e("./search/KeywordSearchUtils"),UpdateData:e("./update/UpdateData"),UpdateDataDelete:e("./update/UpdateDataDelete"),UpdateDataInsert:e("./update/UpdateDataInsert"),UpdateModify:e("./update/UpdateModify"),UpdateWithUsing:e("./update/UpdateWithUsing")};module.exports=r},{"./BestLabelConfig":216,"./Binding":217,"./BindingUtils":218,"./CannedConceptUtils":219,"./Concept":220,"./ConceptUtils":221,"./DiffUtils":222,"./ElementHelpers":223,"./ElementUtils":224,"./ExprEvaluator":225,"./ExprEvaluatorImpl":226,"./ExprHelpers":227,"./ExprUtils":228,"./GenSym":229,"./Generator":230,"./GeneratorBlacklist":231,"./LabelUtils":232,"./NodeValueUtils":233,"./PatternUtils":234,"./Quad":235,"./QuadUtils":236,"./Query":237,"./QueryType":238,"./QueryUtils":239,"./Relation":240,"./RelationUtils":241,"./SortCondition":242,"./SparqlString":243,"./VarExprList":244,"./VarGen":245,"./VarUtils":246,"./agg/AggCount":247,"./agg/AggCountVarDistinct":248,"./element/Element":249,"./element/ElementBind":250,"./element/ElementFilter":251,"./element/ElementGroup":252,"./element/ElementNamedGraph":253,"./element/ElementOptional":254,"./element/ElementString":255,"./element/ElementSubQuery":256,"./element/ElementTriplesBlock":257,"./element/ElementUnion":258,"./element_factory/ElementFactory":259,"./element_factory/ElementFactoryCombine":260,"./element_factory/ElementFactoryConst":261,"./element_factory/ElementFactoryJoin":262,"./element_factory/ElementFactoryJoinConcept":263,"./element_supplier/ElementSupplier":264,"./element_supplier/ElementSupplierConst":265,"./element_supplier/ElementSupplierFn":266,"./expr/E_Bound":267,"./expr/E_Cast":268,"./expr/E_Equals":269,"./expr/E_Function":270,"./expr/E_GreaterThan":271,"./expr/E_IsIri":272,"./expr/E_Lang":273,"./expr/E_LangMatches":274,"./expr/E_LessThan":275,"./expr/E_Like":276,"./expr/E_LogicalAnd":277,"./expr/E_LogicalNot":278,"./expr/E_LogicalOr":279,"./expr/E_NotExists":280,"./expr/E_OneOf":281,"./expr/E_Regex":282,"./expr/E_Str":283,"./expr/Expr":284,"./expr/ExprAggregator":285,"./expr/ExprFunction":286,"./expr/ExprFunction0":287,"./expr/ExprFunction1":288,"./expr/ExprFunction2":289,"./expr/ExprFunctionBase":290,"./expr/ExprFunctionN":291,"./expr/ExprString":292,"./expr/ExprVar":293,"./expr/NodeValue":294,"./expr/NodeValueNode":295,"./join/JoinBuilder":297,"./join/JoinBuilderUtils":298,"./join/JoinInfo":299,"./join/JoinNode":300,"./join/JoinNodeInfo":301,"./join/JoinTargetState":302,"./join/JoinType":303,"./search/KeywordSearchUtils":304,"./update/UpdateData":305,"./update/UpdateDataDelete":306,"./update/UpdateDataInsert":307,"./update/UpdateModify":308,"./update/UpdateWithUsing":309}],297:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashBidiMap");var n=e("../GenSym");var i=e("../GeneratorBlacklist");var s=e("../ElementUtils");var o=e("../element/ElementGroup");var l=e("../element/ElementOptional");var c=e("../VarUtils");var u=e("./JoinNode");var d=e("./JoinTargetState");var p=e("./JoinInfo");var h=e("./JoinType");var v=r.create({initialize:function(e,t,r,s){if(e==null){console.log("[Error] Root element must not be null");throw new Error("Bailing out")}this.usedVarNames=[];this.usedVars=[];this.aliasGenerator=new n("a");this.varNameGenerator=new i(new n("v"),this.usedVarNames);this.aliasToState={};this.rootAlias=r?r:this.aliasGenerator.next();if(s==null){s=[]}var o=this.createTargetState(this.rootAlias,new a,s,e,t,s);this.aliasToState[this.rootAlias]=o;this.rootNode=o.getJoinNode()},getRootNode:function(){return this.rootNode},getJoinNode:function(e){var t=this.aliasToState[e];var r=t?t.getJoinNode():null;return r},getState:function(e){return this.aliasToState[e]},getElement:function(e){var t=this.aliasToState[e];var r=t?t.getElement():null;return r},addVars:function(e){var t=this;e.forEach(function(e){var r=e.getName();var a=t.usedVarNames.indexOf(r)!==-1;if(!a){t.usedVarNames.push(r);t.usedVars.push(e)}})},createTargetState:function(e,t,r,a,n,i){var o=r.map(function(e){var r=t.get(e);return r});var l=s.createJoinVarMap(this.usedVars,n,o,i,this.varNameGenerator);var c=null;if(a!=null){c=s.createRenamedElement(a,l)}var p=l.getInverse().keys();this.addVars(p);var h=new u(this,e,i);var v=new d(l,h,c,p);return v},addJoin:function(e,t,r,a,n,i){var s=this.aliasToState[t];var o=s.getVarMap();if(!i){i=this.aliasGenerator.next()}var l=a.getVarsMentioned();var c=this.createTargetState(i,o,r,a,l,n);var u=new p(i,e);s.getJoinInfos().push(u);this.aliasToState[i]=c;var d=c.getJoinNode();return d},getElementsRec:function(e){var t=[];var r=e.getElement();if(r!=null){t.push(r)}var a=e.getJoinNodeInfos();var n=this;a.forEach(function(e){var r=e.getJoinNode();var a=n.getElementsRec(r);var i=new o(a);var s=e.getJoinType();switch(s){case h.LEFT_JOIN:i=new l(i);break;case h.INNER_JOIN:break;default:throw new Error("[ERROR] Unsupported join type: "+s)}t.push(i)});return t},getElements:function(){var e=this.getRootNode();var t=this.getElementsRec(e);return t},getAliasToVarMap:function(){var e={};this.aliasToState.forEach(function(t,r){e[r]=t.varMap});return e},create:function(e,t,r){var a=e.getVarsMentioned();var n=new v(e,a,t,r);var i=n.getRootNode();return i},createWithEmptyRoot:function(e,t){var r=c.varNamesToNodes(e);var a=new v(null,r,t);var n=a.getRootNode();return n}});module.exports=v},{"../../ext/Class":2,"../../util/collection/HashBidiMap":377,"../ElementUtils":224,"../GenSym":229,"../GeneratorBlacklist":231,"../VarUtils":246,"../element/ElementGroup":252,"../element/ElementOptional":254,"./JoinInfo":299,"./JoinNode":300,"./JoinTargetState":302,"./JoinType":303}],298:[function(e,module,t){var r={getChildren:function(e){return e.getJoinNodes()}};module.exports=r},{}],299:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.alias=e;this.joinType=t},getAlias:function(){return this.alias},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.alias}});module.exports=a},{"../../ext/Class":2}],300:[function(e,module,t){var r=e("../../ext/Class");var a=e("./JoinNodeInfo");var n=e("./JoinType");var i=r.create({initialize:function(e,t,r){this.joinBuilder=e;this.alias=t;this.targetJoinVars=r},getJoinBuilder:function(){return this.joinBuilder},getJoinVars:function(){return this.targetJoinVars},getElement:function(){return this.joinBuilder.getElement(this.alias)},getVarMap:function(){return this.joinBuilder.getVarMap(this.alias)},getJoinNodeInfos:function(){var e=this.joinBuilder.getState(this.alias);var t=this;var r=e.getJoinInfos().map(function(e){var r=e.getAlias();var n=t.joinBuilder.getJoinNode(r);var i=new a(n,e.getJoinType());return i});return r},joinAny:function(e,t,r,a,n){var i=this.joinBuilder.addJoin(e,this.alias,t,r,a,n);return i},join:function(e,t,r,a){var i=this.joinAny(n.INNER_JOIN,e,t,r,a);return i},leftJoin:function(e,t,r,a){var i=this.joinAny(n.LEFT_JOIN,e,t,r,a);return i},joinTree:function(){},leftJoinTree:function(){},joinTreeAny:function(){}});module.exports=i},{"../../ext/Class":2,"./JoinNodeInfo":301,"./JoinType":303}],301:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.joinNode=e;this.joinType=t},getJoinNode:function(){return this.joinNode},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.joinNode}});module.exports=a},{"../../ext/Class":2}],302:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t,r,a){this.varMap=e;this.joinNode=t;this.element=r;this.elementVars=a;this.joinInfos=[]},getVarMap:function(){return this.varMap},getJoinNode:function(){return this.joinNode},getElement:function(){return this.element},getElementVars:function(){return this.elementVars},getJoinInfos:function(){return this.joinInfos}});module.exports=a},{"../../ext/Class":2}],303:[function(e,module,t){var r={INNER_JOIN:"inner_join",LEFT_JOIN:"left_join"};module.exports=r},{}],304:[function(e,module,t){var r=e("../expr/ExprVar");var a=e("../expr/E_LangMatches");var n=e("../expr/E_LogicalOr");var i=e("../expr/E_Lang");var s=e("../expr/E_Bound");var o=e("../expr/E_Regex");var l=e("../expr/E_Str");var c=e("../expr/E_Function");var u=e("../Concept");var d=e("../element/ElementGroup");var p=e("../element/ElementOptional");var h=e("../element/ElementFilter");var v=e("../NodeValueUtils");var f=e("../LabelUtils");var g={createConceptRegex:function(e,t,r){var a=r?this.createConceptRegexIncludeSubject(e,t):this.createConceptRegexLabelOnly(e,t);return a},createConceptRegexLabelOnly:function(e,t){var a;if(t){var n=new d([e.getElement(),new h(new o(new l(new r(e.getTargetVar())),t,"i"))]);a=new u(n,e.getSourceVar())}else{a=null}return a},createConceptRegexIncludeSubject:function(e,t){var a;if(t){var i=e.getElement();var c=e.getSourceVar();var v=e.getTargetVar();var f=new r(c);var g=new r(v);var m=new o(new l(g),t,"i");var x=new n(new o(new l(f),t,"i"),new s(g));var _=new d([new p(new d([i,new h(m)])),new h(x)]);a=new u(_,c)}else{a=null}return a},createConceptBifContains:function(e,t){var a;if(t){var n=e.getElement();var i=e.getTargetVar();var s=new r(i);var o=v.makeString(t);var l=new d([e.getElement(),new h(new c("<bif:contains>",[s,o]))]);var p=e.getSourceVar();a=new u(l,p)}else{a=null}return a}};module.exports=g},{"../Concept":220,"../LabelUtils":232,"../NodeValueUtils":233,"../element/ElementFilter":251,"../element/ElementGroup":252,"../element/ElementOptional":254,"../expr/E_Bound":267,"../expr/E_Function":270,"../expr/E_Lang":273,"../expr/E_LangMatches":274,"../expr/E_LogicalOr":279,"../expr/E_Regex":282,"../expr/E_Str":283,"../expr/ExprVar":293}],305:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/QuadUtils");var n=r.create({initialize:function(e){this.quads=e||[]},toString:function($super){var e=""+a.quadsToElement(this.quads);return e}});module.exports=n},{"../../ext/Class":2,"../../sparql/QuadUtils":236
}],306:[function(e,module,t){var r=e("../../ext/Class");var a=e("./UpdateData");var n=r.create(a,{initialize:function($super,e){$super(e)},toString:function($super){var e="Delete Data { "+$super()+" }";return e}});module.exports=n},{"../../ext/Class":2,"./UpdateData":305}],307:[function(e,module,t){var r=e("../../ext/Class");var a=e("./UpdateData");var n=r.create(a,{initialize:function($super,e){$super(e)},toString:function($super){var e="Insert Data { "+$super()+" }";return e}});module.exports=n},{"../../ext/Class":2,"./UpdateData":305}],308:[function(e,module,t){var r=e("../../ext/Class");var a=e("./UpdateWithUsing");var n=e("../QuadUtils");var i=r.create(a,{initialize:function($super,e,t,r,a,n,i){$super(e,t,r);this.deleteQuads=a||[];this.insertQuads=n||[];this.whereElement=i||null},getDeleteQuads:function(){return this.deleteQuads},getInsertQuads:function(){return this.insertQuads},getWhereElement:function(){return this.whereElement},hasDeleteQuads:function(){var e=this.deleteQuads&&this.deleteQuads.length>0;return e},hasInsertQuads:function(){var e=this.insertQuads&&this.insertQuads.length>0;return e},toString:function($super){var e=this.hasInsertQuads();var t=this.hasDeleteQuads();var r=$super();if(t){r+="Delete { "+n.quadsToElement(this.getDeleteQuads())+" } "}if(e){r+="Insert { "+n.quadsToElement(this.getInsertQuads())+" } "}r+="Where { "+this.getWhereElement()+" } ";return r}});module.exports=i},{"../../ext/Class":2,"../QuadUtils":236,"./UpdateWithUsing":309}],309:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t,r){this.withNode=e;this.usingNodes=t;this.usingNamedNodes=r},toString:function(){var e="";if(this.withNode!=null){e+="WITH "+this.withNode+" "}if(this.usingNodes!=null){e+="USING "+this.usingNodes.join(" ")+" "}if(this.usingNamedNodes!=null){e+="USING NAMED"+this.usingNamedNodes.join(" ")+" "}return e}});module.exports=a},{"../../ext/Class":2}],310:[function(e,module,t){var r=e("./acc/AccRef");var a=e("./acc/AccTransform");var n={unwrapAccTransform:function(e){var t=e;while(t instanceof a){t=t.getSubAcc()}return t},getRefs:function(e,t){t=t||[];if(Array.isArray(e)){e.forEach(function(e){n.getRefs(e,t)})}else if(e instanceof r){t.push(e)}else{var a=e.getSubAccs();n.getRefs(a,t)}return t}};module.exports=n},{"./acc/AccRef":334,"./acc/AccTransform":335}],311:[function(e,module,t){var r=e("./agg/AggRef");var a=e("./agg/AggTransform");var n={unwrapAggTransform:function(e){var t=e;while(t instanceof a){t=t.getSubAgg()}return t},getRefs:function(e,t){t=t||[];if(e instanceof r){t.push(e)}else{var a=e.getSubAggs();a.forEach(function(e){n.getRefs(e,t)})}return t}};module.exports=n},{"./agg/AggRef":346,"./agg/AggTransform":347}],312:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/ObjectUtils");var n=r.create({classLabel:"jassa.sponate.AttrPath",initialize:function(e){this.steps=e?e:[]},getSteps:function(){return this.steps},toString:function(){return this.steps.join(".")},slice:function(e,t){var r=this.steps.slice(e,t);return r},first:function(){return this.steps[0]},at:function(e){return this.steps[e]},isEmpty:function(){return this.steps.length===0},size:function(){return this.steps.length},concat:function(e){var t=this.steps.concat(e.getSteps());var r=new n(t);return r},find:function(e){var t=e;var r=this.steps;for(var n=0;n<r.length;++n){var i=r[n];if(!a.isObject(t)){throw new Error("[ERROR] Cannot access attribute of non-object",this.steps,e,t)}t=t[i]}return t}});n.parse=function(e){var t=e.split(".");return new n(t)};module.exports=n},{"../ext/Class":2,"../util/ObjectUtils":365}],313:[function(e,module,t){var r=e("../ext/Class");var a=e("./MappedConceptSource");var n=e("./MappedConcept");var i=e("./AggUtils");var s=e("../util/ObjectUtils");var o=e("./RefSpec");var l=e("./binding_mapper/BindingMapperExpr");var c=e("../sparql/expr/ExprVar");var u=e("./agg/AggMap");var d=e("lodash.foreach");var p=r.create({initialize:function(e){this.prefixMapping=e;this.nameToSource={}},getSource:function(e){return this.nameToSource[e]},createResolvedContext:function(){var e=new p(this.prefixMapping);d(this.nameToSource,function(t,r){var i=t.getMappedConcept();var s=i.getAgg();var o=s.clone();var l=new n(i.getConcept(),o);var c=new a(l,t.getSparqlService());e.addSource(r,c)});d(e.nameToSource,function(t,r){e.processRefs(r,t)});return e},processRefs:function(e,t){var r=t.getMappedConcept();var d=t.getSparqlService();var p=r.getAgg();var h=i.getRefs(p);var v=this;h.forEach(function(t){var p=t.getRefSpec();var h=p.getTarget();if(s.isFunction(h)){h=h()}if(h instanceof n){var f=h.getAgg();var g=f.getSubAgg();var m=g.getAttrToAgg();var x=i.unwrapAggTransform(m.id);var _=x.getBindingMapper();f=new u(_,g);var b=new n(h.getConcept(),f);var S=0;var y;while(v.getSource(y=e+"_fn_"+S)){++S}t.setRefSpec(new o(y,p.getAttr()));var C=t.getBindingMapper();if(!C){var w=r.getConcept();var E=w.getVar();C=new l(new c(E));t.setBindingMapper(C)}var k=new a(b,d);v.nameToSource[y]=k}else if(!s.isString(h)){throw new Error("Unknown target type: ",h)}})},addSource:function(e,t){this.nameToSource[e]=t}});module.exports=p},{"../ext/Class":2,"../sparql/expr/ExprVar":293,"../util/ObjectUtils":365,"./AggUtils":311,"./MappedConcept":317,"./MappedConceptSource":318,"./RefSpec":322,"./agg/AggMap":343,"./binding_mapper/BindingMapperExpr":350,"lodash.foreach":534}],314:[function(e,module,t){var r=e("../ext/Class");var a=e("./ListServiceUtils");var n=e("./AccUtils");var i=e("../util/collection/HashMap");var s=e("../util/collection/HashSet");var o=e("./LookupServiceUtils");var a=e("./ListServiceUtils");var l=e("../service/list_service/ListServiceTransformItems");var c=e("../util/ObjectUtils");var u=e("../util/Slot");var d=e("lodash.foreach");var p=e("../util/shared");var h=p.Promise;var v=e("../util/PromiseUtils");var f={indexAccMap:function(e,t,r){var a=e[t];if(!a){a=new i;e[t]=a}a.putMap(r)},mergeRefs:function(e,t){t.forEach(function(t){var r=t.getRefSpec();var a=r.getTarget();var n=t.getRefValue();var i;if(!(a in e)){i=new s;e[a]=i}else{i=e[a]}i.add(n)})},filterRefs:function(e,t){var r=[];t.forEach(function(t){var a=t.getRefSpec();var n=a.getTarget();var i=t.getRefValue();var s=e[n];var o=s&&s.containsKey(i);if(!o){r.push(t)}});return r},buildObjs:function(e){var t={};d(e,function(e,r){var a=new i;t[r]=a;e.entries().forEach(function(e){var t=e.key;var r=e.val;var n=r.getValue();a.put(t,n)})});return t},buildLazySlots:function(e,t,r,a){r=r||[];d(e,function(e,n){e.values().forEach(function(e){var n=f.buildSlots(e,t,null,a);n=n.reverse();r.push.apply(r,n)})});return r},buildSlots:function(e,t,r,a){r=r||[];if(Array.isArray(e)){e.forEach(function(n,i){var s=n&&n[t];if(s){var o=new u(e,i,n[t]);r.push(o)}if(!s||a){f.buildSlots(n,t,r,a)}})}else if(c.isObject(e)){d(e,function(n,i){var s=n&&n[t];if(s){var o=new u(e,i,n[t]);r.push(o)}if(!s||a){f.buildSlots(n,t,r,a)}})}return r},createLookupService:function(e,t){var r=e.getSource(t);if(!r){throw new Error("No source mapping with name "+t+" found")}var a=r.getSparqlService();var n=r.getMappedConcept();var i=o.createLookupServiceMappedConceptAcc(a,n);return i},createListService:function(e,t,r){var n=e.getSource(t);if(!n){throw new Error("No source mapping with name "+t+" found")}var i=n.getSparqlService();var s=n.getMappedConcept();if(s.getConcept().getVar().getName()==="rowId"){throw new Error("rowId cannot be used as the root ID of a MappedConcept")}var o=a.createListServiceAcc(i,s,r);var c=this;var u=new l(o,function(r){var a=c.collectState(e,t,r).spread(function(e,r,a){var n=c.postProcess(r,t,e);return n});return a});return u},collectState:function(e,t,r){var a={};var s=r.map(function(e){return e.key});var o=new i;var l={};r.forEach(function(e){var t=e.val;var r=t.getState();o.putMap(r);var a=n.getRefs(t);f.mergeRefs(l,a)});a[t]=o;var c=this.resolveRefs(e,l,a).then(function(e){var t=[s,a,e];return t});return c},postProcess:function(e,t,r){var a=[];d(e,function(e){var t=e.values();var r=n.getRefs(t);a.push.apply(a,r)});a.forEach(function(e){var t=e.getRefSpec();var r=t.getTarget();var a=e.getRefValue();e.setBaseValue({_ref:{targetName:r,refValue:a,attr:t.getAttr()}})});var i=f.buildObjs(e);var s=f.buildSlots(i,"_ref");var o=f.buildLazySlots(i,"_lazy",null,true);s.forEach(function(e){var t=e.getMeta();var r=i[t.targetName];var a=r.get(t.refValue);var n=t.attr;a=a!=null&&n!=null?a[n]:a;e.setValue(a)});o.forEach(function(e){var t=e.getMeta();var r=t.fn;var a=t.value;var n=r(a);e.setValue(n)});var l=r.map(function(e){var r=i[t];var a=r.get(e);var n={key:e,val:a};return n});return l},exec:function(e,t){var r=t.getSourceName();var a=this.createListService(e,r,t.isLeftJoin());var n=t.getLimit();var i=t.getOffset();var s=t.getFilterConcept();var o=a.fetchItems(s,n,i);return o},resolveRefs:function(e,t,r){var a=this;var i=Object.keys(t);var s=i.map(function(i){var s=t[i];var o=a.createLookupService(e,i);var l=s.entries();var c=o.lookup(l).then(function(t){var s=t.values();f.indexAccMap(r,i,t);var o=n.getRefs(s);var l=f.filterRefs(r,o);var c={};f.mergeRefs(c,l);var u=a.resolveRefs(e,c,r);return u});return c});return v.all(s)}};module.exports=f},{"../ext/Class":2,"../service/list_service/ListServiceTransformItems":161,"../util/ObjectUtils":365,"../util/PromiseUtils":367,"../util/Slot":371,"../util/collection/HashMap":378,"../util/collection/HashSet":379,"../util/shared":387,"./AccUtils":310,"./ListServiceUtils":315,"./LookupServiceUtils":316,"lodash.foreach":534}],315:[function(e,module,t){var r=e("../sparql/Concept");var a=e("../sparql/ConceptUtils");var n=e("./ServiceUtils");var i=e("../service/list_service/ListServiceSparqlQuery");var s=e("../service/list_service/ListServiceTransformItem");var o=e("../rdf/NodeFactory");var l=e("../sparql/BindingUtils");var c={createListServiceAcc:function(e,t,r){r=!!r;var n=t.getConcept();var c=a.createQueryList(n);var u=t.getAgg();var d=o.createVar("rowId");c.setQueryResultStar(true);var p=new i(e,c,n.getVar(),r);var h=new s(p,function(e){var t=e.key;var r=e.val.getBindings();r=l.cloneBindings(r);l.addRowIds(r,d);var a=u.createAcc();r.forEach(function(e){a.accumulate(e)});var n={key:t,val:a};return n});return h},createListServiceMappedConcept:function(e,t,r){var a=this.createListServiceAcc(e,t,r);var n=new s(a,function(e){var t=e.map(function(e){var t=e.val.getValue();return t});return t});return n}};module.exports=c},{"../rdf/NodeFactory":97,"../service/list_service/ListServiceSparqlQuery":157,"../service/list_service/ListServiceTransformItem":160,"../sparql/BindingUtils":218,"../sparql/Concept":220,"../sparql/ConceptUtils":221,"./ServiceUtils":324}],316:[function(e,module,t){var r=e("../sparql/ConceptUtils");var a=e("../service/lookup_service/LookupServiceSparqlQuery");var n=e("../service/lookup_service/LookupServiceTransform");var i=e("../service/lookup_service/LookupServiceFallback");var s=e("../service/lookup_service/LookupServiceFn");var o=e("../service/lookup_service/LookupServiceIdFilter");var l=e("../service/lookup_service/LookupServiceChunker");var c=e("../sparql/BestLabelConfig");var u=e("../util/ObjectUtils");var d=e("./MappedConceptUtils");var p=e("../rdf/NodeUtils");var h=e("../util/UriUtils");var v=e("../util/collection/HashMap");var f=e("./AccUtils");var g={createTransformAccResultSetPart:function(e){var t=function(t){var r=e.createAcc();var a=t.getBindings();a.forEach(function(e){r.accumulate(e)});return r};return t},createLookupServiceNodeLabels:function(e,t,r,a){var n=new c(r,a);var v=d.createMappedConceptBestLabel(n);var f=this.createLookupServiceMappedConcept(e,v);if(t){f=new l(f,t)}f=new o(f,function(e){var t=e&&e.isUri();if(t){var r=e.getUri();t=h.isValidUri(r)}return t});var g=new s(function(e){var t=p.toPrettyString(e);return t});f=new i(f,g,function(e,t){var r=e==null||e.displayLabel==null;return r},function(e,t){var r={};if(t!=null){u.extend(r,t)}r.displayLabel=e;return r});return f},createLookupServiceMappedConcept:function(e,t){var r=this.createLookupServiceMappedConceptAcc(e,t);var a=new n(r,function(e){var t=e.getValue();return t});return a},createLookupServiceMappedConceptAcc:function(e,t){var i=t.getConcept();var s=r.createQueryList(i);var o=i.getVar();s.setQueryResultStar(true);var l=t.getAgg();var c=l.getSubAgg();var u=new a(e,s,o);var d=this.createTransformAccResultSetPart(c);var p=new n(u,d);return p}};module.exports=g},{"../rdf/NodeUtils":98,"../service/lookup_service/LookupServiceChunker":165,"../service/lookup_service/LookupServiceFallback":168,"../service/lookup_service/LookupServiceFn":169,"../service/lookup_service/LookupServiceIdFilter":171,"../service/lookup_service/LookupServiceSparqlQuery":176,"../service/lookup_service/LookupServiceTransform":178,"../sparql/BestLabelConfig":216,"../sparql/ConceptUtils":221,"../util/ObjectUtils":365,"../util/UriUtils":374,"../util/collection/HashMap":378,"./AccUtils":310,"./MappedConceptUtils":319}],317:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.concept=e;this.agg=t},getConcept:function(){return this.concept},getAgg:function(){return this.agg}});module.exports=a},{"../ext/Class":2}],318:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.mappedConcept=e;this.sparqlService=t},getMappedConcept:function(){return this.mappedConcept},getSparqlService:function(){return this.sparqlService}});module.exports=a},{"../ext/Class":2}],319:[function(e,module,t){var r=e("../rdf/NodeUtils");var a=e("../sparql/LabelUtils");var n=e("../sparql/VarUtils");var i=e("../sparql/expr/ExprVar");var s=e("./agg/AggArray");var o=e("./agg/AggLiteral");var l=e("./agg/AggMap");var c=e("./agg/AggObject");var u=e("./agg/AggBestLabel");var d=e("./agg/AggTransform");var p=e("./binding_mapper/BindingMapperExpr");var h=e("./binding_mapper/BindingMapperTransform");var v=e("../sparql/Concept");var f=e("./MappedConcept");var r=e("../rdf/NodeUtils");var g={createMappedConceptBestLabel:function(e){var t=a.createRelationPrefLabels(e);var n=t.getSourceVar();var h=t.getTargetVar();var g=new c({id:new d(new o(new p(new i(n))),r.getValue),displayLabel:new d(new u(e),r.getValue),hiddenLabels:new s(new d(new o(new p(new i(h))),r.getValue))});g=new l(new p(new i(n)),g);var m=new v(t.getElement(),t.getSourceVar());var x=new f(m,g);return x}};module.exports=g},{"../rdf/NodeUtils":98,"../sparql/Concept":220,"../sparql/LabelUtils":232,"../sparql/VarUtils":246,"../sparql/expr/ExprVar":293,"./MappedConcept":317,"./agg/AggArray":338,"./agg/AggBestLabel":340,"./agg/AggLiteral":342,"./agg/AggMap":343,"./agg/AggObject":344,"./agg/AggTransform":347,"./binding_mapper/BindingMapperExpr":350,"./binding_mapper/BindingMapperTransform":352}],320:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.mapName=e;this.tableRef=t},getMapName:function(){return this.mapName},getTableRef:function(){return this.tableRef},getAttrPath:function(){return this.attrPath},toString:function(){var e=this.patternRef+"/"+this.tableRef+"@"+this.attrPath;return e}});module.exports=a},{"../ext/Class":2}],321:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r,a,n,i,s){this.sourceName=e;this.criteria=t;this.limit=r;this.offset=a;this.filterConcept=n;this._isLeftJoin=i;this.nodes=s},shallowClone:function(){var e=new a(this.sourceName,this.criteria,this.limit,this.offset,this.filterConcept,this._isLeftJoin,this.nodes);return e},getSourceName:function(){return this.sourceName},setSourceName:function(e){this.sourceName=e},getCriteria:function(){return this.criteria},setCriteria:function(e){this.criteria=e},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e},getFilterConcept:function(){return this.filterConcept},setFilterConcept:function(e){this.filterConcept=e},isLeftJoin:function(){return this._isLeftJoin},setLeftJoin:function(e){this._isLeftJoin=e},getNodes:function(){return this.nodes},setNodes:function(e){this.nodes=e}});module.exports=a},{"../ext/Class":2}],322:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.target=e;this.attr=t},getTarget:function(){return this.target},getAttr:function(){return this.attr}});module.exports=a},{"../ext/Class":2}],323:[function(e,module,t){var r=e("../rdf/NodeUtils");var a=e("../util/collection/HashMap");var n=e("./MappedConceptUtils");var i=e("../sparql/BestLabelConfig");var s=e("./facade/StoreFacade");var o=e("../service/lookup_service/LookupServiceListServiceSparql");var l={createRexLookupService:function(e){var t=new s(e,{});var l=new i;var c=n.createMappedConceptBestLabel(l);var u=function(e){var t={};var a=e.entries();a.forEach(function(e){var a=e.key;var n=e.val.predicates.entries();var i=t[a]={};n.forEach(function(e){var t=e.key;var a=i[t]={};var n=e.val.values.entries();n.forEach(function(e){var t=e.val.id;var n=r.toTalisRdfJson(t);a.push(n)})})})};var d=function(e){var t=new a;e.forEach(function(e){t.put(e.id,e)});return t};var p=function(e){var t=e.map(function(e){var t=r.toTalisRdfJson(e.id);return t});return t};var h=function(e){var t={};var n=new a;e.forEach(function(e){var a=e.s+" "+e.p;var i=t[a]=t[a]||0;++t[a];var s=r.toTalisRdfJson(e.o);var o=Object.keys(s);o.forEach(function(t){var r={s:e.s,p:e.p,i:i,c:t};var a=s[t];n.put(r,a)})});return n};t.addMap({name:"spo",template:[{id:"?s",data:[[{id:"?rowId",s:"?s",p:"?p",o:"?o | node"}],h]}],from:"?s ?p ?o"});var v=t.spo.getListService();var f=new o(v);return f}};module.exports=l},{"../rdf/NodeUtils":98,"../service/lookup_service/LookupServiceListServiceSparql":173,"../sparql/BestLabelConfig":216,"../util/collection/HashMap":378,"./MappedConceptUtils":319,"./facade/StoreFacade":355}],324:[function(e,module,t){var r={processResultSet:function(e,t){while(e.hasNext()){var r=e.next();t.accumulate(r)}var a=t.getValue();return a},processBindings:function(e,t){e.forEach(function(e){t.accumulate(e)});var r=t.getValue();return r},execAgg:function(e,t,r){var a=r.createAcc();var n=this.execAcc(e,t,a);return n},execAcc:function(e,t,a){var n=e.createQueryExecution(t);var i=n.execSelect().then(function(e){var t=r.processResultSet(e,a);return t});return i}};module.exports=r},{}],325:[function(e,module,t){var r=e("../util/ObjectUtils");var a=e("../util/PrefixUtils");var n=e("../sparql/element/Element");var i=e("../sparql/element/ElementString");var s=e("./TemplateParser");var o=e("./ListServiceUtils");var l=e("./agg/AggMap");var c=e("./MappedConcept");var u=e("../sparql/expr/ExprVar");var d=e("../sparql/Concept");var p=e("./AggUtils");var h={parseSpec:function(e,t,r){var a=e.template;var n=a instanceof c?a:this.parseSpecCore(e,t,r);return n},parseSpecCore:function(e,t,o){o=o||new s;var h=e.template;var v=e.from;var f;if(r.isString(v)){var g=v;if(t!=null){var m=t.getNsPrefixMap();g=a.expandPrefixes(m,g)}f=new i.create(g)}else if(v instanceof n){f=v}else if(r.isFunction(v)){throw new Error("ElementFactories / functions in the FROM part not supported anymore")}else{throw new Error("Unknown argument type for FROM attribute",v)}var x=o.parseAgg(h);var _=p.unwrapAggTransform(x);var b;if(_ instanceof l){var S=_.getKeyBindingMapper();b=S.getExpr()}else{throw new Error("Could not obtain ID attribute from aggregator")}var y;if(b instanceof u){y=b.asVar()}else{throw new Error("Variable required for ID attribute, got an expression instead: "+b)}var C=new d(f,y);var w=new c(C,_);return w}};module.exports=h},{"../sparql/Concept":220,"../sparql/element/Element":249,"../sparql/element/ElementString":255,"../sparql/expr/ExprVar":293,"../util/ObjectUtils":365,"../util/PrefixUtils":366,"./AggUtils":311,"./ListServiceUtils":315,"./MappedConcept":317,"./TemplateParser":326,"./agg/AggMap":343}],326:[function(e,module,t){var r=e("lodash.uniq");var a=e("../ext/Class");var n=e("../util/ObjectUtils");var i=e("../rdf/NodeUtils");var s=e("../rdf/node/Node");var o=e("../rdf/node/Var");var l=e("../rdf/NodeFactory");var c=e("../sparql/expr/Expr");var u=e("../sparql/expr/ExprVar");var d=e("../sparql/expr/NodeValue");var p=e("../sparql/NodeValueUtils");var h=e("./agg/AggLiteral");var v=e("./agg/AggObjectCustom");var f=e("./agg/AggMap");var g=e("./agg/AggMap");var m=e("./agg/AggRef");var x=e("./agg/AggArray");var _=e("./agg/AggArrayStatic");var b=e("./agg/AggTransform");var S=e("./agg/AggTransformLazy");var y=e("./AggUtils");var C=e("./RefSpec");var w=e("./binding_mapper/BindingMapperExpr");var E=a.create({initialize:function(){this.attrs={id:"id",ref:"$ref"}},parseArray:function(e){var t=this;var r=e[e.length-1];var a=n.isFunction(r);var i;if(a){i=this.parseArrayTransform(e)}else{var s=e.some(function(e){var t=e.id||e.$ref||n.isString(e);return t});i=!s?this.parseArrayStatic(e):this.parseArrayDynamic(e)}return i},parseArrayTransform:function(e){var t=e.length-1;var r=e[t];var a=this;var n=e.slice(0,t);var i=n.map(function(e){var t=a.parseAgg(e);return t});var s=new _(i);var o=new S(s,function(e){var t=r.apply(null,e);return t});return o},parseArrayStatic:function(e){var t=this;var r=e.map(function(e){var r=t.parseAgg(e);return r});var a=new _(r);return a},parseArrayDynamic:function(e){if(e.length!==1){throw new Error("[ERROR] Arrays must have exactly one element that is either a string or an object",e)}var t=e[0];var r;if(n.isString(t)){r=this.parseArrayLiteral(t)}else if(Array.isArray(t)){if(t.length===1){var a=t[0];r=this.parseArrayConfig(a);var i=Object.keys(a);var s=i.length===2&&i.indexOf("id")>=0&&i.indexOf("$value")>=0;r=new b(r,function(e){var t={};e.forEach(function(e){t[e.id]=s?e.$value:e});return t})}else{throw new Error("Not implemented")}}else if(n.isObject(t)){r=this.parseArrayConfig(t)}else{throw new Error("Bailing out")}return r},parseArrayConfig:function(e){var t=this.attrs.id;var r=this.attrs.ref;var a=e[t]!=null;var n=e[r]!=null;if(a&&n){throw new Error("[ERROR] id and ref are mutually exclusive")}var i;if(a){var s=this.parseObject(e);var o=s.getAttrToAgg();var l=o[t];l=y.unwrapAggTransform(l);var c=l.getBindingMapper();i=new f(c,s);i=new b(i,function(e){return e.values()})}else if(n){i=this.parseArrayRef(e)}else{throw new Error("[ERROR] Not implemented")}return i},parseArrayRef:function(e){var t=e[this.attrs.ref];var r=this.parseRef(t);var a=r.getBindingMapper();var n=new f(a,r);n=new b(n,function(e){return e.values()});return n},parseArrayLiteral:function(e){var t=this.parseLiteral(e);var a=new b(new x(t),function(e){return r(e,function(e){return""+e})});return a},parseLiteral:function(e){var t=e.split("|").map(function(e){return e.trim()});var r=t[0];var a=this.parseExprString(r);var n=new h(new w(a));var s=t[1];if(s!=="node"){n=new b(n,i.getValue)}return n},parseObject:function(e){var t=e[this.attrs.ref];var r=t!=null?this.parseRef(t):this.parseObjectData(e);return r},parseRef:function(e){var t=e.target;if(!t){throw new Error("Missing target attribute in ref: ",e)}var r=new C(t,e.attr);var a=e.on;var n=null;if(a){var i=this.parseExprString(a);n=new w(i)}var s=new m(n,r);return s},parseObjectData:function(e){var t={};var r=this;var a=Object.keys(e);a.forEach(function(a){var n=e[a];var i=r.parseAgg(n);if(i==null){throw new Error("Failed to create aggregator for attribute ["+a+"] in "+JSON.stringify(e))}t[a]=i});var n=new v(t,this);return n},parseAgg:function(e){var t;if(n.isString(e)){t=this.parseLiteral(e)}else if(Array.isArray(e)){t=this.parseArray(e)}else if(n.isFunction(e)){throw new Error("Implement this case: "+JSON.stringify(e))}else if(e instanceof s&&e.isVariable()){var r=new u(e);t=new h(new w(r))}else if(e instanceof c){t=new h(new w(e))}else if(n.isObject(e)){var a=e.createAgg;if(a){t=new g(e)}else{t=this.parseObject(e)}}else{console.log("[ERROR] Unknown item type: ",e);throw new Error("Unkown item type")}return t},parseExpr:function(e){var t;if(n.isString(e)){t=this.parseExprString(e)}else if(e instanceof s&&e.isVariable()){t=new u(e)}else{throw new Error("Could not parse expression: ",e)}return t},parseExprString:function(e){var t;var r=e.charAt(0);if(r==="?"){var a=e.substr(1);var n=l.createVar(a);t=new u(n)}else if(r==='"'||r==="'"){t=e.substring(1,e.length-1);t=p.makeString(t)}else{t=p.makeString(e)}return t}});module.exports=E},{"../ext/Class":2,"../rdf/NodeFactory":97,"../rdf/NodeUtils":98,"../rdf/node/Node":110,"../rdf/node/Var":117,"../sparql/NodeValueUtils":233,"../sparql/expr/Expr":284,"../sparql/expr/ExprVar":293,"../sparql/expr/NodeValue":294,"../util/ObjectUtils":365,"./AggUtils":311,"./RefSpec":322,"./agg/AggArray":338,"./agg/AggArrayStatic":339,"./agg/AggLiteral":342,"./agg/AggMap":343,"./agg/AggObjectCustom":345,"./agg/AggRef":346,"./agg/AggTransform":347,"./agg/AggTransformLazy":348,"./binding_mapper/BindingMapperExpr":350,"lodash.uniq":684}],327:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.sponate.acc",accumulate:function(e){throw new Error("override me")},getValue:function(){throw new Error("override me")},getSubAccs:function(){throw new Error("override me")}});module.exports=a},{"../../ext/Class":2}],328:[function(e,module,t){var r=e("../../ext/Class");var a=e("../binding_mapper/BindingMapperIndex");var n=e("./Acc");var i=r.create(n,{classLabel:"jassa.sponate.AccFn",initialize:function(e,t){var r=this;this.i=0;this.subAgg=e;this.indexBindingMapper=t||new a;this.subAccs=[]},accumulate:function(e){var t=this.indexBindingMapper.map(e,this.i++);if(t!=null){var r=this.subAccs[t];if(!r){r=this.subAgg.createAcc();this.subAccs[t]=r}r.accumulate(e)}},getValue:function(){var e=[];this.subAccs.forEach(function(t,r){var a=t.getValue();if(a!=null){e[r]=a}});return e},getSubAccs:function(){var e=[];this.subAccs.forEach(function(t){if(t){e.push(t)}});return e}});module.exports=i},{"../../ext/Class":2,"../binding_mapper/BindingMapperIndex":351,"./Acc":327}],329:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Acc");var n=r.create(a,{classLabel:"jassa.sponate.AccArrayStatic",initialize:function(e){this.subAccs=e},accumulate:function(e){this.subAccs.forEach(function(t){t.accumulate(e)})},getValue:function(){var e=this.subAccs.map(function(e){var t=e.getValue();return t});return e},getSubAccs:function(){return this.subAccs}});module.exports=n},{"../../ext/Class":2,"./Acc":327}],330:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeUtils");var n=e("./Acc");var i=function(e,t){var r=[];var a=Math.max(e.length,t.length);for(var n=0;n<a;++n){var i=[e[n],t[n]];r.push(i)}return r};var s=function(e,t,r){var a=false;var n=Math.max(e.length,t.length);for(var i=0;i<n;++i){var s=e[i];var o=t[i];if(r(s,o)){if(r(o,s)){continue}a=true;break}else{if(!r(o,s)){continue}a=false;break}}return a};var o=function(e,t){return e<t};var l=function(e,t){var r=-1;for(var a=0;a<e.length;++a){var n=e[a];if(n.equals(t)){r=a;break}}return r};var c=r.create(n,{initialize:function(e){this.bestLiteralConfig=e;this.bestMatchNode=null;this.bestMatchScore=[1e3,1e3]},getSubAccs:function(){return[]},accumulate:function(e){var t=this.bestLiteralConfig;var r=e.get(t.getSubjectVar());var n=e.get(t.getPredicateVar());var i=e.get(t.getObjectVar());if(this.bestMatchNode==null){this.bestMatchNode=r}var c=a.getLang(i);var u=l(t.getPredicates(),n);var d=t.getLangs().indexOf(c);var p=[u,d];var h=p.every(function(e){return e>=0});if(h){var v=s(p,this.bestMatchScore,o);if(v===true){this.bestMatchScore=p;this.bestMatchNode=i}}},getValue:function(){return this.bestMatchNode}});module.exports=c},{"../../ext/Class":2,"../../rdf/NodeUtils":98,"./Acc":327}],331:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ObjectUtils");var n=e("./Acc");var i=r.create(n,{classLabel:"jassa.sponate.AccLiteral",initialize:function(e){this.bindingMapper=e;this.value=null},accumulate:function(e){var t=this.bindingMapper.map(e,0);if(false){if(this.value!=null&&!a.isEqual(this.value,t)){console.log("[WARN] Reassigned value: Original",this.value," New: ",t)}}this.value=t},getValue:function(){return this.value},getSubAccs:function(){return[]}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":365,"./Acc":327}],332:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashMap");var n=e("./Acc");var i=r.create(n,{classLabel:"jassa.sponate.AccMap",initialize:function(e,t){this.keyBindingMapper=e;this.subAgg=t;this.state=new a},getState:function(){return this.state},accumulate:function(e){var t=this.keyBindingMapper.map(e,0);if(t!=null){var r=this.state.get(t);if(!r){r=this.subAgg.createAcc();this.state.put(t,r)}r.accumulate(e)}},getValue:function(){var e=new a;var t=this.state.entries();t.forEach(function(t){var r=t.key;var a=t.val;var n=a.getValue();e.put(r,n)});return e},getSubAccs:function(){var e=this.state.entries();var t=e.map(function(e){return e.val});return t}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":378,"./Acc":327}],333:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("./Acc");var i=a.create(n,{classLabel:"jassa.sponate.AccObject",initialize:function(e){this.attrToAcc=e},accumulate:function(e){r(this.attrToAcc,function(t){t.accumulate(e)})},getValue:function(){var e={};r(this.attrToAcc,function(t,r){var a=t.getValue();e[r]=a});return e},getSubAccs:function(){var e=[];r(this.attrToAcc,function(t){e.push(t)});return e}});module.exports=i},{"../../ext/Class":2,"./Acc":327,"lodash.foreach":534}],334:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Acc");var n=r.create(a,{classLabel:"jassa.sponate.AccRef",initialize:function(e,t){this.bindingMapper=e;this.refSpec=t;this.refValue=null;this.baseValue=null},getSubAccs:function(){return[]},getRefSpec:function(){return this.refSpec},getRefValue:function(){return this.refValue},accumulate:function(e){var t=this.bindingMapper.map(e,0);this.refValue=t},getBaseValue:function(){return this.baseValue},setBaseValue:function(e){this.baseValue=e},getValue:function(){return this.baseValue}});module.exports=n},{"../../ext/Class":2,"./Acc":327}],335:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Acc");var n=r.create(a,{classLabel:"jassa.sponate.AccTransform",initialize:function(e,t){this.subAcc=e;this.fn=t},getSubAcc:function(){return this.subAcc},accumulate:function(e){this.subAcc.accumulate(e)},getValue:function(){var e=this.subAcc.getValue();var t=this.fn(e);return t},getSubAccs:function(){return[this.subAcc]}});module.exports=n},{"../../ext/Class":2,"./Acc":327}],336:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Acc");var n=r.create(a,{classLabel:"jassa.sponate.AccTransformLazy",initialize:function(e,t){this.subAcc=e;this.fn=t},getSubAcc:function(){return this.subAcc},accumulate:function(e){this.subAcc.accumulate(e)},getValue:function(){var e={_lazy:{value:this.subAcc.getValue(),fn:this.fn}};return e},getSubAccs:function(){return[this.subAcc]}});module.exports=n},{"../../ext/Class":2,"./Acc":327}],337:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.sponate.Agg",createAcc:function(){throw new Error("override me")},getSubAggs:function(){throw new Error("override me")},clone:function(){throw new Error("override me")}});module.exports=a},{"../../ext/Class":2}],338:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccArray");var i=r.create(a,{classLabel:"jassa.sponate.AggArray",initialize:function(e,t){this.subAgg=e;this.indexBindingMapper=t},clone:function(){var e=new i(this.subAgg.clone(),this.indexBindingMapper);return e},createAcc:function(){var e=new n(this.subAgg,this.indexBindingMapper);return e},getSubAgg:function(){return this.subAgg},getIndexBindingMapper:function(){return this.indexBindingMapper},getSubAggs:function(){return[this.subAgg]},toString:function(){return this.expr.toString()}});module.exports=i},{"../../ext/Class":2,"../acc/AccArray":328,"./Agg":337}],339:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccArrayStatic");var i=r.create(a,{
classLabel:"jassa.sponate.AggArrayStatic",initialize:function(e){this.subAggs=e},clone:function(){var e=this.subAggs.map(function(e){return e.clone()});var t=new i(e);return t},createAcc:function(){var e=this.subAggs.map(function(e){return e.createAcc()});var t=new n(e);return t},getSubAggs:function(){return this.subAggs},toString:function(){return"implement me"}});module.exports=i},{"../../ext/Class":2,"../acc/AccArrayStatic":329,"./Agg":337}],340:[function(e,module,t){var r=e("lodash.union");var a=e("../../ext/Class");var n=e("./Agg");var i=e("../acc/AccBestLabel");var s=a.create(n,{initialize:function(e){this.bestLiteralConfig=e},clone:function(){var e=new s(this.bestLiteralConfig);return e},createAcc:function(){var e=new i(this.bestLiteralConfig);return e},getSubAggs:function(){return[]},toString:function(){var e="bestLabel["+this.bestLiteralConfig+"]";return e}});module.exports=s},{"../../ext/Class":2,"../acc/AccBestLabel":330,"./Agg":337,"lodash.union":661}],341:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=r.create(a,{classLabel:"jassa.sponate.AggCustomAgg",initialize:function(e){this.fnAcc=e},getSubAggs:function(){return[]}});module.exports=n},{"../../ext/Class":2,"./Agg":337}],342:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccLiteral");var i=r.create(a,{classLabel:"jassa.sponate.AggLiteral",initialize:function(e){this.bindingMapper=e},clone:function(){var e=new i(this.bindingMapper);return e},getBindingMapper:function(){return this.bindingMapper},getSubAggs:function(){return[]},createAcc:function(){var e=new n(this.bindingMapper);return e}});module.exports=i},{"../../ext/Class":2,"../acc/AccLiteral":331,"./Agg":337}],343:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccMap");var i=r.create(a,{classLabel:"jassa.sponate.AggMap",initialize:function(e,t){this.keyBindingMapper=e;this.subAgg=t},clone:function(){var e=new i(this.keyBindingMapper,this.subAgg.clone());return e},getKeyBindingMapper:function(){return this.keyBindingMapper},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=new n(this.keyBindingMapper,this.subAgg);return e},toString:function(){var e="["+this.keyExpr+" -> "+this.subAgg+"]";return e}});module.exports=i},{"../../ext/Class":2,"../acc/AccMap":332,"./Agg":337}],344:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("./Agg");var i=e("../acc/AccObject");var s=a.create(n,{classLabel:"jassa.sponate.AggObject",initialize:function(e){this.attrToAgg=e},clone:function(){var e={};r(this.attrToAgg,function(t,r){e[r]=t.clone()});var t=new s(e);return t},getAttrToAgg:function(){return this.attrToAgg},createAcc:function(){var e={};r(this.attrToAgg,function(t,r){var a=t.createAcc();e[r]=a});var t=new i(e);return t},getSubAggs:function(){var e=[];r(this.attrToAgg,function(t){e.push(t)});return e},toString:function(){var e=[];r(this.attrToAgg,function(t,r){e.push('"'+r+'": '+t)});var t="{"+e.join(",")+"}";return t}});module.exports=s},{"../../ext/Class":2,"../acc/AccObject":333,"./Agg":337,"lodash.foreach":534}],345:[function(e,module,t){var r=e("../../ext/Class");var a=e("./AggObject");var n=r.create(a,{initialize:function($super,e,t){$super(e);this.templateParser=t},add:function(e,t){var r=this.templateParser.parseAgg(t);this.attrToAgg[e]=r;return r},del:function(e){delete this.attrToAgg[e]}});module.exports=n},{"../../ext/Class":2,"./AggObject":344}],346:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeFactory");var n=e("../acc/AccRef");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggRef",initialize:function(e,t){this.bindingMapper=e;this.refSpec=t},clone:function(){var e=new s(this.bindingMapper,this.refSpec);return e},getBindingMapper:function(){return this.bindingMapper},setBindingMapper:function(e){this.bindingMapper=e},getRefSpec:function(){return this.refSpec},setRefSpec:function(e){this.refSpec=e},getSubAggs:function(){return[]},createAcc:function(){var e=new n(this.bindingMapper,this.refSpec);return e},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":97,"../acc/AccRef":334,"./Agg":337}],347:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeFactory");var n=e("../acc/AccTransform");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggTransform",initialize:function(e,t){this.subAgg=e;this.fn=t},clone:function(){var e=new s(this.subAgg.clone(),this.fn);return e},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=this.subAgg.createAcc();var t=new n(e,this.fn);return t},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":97,"../acc/AccTransform":335,"./Agg":337}],348:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeFactory");var n=e("../acc/AccTransformLazy");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggTransformLazy",initialize:function(e,t){this.subAgg=e;this.fn=t},clone:function(){var e=new s(this.subAgg.clone(),this.fn);return e},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=this.subAgg.createAcc();var t=new n(e,this.fn);return t},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":97,"../acc/AccTransformLazy":336,"./Agg":337}],349:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({map:function(e,t){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],350:[function(e,module,t){var r=e("../../ext/Class");var a=e("./BindingMapper");var n=r.create(a,{initialize:function(e){this.expr=e},getExpr:function(){return this.expr},map:function(e,t){var r=this.expr.eval(e);var a=r.asNode();return a}});module.exports=n},{"../../ext/Class":2,"./BindingMapper":349}],351:[function(e,module,t){var r=e("../../ext/Class");var a=e("./BindingMapper");var n=r.create(a,{map:function(e,t){return t}});module.exports=n},{"../../ext/Class":2,"./BindingMapper":349}],352:[function(e,module,t){var r=e("../../ext/Class");var a=e("./BindingMapper");var n=r.create(a,{initialize:function(e,t){this.subBindingMapper=e;this.fn=t},map:function(e,t){var r=this.subBindingMapper.map(e,t);var a=this.fn(r);return a}});module.exports=n},{"../../ext/Class":2,"./BindingMapper":349}],353:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryFlow");var n=r.create({initialize:function(e,t){this.storeFacade=e;this.mappingName=t},getAggObject:function(){var e=this.getSource().getMappedConcept().getAgg().getSubAgg();return e},getSource:function(){var e=this.storeFacade.getContext().getSource(this.mappingName);return e},getListService:function(){var e=this.storeFacade.getListService(this.mappingName);return e},find:function(e){if(e){throw new Error("Criteria queries are currently not supported anymore - Sorry :/")}var t=new a(this.storeFacade,this.mappingName,e);return t}});module.exports=n},{"../../ext/Class":2,"./QueryFlow":354}],354:[function(e,module,t){var r=e("../../ext/Class");var a=e("../Query");var n=e("../Engine");var i=r.create({initialize:function(e,t,r){this.storeFacade=e;this.query=new a;this.query.setSourceName(t);this.query.setCriteria(r)},concept:function(e,t){this.query.setFilterConcept(e);this.query.setLeftJoin(t);return this},nodes:function(e){this.query.setNodes(e);return this},skip:function(e){this.query.setOffset(e);return this},limit:function(e){this.query.setLimit(e);return this},offset:function(e){this.query.setOffset(e);return this},list:function(){var e=this.storeFacade.getContext().createResolvedContext();var t=n.exec(e,this.query);return t},count:function(){}});module.exports=i},{"../../ext/Class":2,"../Engine":314,"../Query":321}],355:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/PrefixMappingImpl");var n=e("../../util/ObjectUtils");var i=e("../Context");var s=e("../Engine");var o=e("../SponateUtils");var l=e("../MappedConceptSource");var c=e("../MappedConcept");var u=e("../../service/list_service/ListServiceFn");var d=e("./CollectionFacade");var n=e("../../util/ObjectUtils");var p=e("lodash.foreach");var h=r.create({initialize:function(e,t,r){this.defaultSparqlService=e;this.prefixMapping=t?t instanceof a?t:new a(t):new a;this.context=r||new i(t);this.nameToMappedConcept={}},getContext:function(){return this.context},addTemplate:function(e){var t=e.name;if(!t){throw new Error("Sponate spec must have a name")}var r=o.parseSpec(e,this.prefixMapping);this.nameToMappedConcept[t]=r},addMap:function(e){var t=e.name;if(!t){throw new Error("Sponate spec must have a name")}var r=e.service||this.defaultSparqlService;if(!r){throw new Error("No service provided for ",e)}var a;if(n.isString(e.template)){var i=e.template;var s=this.nameToMappedConcept[i];if(!s){throw new Error("No template with name "+i+" registered.")}a=new c(s.getConcept(),s.getAgg().clone())}else{a=o.parseSpec(e,this.prefixMapping)}var u=new l(a,r);this.context.addSource(t,u);this[t]=new d(this,t);return u},getListService:function(e,t){var r=this;var a=function(){var a=r.context.createResolvedContext();var n=s.createListService(a,e,t);return n};var n=new u(a);return n}});module.exports=h},{"../../ext/Class":2,"../../rdf/PrefixMappingImpl":99,"../../service/list_service/ListServiceFn":154,"../../util/ObjectUtils":365,"../Context":313,"../Engine":314,"../MappedConcept":317,"../MappedConceptSource":318,"../SponateUtils":325,"./CollectionFacade":353,"lodash.foreach":534}],356:[function(e,module,t){"use strict";var r={AccUtils:e("./AccUtils"),AggUtils:e("./AggUtils"),AttrPath:e("./AttrPath"),Context:e("./Context"),Engine:e("./Engine"),ListServiceUtils:e("./ListServiceUtils"),LookupServiceUtils:e("./LookupServiceUtils"),MappedConcept:e("./MappedConcept"),MappedConceptSource:e("./MappedConceptSource"),MappedConceptUtils:e("./MappedConceptUtils"),MappingRef:e("./MappingRef"),Query:e("./Query"),RefSpec:e("./RefSpec"),ServiceUtils:e("./ServiceUtils"),SponateUtils:e("./SponateUtils"),TemplateParser:e("./TemplateParser"),Acc:e("./acc/Acc"),AccArray:e("./acc/AccArray"),AccArrayStatic:e("./acc/AccArrayStatic"),AccBestLabel:e("./acc/AccBestLabel"),AccLiteral:e("./acc/AccLiteral"),AccMap:e("./acc/AccMap"),AccObject:e("./acc/AccObject"),AccRef:e("./acc/AccRef"),AccTransform:e("./acc/AccTransform"),AccTransformLazy:e("./acc/AccTransformLazy"),Agg:e("./agg/Agg"),AggArray:e("./agg/AggArray"),AggArrayStatic:e("./agg/AggArrayStatic"),AggBestLabel:e("./agg/AggBestLabel"),AggCustomAcc:e("./agg/AggCustomAcc"),AggLiteral:e("./agg/AggLiteral"),AggMap:e("./agg/AggMap"),AggObject:e("./agg/AggObject"),AggObjectCustom:e("./agg/AggObjectCustom"),AggRef:e("./agg/AggRef"),AggTransform:e("./agg/AggTransform"),AggTransformLazy:e("./agg/AggTransformLazy"),BindingMapper:e("./binding_mapper/BindingMapper"),BindingMapperExpr:e("./binding_mapper/BindingMapperExpr"),BindingMapperIndex:e("./binding_mapper/BindingMapperIndex"),BindingMapperTransform:e("./binding_mapper/BindingMapperTransform"),CollectionFacade:e("./facade/CollectionFacade"),QueryFlow:e("./facade/QueryFlow"),StoreFacade:e("./facade/StoreFacade"),RexUtils:e("./RexUtils")};module.exports=r},{"./AccUtils":310,"./AggUtils":311,"./AttrPath":312,"./Context":313,"./Engine":314,"./ListServiceUtils":315,"./LookupServiceUtils":316,"./MappedConcept":317,"./MappedConceptSource":318,"./MappedConceptUtils":319,"./MappingRef":320,"./Query":321,"./RefSpec":322,"./RexUtils":323,"./ServiceUtils":324,"./SponateUtils":325,"./TemplateParser":326,"./acc/Acc":327,"./acc/AccArray":328,"./acc/AccArrayStatic":329,"./acc/AccBestLabel":330,"./acc/AccLiteral":331,"./acc/AccMap":332,"./acc/AccObject":333,"./acc/AccRef":334,"./acc/AccTransform":335,"./acc/AccTransformLazy":336,"./agg/Agg":337,"./agg/AggArray":338,"./agg/AggArrayStatic":339,"./agg/AggBestLabel":340,"./agg/AggCustomAcc":341,"./agg/AggLiteral":342,"./agg/AggMap":343,"./agg/AggObject":344,"./agg/AggObjectCustom":345,"./agg/AggRef":346,"./agg/AggTransform":347,"./agg/AggTransformLazy":348,"./binding_mapper/BindingMapper":349,"./binding_mapper/BindingMapperExpr":350,"./binding_mapper/BindingMapperIndex":351,"./binding_mapper/BindingMapperTransform":352,"./facade/CollectionFacade":353,"./facade/QueryFlow":354,"./facade/StoreFacade":355}],357:[function(e,module,t){var r=e("./ObjectUtils");var a={indexesOf:function(e,t,a){a=a||r.isEqual;var n=[];e.forEach(function(e,r){var i=a(t,e);if(i){n.push(r)}});return n},firstIndexOf:function(e,t,r){var n=a.indexesOf(e,t,r);var i=n.length>0?n[0]:-1;return i},contains:function(e,t,r){var n=a.indexesOf(e,t,r);var i=n.length>0;return i},addAll:function(e,t){return e.push.apply(e,t)},chunk:function(e,t){var r=[];for(var a=0;a<e.length;a+=t){var n=e.slice(a,a+t);r.push(n)}return r},clear:function(e){while(e.length>0){e.pop()}},replace:function(e,t){this.clear(e);if(t){e.push.apply(e,t)}},filter:function(e,t){var r=e.filter(t);this.replace(e,r);return e},find:function(e,t){var r=null;for(var a=0;a<e.length;++a){var n=e[a];var i=t(n);if(i){r=n;break}}return r},indexOf:function(e,t,a){a=a||r.isEqual;var n=-1;for(var i=0;i<e.length;++i){var s=e[i];if(a(t,s)){n=i;break}}return n},grep:function(e,t){var r=[];e.forEach(function(e,a){var n=t(e,a);if(n){r.push(a)}});return r},copyWithoutIndexes:function(e,t){var r={};t.forEach(function(e){r[e]=true});var a=[];for(var n=0;n<e.length;++n){var i=r[n];if(!i){a.push(e[n])}}return a},removeItemStrict:function(e,t){var r=e.indexOf(t);if(r>-1){this.removeIndexes(e,[r])}return e},removeIndexes:function(e,t){var r=this.copyWithoutIndexes(e,t);this.replace(e,r);return e},removeByGrep:function(e,t){var r=this.grep(e,t);this.removeIndexes(e,r)},removeItem:function(e,t,r){var n=a.firstIndexOf(e,t,r);if(n>=0){e.splice(n,1)}}};module.exports=a},{"./ObjectUtils":365}],358:[function(e,module,t){var r=e("./shared");var a=r.Promise;var n={extractArgs:function(e){var t=Array.prototype.slice.call(e,0);var r=t.length>1?t:t[0];return r},cacheExecution:function(e,t,r){var i=e[t];if(i==null){var s=false;var o=function(){s=true;delete e[t]};var l=r();var c=l.then(function(){o();var e=n.extractArgs(arguments);return e},function(e){o();throw e});i={promise:c,clients:{},nextId:0};if(!s){e[t]=i}}var u=i.promise;var d=i.clients;var p="client_"+i.nextId++;d[p]=true;var h=function(){if(p!=null){var e=d[p];if(!e){console.log("[ASSERTION ERROR] unknown client "+p)}delete d[p]}};var v=new a(function(e,t){u.then(function(t){h();e(t)},function(e){h();t(e)})}).cancellable().catch(function(e){h();p=null;if(Object.keys(d).length===0){u.cancel()}throw e});return v},cacheResult:function(e,t,r){var i;var s=e.getItem(t);if(s){i=a.resolve(s)}else{i=r().then(function(){var r=n.extractArgs(arguments);e.setItem(t,r);return r})}return i},cacheExecutionAndResult:function(e,t,r,a){var i=n.cacheResult(t,r,function(){var t=n.cacheExecution(e,r,function(){var e=a();return e});return t});return i}};module.exports=n},{"./shared":387}],359:[function(e,module,t){var r={indexPredicates:function(e,t,r,a){r=r||{};var n=e.id.toString();var i=r[n];if(!i){i=n}var s=t[i];if(!s){s={id:i,valueToMember:{},sources:[]};t[i]=s}var o=s.sources;if(o.indexOf(a)<0){o.push(a)}var l=s.valueToMember;e.values.forEach(function(t){var r=t.id.toString();var n=l[r];if(!n){n={predicate:e.id,value:t,sources:[]};l[r]=n}var i=n.sources;if(i.indexOf(a)<0){i.push(a)}})},clusterLink:function(e,t,a){a=a||{};if(e.source){e.source.predicates.forEach(function(e){r.indexPredicates(e,a,t,"source")})}if(e.target){e.target.predicates.forEach(function(e){r.indexPredicates(e,a,t,"target")})}return a}};module.exports=r},{}],360:[function(e,module,t){var r={toggleItem:function(e,t){var r;if(e.contains(t)){e.remove(t);r=false}else{e.add(t);r=true}return r}};module.exports=r},{}],361:[function(e,module,t){var r={pnLocalPattern:/^[^\s/]+$/,isValidSparqlLocalName:function(e){var t=this.pnLocalPattern.exec(e);var r=!!t;return r}};module.exports=r},{}],362:[function(e,module,t){var r={tryEval:function(e,t){var r;try{r=e()}catch(a){r=t}return r}};module.exports=r},{}],363:[function(e,module,t){var r=e("../ext/JSONCanonical");var a=function(e){var t=typeof e;return t==="function"||t==="object"&&Boolean(e)};var n={stringifyCyclic:function(e,t){var n=[];var i=r.stringify(e,function(e,r){if(a(r)){if(n.indexOf(r)>=0){return}n.push(r);if(t){r=t(e,r)}}return r});return i}};module.exports=n},{"../ext/JSONCanonical":3}],364:[function(e,module,t){var r=e("./collection/HashMap");var a=e("./ObjectUtils");var n={indexBy:function(e,t,n){n=n||new r;var i;if(a.isString(t)){i=function(e){return e[t]}}else{i=t}e.forEach(function(e){var t=i(e);n.put(t,e)});return n},retainKeys:function(e,t){var r=e.keys();r.forEach(function(r){var a=t.contains(r);if(!a){e.remove(r)}})}};module.exports=n},{"./ObjectUtils":365,"./collection/HashMap":378}],365:[function(e,module,t){var r=e("lodash.isequal");var a=e("./JsonUtils");var n={alloc:function(e,t){var r;if(!(t in e)){r=e[t]=1}else{r=++e[t]}return r},free:function(e,t){var r;if(t in e){r=--e[t];if(r<=0){delete e[t]}}else{r=null}return r},isEmptyString:function(e){var t=e==null||e.length===0||e.trim()==="";return t},isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&Boolean(e)},isFunction:function(e){return typeof e==="function"},isString:function(e){return Object.prototype.toString.call(e)==="[object String]"},extend:function(e,t){for(var r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}return e},clear:function(e){for(var t in e){if(e.hasOwnProperty(t)){delete e[t]}}},isEqual:function(e,t){var a;if(e&&e.equals){a=e.equals(t)}else if(t&&t.equals){a=t.equals(e)}else{a=r(e,t)}return a},defaultHashCode:function(e){var t;if(e&&e.hashCode){t=e.hashCode()}else{t=n.hashCode(e)}return t},identity:function(e){return e},hashCodeStr:function(e){var t=0,r=e&&e.length?e.length:0;for(var a=0;a<r;a++){t=t*31+e.charCodeAt(a);t=t&t}return t},hashCode:function(e,t){var r=a.stringifyCyclic(e,function(e,r){var a=null;if(!t&&n.isObject(r)){var i=null;n.defaultHashFnNames.some(function(e){if(n.isFunction(r[e])){i=e;return true}});var s=r[i];if(i&&s&&n.isFunction(s)){a=s.apply(r)}else{a=r}}else{a=r}if(t){t=false}return a});return r}};n.defaultHashFnNames=["hashCode"];module.exports=n},{"./JsonUtils":363,"lodash.isequal":564}],366:[function(e,module,t){var r=e("./StringUtils");var a={prefixPattern:/((\w|-)+):(\w|-)+/g,extractPrefixes:function(e){var t=r.extractAllRegexMatches(this.prefixPattern,e,1);return t},expandPrefixes:function(e,t){var r=this.extractPrefixes(t);var a=t;r.forEach(function(t){var r=e[t];if(r){var n=new RegExp(t+":(\\w+)","g");a=a.replace(n,"<"+r+"$1>")}});return a},permissiveCuriePattern:/^\s*([^:/]+):([^\s/:]*)\s*$/,permissivePrefixPattern:/\s*([^:]+)\s*:\s*([^\s]*)\s*/gm,parseCurie:function(e){var t=this.permissiveCuriePattern.exec(e);var r=t?{key:t[1],val:t[2]}:null;return r},parsePrefixDecls:function(e){var t={};var r;while((r=this.permissivePrefixPattern.exec(e))!=null){var a=r[1];var n=r[2];t[a]=n}return t}};module.exports=a},{"./StringUtils":372}],367:[function(e,module,t){var r=e("./shared");var a=r.Promise;var n=e("./ObjectUtils");var i={replaceService:function(e,t,r){var a=e[t];if(a&&a.cancelAll){a.cancelAll()}e[t]=r!=null?i.lastRequestify(r):null},lastRequestify:function(e){var t={};var r=function(e,t){var r=function(){var r=e.apply(t,arguments);return r};return r};var a=[];for(var s in e){var o=e[s];if(n.isFunction(o)){var l=i.lastRequest(r(o,e));t[s]=l;a.push(l)}}t.cancelAll=function(){a.forEach(function(e){try{if(e.deferred){e.deferred.cancel()}}catch(t){console.log(t)}})};return t},all:function(e){var t=a.all(e).cancellable().catch(a.CancellationError,function(t){e.forEach(function(e){try{if(e&&e.cancel){e.cancel()}}catch(t){console.log("[ERROR] Cancelling a promise raised an exception")}});throw t});return t},createDeferred:function(e){var t;var r;var n=new a(function(){t=arguments[0];r=arguments[1]});if(e){n.cancellable()}return{resolve:t,reject:r,promise:function(){return n},isCancellable:function(){var e;if(n.isCancellable){e=n.isCancellable()}else if(n.abort){e=true}return e},cancel:function(){if(n.cancel){n.cancel()}else if(n.abort){n.abort()}}}},defaultAbortFn:function(e){e.cancel()},defaultDeferredFn:function(){return i.createDeferred(true)},postpone:function(e,t,r,a){t=t==null?50:t;r=r||this.defaultAbortFn;a=a||i.defaultDeferredFn;return function(){var n=arguments;var i=a();var s=null;var o=setTimeout(function(){s=e.apply(this,n);s.then(function(){i.resolve.apply(this,arguments)}).fail(function(){i.reject.apply(this,arguments)})},t);var l=i.promise();l.abort=function(){if(s==null){clearTimeout(o)}else if(r!=null){r(s)}};return l}},lastRequest:function(e,t,r){var a=null;var n=null;var s=0;t=t||i.defaultAbortFn;r=r||i.defaultDeferredFn;return function(){if(a==null){a=r()}this.deferred=a;var i=++s;var o=e.apply(this,arguments);if(t!=null&&n!=null){t(n)}n=o;o.then(function(){if(i===s&&a){a.resolve.apply(this,arguments);a=null}},function(){if(i===s&&a){a.reject.apply(this,arguments);a=null}});return a.promise()}}};module.exports=i},{"./ObjectUtils":365,"./shared":387}],368:[function(e,module,t){var r=e("../ext/Class");var a=e("./collection/HashMap");var n=e("./ObjectUtils");var i=r.create({initialize:function(){this._nextId=1;this.objToId=new a(function(e,t){return e===t},function(e){return n.hashCode(e)});this.idToState={}},nextId:function(){var e=(this._nextId++).toString();return e},getIdToState:function(){return this.idToState},getObjToId:function(){return this.objToId}});module.exports=i},{"../ext/Class":2,"./ObjectUtils":365,"./collection/HashMap":378}],369:[function(e,module,t){var r=e("../ext/Class");var a=e("./ObjectUtils");var n=e("./SerializationContext");var i=r.create({initialize:function(){this.classNameToClass={};this.classNameToFnSerialize={};this.classNameToFnDeserialize={};this.classNameToPrototype={}},registerOverride:function(e,t,r){this.classNameToFnSerialize[e]=t;this.classNameToFnDeserialize[e]=r},indexClasses:function(e){var t=this.findClasses(e);a.extend(this.classNameToClass,t);return t},findClasses:function(e){var t={};e.forEach(function(e){var r=e.classLabel||(e.prototype?e.prototype.classLabel:null);if(r){t[r]=e}});return t},getLabelForClass:function(e){var t=Object.getPrototypeOf(e);var r;this.classNameToClass.find(function(e,a){if(t===e.prototype){r=a;return true}});return r},getClassForLabel:function(e){var t;this.classNameToClass.find(function(r,a){if(a===e){t=r;return true}});return t},serialize:function(e,t){t=t||new n;var r=this.serializeRec(e,t);var a={root:r,idToState:t.getIdToState()};return a},serializeRec:function(e,t){var r;var n=t.getObjToId();var i=n.get(e);if(!i){i=t.nextId();n.put(e,i)}var s=t.getIdToState();var o=s[i];if(o){r={ref:i}}else if(a.isFunction(e)){r=undefined}else if(a.isObject(e)){var l=this.getLabelForClass(e);var c=function(e){var t=Boolean(e)||Object.toString.call(e)==="[object Number]"||Object.toString.call(e)==="[object Date]"||Object.toString.call(e)==="[object String]"||Object.toString.call(e)==="[object RegExp]";return t};var u=function(e){var t=e.prototype;var r=a.isObject(e)&&!c(e);var n=r&&t==null;return n};var d=c(e)||u(e)||Array.isArray(e);if(l==null&&!d){throw new Error("Failed to serialize instance without class label")}var p;if(l){p=this.classNameToPrototype[l];if(!p){var h=this.getClassForLabel(l);if(h){try{p=new h;this.classNameToPrototype[l]=p}catch(v){console.log("[WARN] Failed to create a prototype instance of class "+l,v)}}}}if(!p){p={}}var f=this.serializeAttrs(e,t,p);var g={};if(l){g.classLabel=l}if(Object.keys(f).length>0){g.attrs=f.attrs;if(f.parent!=null){g.parent=f.parent}}if(Array.isArray(e)){g.length=e.length}s[i]=g;r={ref:i}}else{r={value:e}}return r},serializeAttrs:function(e,t,r){var n={};var i=n;var s=i.attrs={};var o=this;var l=Object.keys(e);l.forEach(function(n){var i=e[n];var l=o.serializeRec(i,t);var c=r[n];var u=a.isEqual(l,c)||l==null&&c==null;if(u){return}if(l){s[n]=l}});return n},deserialize:function(e){var t=e.root;var r=e.idToState;var a={};var n=this.deserializeRef(t,r,a);return n},deserializeRef:function(e,t,r){var a=e.ref;var n=e.value;var i;if(a!=null){var s=a in r;if(s){i=r[a]}else{i=this.deserializeState(a,t,r)}}else{i=n}return i},deserializeState:function(e,t,r){var n;var i=t[e];if(i==null||!a.isObject(i)){console.log("State must be an object, was: ",i);throw new Error("Deserialization error")}var s=i.attrs;var o=i.classLabel;var l=i.length;if(o){var c=this.getClassForLabel(o);if(!c){throw new Error("Unknown class label encountered in deserialization: "+o)}n=new c}else if(l!=null){n=[]}else{n={}}r[e]=n;var u=this;if(s!=null){var d=Object.keys(s);d.forEach(function(e){var a=s[e];var i=u.deserializeRef(a,t,r);n[e]=i})}if(l!=null){n.length=l}return n}});module.exports=new i},{"../ext/Class":2,"./ObjectUtils":365,"./SerializationContext":368}],370:[function(e,module,t){var r=e("./collection/HashSet");var a={arrayToSet:function(e){var t=new r;t.addAll(e);return t}};module.exports=a},{"./collection/HashSet":379}],371:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.obj=e;this.attr=t;this.meta=r},setValue:function(e){this.obj[this.attr]=e},getValue:function(){return this.obj[this.attr]},getMeta:function(){return this.meta},toString:function(){return JSON.stringify(this)}});module.exports=a},{"../ext/Class":2}],372:[function(e,module,t){var r=e("lodash.uniq");var a={extractAllRegexMatches:function(e,t,a){var n;var i=[];while((n=e.exec(t))!=null){i.push(n[a])}i=r(i);return i}};module.exports=a},{"lodash.uniq":684}],373:[function(e,module,t){var r={visitDepthFirst:function(e,t,a){var n=a(e);if(n){var i=t(e);i.forEach(function(e){r.visitDepthFirst(e,t,a)})}},flattenTree:function(e,t,r){if(r==null){r=[]}if(e){r.push(e)}var a=e[t];var n=this;if(a){a.forEach(function(e){n.flattenTree(e,t,r)})}return r}};module.exports=r},{}],374:[function(e,module,t){var r={isValidUri:function(e){var t=true;t=t&&e.indexOf(" ")<0;t=t&&e.indexOf("<")<0;t=t&&e.indexOf(">")<0;return t},extractLabel:function(e){var t=e.lastIndexOf("#");var r=e.lastIndexOf("/");var a=Math.max(t,r);var n=a===e.length?e:e.substring(a+1);if(n===""){n=e}return n}};module.exports=r},{}],375:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ObjectUtils");var n=e("../ArrayUtils");var i=r.create({initialize:function(e,t){this.items=e||[];this.fnEquals=t||a.isEqual},setItems:function(e){this.items=e},getArray:function(){return this.items},get:function(e){var t=this.items[e];return t},add:function(e){this.items.push(e)},indexesOf:function(e){var t=n.indexesOf(this.items,e,this.fnEquals);return t},contains:function(e){var t=n.contains(this.items,e,this.fnEquals);return t},firstIndexOf:function(e){var t=n.firstIndexOf(this.items,e,this.fnEquals);return t},lastIndexOf:function(e){var t=this.indexesOf(e);var r=t.length>0?t[t.length-1]:-1;return r},remove:function(e){n.removeItem(this.items,e,this.fnEquals)},size:function(){return this.items.length}});module.exports=i},{"../../ext/Class":2,"../ArrayUtils":357,"../ObjectUtils":365}],376:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.key=e;this.value=t},getKey:function(){return this.key},getValue:function(){return this.value},toString:function(){return this.key+"->"+this.value}});module.exports=a},{"../../ext/Class":2}],377:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashMap");var n=r.create({initialize:function(e,t,r){this.forward=new a(e,t);this.inverse=r?r:new n(e,t,this)},getInverse:function(){return this.inverse},put:function(e,t){this.remove(e);this.forward.put(e,t);this.inverse.forward.put(t,e)},remove:function(e){var t=this.get(e);if(t!==null){this.inverse.forward.remove(t)}this.forward.remove(e)},getMap:function(){return this.forward},get:function(e){var t=this.forward.get(e);return t},keyList:function(){var e=this.forward.keys();return e}});module.exports=n},{"../../ext/Class":2,"./HashMap":378}],378:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("./../ObjectUtils");var i=a.create({initialize:function(e,t){this.fnEquals=e?e:n.isEqual;this.fnHash=t?t:n.defaultHashCode;this.hashToBucket={};var r=this;this.fnGet=function(e){var t=r.get(e);return t}},hashCode:function(){var e=this;var t=function(t){var r=e.fnHash(t);if(r==null){r=3}else if(n.isString(r)){r=n.hashCodeStr(r)}return r};if(this.hash==null){var r=this.entries();var a=0;r.forEach(function(e){var r=t(e.key);var n=t(e.val);a+=19*r+7919*n});this.hash=a}return this.hash},equals:function(e){throw new Error("Not implemented yet")},clear:function(){this.hashToBucket={};this.hash=null},putEntry:function(e){this.put(e.key,e.val)},putEntries:function(e){var t=this;e.forEach(function(e){t.putEntry(e)});return this},putAll:function(e){return this.putMap(e)},putMap:function(e){var t=e.entries();var r=this.putEntries(t);return r},getOrCreate:function(e,t){var r;var a=this.containsKey(e);if(!a){this.put(e,t);r=t}else{r=this.get(e)}return r},put:function(e,t){this.hash=null;var r=this.fnHash(e);var a=this.hashToBucket[r];if(a==null){a=[];this.hashToBucket[r]=a}var n=this._indexOfKey(a,e);if(n>=0){a[n].val=t;return}var i={key:e,val:t};a.push(i)},_indexOfKey:function(e,t){if(e!=null){for(var r=0;r<e.length;++r){var a=e[r];var n=a.key;if(this.fnEquals(n,t)){return r}}}return-1},get:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var a=this._indexOfKey(r,e);var n=a>=0?r[a].val:null;return n},remove:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var a=this._indexOfKey(r,e);var n=a>=0;if(n){this.hash=null;r.splice(a,1);if(r.length===0){delete this.hashToBucket[t]}}return n},containsKey:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var a=this._indexOfKey(r,e)>=0;return a},keys:function(){var e=[];r(this.hashToBucket,function(t){var r=[];t.forEach(function(e){if(e.key){r.push(e.key)}});e.push.apply(e,r)});return e},values:function(){var e=this.entries();var t=e.map(function(e){return e.val});return t},entries:function(){var e=[];r(this.hashToBucket,function(t){e.push.apply(e,t)});return e},forEach:function(e){var t=this.entries();t.forEach(function(t){e(t.val,t.key)})},toString:function(){var e=this.entries();var t=e.map(function(e){return e.key+": "+e.val});var r="{"+t.join(", ")+"}";return r},asFn:function(){return this.fnGet},size:function(){var e=this.entries();var t=e.length;return t},isEmpty:function(){var e=this.size();var t=e===0;return t}});module.exports=i},{"../../ext/Class":2,"./../ObjectUtils":365,"lodash.foreach":534}],379:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashMap");var n=r.create({initialize:function(e,t){this._map=new a(e,t)},isEmpty:function(){var e=this._map.isEmpty();return e},add:function(e){this._map.put(e,true)},hashCode:function(){var e=this._map.hashCode();return e},equals:function(e){var t=e!=null&&e._map!=null&&this._map.equals(e._map);return t},contains:function(e){var t=this._map.containsKey(e);return t},forEach:function(e){var t=this.entries();t.forEach(e)},map:function(e){var t=this.entries();var r=t.map(e);return r},retainAll:function(e){var t=this;this.forEach(function(r){var a=e.contains(r);if(!a){t.remove(r)}})},addAll:function(e){var t=this;e.forEach(function(e){t.add(e)})},removeAll:function(e){var t=this;e.forEach(function(e){t.remove(e)})},remove:function(e){this._map.remove(e)},entries:function(){var e=this._map.entries().map(function(e){return e.key});return e},clear:function(){this._map.clear()},toString:function(){var e=this.entries();var t="{"+e.join(", ")+"}";return t},size:function(){var e=this._map.size();return e}});module.exports=n},{"../../ext/Class":2,"./HashMap":378}],380:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({next:function(){throw new Error("Not overridden");

},hasNext:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],381:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Iterator");var n=r.create(a,{initialize:function(){this.current=null;this.advance=true;this.finished=false},finish:function(){this.finished=true;this.close();return null},$prefetch:function(){this.current=this.prefetch()},hasNext:function(){if(this.advance){this.$prefetch();this.advance=false}return this.finished===false},next:function(){if(this.finished){throw new Error("No more elments")}if(this.advance){this.$prefetch()}this.advance=true;return this.current},prefetch:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2,"./Iterator":380}],382:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Iterator");var n=r.create(a,{initialize:function(e,t){this.array=e;this.offset=t?t:0},getArray:function(){return this.array},hasNext:function(){var e=this.offset<this.array.length;return e},next:function(){var e=this.hasNext();var t;if(e){t=this.array[this.offset];++this.offset}else{t=null}return t}});module.exports=n},{"../../ext/Class":2,"./Iterator":380}],383:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashMap");var n=r.create({initialize:function(e,t){this.map=new a(e,t);this.keys=[]},put:function(e,t){var r=this.map.get(e);if(r){throw new Error("Key "+e+" already inserted")}this.keys.push(e);this.map.put(e,t)},get:function(e){var t=this.map.get(e);return t},getByIndex:function(e){var t=this.keys[e];var r=this.map.get(t);return r},entries:function(){var e=this;var t=this.keys.map(function(t){var r=e.map.get(t);var a={key:t,val:r};return a});return t},remove:function(e){for(var t=0;t<this.keys.length;t++){var r=this.keys[t];if(r===e){this.keys.splice(t,1);break}}this.map.remove(e)},removeByIndex:function(e){var t=this.keys[e];this.remove(t)},keyList:function(){return this.keys},size:function(){return this.keys.length}});module.exports=n},{"../../ext/Class":2,"./HashMap":378}],384:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashSet");var n=e("../ArrayUtils");var i=r.create({initialize:function(e){this.subMaps=e},get:function(e){var t=n.find(this.subMaps,function(t){var r=t.containsKey(e);return r});var r=t?t.get(e):null;return r},containsKey:function(e){var t=this.subMaps.some(function(t){var r=t.containsKey(e);return r});return t},entries:function(){var e=new a;var t=[];this.subMaps.forEach(function(r){var a=r.entries();a.forEach(function(r){var a=r.key;var n=e.contains(a);if(!n){e.add(a);t.push(r)}})});return t}});module.exports=i},{"../../ext/Class":2,"../ArrayUtils":357,"./HashSet":379}],385:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(){this.entries={}},clone:function(){var e=new a;e.addMultiMap(this);return e},clear:function(){var e=Object.keys(this.entries);var t=this;e.forEach(function(e){delete t.entries[e]})},addMultiMap:function(e){for(var t in e.entries){var r=e.entries[t];for(var a=0;a<r.length;++a){var n=r[a];this.put(t,n)}}},get:function(e){return e in this.entries?this.entries[e]:[]},put:function(e,t){var r;if(e in this.entries){r=this.entries[e]}else{r=[];this.entries[e]=r}r.push(t)},removeKey:function(e){delete this.entries[e]}});module.exports=a},{"../../ext/Class":2}],386:[function(e,module,t){"use strict";var r={ArrayUtils:e("./ArrayUtils"),ExceptionUtils:e("./ExceptionUtils"),CacheUtils:e("./CacheUtils"),ClusterUtils:e("./ClusterUtils"),CollectionUtils:e("./CollectionUtils"),JsonUtils:e("./JsonUtils"),MapUtils:e("./MapUtils"),ObjectUtils:e("./ObjectUtils"),PrefixUtils:e("./PrefixUtils"),PromiseUtils:e("./PromiseUtils"),SerializationContext:e("./SerializationContext"),Serializer:e("./Serializer"),SetUtils:e("./SetUtils"),StringUtils:e("./StringUtils"),TreeUtils:e("./TreeUtils"),UriUtils:e("./UriUtils"),shared:e("./shared"),ArrayList:e("./collection/ArrayList"),Entry:e("./collection/Entry"),HashBidiMap:e("./collection/HashBidiMap"),HashMap:e("./collection/HashMap"),HashSet:e("./collection/HashSet"),Iterator:e("./collection/Iterator"),IteratorAbstract:e("./collection/IteratorAbstract"),IteratorArray:e("./collection/IteratorArray"),ListMap:e("./collection/ListMap"),MapUnion:e("./collection/MapUnion"),MultiMapObjectArray:e("./collection/MultiMapObjectArray")};module.exports=r},{"./ArrayUtils":357,"./CacheUtils":358,"./ClusterUtils":359,"./CollectionUtils":360,"./ExceptionUtils":362,"./JsonUtils":363,"./MapUtils":364,"./ObjectUtils":365,"./PrefixUtils":366,"./PromiseUtils":367,"./SerializationContext":368,"./Serializer":369,"./SetUtils":370,"./StringUtils":372,"./TreeUtils":373,"./UriUtils":374,"./collection/ArrayList":375,"./collection/Entry":376,"./collection/HashBidiMap":377,"./collection/HashMap":378,"./collection/HashSet":379,"./collection/Iterator":380,"./collection/IteratorAbstract":381,"./collection/IteratorArray":382,"./collection/ListMap":383,"./collection/MapUnion":384,"./collection/MultiMapObjectArray":385,"./shared":387}],387:[function(e,module,t){var r={Promise:null,ajax:function(){throw new Error("not set!")}};module.exports=r},{}],388:[function(e,module,t){var r={dcat:"http://www.w3.org/ns/dcat#",qb:"http://purl.org/linked-data/cube#",grddl:"http://www.w3.org/2003/g/data-view#",ma:"http://www.w3.org/ns/ma-ont#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",sd:"http://www.w3.org/ns/sparql-service-description#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",wdr:"http://www.w3.org/2007/05/powder#","void":"http://rdfs.org/ns/void#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",gldp:"http://www.w3.org/ns/people#",cnt:"http://www.w3.org/2008/content#",earl:"http://www.w3.org/ns/earl#",ht:"http://www.w3.org/2006/http#",ptr:"http://www.w3.org/2009/pointers#",cc:"http://creativecommons.org/ns#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dcterms:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",foaf:"http://xmlns.com/foaf/0.1/",gr:"http://purl.org/goodrelations/v1#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",og:"http://ogp.me/ns#",rev:"http://purl.org/stuff/rev#",sioc:"http://rdfs.org/sioc/ns#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",schema:"http://schema.org/"};module.exports=r},{}],389:[function(e,module,t){"use strict";var r={owl:e("./owl"),rdf:e("./rdf"),rdfs:e("./rdfs"),wgs84:e("./wgs84"),xsd:e("./xsd"),InitialContext:e("./InitialContext")};module.exports=r},{"./InitialContext":388,"./owl":390,"./rdf":391,"./rdfs":392,"./wgs84":393,"./xsd":394}],390:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/2002/07/owl#";var n={Class:r.createUri(a+"Class"),DatatypeProperty:r.createUri(a+"DatatypeProperty"),ObjectProperty:r.createUri(a+"ObjectProperty"),AnnotationProperty:r.createUri(a+"AnnotationProperty")};module.exports=n},{"../rdf/NodeFactory":97}],391:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/1999/02/22-rdf-syntax-ns#";var n={type:r.createUri(a+"type"),Property:r.createUri(a+"Property")};module.exports=n},{"../rdf/NodeFactory":97}],392:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/2000/01/rdf-schema#";var n={label:r.createUri(a+"label"),comment:r.createUri(a+"comment"),subClassOf:r.createUri(a+"subClassOf")};module.exports=n},{"../rdf/NodeFactory":97}],393:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/2003/01/geo/wgs84_pos#";var n={lon:r.createUri(a+"long"),lat:r.createUri(a+"lat")};module.exports=n},{"../rdf/NodeFactory":97}],394:[function(e,module,t){var r="http://www.w3.org/2001/XMLSchema#";var a=e("../rdf/node/Node_Uri");var n={xboolean:new a(r+"boolean"),xint:new a(r+"int"),xinteger:new a(r+"integer"),xlong:new a(r+"long"),decimal:new a(r+"decimal"),xfloat:new a(r+"float"),xdouble:new a(r+"double"),xstring:new a(r+"string"),date:new a(r+"date"),dateTime:new a(r+"dateTime")};module.exports=n},{"../rdf/node/Node_Uri":115}],395:[function(e,module,t){var r=e("lodash.keys"),a=e("lodash._objecttypes");var n=function(e,t,n){var i,s=e,o=s;if(!s)return o;var l=arguments,c=0,u=typeof n=="number"?2:l.length;while(++c<u){s=l[c];if(s&&a[typeof s]){var d=-1,p=a[typeof s]&&r(s),h=p?p.length:0;while(++d<h){i=p[d];if(typeof o[i]=="undefined")o[i]=s[i]}}}return o};module.exports=n},{"lodash._objecttypes":396,"lodash.keys":397}],396:[function(e,module,t){var r={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};module.exports=r},{}],397:[function(e,module,t){var r=e("lodash._isnative"),a=e("lodash.isobject"),n=e("lodash._shimkeys");var i=r(i=Object.keys)&&i;var s=!i?n:function(e){if(!a(e)){return[]}return i(e)};module.exports=s},{"lodash._isnative":398,"lodash._shimkeys":399,"lodash.isobject":400}],398:[function(e,module,t){var r=Object.prototype;var a=r.toString;var n=RegExp("^"+String(a).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");function i(e){return typeof e=="function"&&n.test(e)}module.exports=i},{}],399:[function(e,module,t){var r=e("lodash._objecttypes");var a=Object.prototype;var n=a.hasOwnProperty;var i=function(e){var t,a=e,i=[];if(!a)return i;if(!r[typeof e])return i;for(t in a){if(n.call(a,t)){i.push(t)}}return i};module.exports=i},{"lodash._objecttypes":396}],400:[function(e,module,t){var r=e("lodash._objecttypes");function a(e){return!!(e&&r[typeof e])}module.exports=a},{"lodash._objecttypes":396}],401:[function(e,module,t){var r=e("lodash.createcallback"),a=e("lodash.forown");function n(e,t,n){t=r(t,n,3);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s){var o=e[i];if(t(o,i,e)){return o}}}else{var l;a(e,function(e,r,a){if(t(e,r,a)){l=e;return false}});return l}}module.exports=n},{"lodash.createcallback":402,"lodash.forown":438}],402:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash._baseisequal"),n=e("lodash.isobject"),i=e("lodash.keys"),s=e("lodash.property");function o(e,t,o){var l=typeof e;if(e==null||l=="function"){return r(e,t,o)}if(l!="object"){return s(e)}var c=i(e),u=c[0],d=e[u];if(c.length==1&&d===d&&!n(d)){return function(e){var t=e[u];return d===t&&(d!==0||1/d==1/t)}}return function(t){var r=c.length,n=false;while(r--){if(!(n=a(t[c[r]],e[c[r]],null,true))){break}}return n}}module.exports=o},{"lodash._basecreatecallback":403,"lodash._baseisequal":422,"lodash.isobject":431,"lodash.keys":433,"lodash.property":437}],403:[function(e,module,t){var r=e("lodash.bind"),a=e("lodash.identity"),n=e("lodash._setbinddata"),i=e("lodash.support");var s=/^\s*function[ \n\r\t]+\w/;var o=/\bthis\b/;var l=Function.prototype.toString;function c(e,t,c){if(typeof e!="function"){return a}if(typeof t=="undefined"||!("prototype"in e)){return e}var u=e.__bindData__;if(typeof u=="undefined"){if(i.funcNames){u=!e.name}u=u||!i.funcDecomp;if(!u){var d=l.call(e);if(!i.funcNames){u=!s.test(d)}if(!u){u=o.test(d);n(e,u)}}}if(u===false||u!==true&&u[1]&1){return e}switch(c){case 1:return function(r){return e.call(t,r)};case 2:return function(r,a){return e.call(t,r,a)};case 3:return function(r,a,n){return e.call(t,r,a,n)};case 4:return function(r,a,n,i){return e.call(t,r,a,n,i)}}return r(e,t)}module.exports=c},{"lodash._setbinddata":404,"lodash.bind":407,"lodash.identity":419,"lodash.support":420}],404:[function(e,module,t){var r=e("lodash._isnative"),a=e("lodash.noop");var n={configurable:false,enumerable:false,value:null,writable:false};var i=function(){try{var e={},t=r(t=Object.defineProperty)&&t,a=t(e,e,e)&&t}catch(n){}return a}();var s=!i?a:function(e,t){n.value=t;i(e,"__bindData__",n)};module.exports=s},{"lodash._isnative":405,"lodash.noop":406}],405:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],406:[function(e,module,t){function r(){}module.exports=r},{}],407:[function(e,module,t){var r=e("lodash._createwrapper"),a=e("lodash._slice");function n(e,t){return arguments.length>2?r(e,17,a(arguments,2),null,t):r(e,1,null,null,t)}module.exports=n},{"lodash._createwrapper":408,"lodash._slice":418}],408:[function(e,module,t){var r=e("lodash._basebind"),a=e("lodash._basecreatewrapper"),n=e("lodash.isfunction"),i=e("lodash._slice");var s=[];var o=s.push,l=s.unshift;function c(e,t,s,u,d,p){var h=t&1,v=t&2,f=t&4,g=t&8,m=t&16,x=t&32;if(!v&&!n(e)){throw new TypeError}if(m&&!s.length){t&=~16;m=s=false}if(x&&!u.length){t&=~32;x=u=false}var _=e&&e.__bindData__;if(_&&_!==true){_=i(_);if(_[2]){_[2]=i(_[2])}if(_[3]){_[3]=i(_[3])}if(h&&!(_[1]&1)){_[4]=d}if(!h&&_[1]&1){t|=8}if(f&&!(_[1]&4)){_[5]=p}if(m){o.apply(_[2]||(_[2]=[]),s)}if(x){l.apply(_[3]||(_[3]=[]),u)}_[1]|=t;return c.apply(null,_)}var b=t==1||t===17?r:a;return b([e,t,s,u,d,p])}module.exports=c},{"lodash._basebind":409,"lodash._basecreatewrapper":413,"lodash._slice":418,"lodash.isfunction":417}],409:[function(e,module,t){var r=e("lodash._basecreate"),a=e("lodash.isobject"),n=e("lodash._setbinddata"),i=e("lodash._slice");var s=[];var o=s.push;function l(e){var t=e[0],s=e[2],l=e[4];function c(){if(s){var e=i(s);o.apply(e,arguments)}if(this instanceof c){var n=r(t.prototype),u=t.apply(n,e||arguments);return a(u)?u:n}return t.apply(l,e||arguments)}n(c,e);return c}module.exports=l},{"lodash._basecreate":410,"lodash._setbinddata":404,"lodash._slice":418,"lodash.isobject":431}],410:[function(e,module,t){(function(t){var r=e("lodash._isnative"),a=e("lodash.isobject"),n=e("lodash.noop");var i=r(i=Object.create)&&i;function s(e,t){return a(e)?i(e):{}}if(!i){s=function(){function e(){}return function(r){if(a(r)){e.prototype=r;var n=new e;e.prototype=null}return n||t.Object()}}()}module.exports=s}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._isnative":411,"lodash.isobject":431,"lodash.noop":412}],411:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],412:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],413:[function(e,module,t){var r=e("lodash._basecreate"),a=e("lodash.isobject"),n=e("lodash._setbinddata"),i=e("lodash._slice");var s=[];var o=s.push;function l(e){var t=e[0],s=e[1],c=e[2],u=e[3],d=e[4],p=e[5];var h=s&1,v=s&2,f=s&4,g=s&8,m=t;function x(){var e=h?d:this;if(c){var n=i(c);o.apply(n,arguments)}if(u||f){n||(n=i(arguments));if(u){o.apply(n,u)}if(f&&n.length<p){s|=16&~32;return l([t,g?s:s&~3,n,null,d,p])}}n||(n=arguments);if(v){t=e[m]}if(this instanceof x){e=r(t.prototype);var _=t.apply(e,n);return a(_)?_:e}return t.apply(e,n)}n(x,e);return x}module.exports=l},{"lodash._basecreate":414,"lodash._setbinddata":404,"lodash._slice":418,"lodash.isobject":431}],414:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":415,"lodash.isobject":431,"lodash.noop":416}],415:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],416:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],417:[function(e,module,t){function r(e){return typeof e=="function"}module.exports=r},{}],418:[function(e,module,t){function r(e,t,r){t||(t=0);if(typeof r=="undefined"){r=e?e.length:0}var a=-1,n=r-t||0,i=Array(n<0?0:n);while(++a<n){i[a]=e[t+a]}return i}module.exports=r},{}],419:[function(e,module,t){function r(e){return e}module.exports=r},{}],420:[function(e,module,t){(function(t){var r=e("lodash._isnative");var a=/\bthis\b/;var n={};n.funcDecomp=!r(t.WinRTError)&&a.test(function(){return this});n.funcNames=typeof Function.name=="string";module.exports=n}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._isnative":421}],421:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],422:[function(e,module,t){var r=e("lodash.forin"),a=e("lodash._getarray"),n=e("lodash.isfunction"),i=e("lodash._objecttypes"),s=e("lodash._releasearray");var o="[object Arguments]",l="[object Array]",c="[object Boolean]",u="[object Date]",d="[object Number]",p="[object Object]",h="[object RegExp]",v="[object String]";var f=Object.prototype;var g=f.toString;var m=f.hasOwnProperty;function x(e,t,f,_,b,S){if(f){var y=f(e,t);if(typeof y!="undefined"){return!!y}}if(e===t){return e!==0||1/e==1/t}var C=typeof e,w=typeof t;if(e===e&&!(e&&i[C])&&!(t&&i[w])){return false}if(e==null||t==null){return e===t}var E=g.call(e),k=g.call(t);if(E==o){E=p}if(k==o){k=p}if(E!=k){return false}switch(E){case c:case u:return+e==+t;case d:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case h:case v:return e==String(t)}var q=E==l;if(!q){var L=m.call(e,"__wrapped__"),j=m.call(t,"__wrapped__");if(L||j){return x(L?e.__wrapped__:e,j?t.__wrapped__:t,f,_,b,S)}if(E!=p){return false}var U=e.constructor,T=t.constructor;if(U!=T&&!(n(U)&&U instanceof U&&n(T)&&T instanceof T)&&("constructor"in e&&"constructor"in t)){return false}}var A=!b;b||(b=a());S||(S=a());var F=b.length;while(F--){if(b[F]==e){return S[F]==t}}var N=0;y=true;b.push(e);S.push(t);if(q){F=e.length;N=t.length;y=N==F;if(y||_){while(N--){var V=F,M=t[N];if(_){while(V--){if(y=x(e[V],M,f,_,b,S)){break}}}else if(!(y=x(e[N],M,f,_,b,S))){break}}}}else{r(t,function(t,r,a){if(m.call(a,r)){N++;return y=m.call(e,r)&&x(e[r],t,f,_,b,S)}});if(y&&!_){r(e,function(e,t,r){if(m.call(r,t)){return y=--N>-1}})}}b.pop();S.pop();if(A){s(b);s(S)}return y}module.exports=x},{"lodash._getarray":423,"lodash._objecttypes":425,"lodash._releasearray":426,"lodash.forin":429,"lodash.isfunction":430}],423:[function(e,module,t){var r=e("lodash._arraypool");function a(){return r.pop()||[]}module.exports=a},{"lodash._arraypool":424}],424:[function(e,module,t){var r=[];module.exports=r},{}],425:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],426:[function(e,module,t){var r=e("lodash._arraypool"),a=e("lodash._maxpoolsize");function n(e){e.length=0;if(r.length<a){r.push(e)}}module.exports=n},{"lodash._arraypool":427,"lodash._maxpoolsize":428}],427:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],428:[function(e,module,t){var r=40;module.exports=r},{}],429:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash._objecttypes");var n=function(e,t,n){var i,s=e,o=s;if(!s)return o;if(!a[typeof s])return o;t=t&&typeof n=="undefined"?t:r(t,n,3);for(i in s){if(t(s[i],i,e)===false)return o}return o};module.exports=n},{"lodash._basecreatecallback":403,"lodash._objecttypes":425}],430:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],431:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":432}],432:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],433:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":434,"lodash._shimkeys":435,"lodash.isobject":431}],434:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],435:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":436}],436:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],437:[function(e,module,t){function r(e){return function(t){return t[e]}}module.exports=r},{}],438:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash.keys"),n=e("lodash._objecttypes");var i=function(e,t,i){var s,o=e,l=o;if(!o)return l;if(!n[typeof o])return l;t=t&&typeof i=="undefined"?t:r(t,i,3);var c=-1,u=n[typeof o]&&a(o),d=u?u.length:0;while(++c<d){s=u[c];if(t(o[s],s,e)===false)return l}return l};module.exports=i},{"lodash._basecreatecallback":439,"lodash._objecttypes":460,"lodash.keys":461}],439:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":440,"lodash.bind":443,"lodash.identity":457,"lodash.support":458}],440:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":441,"lodash.noop":442}],441:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],442:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],443:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":444,"lodash._slice":456}],444:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":445,"lodash._basecreatewrapper":450,"lodash._slice":456,"lodash.isfunction":455}],445:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":446,"lodash._setbinddata":440,"lodash._slice":456,"lodash.isobject":449}],446:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":447,"lodash.isobject":449,"lodash.noop":448}],447:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],448:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],449:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":460}],450:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":451,"lodash._setbinddata":440,"lodash._slice":456,"lodash.isobject":454}],451:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":452,"lodash.isobject":454,"lodash.noop":453}],452:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],453:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],454:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":460}],455:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],456:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],457:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],458:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":459}],459:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],460:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],461:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":462,"lodash._shimkeys":463,"lodash.isobject":464}],462:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],463:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":460}],464:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":460}],465:[function(e,module,t){var r=e("lodash._baseflatten"),a=e("lodash.map");function n(e,t,n,i){if(typeof t!="boolean"&&t!=null){i=n;n=typeof t!="function"&&i&&i[t]===e?null:t;t=false}if(n!=null){e=a(e,n,i)}return r(e,t)}module.exports=n},{"lodash._baseflatten":466,"lodash.map":470}],466:[function(e,module,t){var r=e("lodash.isarguments"),a=e("lodash.isarray");function n(e,t,i,s){var o=(s||0)-1,l=e?e.length:0,c=[];while(++o<l){var u=e[o];if(u&&typeof u=="object"&&typeof u.length=="number"&&(a(u)||r(u))){if(!t){u=n(u,t,i)}var d=-1,p=u.length,h=c.length;c.length+=p;while(++d<p){c[h++]=u[d]}}else if(!i){c.push(u)}}return c}module.exports=n},{"lodash.isarguments":467,"lodash.isarray":468}],467:[function(e,module,t){var r="[object Arguments]";var a=Object.prototype;var n=a.toString;function i(e){return e&&typeof e=="object"&&typeof e.length=="number"&&n.call(e)==r||false}module.exports=i},{}],468:[function(e,module,t){var r=e("lodash._isnative");var a="[object Array]";var n=Object.prototype;var i=n.toString;var s=r(s=Array.isArray)&&s;var o=s||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&i.call(e)==a||false};module.exports=o},{"lodash._isnative":469}],469:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],470:[function(e,module,t){var r=e("lodash.createcallback"),a=e("lodash.forown");function n(e,t,n){var i=-1,s=e?e.length:0;t=r(t,n,3);if(typeof s=="number"){var o=Array(s);while(++i<s){o[i]=t(e[i],i,e)}}else{o=[];a(e,function(e,r,a){o[++i]=t(e,r,a)})}return o}module.exports=n},{"lodash.createcallback":471,"lodash.forown":507}],471:[function(e,module,t){module.exports=e(402)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/index.js":402,"lodash._basecreatecallback":472,"lodash._baseisequal":491,"lodash.isobject":500,"lodash.keys":502,"lodash.property":506}],472:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":473,"lodash.bind":476,"lodash.identity":488,"lodash.support":489}],473:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":474,"lodash.noop":475}],474:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],475:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],476:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":477,"lodash._slice":487}],477:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":478,"lodash._basecreatewrapper":482,"lodash._slice":487,"lodash.isfunction":486}],478:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":479,"lodash._setbinddata":473,"lodash._slice":487,"lodash.isobject":500}],479:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,
"lodash._isnative":480,"lodash.isobject":500,"lodash.noop":481}],480:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],481:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],482:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":483,"lodash._setbinddata":473,"lodash._slice":487,"lodash.isobject":500}],483:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":484,"lodash.isobject":500,"lodash.noop":485}],484:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],485:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],486:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],487:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],488:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],489:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":490}],490:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],491:[function(e,module,t){module.exports=e(422)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":422,"lodash._getarray":492,"lodash._objecttypes":494,"lodash._releasearray":495,"lodash.forin":498,"lodash.isfunction":499}],492:[function(e,module,t){module.exports=e(423)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":423,"lodash._arraypool":493}],493:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],494:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],495:[function(e,module,t){module.exports=e(426)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":426,"lodash._arraypool":496,"lodash._maxpoolsize":497}],496:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],497:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],498:[function(e,module,t){module.exports=e(429)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":429,"lodash._basecreatecallback":472,"lodash._objecttypes":494}],499:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],500:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":501}],501:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],502:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":503,"lodash._shimkeys":504,"lodash.isobject":500}],503:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],504:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":505}],505:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],506:[function(e,module,t){module.exports=e(437)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":437}],507:[function(e,module,t){module.exports=e(438)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.forown/index.js":438,"lodash._basecreatecallback":508,"lodash._objecttypes":529,"lodash.keys":530}],508:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":509,"lodash.bind":512,"lodash.identity":526,"lodash.support":527}],509:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":510,"lodash.noop":511}],510:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],511:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],512:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":513,"lodash._slice":525}],513:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":514,"lodash._basecreatewrapper":519,"lodash._slice":525,"lodash.isfunction":524}],514:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":515,"lodash._setbinddata":509,"lodash._slice":525,"lodash.isobject":518}],515:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":516,"lodash.isobject":518,"lodash.noop":517}],516:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],517:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],518:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":529}],519:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":520,"lodash._setbinddata":509,"lodash._slice":525,"lodash.isobject":523}],520:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":521,"lodash.isobject":523,"lodash.noop":522}],521:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],522:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],523:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":529}],524:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],525:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],526:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],527:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":528}],528:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],529:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],530:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":531,"lodash._shimkeys":532,"lodash.isobject":533}],531:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],532:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":529}],533:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":529}],534:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash.forown");function n(e,t,n){var i=-1,s=e?e.length:0;t=t&&typeof n=="undefined"?t:r(t,n,3);if(typeof s=="number"){while(++i<s){if(t(e[i],i,e)===false){break}}}else{a(e,t)}return e}module.exports=n},{"lodash._basecreatecallback":535,"lodash.forown":558}],535:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":536,"lodash.bind":539,"lodash.identity":555,"lodash.support":556}],536:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":537,"lodash.noop":538}],537:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],538:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],539:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":540,"lodash._slice":554}],540:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":541,"lodash._basecreatewrapper":547,"lodash._slice":554,"lodash.isfunction":553}],541:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":542,"lodash._setbinddata":536,"lodash._slice":554,"lodash.isobject":545}],542:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":543,"lodash.isobject":545,"lodash.noop":544}],543:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],544:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],545:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":546}],546:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],547:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":548,"lodash._setbinddata":536,"lodash._slice":554,"lodash.isobject":551}],548:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":549,"lodash.isobject":551,"lodash.noop":550}],549:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],550:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],551:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":552}],552:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],553:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],554:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],555:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],556:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":557}],557:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],558:[function(e,module,t){module.exports=e(438)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.forown/index.js":438,"lodash._basecreatecallback":535,"lodash._objecttypes":559,"lodash.keys":560}],559:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],560:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":561,"lodash._shimkeys":562,"lodash.isobject":563}],561:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],562:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":559}],563:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":559}],564:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash._baseisequal");function n(e,t,n,i){return a(e,t,typeof n=="function"&&r(n,i,2))}module.exports=n},{"lodash._basecreatecallback":565,"lodash._baseisequal":588}],565:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":566,"lodash.bind":569,"lodash.identity":585,"lodash.support":586}],566:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":567,"lodash.noop":568}],567:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],568:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],569:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":570,"lodash._slice":584}],570:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":571,"lodash._basecreatewrapper":577,"lodash._slice":584,"lodash.isfunction":583}],571:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":572,"lodash._setbinddata":566,"lodash._slice":584,"lodash.isobject":575}],572:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":573,"lodash.isobject":575,"lodash.noop":574}],573:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],574:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],575:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":576}],576:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],577:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":578,"lodash._setbinddata":566,"lodash._slice":584,"lodash.isobject":581}],578:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":579,"lodash.isobject":581,"lodash.noop":580}],579:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],580:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],581:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":582}],582:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],583:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],584:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],585:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],586:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":587}],587:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],588:[function(e,module,t){module.exports=e(422)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":422,"lodash._getarray":589,"lodash._objecttypes":591,"lodash._releasearray":592,"lodash.forin":595,"lodash.isfunction":596}],589:[function(e,module,t){module.exports=e(423)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":423,"lodash._arraypool":590}],590:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],591:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],592:[function(e,module,t){module.exports=e(426)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":426,"lodash._arraypool":593,"lodash._maxpoolsize":594}],593:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],594:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],595:[function(e,module,t){module.exports=e(429)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":429,"lodash._basecreatecallback":565,"lodash._objecttypes":591}],596:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],597:[function(e,module,t){var r=e("lodash.createcallback"),a=e("lodash.forown");function n(e,t,n,i){if(!e)return n;var s=arguments.length<3;t=r(t,i,4);var o=-1,l=e.length;if(typeof l=="number"){if(s){n=e[++o]}while(++o<l){n=t(n,e[o],o,e)}}else{a(e,function(e,r,a){n=s?(s=false,e):t(n,e,r,a)})}return n}module.exports=n},{"lodash.createcallback":598,"lodash.forown":634}],598:[function(e,module,t){module.exports=e(402)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/index.js":402,"lodash._basecreatecallback":599,"lodash._baseisequal":618,"lodash.isobject":627,"lodash.keys":629,"lodash.property":633}],599:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":600,"lodash.bind":603,"lodash.identity":615,"lodash.support":616}],600:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":601,"lodash.noop":602}],601:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],602:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],603:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":604,"lodash._slice":614}],604:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":605,"lodash._basecreatewrapper":609,"lodash._slice":614,"lodash.isfunction":613}],605:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":606,"lodash._setbinddata":600,"lodash._slice":614,"lodash.isobject":627}],606:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":607,"lodash.isobject":627,"lodash.noop":608}],607:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],608:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],609:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":610,"lodash._setbinddata":600,"lodash._slice":614,"lodash.isobject":627}],610:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":611,"lodash.isobject":627,"lodash.noop":612}],611:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],612:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406
}],613:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],614:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],615:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],616:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":617}],617:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],618:[function(e,module,t){module.exports=e(422)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":422,"lodash._getarray":619,"lodash._objecttypes":621,"lodash._releasearray":622,"lodash.forin":625,"lodash.isfunction":626}],619:[function(e,module,t){module.exports=e(423)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":423,"lodash._arraypool":620}],620:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],621:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],622:[function(e,module,t){module.exports=e(426)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":426,"lodash._arraypool":623,"lodash._maxpoolsize":624}],623:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],624:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],625:[function(e,module,t){module.exports=e(429)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":429,"lodash._basecreatecallback":599,"lodash._objecttypes":621}],626:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],627:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":628}],628:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],629:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":630,"lodash._shimkeys":631,"lodash.isobject":627}],630:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],631:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":632}],632:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],633:[function(e,module,t){module.exports=e(437)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":437}],634:[function(e,module,t){module.exports=e(438)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.forown/index.js":438,"lodash._basecreatecallback":635,"lodash._objecttypes":656,"lodash.keys":657}],635:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":636,"lodash.bind":639,"lodash.identity":653,"lodash.support":654}],636:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":637,"lodash.noop":638}],637:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],638:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],639:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":640,"lodash._slice":652}],640:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":641,"lodash._basecreatewrapper":646,"lodash._slice":652,"lodash.isfunction":651}],641:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":642,"lodash._setbinddata":636,"lodash._slice":652,"lodash.isobject":645}],642:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":643,"lodash.isobject":645,"lodash.noop":644}],643:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],644:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],645:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":656}],646:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":647,"lodash._setbinddata":636,"lodash._slice":652,"lodash.isobject":650}],647:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":648,"lodash.isobject":650,"lodash.noop":649}],648:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],649:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],650:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":656}],651:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],652:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],653:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],654:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":655}],655:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],656:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],657:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":658,"lodash._shimkeys":659,"lodash.isobject":660}],658:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],659:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":656}],660:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":656}],661:[function(e,module,t){var r=e("lodash._baseflatten"),a=e("lodash._baseuniq");function n(){return a(r(arguments,true,true))}module.exports=n},{"lodash._baseflatten":662,"lodash._baseuniq":666}],662:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/index.js":466,"lodash.isarguments":663,"lodash.isarray":664}],663:[function(e,module,t){module.exports=e(467)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/node_modules/lodash.isarguments/index.js":467}],664:[function(e,module,t){module.exports=e(468)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/node_modules/lodash.isarray/index.js":468,"lodash._isnative":665}],665:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],666:[function(e,module,t){var r=e("lodash._baseindexof"),a=e("lodash._cacheindexof"),n=e("lodash._createcache"),i=e("lodash._getarray"),s=e("lodash._largearraysize"),o=e("lodash._releasearray"),l=e("lodash._releaseobject");function c(e,t,c){var u=-1,d=r,p=e?e.length:0,h=[];var v=!t&&p>=s,f=c||v?i():h;if(v){var g=n(f);d=a;f=g}while(++u<p){var m=e[u],x=c?c(m,u,e):m;if(t?!u||f[f.length-1]!==x:d(f,x)<0){if(c||v){f.push(x)}h.push(m)}}if(v){o(f.array);l(f)}else if(c){o(f)}return h}module.exports=c},{"lodash._baseindexof":667,"lodash._cacheindexof":668,"lodash._createcache":670,"lodash._getarray":675,"lodash._largearraysize":677,"lodash._releasearray":678,"lodash._releaseobject":681}],667:[function(e,module,t){function r(e,t,r){var a=(r||0)-1,n=e?e.length:0;while(++a<n){if(e[a]===t){return a}}return-1}module.exports=r},{}],668:[function(e,module,t){var r=e("lodash._baseindexof"),a=e("lodash._keyprefix");function n(e,t){var n=typeof t;e=e.cache;if(n=="boolean"||t==null){return e[t]?0:-1}if(n!="number"&&n!="string"){n="object"}var i=n=="number"?t:a+t;e=(e=e[n])&&e[i];return n=="object"?e&&r(e,t)>-1?0:-1:e?0:-1}module.exports=n},{"lodash._baseindexof":667,"lodash._keyprefix":669}],669:[function(e,module,t){var r="__1335248838000__";module.exports=r},{}],670:[function(e,module,t){var r=e("lodash._cachepush"),a=e("lodash._getobject"),n=e("lodash._releaseobject");function i(e){var t=-1,n=e.length,i=e[0],s=e[n/2|0],o=e[n-1];if(i&&typeof i=="object"&&s&&typeof s=="object"&&o&&typeof o=="object"){return false}var l=a();l["false"]=l["null"]=l["true"]=l["undefined"]=false;var c=a();c.array=e;c.cache=l;c.push=r;while(++t<n){c.push(e[t])}return c}module.exports=i},{"lodash._cachepush":671,"lodash._getobject":673,"lodash._releaseobject":681}],671:[function(e,module,t){var r=e("lodash._keyprefix");function a(e){var t=this.cache,a=typeof e;if(a=="boolean"||e==null){t[e]=true}else{if(a!="number"&&a!="string"){a="object"}var n=a=="number"?e:r+e,i=t[a]||(t[a]={});if(a=="object"){(i[n]||(i[n]=[])).push(e)}else{i[n]=true}}}module.exports=a},{"lodash._keyprefix":672}],672:[function(e,module,t){module.exports=e(669)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":669}],673:[function(e,module,t){var r=e("lodash._objectpool");function a(){return r.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}module.exports=a},{"lodash._objectpool":674}],674:[function(e,module,t){var r=[];module.exports=r},{}],675:[function(e,module,t){module.exports=e(423)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":423,"lodash._arraypool":676}],676:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],677:[function(e,module,t){var r=75;module.exports=r},{}],678:[function(e,module,t){module.exports=e(426)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":426,"lodash._arraypool":679,"lodash._maxpoolsize":680}],679:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],680:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],681:[function(e,module,t){var r=e("lodash._maxpoolsize"),a=e("lodash._objectpool");function n(e){var t=e.cache;if(t){n(t)}e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null;if(a.length<r){a.push(e)}}module.exports=n},{"lodash._maxpoolsize":682,"lodash._objectpool":683}],682:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],683:[function(e,module,t){module.exports=e(674)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":674}],684:[function(e,module,t){var r=e("lodash._baseuniq"),a=e("lodash.createcallback");function n(e,t,n,i){if(typeof t!="boolean"&&t!=null){i=n;n=typeof t!="function"&&i&&i[t]===e?null:t;t=false}if(n!=null){n=a(n,i,3)}return r(e,t,n)}module.exports=n},{"lodash._baseuniq":685,"lodash.createcallback":703}],685:[function(e,module,t){module.exports=e(666)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/index.js":666,"lodash._baseindexof":686,"lodash._cacheindexof":687,"lodash._createcache":689,"lodash._getarray":694,"lodash._largearraysize":696,"lodash._releasearray":697,"lodash._releaseobject":700}],686:[function(e,module,t){module.exports=e(667)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._baseindexof/index.js":667}],687:[function(e,module,t){module.exports=e(668)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/index.js":668,"lodash._baseindexof":686,"lodash._keyprefix":688}],688:[function(e,module,t){module.exports=e(669)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":669}],689:[function(e,module,t){module.exports=e(670)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/index.js":670,"lodash._cachepush":690,"lodash._getobject":692,"lodash._releaseobject":700}],690:[function(e,module,t){module.exports=e(671)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._cachepush/index.js":671,"lodash._keyprefix":691}],691:[function(e,module,t){module.exports=e(669)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":669}],692:[function(e,module,t){module.exports=e(673)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/index.js":673,"lodash._objectpool":693}],693:[function(e,module,t){module.exports=e(674)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":674}],694:[function(e,module,t){module.exports=e(423)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":423,"lodash._arraypool":695}],695:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],696:[function(e,module,t){module.exports=e(677)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._largearraysize/index.js":677}],697:[function(e,module,t){module.exports=e(426)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":426,"lodash._arraypool":698,"lodash._maxpoolsize":699}],698:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],699:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],700:[function(e,module,t){module.exports=e(681)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._releaseobject/index.js":681,"lodash._maxpoolsize":701,"lodash._objectpool":702}],701:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],702:[function(e,module,t){module.exports=e(674)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":674}],703:[function(e,module,t){module.exports=e(402)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/index.js":402,"lodash._basecreatecallback":704,"lodash._baseisequal":723,"lodash.isobject":732,"lodash.keys":734,"lodash.property":738}],704:[function(e,module,t){module.exports=e(403)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":403,"lodash._setbinddata":705,"lodash.bind":708,"lodash.identity":720,"lodash.support":721}],705:[function(e,module,t){module.exports=e(404)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":404,"lodash._isnative":706,"lodash.noop":707}],706:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],707:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],708:[function(e,module,t){module.exports=e(407)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":407,"lodash._createwrapper":709,"lodash._slice":719}],709:[function(e,module,t){module.exports=e(408)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":408,"lodash._basebind":710,"lodash._basecreatewrapper":714,"lodash._slice":719,"lodash.isfunction":718}],710:[function(e,module,t){module.exports=e(409)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":409,"lodash._basecreate":711,"lodash._setbinddata":705,"lodash._slice":719,"lodash.isobject":732}],711:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":712,"lodash.isobject":732,"lodash.noop":713}],712:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],713:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],714:[function(e,module,t){module.exports=e(413)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":413,"lodash._basecreate":715,"lodash._setbinddata":705,"lodash._slice":719,"lodash.isobject":732}],715:[function(e,module,t){module.exports=e(410)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":410,"lodash._isnative":716,"lodash.isobject":732,"lodash.noop":717}],716:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],717:[function(e,module,t){module.exports=e(406)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":406}],718:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],719:[function(e,module,t){module.exports=e(418)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":418}],720:[function(e,module,t){module.exports=e(419)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":419}],721:[function(e,module,t){module.exports=e(420)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":420,"lodash._isnative":722}],722:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],723:[function(e,module,t){module.exports=e(422)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":422,"lodash._getarray":724,"lodash._objecttypes":726,"lodash._releasearray":727,"lodash.forin":730,"lodash.isfunction":731}],724:[function(e,module,t){module.exports=e(423)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":423,"lodash._arraypool":725}],725:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],726:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],727:[function(e,module,t){module.exports=e(426)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":426,"lodash._arraypool":728,"lodash._maxpoolsize":729}],728:[function(e,module,t){module.exports=e(424)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":424}],729:[function(e,module,t){module.exports=e(428)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":428}],730:[function(e,module,t){module.exports=e(429)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":429,"lodash._basecreatecallback":704,"lodash._objecttypes":726}],731:[function(e,module,t){module.exports=e(417)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":417}],732:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":733}],733:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],734:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":735,"lodash._shimkeys":736,"lodash.isobject":732}],735:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],736:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":737}],737:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],738:[function(e,module,t){module.exports=e(437)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":437}],739:[function(e,module,t){var r=e("lodash.keys");function a(e){var t=-1,a=r(e),n=a.length,i=Array(n);while(++t<n){i[t]=e[a[t]]}return i}module.exports=a},{"lodash.keys":740}],740:[function(e,module,t){module.exports=e(397)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":397,"lodash._isnative":741,"lodash._shimkeys":742,"lodash.isobject":744}],741:[function(e,module,t){module.exports=e(398)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":398}],742:[function(e,module,t){module.exports=e(399)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":399,"lodash._objecttypes":743}],743:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}],744:[function(e,module,t){module.exports=e(400)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":400,"lodash._objecttypes":745}],745:[function(e,module,t){module.exports=e(396)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":396}]},{},[1]);