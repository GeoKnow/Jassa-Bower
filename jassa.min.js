(function e(t,r,n){function a(s,o){if(!r[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return a(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<n.length;s++)a(n[s]);return a})({1:[function(e,module,t){var Jassa=e("./index.js");if(typeof define=="function"&&define.amd){define("Jassa",function(){return Jassa})}else{window.Jassa=Jassa}},{"./index.js":91}],2:[function(e,module,t){var r=function(){function e(e,t){var r;for(var n=1,a=arguments.length;n<a;n++){t=arguments[n];for(r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}}return e}function t(e){if(!e){return[]}if("toArray"in Object(e)){return e.toArray()}var t=e.length||0,r=new Array(t);while(t--){r[t]=e[t]}return r}var n=function(){};var a="[object Function]";var i=Object.prototype.toString;function s(e){return i.call(e)===a}function o(e){var t=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return t.length===1&&!t[0]?[]:t}function l(e,t){var r=e.length,n=t.length;while(n--){e[r+n]=t[n]}return e}function u(e,t){return function(){var r=l([e.bind(this)],arguments);return t.apply(this,r)}}var c=function(){for(var e in{toString:1}){if(e==="toString"){return false}}return true}();function d(){}function f(){var a=null,i=t(arguments);if(s(i[0])){a=i.shift()}function o(){this.initialize.apply(this,arguments)}e(o,r.Methods);o.superclass=a;o.subclasses=[];if(a){d.prototype=a.prototype;o.prototype=new d;a.subclasses.push(o)}for(var l=0,u=i.length;l<u;l++){o.addMethods(i[l])}if(!o.prototype.initialize){o.prototype.initialize=n}o.prototype.constructor=o;return o}function p(e){var t=this.superclass&&this.superclass.prototype,r=Object.keys(e);if(c){if(e.toString!==Object.prototype.toString){r.push("toString")}if(e.valueOf!==Object.prototype.valueOf){r.push("valueOf")}}for(var n=0,a=r.length;n<a;n++){var i=r[n],l=e[i];if(t&&s(l)&&o(l)[0]==="$super"){var d=l;l=u(function(e){return function(){return t[e].apply(this,arguments)}}(i),d);l.valueOf=function(e){return function(){return e.valueOf.call(e)}}(d);l.toString=function(e){return function(){return e.toString.call(e)}}(d)}this.prototype[i]=l}return this}return{create:f,Methods:{addMethods:p}}}();module.exports=r},{}],3:[function(e,module,t){var r;var n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var a;var i;var s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var o;function l(e){n.lastIndex=0;return n.test(e)?'"'+e.replace(n,function(e){var t=s[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function u(e,t){var r,n,s,c,d=a,f,p=t[e];if(p&&typeof p==="object"&&typeof p.toJSON==="function"){p=p.toJSON(e)}if(typeof o==="function"){p=o.call(t,e,p)}switch(typeof p){case"string":return l(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p){return"null"}a+=i;f=[];if(Object.prototype.toString.apply(p)==="[object Array]"){c=p.length;for(r=0;r<c;r+=1){f[r]=u(r,p)||"null"}s=f.length===0?"[]":a?"[\n"+a+f.join(",\n"+a)+"\n"+d+"]":"["+f.join(",")+"]";a=d;return s}if(o&&typeof o==="object"){c=o.length;for(r=0;r<c;r+=1){if(typeof o[r]==="string"){n=o[r];s=u(n,p);if(s){f.push(l(n)+(a?": ":":")+s)}}}}else{var h=Object.keys(p).sort();for(r in h){n=h[r];if(Object.prototype.hasOwnProperty.call(p,n)){s=u(n,p);if(s){f.push(l(n)+(a?": ":":")+s)}}}}s=f.length===0?"{}":a?"{\n"+a+f.join(",\n"+a)+"\n"+d+"}":"{"+f.join(",")+"}";a=d;return s}}var c=function(e,t,r){var n;a="";i="";if(typeof r==="number"){for(n=0;n<r;n+=1){i+=" "}}else if(typeof r==="string"){i=r}o=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return u("",{"":e})};r={stringify:c};module.exports=r},{}],4:[function(e,module,t){"use strict";var r={Class:e("./Class"),JSONCanonical:e("./JSONCanonical")};module.exports=r},{"./Class":2,"./JSONCanonical":3}],5:[function(e,module,t){var r=e("lodash.foreach");var n=e("lodash.uniq");var a=e("../ext/Class");var i=e("../sparql/ExprUtils");var s=e("./ElementsAndExprs");var o=e("../util/ArrayUtils");var l=a.create({classLabel:"jassa.facete.ConstraintManager",initialize:function(e){this.constraints=e||[]},clear:function(){o.clear(this.constraints)},isEmpty:function(){var e=this.constraints.length===0;return e},shallowClone:function(){var e=new l(this.constraints.slice(0));return e},getConstraintsByPath:function(e){var t=[];var r=this.constraints;r.forEach(function(r){var n=r.getDeclaredPaths();var a=n.some(function(t){var r=t.equals(e);return r});if(a){t.push(r)}});return t},getConstrainedSteps:function(e){var t=[];var r=e.getSteps();var a=this.constraints;for(var i=0;i<a.length;++i){var s=a[i];var o=s.getDeclaredPaths();for(var l=0;l<o.length;++l){var u=o[l];var c=u.getSteps();var d=c.length-r.length;var f=u.startsWith(e);if(d==1&&f){var p=c[c.length-1];t.push(p)}}}var h=n(t,function(e){return""+e});return h},getConstraints:function(){return this.constraints},addConstraint:function(e){this.constraints.push(e)},addConstraints:function(e){var t=this;e.forEach(function(e){t.addConstraint(e)})},removeConstraint:function(e){var t=false;var r=this.constraints;var n=[];for(var a=0;a<r.length;++a){var i=r[a];if(!i.equals(e)){n.push(i)}else{t=true}}this.constraints=n;return t},toggleConstraint:function(e){var t=this.removeConstraint(e);if(!t){this.addConstraint(e)}},createElementsAndExprs:function(e,t){var n=[];var a=[];var o={};var l=this;this.constraints.forEach(function(r){var a=r.getDeclaredPaths();var s=a.join(" ");if(t){var l=a.some(function(e){var r=t.equals(e);return r});if(l){return}}a.forEach(function(t){var r=e.forPath(t);var a=r.getElements();n.push.apply(n,a)});var u=r.createElementsAndExprs(e);var c=u.getElements();var d=u.getExprs();if(c){n.push.apply(n,c)}if(d&&d.length>0){var f=o[s];if(!f){f=[];o[s]=f}var p=i.andify(d);f.push(p)}});r(o,function(e){var t=i.orify(e);a.push(t)});var u=new s(n,a);return u}});module.exports=l},{"../ext/Class":2,"../sparql/ExprUtils":237,"../util/ArrayUtils":368,"./ElementsAndExprs":9,"lodash.foreach":577,"lodash.uniq":724}],6:[function(e,module,t){var r=e("../sparql/ElementUtils");var n=e("../sparql/expr/ExprVar");var a=e("../sparql/expr/E_Lang");var i=e("../sparql/expr/E_LangMatches");var s=e("../sparql/expr/E_Regex");var o=e("../sparql/expr/E_Equals");var l=e("../sparql/NodeValueUtils");var u=e("../sparql/element/ElementTriplesBlock");var c=e("./ElementsAndExprs");var d=e("../sparql/Concept");var f=e("../sparql/ConceptUtils");var p={createConstraintExists:function(e,t){var n=e.forPath(t);var a=r.createElementsTriplesBlock(n.getTriples());var i=new c(a,[]);return i},createConstraintLang:function(e,t,s){var o=e.forPath(t);var l=o.getVar();var u=new n(l);var d=r.createElementsTriplesBlock(o.getTriples());var f=s;var p=[new i(new a(u),f)];var h=new c(d,p);return h},createConstraintRegex:function(e,t,a){var i=e.forPath(t);var o=i.getVar();var l=new n(o);var u=r.createElementsTriplesBlock(i.getTriples());var d=a;var f=[new s(l,d,"i")];var p=new c(u,f);return p},createConstraintEquals:function(e,t,a){var i=e.forPath(t);var s=i.getVar();var u=new n(s);var d=r.createElementsTriplesBlock(i.getTriples());var f=l.makeNode(a);var p=[new o(u,f)];var h=new c(d,p);return h},createConstraintConcept:function(e,t,r){var n=e.forPath(t);var a=n.getVar();var i=new u(n.getTriples());var s=new d(i,a);var o=f.createCombinedConcept(s,r,true,false);var l=[];var p=new c([o.getElement()],l);return p}};module.exports=p},{"../sparql/Concept":228,"../sparql/ConceptUtils":229,"../sparql/ElementUtils":233,"../sparql/NodeValueUtils":243,"../sparql/element/ElementTriplesBlock":267,"../sparql/expr/E_Equals":279,"../sparql/expr/E_Lang":283,"../sparql/expr/E_LangMatches":284,"../sparql/expr/E_Regex":292,"../sparql/expr/ExprVar":303,"./ElementsAndExprs":9}],7:[function(e,module,t){var r=e("../ext/Class");var n=e("../util/collection/HashMap");var a=e("../rdf/NodeUtils");var i=e("../rdf/NodeFactory");var s=e("../sparql/element/ElementSubQuery");var o=e("../sparql/element/ElementUnion");var l=e("../sparql/element/ElementFilter");var u=e("../sparql/element/ElementGroup");var c=e("../sparql/Query");var d=e("../sparql/Concept");var f=e("../sparql/ConceptUtils");var p=e("../sparql/NodeValueUtils");var h=e("../sparql/expr/ExprVar");var v=e("../sparql/expr/E_OneOf");var g=e("../sparql/expr/E_Equals");var m=e("../service/list_service/ListServiceSparqlQuery");var _=e("../service/lookup_service/LookupService");var x=e("./FacetUtils");var b=e("../sparql/Relation");var y=e("../sparql/RelationUtils");var S=e("../sparql/VarUtils");var w=e("../sponate/agg/AggMap");var C=e("../sponate/agg/AggTransform");var E=e("../sponate/agg/AggLiteral");var j=e("../sponate/binding_mapper/BindingMapperExpr");var k=e("../sponate/LookupServiceUtils");var L=e("../sponate/ServiceUtils");var q=e("../util/shared");var T=q.Promise;var F=e("../sparql/QueryUtils");var U={createAggMapCount:function(e,t){var r=new w(new j(new h(e)),new C(new E(new j(new h(t))),a.getValue));return r},execQueries:function(e,t,r,a){var i=F.createQueryUnionSubQueries(t,[r,a]);var s;if(i){var o=this.createAggMapCount(r,a);s=L.execAgg(e,i,o)}else{s=T.resolve(new n)}return s},createQueriesPreCountCore:function(e,t,r,n){var a=e.getDefaultRelation();var i=e.getPropertyToRelation();var s=r.map(function(e){var r=i.get(e);if(!r){r=a}var s=n(r,e,t);return s});return s},createQueriesPreCount:function(e,t,r,n){var a=this.createQueriesPreCountCore(e,t,r,function(e,t,r){var a=y.createQueryRawSize(e,t,r,n);return a});return a},createQueriesExactCount:function(e,t,r){var n=this.createQueriesExactCountSingle(e,t,r);return n},createQueriesExactCountSingle:function(e,t,r){var n=this.createQueriesPreCountCore(e,t,r,function(e,t,r){var n=e.getSourceVar();var a=new l(new g(new h(n),p.makeNode(t)));var i=new b(new u([e.getElement(),a]),n,e.getTargetVar());var s=y.createQueryDistinctValueCount(i,r);return s});return n},createQueriesExactCountMulti:function(e,t,r){var n=e.getSourceVar();var a=e.getDefaultRelation();var i=e.getPropertyToRelation();var s=[];var o=[];r.forEach(function(e){var r=i.get(e);if(!r){s.push(e)}else{var n=y.createQueryDistinctValueCount(r,t);o.push(n)}});var c=a;var d=new l(new v(new h(n),s));var f=new b(new u([c.getElement(),d]),c.getSourceVar(),c.getTargetVar());var p=y.createQueryDistinctValueCount(f,t);o.push(p);return o}};module.exports=U},{"../ext/Class":2,"../rdf/NodeFactory":99,"../rdf/NodeUtils":100,"../service/list_service/ListServiceSparqlQuery":165,"../service/lookup_service/LookupService":170,"../sparql/Concept":228,"../sparql/ConceptUtils":229,"../sparql/NodeValueUtils":243,"../sparql/Query":247,"../sparql/QueryUtils":249,"../sparql/Relation":250,"../sparql/RelationUtils":251,"../sparql/VarUtils":256,"../sparql/element/ElementFilter":261,"../sparql/element/ElementGroup":262,"../sparql/element/ElementSubQuery":266,"../sparql/element/ElementUnion":268,"../sparql/expr/E_Equals":279,"../sparql/expr/E_OneOf":291,"../sparql/expr/ExprVar":303,"../sponate/LookupServiceUtils":326,"../sponate/ServiceUtils":334,"../sponate/agg/AggLiteral":352,"../sponate/agg/AggMap":353,"../sponate/agg/AggTransform":357,"../sponate/binding_mapper/BindingMapperExpr":360,"../util/collection/HashMap":389,"../util/shared":398,"./FacetUtils":20}],8:[function(e,module,t){var r=e("./FacetUtils");var n=e("../sparql/element/ElementGroup");var a=e("../sparql/element/ElementOptional");var i=e("./Path");var s={createElementTable:function(e,t){var s=r.createConceptResources(e,new i,false);var o=e.getRootFacetNode();var l=t.map(function(e){var t=o.forPath(e);var r=t.getElements(true);var i=new n(r);var s;if(r.length!==0){s=new a(i)}else{s=i}return s});var u=[];u.push.apply(u,s.getElements());u.push.apply(u,l);var c=new n(u);var d=c.flatten();return d}};module.exports=s},{"../sparql/element/ElementGroup":262,"../sparql/element/ElementOptional":264,"./FacetUtils":20,"./Path":22}],9:[function(e,module,t){var r=e("../ext/Class");var n=e("../sparql/ElementUtils");var a=r.create({initialize:function(e,t){this.elements=e;this.exprs=t},getElements:function(){return this.elements},getExprs:function(){return this.exprs},toElements:function(){var e=[];var t=n.createFilterElements(this.exprs);e.push.apply(e,this.elements);e.push.apply(e,t);return e}});module.exports=a},{"../ext/Class":2,"../sparql/ElementUtils":233}],10:[function(e,module,t){var r=e("../ext/Class");var n=e("../sparql/ConceptUtils");var a=e("./FacetNode");var i=e("./ConstraintManager");var s=r.create({classLabel:"jassa.facete.FacetConfig",initialize:function(e,t,r){this.baseConcept=e||n.createSubjectConcept();this.rootFacetNode=t||a.createRoot(this.baseConcept.getVar());this.constraintManager=r||new i},getBaseConcept:function(){return this.baseConcept},setBaseConcept:function(e){this.baseConcept=e},getRootFacetNode:function(){return this.rootFacetNode},setRootFacetNode:function(e){this.rootFacetNode=e},getConstraintManager:function(){return this.constraintManager},setConstraintManager:function(e){this.constraintManager=e}});module.exports=s},{"../ext/Class":2,"../sparql/ConceptUtils":229,"./ConstraintManager":5,"./FacetNode":11}],11:[function(e,module,t){var r=e("../ext/Class");var n=e("../rdf/NodeFactory");var a=e("../sparql/element/ElementTriplesBlock");var i=e("../sparql/GenSym");var s=e("../sparql/VarUtils");var o=e("./Path");var l=e("./Step");var u=e("./VarNode");var c=e("../util/collection/HashMap");var d=r.create({initialize:function(e,t,r,n){this.parent=r;this.root=n;if(!this.root){if(this.parent){this.root=r.root}else{this.root=this}}this.varNode=e;this.step=t;this._isActive=true;this.idToChild=new c},hashCode:function(){var e=this.idToChild.hashCode()*3;return e},equals:function(e){throw new Error("Should not be called")},getRootNode:function(){return this.root},isRoot:function(){var e=this.parent?false:true;return e},getVar:function(){var e=this.varNode.getVariableName();var t=n.createVar(e);return t},getVariable:function(){if(!this.warningShown){this.warningShown=true}return this.getVar()},getStep:function(){return this.step},getParent:function(){return this.parent},getPath:function(){var e=[];var t=this;while(t!=this.root){e.push(t.getStep());t=t.getParent()}e.reverse();var r=new o(e);return r},forPath:function(e){var t=e.getSteps();var r=this;t.forEach(function(e){r=r.forStep(e)});return r},getSteps:function(){return this.steps},isActiveDirect:function(){return this._isActive},getElements:function(){var e=[];var t=this.getTriples();if(t.length>0){var r=new a(t);e.push(r)}return e},getTriples:function(){var e=[];this.getTriples2(e);return e},getTriples2:function(e){this.createDirectTriples2(e);if(this.parent){this.parent.getTriples2(e)}return e},createDirectTriples:function(){var e=[];this.createDirectTriples2(e);return e},createDirectTriples2:function(e){if(this.step){var t=this.parent.getVariable();var r=this.getVariable();var n=this.step.createElement(t,r,this.generator);var a=n.getTriples();e.push.apply(e,a)}return e},isActive:function(){if(!this._isActive){return false}if(this.parent){return this.parent.isActive()}return true},attachToParent:function(){if(!this.parent){return}this.parent[this.id]=this;this.parent.attachToParent()},forProperty:function(e,t){var r=new l(e,t);var n=this.forStep(r);return n},forStep:function(e){var t=this.idToChild.get(e);if(!t){var r=this.varNode.forStep(e);t=new d(r,e,this,this.root);this.idToChild.put(e,t)}return t},copyExclude:function(){var e=new d;console.log("Now root:",e);this.root.copyExcludeRec(e,this);return e},copyExcludeRec:function(e,t){console.log("Copy:",this,e);if(this===t){return}this.copyTo(e);this.steps.forEach(function(r){var n=r.step;var a=r.child;console.log("child:",n,a);if(a===t){return}var i=e.forStep(n);console.log("New child:",i);a.copyExcludeRec(i,t)})}});d.createRoot=function(e,t){var r=e?e.getName():s.s.getName();t=t?t:new i("fv");var n=new u(r,t);var a=new d(n);return a};module.exports=d},{"../ext/Class":2,"../rdf/NodeFactory":99,"../sparql/GenSym":238,"../sparql/VarUtils":256,"../sparql/element/ElementTriplesBlock":267,"../util/collection/HashMap":389,"./Path":22,"./Step":27,"./VarNode":30}],12:[function(e,module,t){var r=e("../ext/Class");var n=e("../service/ListFilter");var a=r.create({initialize:function(e,t,r){this._isExpanded=!!e;this._isInverse=!!t;this.listFilter=r||new n},getListFilter:function(){return this.listFilter},setListFilter:function(e){this.listFilter=e},isExpanded:function(){return this._isExpanded},setExpanded:function(e){this._isExpanded=e},isInverse:function(){return this._isInverse},setInverse:function(e){this._isInverse=e}});module.exports=a},{"../ext/Class":2,"../service/ListFilter":131}],13:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t,r){this.sourceVar=e;this.defaultRelation=t;this.propertyToRelation=r},getSourceVar:function(){return this.sourceVar},getDefaultRelation:function(){return this.defaultRelation},getPropertyToRelation:function(){return this.propertyToRelation}});module.exports=n},{"../ext/Class":2}],14:[function(e,module,t){var r=e("../ext/Class");var n=e("./FacetServiceUtils");var a=e("./facet_service/FacetServiceFn");var i=e("./facet_service/FacetServiceClientIndex");var s=e("../sparql/LiteralPreference");var o=e("../sponate/LookupServiceUtils");var l=e("./facet_service/FacetServiceTransformConcept");var u=e("../service/list_service/ListServiceTransformItem");var c=e("../service/list_service/ListServiceTransformItems");var d=e("../sponate/MappedConceptUtils");var f=e("../sparql/LabelUtils");var p=e("../sparql/search/KeywordSearchUtils");var h=e("../util/collection/HashMap");var v=r.create({initialize:function(e,t){this.facetService=e;this.defaultSparqlService=t},create:function(){return this.facetService},labelConfig:function(e){e=e||new s;this.labelConfigLabels(e);this.labelConfigFilter(e);return this},tagFn:function(e){this.facetService=new a(this.facetService,function(t){var r=new u(t,e);return r});return this},pathToTags:function(e,t){e=e||new h;t=t||"tags";this.facetService=new a(this.facetService,function(r){var n=new c(r,function(r){r.forEach(function(r){var n=r.val;var a=n.path;var i=e.get(a);if(!i){i={};e.put(a,i)}n[t]=i});return r});return n});return this},labelConfigFilter:function(e){var t=function(t){var r;if(t){var n=f.createRelationLiteralPreference(e);r=p.createConceptRegex(n,t,true)}else{r=null}return r};this.facetService=new l(this.facetService,t);return this},labelConfigLabels:function(e,t){t=t||"labelInfo";var r=this;this.facetService=new a(this.facetService,function(n){var a=new c(n,function(n){var a=d.createMappedConceptLiteralPreference(e);var i=o.createLookupServiceMappedConcept(r.defaultSparqlService,a);var s=n.map(function(e){return e.val.property});var l=i.lookup(s).then(function(e){n.forEach(function(r){r.val[t]=e.get(r.val.property)});return n});return l});return a});return this},index:function(){var e=function(e){var t;if(e!=null){var r=new RegExp(e,"mi");t=function(e){var t=e.val.labelInfo||{id:e.key.getUri(),displayLabel:e.key.getUri(),hiddenLabels:[]};var n=r.test(t.id);var a=n||r.test(t.displayLabel);var i=a||t.hiddenLabels&&t.hiddenLabels.some(function(e){return r.test(e)});return i}}else{t=function(e){return true}}return t};this.facetService=new i(this.facetService,e,100);return this}});v.core=function(e,t){var r=n.createFacetService(e,t);var a=new v(r,e);return a};module.exports=v},{"../ext/Class":2,"../service/list_service/ListServiceTransformItem":168,"../service/list_service/ListServiceTransformItems":169,"../sparql/LabelUtils":241,"../sparql/LiteralPreference":242,"../sparql/search/KeywordSearchUtils":314,"../sponate/LookupServiceUtils":326,"../sponate/MappedConceptUtils":329,"../util/collection/HashMap":389,"./FacetServiceUtils":15,"./facet_service/FacetServiceClientIndex":45,"./facet_service/FacetServiceFn":46,"./facet_service/FacetServiceTransformConcept":51}],15:[function(e,module,t){var r=e("../sparql/ConceptUtils");var n=e("./FacetNode");var a=e("./facet_concept_supplier/FacetConceptSupplierExact");var i=e("./facet_concept_supplier/FacetConceptSupplierDeclared");var s=e("./facet_service/FacetServiceSparql");var o=e("./facet_service/FacetServiceTransformConcept");var l=e("./facet_service/FacetServiceClientIndex");var u=e("./facet_service/FacetServiceLookup");var c=e("../sparql/LabelUtils");var d=e("../sparql/search/KeywordSearchUtils");var f=e("./FacetConfig");var p=e("./ConstraintManager");var h=e("../sparql/BestLabelConfig");var v=e("../sponate/MappedConceptUtils");var g=e("../sponate/LookupServiceUtils");var m=e("../service/lookup_service/LookupServiceMulti");var _=e("../service/lookup_service/LookupServiceKeyMap");var x=e("../service/lookup_service/LookupServiceTransformKey");var b=e("../service/lookup_service/LookupServiceFn");var y=e("../service/lookup_service/LookupServiceConst");var S=e("./FacetUtils");var w=e("./lookup_service/LookupServiceFacetCount");var C=e("./lookup_service/LookupServiceFacetPreCount");var E=e("./lookup_service/LookupServiceFacetExactCount");var j=e("./Step");var k=e("./Path");var L={createFacetConceptSupplier:function(e){var t=new i(e);return t},createFacetService:function(e,t){var r=L.createFacetConceptSupplier(t);var n=new s(e,r);var a=function(r){var n;if(r==null){n=new m({id:new _,countInfo:new y({count:0,hasMoreItems:true})})}else{var a=S.createFacetRelationIndex(t,r);var i=new C(e,a);var s=new E(e,a);var o=new w(i,s);n=new m({id:new _,valueCountInfo:o})}return n};n=new u(n,a);return n}};module.exports=L},{"../service/lookup_service/LookupServiceConst":174,"../service/lookup_service/LookupServiceFn":177,"../service/lookup_service/LookupServiceKeyMap":180,"../service/lookup_service/LookupServiceMulti":183,"../service/lookup_service/LookupServiceTransformKey":187,"../sparql/BestLabelConfig":224,"../sparql/ConceptUtils":229,"../sparql/LabelUtils":241,"../sparql/search/KeywordSearchUtils":314,"../sponate/LookupServiceUtils":326,"../sponate/MappedConceptUtils":329,"./ConstraintManager":5,"./FacetConfig":10,"./FacetNode":11,"./FacetUtils":20,"./Path":22,"./Step":27,"./facet_concept_supplier/FacetConceptSupplierDeclared":41,"./facet_concept_supplier/FacetConceptSupplierExact":42,"./facet_service/FacetServiceClientIndex":45,"./facet_service/FacetServiceLookup":47,"./facet_service/FacetServiceSparql":49,"./facet_service/FacetServiceTransformConcept":51,"./lookup_service/LookupServiceFacetCount":60,"./lookup_service/LookupServiceFacetExactCount":61,"./lookup_service/LookupServiceFacetPreCount":62}],16:[function(e,module,t){var r=e("../ext/Class");var n=e("../sparql/LiteralPreference");var a=e("./FacetConfig");var i=e("../util/collection/HashMap");var s=e("./FacetTreeState");var o=e("../service/ListFilter");var l=r.create({initialize:function(e,t,r,o,l,u){this.facetConfig=e||new a;this.literalPreference=t||new n;this.facetTreeState=r||new s;this.pathToTags=o||new i;this.tagFn=u},getFacetConfig:function(){return this.facetConfig},getFacetTreeState:function(){return this.facetTreeState},getLiteralPreference:function(){return this.literalPreference},getPathToTags:function(){return this.pathToTags},getTagFn:function(){return this.tagFn}});module.exports=l},{"../ext/Class":2,"../service/ListFilter":131,"../sparql/LiteralPreference":242,"../util/collection/HashMap":389,"./FacetConfig":10,"./FacetTreeState":19}],17:[function(e,module,t){var r=e("./Step");var n=e("./Path");var a=e("./PathHead");var i=e("../util/shared");var s=i.Promise;var o=e("./FacetNodeState");var l=e("../service/ListFilter");var u=e("../util/ObjectUtils");var c=e("../util/PromiseUtils");var d={fetchFacetTree:function(e,t,r){var n=d.fetchFacetTreePathRec(e,t,r).then(function(e){var t=r==null?e.outgoing.children[0]:e;return t});return n},fetchFacetTreePathRec:function(e,t,r){r=r||null;var n=t.getPathExpansions();var i=t.getPathToDirection();var s=r?n.contains(r):true;var o=i.get(r)||1;var l=[];if(s){var u;var d;if(o==null||o===1||o===2){u=r?new a(r,false):null;d=this.fetchFacetTreePathHeadRec(e,t,u);l.push(d)}else{l.push(null)}if(o===-1||o===2){u=r?new a(r,true):null;d=this.fetchFacetTreePathHeadRec(e,t,u);l.push(d)}else{l.push(null)}}return c.all(l).spread(function(e,t){var n={path:r,isExpanded:s,outgoing:e,incoming:t};return n})},fetchFacetTreePathHeadRec:function(e,t,r){var n=t.getPathHeadToFilter();var a=n.get(r)||new l(null,10);var i=s.resolve(e.prepareListService(r)).then(function(e){var t=e.fetchItems(a.getConcept(),a.getLimit(),a.getOffset());var r=e.fetchCount(a.getConcept());return[t,r]}).spread(function(n,i){var s=n.map(function(e){return e.val});var o=s.map(function(r){var n=r.path;if(!n){throw new Error("Could not obtain a path for the sub facets of "+JSON.stringify(r))}var a=d.fetchFacetTreePathRec(e,t,n);return a});var l=c.all(o).then(function(e){s.forEach(function(t,r){var n=e[r];u.extend(t,n)});var t={path:r?r.getPath():null,pathHead:r,childCountInfo:i,listFilter:a,children:s};return t});return l});return i}};module.exports=d},{"../service/ListFilter":131,"../util/ObjectUtils":376,"../util/PromiseUtils":378,"../util/shared":398,"./FacetNodeState":12,"./Path":22,"./PathHead":23,"./Step":27}],18:[function(e,module,t){var r=e("./facet_tree_service/FacetTreeService");var n=e("../util/collection/HashMap");var a=e("./FacetServiceBuilder");var i=e("./FacetNodeState");var s={createFacetTreeService:function(e,t){var n=t.getFacetConfig();var i=t.getPathToTags();var s=function(e){var r=t.getTagFn();if(r){e=r(e)}return e};var o=a.core(e,n).labelConfig().index().pathToTags(i).tagFn(s).create();var l=new r(o,t.getFacetTreeState());return l}};module.exports=s},{"../util/collection/HashMap":389,"./FacetNodeState":12,"./FacetServiceBuilder":14,"./facet_tree_service/FacetTreeService":53}],19:[function(e,module,t){var r=e("../ext/Class");var n=e("../service/ListFilter");var a=e("../util/collection/HashMap");var i=e("../util/collection/HashSet");var s=r.create({initialize:function(e,t,r){this.pathExpansions=e||new i;this.pathToDirection=t||new a;this.pathHeadToFilter=r||new a},getPathExpansions:function(){return this.pathExpansions},getPathToDirection:function(){return this.pathToDirection},getPathHeadToFilter:function(){return this.pathHeadToFilter}});module.exports=s},{"../ext/Class":2,"../service/ListFilter":131,"../util/collection/HashMap":389,"../util/collection/HashSet":390}],20:[function(e,module,t){var r=e("../sparql/Concept");var n=e("../sparql/Relation");var a=e("../util/collection/HashMap");var i=e("../rdf/NodeFactory");var s=e("../rdf/Triple");var o=e("../rdf/NodeUtils");var l=e("../sparql/expr/ExprVar");var u=e("../sparql/expr/E_Equals");var c=e("../sparql/expr/NodeValue");var d=e("../sparql/NodeValueUtils");var f=e("../sparql/expr/E_LogicalNot");var p=e("../sparql/expr/E_OneOf");var h=e("../sparql/element/ElementGroup");var v=e("../sparql/element/ElementFilter");var g=e("../sparql/element/ElementTriplesBlock");var m=e("../sparql/PatternUtils");var _=e("../sparql/ElementUtils");var x=e("../sparql/VarUtils");var b=e("./Step");var y=e("./StepUtils");var S=e("./StepRelation");var w=e("./FacetRelationIndex");var C=e("./PathHead");var E={createConceptResources:function(e,t,n){var a=e.getBaseConcept();var i=e.getRootFacetNode();var s=e.getConstraintManager();var o=n?t:null;var l=s.createElementsAndExprs(i,o);var u=l.getElements();var c=l.getExprs();var d=i.forPath(t);var f=d.getVar();var p=a.getElements();var g=d.getElements();var m=[];m.push.apply(m,g);m.push.apply(m,u);if(a.isSubjectConcept()){if(m.length===0){m=p}}else{m.push.apply(m,p)}var _=c.map(function(e){var t=new v(e);return t});m.push.apply(m,_);var x=new h(m).flatten();var b=new r(x,f);return b},createConceptFacets:function(e,t){var n=this.createRelationFacets(e,t);var a=new r(n.getElement(),n.getSourceVar());return a},createRelationFacets:function(e,t,r){var a=t.getPath();var i=t.isInverse();var o=e.getBaseConcept();var c=e.getRootFacetNode();var f=e.getConstraintManager();var p=null;if(r){p=new b(r.getUri(),i)}var _=null;if(p){_=a.copyAppendStep(p)}var y=f.createElementsAndExprs(c,_);var S=y.toElements();var w=c.forPath(a);var C=w.getVar();var E=o.getElements();var j;if(o.isSubjectConcept()){j=S}else{j=E.concat(S)}var k=m.getVarsMentioned(j);var L=x.freshVar("p",k);var q=x.freshVar("o",k);var T=!i?new s(C,L,q):new s(q,L,C);j.push(new g([T]));if(p){var F=new l(L);var U=new u(F,d.makeNode(r));j.push(new v(U))}var A=w.getElements();j.push.apply(j,A);var V=new h(j).flatten();var N=new n(V,L,q);return N},createStepRelationsProperties:function(e,t,r,a){var i=[];var s=t.getPath();var l=t.isInverse();var u=e.getBaseConcept();var c=e.getRootFacetNode();var d=e.getConstraintManager();var f=r.map(o.getUri);var p=c.forPath(s);var v=d.getConstrainedSteps(s);var g=v.filter(function(e){var t=e.isInverse()===l;if(!t){return false}var r=f.indexOf(e.getPropertyName())>=0;var n=a?!r:r;return n});var m=g.map(y.getPropertyName);var _=[];var x=[];r.forEach(function(e){if(m.indexOf(e.getUri())>=0){x.push(e)}else{_.push(e)}});var b=this.createStepRelations(e,s,g);i.push.apply(i,b);var w=this.createRelationFacets(e,t);var C=this.createElementFilterBindVar(w.getSourceVar(),_,false);if(C!=null){w=new n(new h([w.getElement(),C]),w.getSourceVar(),w.getTargetVar())}if(_.length>0||a){var E=new S(null,w);i.push(E)}return i},createFacetRelationIndex:function(e,t){var r=E.createStepRelationsProperties(e,t,[],true);var n=r.length>0?r[0].getRelation().getSourceVar():null;var s=new a;var o=null;r.forEach(function(e){var t=e.getStep();var r=e.getRelation();var n=t?i.createUri(t.getPropertyName()):null;if(n){s.put(n,r)}else{o=r}});var l=new w(n,o,s);return l},createElementFilterBindVar:function(e,t,r){var n=null;if(t.length>0){var a=new p(new l(e),t);if(r){a=new f(a)}n=new v(a)}return n},createStepRelations:function(e,t,r){var n=this;var a=r.map(function(r){var a=n.createStepRelation(e,t,r);return a});return a},createStepRelation:function(e,t,r){var n=r.getPropertyName();var a=i.createUri(n);var s=new C(t,r.isInverse());var o=this.createRelationFacets(e,s,a);var l=new S(r,o);return l}};module.exports=E},{"../rdf/NodeFactory":99,"../rdf/NodeUtils":100,"../rdf/Triple":102,"../sparql/Concept":228,"../sparql/ElementUtils":233,"../sparql/NodeValueUtils":243,"../sparql/PatternUtils":244,"../sparql/Relation":250,"../sparql/VarUtils":256,"../sparql/element/ElementFilter":261,"../sparql/element/ElementGroup":262,"../sparql/element/ElementTriplesBlock":267,"../sparql/expr/E_Equals":279,"../sparql/expr/E_LogicalNot":288,"../sparql/expr/E_OneOf":291,"../sparql/expr/ExprVar":303,"../sparql/expr/NodeValue":304,"../util/collection/HashMap":389,"./FacetRelationIndex":13,"./PathHead":23,"./Step":27,"./StepRelation":28,"./StepUtils":29}],21:[function(e,module,t){var r=e("../ext/Class");var n=e("../service/list_service/ListServiceTransformConcept");var a=e("../service/list_service/ListServiceConceptKeyLookup");var i=e("../service/list_service/ListServiceTransformItems");var s=e("../sponate/LookupServiceUtils");var o=e("./facet_value_service/FacetValueService");var l=e("./facet_value_service/FacetValueServiceWrapListService");var u=e("../sparql/LiteralPreference");var c=e("../sparql/search/KeywordSearchUtils");var d=e("../sparql/LabelUtils");var f=r.create({initialize:function(e,t,r){this.facetValueService=e;this.sparqlService=t;this.facetConfig=r},labelConfig:function(e){e=e||new u;this._labelConfigLookup(e);this._labelConfigFilter(e);return this},wrapListService:function(e){this.facetValueService=new l(this.facetValueService,e);return this},constraintTagging:function(){var e=this.facetConfig.getConstraintManager();var t=function(t,r){
var n=new i(t,function(t){var n=e.getConstraintsByPath(r);var a={};n.forEach(function(e){if(e.getName()==="equals"){a[e.getValue()]=true}});t.forEach(function(e){var t=e.val;var r=a[""+t.node];t.isConstrainedEqual=r});return t});return n};this.wrapListService(t);return this},_labelConfigFilter:function(e){var t=function(t){var r;if(t){var n=d.createRelationLiteralPreference(e);r=c.createConceptRegex(n,t,true)}else{r=null}return r};var r=function(e){var r=new n(e,t);return r};this.wrapListService(r);return this},_labelConfigLookup:function(e){var t=this;var r=function(r){var n=s.createLookupServiceNodeLabels(t.sparqlService,e);var i=new a(r,n,null,function(e,t){e.val.labelInfo=t;return e});return i};this.wrapListService(r);return this},create:function(){return this.facetValueService}});f.core=function(e,t,r){var n=new o(e,t,r);var a=new f(n,e,t);return a};module.exports=f},{"../ext/Class":2,"../service/list_service/ListServiceConceptKeyLookup":161,"../service/list_service/ListServiceTransformConcept":166,"../service/list_service/ListServiceTransformItems":169,"../sparql/LabelUtils":241,"../sparql/LiteralPreference":242,"../sparql/search/KeywordSearchUtils":314,"../sponate/LookupServiceUtils":326,"./facet_value_service/FacetValueService":56,"./facet_value_service/FacetValueServiceWrapListService":57}],22:[function(e,module,t){var r=e("../ext/Class");var n=e("./Step");var a=r.create({classLabel:"jassa.facete.Path",initialize:function(e){this.steps=e?e:[]},getParent:function(){var e=this.steps.length;var t=e===0?null:new a(this.steps.slice(0,e-1));return t},getLength:function(){return this.steps.length},isEmpty:function(){var e=this.steps.length===0;return e},toString:function(){var e=this.steps.join(" ");return e},concat:function(e){var t=new a(this.steps.concat(e.steps));return t},getLastStep:function(){var e=this.steps;var t=e.length;var r;if(t===0){r=null}else{r=e[t-1]}return r},getSteps:function(){return this.steps},slice:function(e,t){var r=this.steps.slice(e,t);var n=new a(r);return n},startsWith:function(e){var t=e.steps.length;if(t>this.steps.length){return false}for(var r=0;r<t;++r){var n=this.steps[r];var a=e.steps[r];if(!n.equals(a)){return false}}return true},hashCode:function(){if(this.hash==null){this.hash=this.steps.reduce(function(e,t){var r=e+t.hashCode();return r},1357)}return this.hash},equals:function(e){if(!e){return false}var t=this.steps.length;if(t!=e.steps.length){return false}var r=this.startsWith(e);return r},copyAppendStep:function(e){var t=this.steps.slice(0);t.push(e);var r=new a(t);return r},toJson:function(){var e=[];var t=this.steps;for(var r=0;r<t.length;++r){var n=t[r];var a=n.toJson();e.push(a)}return e},getPropertyNames:function(){var e=[];var t=this.steps;for(var r=0;r<t.length;++r){var n=t[r];var a=n.getPropertyName();e.push(a)}return e}});a.fromJson=function(e){var t=[];for(var r=0;r<e.length;++r){var i=e[r];var s=n.fromJson(i);t.push(s)}var o=new a(t);return o};a.parse=function(e){e=e.trim();var t=e.length!==0?e.split(" "):[];var r=t.map(function(e){return n.parse(e)});var i=new a(r);return i};module.exports=a},{"../ext/Class":2,"./Step":27}],23:[function(e,module,t){var r=e("../ext/Class");var n=e("./Path");var a=e("../util/ObjectUtils");var i=r.create({initialize:function(e,t){this.path=e;this._isInverse=!!t},getPath:function(){return this.path},equals:function(e){var t=this===e||this._isInverse===e._isInverse&&a.isEqual(this.path,e.path);return t},hashCode:function(){if(this.hash==null){this.hash=(this._isInverse?3:7)*this.path.hashCode()}return this.hash},isInverse:function(){return this._isInverse},toString:function(){return""+this.path+(this._isInverse?" (inverse)":"")},up:function(e){var t=this.path.slice(0,-1);e=e==null?this._isInverse:e;var r=new i(t,e);return r}});i.parse=function(e,t){var r=n.parse(e);var a=new i(r,!!t);return a};module.exports=i},{"../ext/Class":2,"../util/ObjectUtils":376,"./Path":22}],24:[function(e,module,t){var r=e("lodash");var n=e("../rdf/NodeFactory");var a=e("./FacetNode");var i=e("../sparql/VarUtils");var s=e("../sparql/ElementUtils");var o=e("../sparql/Relation");var l=e("../rdf/NodeUtils");var u=e("../util/StringUtils");var c={createRelation:function(e,t){t=t||i.s;var r=a.createRoot(t);var n=r.forPath(e);var l=n.getElements();var u=s.groupIfNeeded(l);var c=n.getVar();var d=new o(u,t,c);return d},getUris:function(e){var t=e?e.getSteps():[];var n=t.map(function(e){return e.getPropertyName()});var a=r.uniq(n);return a},getNodes:function(e){var t=c.getUris(e);var r=t.map(n.createUri);return r},getNodesFromPaths:function(e){var t=e.map(function(e){var t=c.getNodes(e);return t});var n=r.flatten(t);var a=l.uniq(n);return a},createLabelFn:function(e,t,r){var n=function(n,a){var i=c.createLabel(n,a,e,t,r);return i};return n},createLabel:function(e,t,a,i,s){a=a||"Items";i=i||"^-1:";s=s||" ";var o=r.isFunction(i)?i:u.parseAffixFn(i);var l=e.getSteps();var c=l.map(function(e){var r=n.createUri(e.getPropertyName());var a=t.get(r);var i=a.displayLabel||"(no label available)";if(e.isInverse()){i=o(i)}return i});var d=c.join(s);if(d===""){d=a}return d}};module.exports=c},{"../rdf/NodeFactory":99,"../rdf/NodeUtils":100,"../sparql/ElementUtils":233,"../sparql/Relation":250,"../sparql/VarUtils":256,"../util/StringUtils":383,"./FacetNode":11,lodash:785}],25:[function(e,module,t){var r=e("../rdf/NodeFactory");var n=e("../sparql/Query");var a=e("../sparql/expr/ExprVar");var i=e("../sparql/SortCondition");var s=[];var o=e("../sparql/expr/E_LogicalNot");var l=e("../sparql/expr/E_Bound");var u={createQueryFacet:function(e,t){if(!e){return null}var u=t.isDistinct();var c=new n;c.setQueryPattern(e);var d=t.getColumns();var f={};var p=[];var h=[];d.forEach(function(e){var t=e.getId();var n=r.createVar(t);var i=new a(n);var o=e.getAggregator();if(o){p.push(t);var l=o.getName();var u=s[l];if(!u){throw new Error("No aggExprFactory for "+l)}var d=u.createExpr(i);i=d;c.getProject().add(n,i)}else{h.push(t);c.getProject().add(n)}f[t]=i});if(p.length>0){h.forEach(function(e){var t=f[e];c.getGroupBy().push(t)});u=false}var v=t.getLimitAndOffset();c.setLimit(v.getLimit());c.setOffset(v.getOffset());var g=t.getSortConditions();g.forEach(function(e){var t=e.getColumnId();var r=f[t];if(!r){console.log("[ERROR] Should not happen");throw new Error("Should not happen")}var n=e.getSortDir();var a=e.getSortType();var s=null;switch(a){case"null":if(p.indexOf(t)<0){if(n>0){s=new i(new o(new l(r)),1)}else if(n<0){s=new i(new l(r),1)}}break;case"data":s=!n?null:new i(r,n);break;default:throw new Error("Should not happen")}if(s){c.getOrderBy().push(s)}});c.setDistinct(u);return c}}},{"../rdf/NodeFactory":99,"../sparql/Query":247,"../sparql/SortCondition":252,"../sparql/expr/E_Bound":277,"../sparql/expr/E_LogicalNot":288,"../sparql/expr/ExprVar":303}],26:[function(e,module,t){},{}],27:[function(e,module,t){var r=e("lodash.isequal");var n=e("../ext/Class");var a=e("../rdf/NodeFactory");var i=e("../rdf/Triple");var s=e("../sparql/element/ElementTriplesBlock");var o=e("../util/ObjectUtils");var l=n.create({classLabel:"jassa.facete.Step",initialize:function(e,t){this.type="property";this.propertyName=e;this._isInverse=t},toJson:function(){var e={isInverse:this.isInverse,propertyName:this.propertyName};return e},getPropertyName:function(){return this.propertyName},isInverse:function(){return this._isInverse},equals:function(e){var t=this._isInverse===e._isInverse&&this.propertyName===e.propertyName;return t},hashCode:function(){if(this.hash==null){this.hash=(this._isInverse?3:7)*o.hashCodeStr(this.propertyName)}return this.hash},toString:function(){if(this._isInverse){return"<"+this.propertyName}else{return this.propertyName}},createElement:function(e,t,r){var n=a.createUri(this.propertyName);var o;if(this._isInverse){o=new i(t,n,e)}else{o=new i(e,n,t)}var l=new s([o]);return l}});l.fromJson=function(e){var t=e.propertyName;var r=e.IsInverse();var n=new l(t,r);return n};l.parse=function(e){var t;if(e.charAt(0)==="<"){t=new l(e.substring(1),true)}else{t=new l(e,false)}return t};module.exports=l},{"../ext/Class":2,"../rdf/NodeFactory":99,"../rdf/Triple":102,"../sparql/element/ElementTriplesBlock":267,"../util/ObjectUtils":376,"lodash.isequal":607}],28:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.step=e;this.relation=t},getStep:function(){return this.step},getRelation:function(){return this.relation},toString:function(){return this.step+": "+this.relation}});module.exports=n},{"../ext/Class":2}],29:[function(e,module,t){var r={getPropertyName:function(e){var t=e.getPropertyName();return t}};module.exports=r},{}],30:[function(e,module,t){var r=e("lodash.foreach");var n=e("../ext/Class");var a=e("./VarNode");var i=e("./Step");var s=e("../util/collection/HashMap");var o=e("../util/ObjectUtils");var a=n.create({initialize:function(e,t,r,n,a){this.variableName=e;this.generator=t;this.step=r;this.parent=n;this.root=a;if(!this.root){if(this.parent){this.root=n.root}else{this.root=this}}this.idToChild=new s},hashCode:function(){var e=o.hashCodeStr(this.variableName)*(this.step?this.step.hashCode():7);return e},equals:function(e){throw new Error("Should not be called")},isRoot:function(){var e=this.parent?false:true;return e},getVariableName:function(){return this.variableName},getStop:function(e){return this.step},getSteps:function(){return this.steps},forProperty:function(e,t){var r=new i(e,t);var n=this.forStep(r);return n},forStep:function(e){var t=this.idToChild.get(e);if(!t){var r=this.generator.next();t=new a(r,this.generator,e,this);this.idToChild.put(e,t)}return t},findNodeByVarName:function(e){if(this.variableName===e){return this}var t=[];r(this.idToChild,function(e){t.push(e)});for(var n=0;n<t.length;++n){var a=t[n];var i=a.findNodeByVarName(e);if(i){return i}}return null}});module.exports=a},{"../ext/Class":2,"../util/ObjectUtils":376,"../util/collection/HashMap":389,"./Step":27,"./VarNode":30,"lodash.foreach":577}],31:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({getName:function(){throw new Error("Override me")},getDeclaredPaths:function(){console.log("[ERROR] Override me");throw new Error("Override me")},createElementsAndExprs:function(e){throw new Error("Override me")},equals:function(){throw new Error("Override me")},hashCode:function(){throw new Error("Override me")}});module.exports=n},{"../../ext/Class":2}],32:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Constraint");var a=r.create(n,{initialize:function(e,t){this.name=e;this.path=t},getName:function(){return this.name},getDeclaredPaths:function(){return[this.path]},getDeclaredPath:function(){return this.path}});module.exports=a},{"../../ext/Class":2,"./Constraint":31}],33:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/ObjectUtils");var a=e("./ConstraintBasePath");var i=r.create(a,{initialize:function($super,e,t,r){$super(e,t);this.value=r},getValue:function(){return this.value},equals:function(e){if(!(e instanceof a)){return false}var t=this.name==e.name;var r=this.path.equals(e.path);var n=this.value.equals(e.value);var i=t&&r&&n;return i},hashCode:function(){var e=n.hashCode(this,true);return e}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./ConstraintBasePath":32}],34:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ConstraintUtils");var a=e("./ConstraintBasePath");var i=e("../../util/ObjectUtils");var s=r.create(a,{classLabel:"jassa.facete.ConstraintConcept",initialize:function($super,e,t){$super("concept",e);this.concept=t},createElementsAndExprs:function(e){var t=n.createConstraintConcept(e,this.path,this.concept);return t},equals:function(e){var t=e&&this.path.equals(e.path)&&""+this.concept===""+e.concept;return t},hashCode:function(){var e=i.hashCode(this,true);return e}});module.exports=s},{"../../ext/Class":2,"../../util/ObjectUtils":376,"../ConstraintUtils":6,"./ConstraintBasePath":32}],35:[function(e,module,t){},{}],36:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ConstraintUtils");var a=e("./ConstraintBasePathValue");var i=r.create(a,{classLabel:"jassa.facete.ConstraintEquals",initialize:function($super,e,t){$super("equals",e,t)},createElementsAndExprs:function(e){var t=n.createConstraintEquals(e,this.path,this.value);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePathValue":33}],37:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ConstraintUtils");var a=e("./ConstraintBasePath");var i=r.create(a,{classLabel:"jassa.facete.ConstraintExists",initialize:function($super,e){$super("exists",e)},createElementsAndExprs:function(e){var t=n.createConstraintExists(e,this.path);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePath":32}],38:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ConstraintUtils");var a=e("./ConstraintBasePathValue");var i=r.create(a,{classLabel:"jassa.facete.ConstraintLang",initialize:function($super,e,t){$super("lang",e,t)},createElementsAndExprs:function(e){var t=n.createConstraintLang(e,this.path,this.value);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePathValue":33}],39:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ConstraintUtils");var a=e("./ConstraintBasePathValue");var i=r.create(a,{classLabel:"jassa.facete.ConstraintRegex",initialize:function($super,e,t){$super("regex",e,t)},createElementsAndExprs:function(e){var t=n.createConstraintRegex(e,this.path,this.value.getLiteralLexicalForm());return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":6,"./ConstraintBasePathValue":33}],40:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({getConcept:function(e){throw new Error("Override me")}});module.exports=n},{"../../ext/Class":2}],41:[function(e,module,t){var r=e("../../ext/Class");var n=e("./FacetConceptSupplierExact");var a=e("../../sparql/CannedConceptUtils");var i=r.create(n,{initialize:function($super,e){$super(e)},getConcept:function($super,e){var t=this.facetConfig;var r=e.getPath();var n=t.getConstraintManager();var i=t.getBaseConcept();var s=i.isSubjectConcept();var o=r.isEmpty();var l=n.isEmpty();var u=s&&o&&l;var c=u?a.createConceptDeclaredProperties(i.getVar()):$super(e);return c}});module.exports=i},{"../../ext/Class":2,"../../sparql/CannedConceptUtils":227,"./FacetConceptSupplierExact":42}],42:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../sparql/Concept");var a=e("../FacetUtils");var i=e("./FacetConceptSupplier");var s=r.create(i,{initialize:function(e){this.facetConfig=e},getConcept:function(e){var t=a.createRelationFacets(this.facetConfig,e);var r=new n(t.getElement(),t.getSourceVar());return r}});module.exports=s},{"../../ext/Class":2,"../../sparql/Concept":228,"../FacetUtils":20,"./FacetConceptSupplier":40}],43:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/HashMap");var a=e("../FacetUtils");var i=e("./FacetConceptSupplier");var s=r.create({initialize:function(e,t){this.facetConceptSupplierFallback=e;this.pathHeadToConcept=t||new n},getPathHeadToConcept:function(){return this.pathHeadToConcept},getConcept:function(e){var t=this.pathHeadToConcept.get(e);var r=t||this.facetConceptSupplierFallback.getConcept(e);return r}});module.exports=s},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../FacetUtils":20,"./FacetConceptSupplier":40}],44:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({prepareListService:function(e){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],45:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../service/list_service/ListServiceArray");var a=e("../../service/list_service/ListServiceTransformItem");var i=e("../../util/shared");var s=i.Promise;var o=r.create({initialize:function(e,t,r){this.facetService=e;this.filterSupplierFn=t;this.itemLimit=r||100},prepareListService:function(e){var t=this;var r=s.resolve(this.facetService.prepareListService(e)).then(function(e){var r=e.fetchCount(null,t.itemLimit);return[r,e]}).spread(function(e,r){var a=e.hasMoreItems?r:r.fetchItems().then(function(e){var r=new n(e,t.filterSupplierFn);return r});return a});return r}});module.exports=o},{"../../ext/Class":2,"../../service/list_service/ListServiceArray":158,"../../service/list_service/ListServiceTransformItem":168,"../../util/shared":398}],46:[function(e,module,t){var r=e("../../ext/Class");var n=e("./FacetService");var a=r.create(n,{initialize:function(e,t){this.facetService=e;this.fn=t},prepareListService:function(e){var t=this;var r=this.facetService.prepareListService(e).then(function(e){var r=t.fn(e);return r});return r}});module.exports=a},{"../../ext/Class":2,"./FacetService":44}],47:[function(e,module,t){var r=e("../../ext/Class");var n=e("./FacetService");var a=e("../../util/collection/HashMap");var i=e("../../service/list_service/ListServiceConceptKeyLookup");var s=e("../../service/list_service/ListServiceTransformItem");var o=r.create(n,{initialize:function(e,t){this.facetService=e;this.fnLookupService=t},prepareListService:function(e){var t=this.fnLookupService(e);var r=this.facetService.prepareListService(e).then(function(e){e=new i(e,t,function(e){var t=e.val.property;return t});return e});return r}});module.exports=o},{"../../ext/Class":2,"../../service/list_service/ListServiceConceptKeyLookup":161,"../../service/list_service/ListServiceTransformItem":168,"../../util/collection/HashMap":389,"./FacetService":44}],48:[function(e,module,t){var r=e("../../ext/Class");var n=e("./FacetService");var a=e("../../util/collection/HashMap");var i=r.create(n,{initialize:function(e,t){this.facetServiceFallback=e;this.pathHeadToFacetService=this.pathHeadToFacetService||new a},getPathHeadToFacetService:function(){return this.pathHeadToFacetService},prepareListService:function(e){var t=this.pathHeadToFacetService.get(e);var r=t||this.facetServiceFallback;var n=r.prepareListService(e);return n}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":389,"./FacetService":44}],49:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeFactory");var a=e("../../sparql/Concept");var i=e("../../sparql/ConceptUtils");var s=e("../../service/list_service/ListServiceArray");var o=e("../../service/list_service/ListServiceSparqlQuery");var l=e("../../service/list_service/ListServiceTransformItem");var u=e("./FacetService");var c=e("../FacetUtils");var d=e("../../sparql/RelationUtils");var f=e("../../sparql/VarUtils");var p=e("../Step");var h=e("../Path");var v=e("../../util/shared");var g=v.Promise;var m=r.create(u,{initialize:function(e,t){this.sparqlService=e;this.facetConceptSupplier=t},prepareListService:function(e){var t;if(e==null){var r=new h;var a=[{key:r,val:{path:r,property:n.createUri("http://facete.aksw.org/resource/rootFacet")}}];t=new s(a,function(e){return function(e){return true}})}else{var u=this.facetConceptSupplier.getConcept(e);var c=i.createQueryList(u);t=new o(this.sparqlService,c,u.getVar(),false,true);t=new l(t,function(t){var r=t.key;var n=new p(r.getUri(),e.isInverse());var a=e.getPath().copyAppendStep(n);var i={key:r,val:{path:a,property:r}};return i})}var d=g.resolve(t);return d}});module.exports=m},{"../../ext/Class":2,"../../rdf/NodeFactory":99,"../../service/list_service/ListServiceArray":158,"../../service/list_service/ListServiceSparqlQuery":165,"../../service/list_service/ListServiceTransformItem":168,"../../sparql/Concept":228,"../../sparql/ConceptUtils":229,"../../sparql/RelationUtils":251,"../../sparql/VarUtils":256,"../../util/shared":398,"../FacetUtils":20,"../Path":22,"../Step":27,"./FacetService":44}],50:[function(e,module,t){},{}],51:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../service/list_service/ListServiceTransformConcept");var a=e("./FacetService");var i=r.create({initialize:function(e,t){this.facetService=e;this.fnTransform=t},prepareListService:function(e){var t=this.facetService.prepareListService(e);var r=this;var a=t.then(function(e){var t=new n(e,r.fnTransform);return t});return a}});module.exports=i},{"../../ext/Class":2,"../../service/list_service/ListServiceTransformConcept":166,"./FacetService":44}],52:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({createFacetService:function(e,t){throw new Error("Override me")}});module.exports=n},{"../../ext/Class":2}],53:[function(e,module,t){var r=e("../../ext/Class");var n=e("../FacetTreeServiceHelpers");var a=r.create({initialize:function(e,t){this.facetService=e;this.facetTreeState=t},fetchFacetTree:function(e){var t=n.fetchFacetTree(this.facetService,this.facetTreeState,e);return t}});module.exports=a},{"../../ext/Class":2,"../FacetTreeServiceHelpers":17}],54:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({prepareConcept:function(e,t){throw new Error("Method not overridden")}});module.exports=n},{"../../ext/Class":2}],55:[function(e,module,t){var r=e("../../ext/Class");var n=e("./FacetValueConceptService");var a=e("../FacetUtils");var i=e("../../util/shared");var s=i.Promise;var o=r.create({initialize:function(e){this.facetConfig=e},prepareConcept:s.method(function(e,t){var r=a.createConceptResources(this.facetConfig,e,t);return r})});module.exports=o},{"../../ext/Class":2,"../../util/shared":398,"../FacetUtils":20,"./FacetValueConceptService":54}],56:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeUtils");var a=e("../../sparql/Relation");var i=e("../../sparql/RelationUtils");var s=e("../FacetUtils.js");var o=e("../../sparql/Binding");var l=e("../../sparql/ElementUtils");var u=e("../../sparql/ConceptUtils");var c=e("../../service/ServiceUtils");var d=e("../../service/list_service/ListServiceSparqlQuery");var f=e("../../service/list_service/ListServiceTransformItem");var p=e("../../sparql/SortCondition");var h=r.create({initialize:function(e,t,r){this.sparqlService=e;this.rowLimit=r||1e5;this.facetConfig=t},prepareTableService:function(e,t){var r=s.createConceptResources(this.facetConfig,e,t);var h=this.facetConfig.getRootFacetNode().getVar();var v=this;var g=c.fetchCountRows(this.sparqlService,r.getElement(),this.rowLimit).then(function(t){var s=t.hasMoreItems===false;var c;var g;var m;if(s){var _=new a(r.getElement(),r.getVar(),h);m=l.freshVar(_.getElement(),"c");g=i.createQueryDistinctValueCount(_,m);g.getOrderBy().push(new p(g.getProject().getExpr(m),"desc"));c=new d(v.sparqlService,g,r.getVar(),null,true)}else{m=null;g=u.createQueryList(r);c=new d(v.sparqlService,g,r.getVar(),null,true)}c=new f(c,function(t){var r=t.val;var a=r.getBindings();var i=a[0]||new o;var l=m?n.getValue(i.get(m)):null;var u={key:t.key,val:{node:t.key,path:e,countInfo:{hasMoreItems:!s,count:l}}};return u});return c});return g}});module.exports=h},{"../../ext/Class":2,"../../rdf/NodeUtils":100,"../../service/ServiceUtils":140,"../../service/list_service/ListServiceSparqlQuery":165,"../../service/list_service/ListServiceTransformItem":168,"../../sparql/Binding":225,"../../sparql/ConceptUtils":229,"../../sparql/ElementUtils":233,"../../sparql/Relation":250,"../../sparql/RelationUtils":251,"../../sparql/SortCondition":252,"../FacetUtils.js":20}],57:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.facetValueService=e;this.listServiceWrapperFn=t},prepareTableService:function(e,t){var r=this;var n=this.facetValueService.prepareTableService(e,t).then(function(n){var a=r.listServiceWrapperFn(n,e,t);return a});return n}});module.exports=n},{"../../ext/Class":2}],58:[function(e,module,t){"use strict";var r={ConstraintManager:e("./ConstraintManager"),ConstraintUtils:e("./ConstraintUtils"),CountUtils:e("./CountUtils"),ElementUtils:e("./ElementUtils"),ElementsAndExprs:e("./ElementsAndExprs"),FacetConfig:e("./FacetConfig"),FacetNode:e("./FacetNode"),FacetNodeState:e("./FacetNodeState"),FacetRelationIndex:e("./FacetRelationIndex"),FacetServiceBuilder:e("./FacetServiceBuilder"),FacetServiceUtils:e("./FacetServiceUtils"),FacetTreeConfig:e("./FacetTreeConfig"),FacetTreeServiceHelpers:e("./FacetTreeServiceHelpers"),FacetTreeServiceUtils:e("./FacetTreeServiceUtils"),FacetTreeState:e("./FacetTreeState"),FacetUtils:e("./FacetUtils"),ListFilter:e("../service/ListFilter"),Path:e("./Path"),PathHead:e("./PathHead"),QueryUtils:e("./QueryUtils"),ServiceUtils:e("./ServiceUtils"),Step:e("./Step"),StepRelation:e("./StepRelation"),StepUtils:e("./StepUtils"),VarNode:e("./VarNode"),Constraint:e("./constraint/Constraint"),ConstraintBasePath:e("./constraint/ConstraintBasePath"),ConstraintBasePathValue:e("./constraint/ConstraintBasePathValue"),ConstraintConcept:e("./constraint/ConstraintConcept"),ConstraintElementFactoryBBoxRange:e("./constraint/ConstraintElementFactoryBBoxRange"),ConstraintEquals:e("./constraint/ConstraintEquals"),ConstraintExists:e("./constraint/ConstraintExists"),ConstraintLang:e("./constraint/ConstraintLang"),ConstraintRegex:e("./constraint/ConstraintRegex"),FacetConceptSupplier:e("./facet_concept_supplier/FacetConceptSupplier"),FacetConceptSupplierDeclared:e("./facet_concept_supplier/FacetConceptSupplierDeclared"),FacetConceptSupplierExact:e("./facet_concept_supplier/FacetConceptSupplierExact"),FacetConceptSupplierMeta:e("./facet_concept_supplier/FacetConceptSupplierMeta"),FacetService:e("./facet_service/FacetService"),FacetServiceClientIndex:e("./facet_service/FacetServiceClientIndex"),FacetServiceFn:e("./facet_service/FacetServiceFn"),FacetServiceLookup:e("./facet_service/FacetServiceLookup"),FacetServiceMeta:e("./facet_service/FacetServiceMeta"),FacetServiceSparql:e("./facet_service/FacetServiceSparql"),FacetServiceTagger:e("./facet_service/FacetServiceTagger"),FacetServiceTransformConcept:e("./facet_service/FacetServiceTransformConcept"),FacetSystem:e("./facet_system/FacetSystem"),FacetTreeService:e("./facet_tree_service/FacetTreeService"),FacetValueConceptService:e("./facet_value_concept_service/FacetValueConceptService"),FacetValueConceptServiceExact:e("./facet_value_concept_service/FacetValueConceptServiceExact"),FacetValueService:e("./facet_value_service/FacetValueService"),FacetValueServiceBuilder:e("./FacetValueServiceBuilder"),FacetValueServiceWrapListService:e("./facet_value_service/FacetValueServiceWrapListService"),LookupServiceConstraintLabels:e("./lookup_service/LookupServiceConstraintLabels"),LookupServiceFacetCount:e("./lookup_service/LookupServiceFacetCount"),LookupServiceFacetExactCount:e("./lookup_service/LookupServiceFacetExactCount"),LookupServiceFacetPreCount:e("./lookup_service/LookupServiceFacetPreCount"),LookupServicePathLabels:e("./lookup_service/LookupServicePathLabels"),Aggregator:e("./table/Aggregator"),ColumnView:e("./table/ColumnView"),FilterString:e("./table/FilterString"),QueryFactoryFacetTable:e("./table/QueryFactoryFacetTable"),SortCondition:e("./table/SortCondition"),TableConfigFacet:e("./table/TableConfigFacet"),TableMod:e("./table/TableMod"),TableUtils:e("./table/TableUtils"),PathUtils:e("./PathUtils")};module.exports=r},{"../service/ListFilter":131,"./ConstraintManager":5,"./ConstraintUtils":6,"./CountUtils":7,"./ElementUtils":8,"./ElementsAndExprs":9,"./FacetConfig":10,"./FacetNode":11,"./FacetNodeState":12,"./FacetRelationIndex":13,"./FacetServiceBuilder":14,"./FacetServiceUtils":15,"./FacetTreeConfig":16,"./FacetTreeServiceHelpers":17,"./FacetTreeServiceUtils":18,"./FacetTreeState":19,"./FacetUtils":20,"./FacetValueServiceBuilder":21,"./Path":22,"./PathHead":23,"./PathUtils":24,"./QueryUtils":25,"./ServiceUtils":26,"./Step":27,"./StepRelation":28,"./StepUtils":29,"./VarNode":30,"./constraint/Constraint":31,"./constraint/ConstraintBasePath":32,"./constraint/ConstraintBasePathValue":33,"./constraint/ConstraintConcept":34,"./constraint/ConstraintElementFactoryBBoxRange":35,"./constraint/ConstraintEquals":36,"./constraint/ConstraintExists":37,"./constraint/ConstraintLang":38,"./constraint/ConstraintRegex":39,"./facet_concept_supplier/FacetConceptSupplier":40,"./facet_concept_supplier/FacetConceptSupplierDeclared":41,"./facet_concept_supplier/FacetConceptSupplierExact":42,"./facet_concept_supplier/FacetConceptSupplierMeta":43,"./facet_service/FacetService":44,"./facet_service/FacetServiceClientIndex":45,"./facet_service/FacetServiceFn":46,"./facet_service/FacetServiceLookup":47,"./facet_service/FacetServiceMeta":48,"./facet_service/FacetServiceSparql":49,"./facet_service/FacetServiceTagger":50,"./facet_service/FacetServiceTransformConcept":51,"./facet_system/FacetSystem":52,"./facet_tree_service/FacetTreeService":53,"./facet_value_concept_service/FacetValueConceptService":54,"./facet_value_concept_service/FacetValueConceptServiceExact":55,"./facet_value_service/FacetValueService":56,"./facet_value_service/FacetValueServiceWrapListService":57,"./lookup_service/LookupServiceConstraintLabels":59,"./lookup_service/LookupServiceFacetCount":60,"./lookup_service/LookupServiceFacetExactCount":61,"./lookup_service/LookupServiceFacetPreCount":62,"./lookup_service/LookupServicePathLabels":63,"./table/Aggregator":64,"./table/ColumnView":65,"./table/FilterString":66,"./table/QueryFactoryFacetTable":67,"./table/SortCondition":68,"./table/TableConfigFacet":69,"./table/TableMod":70,"./table/TableUtils":71}],59:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeUtils");var a=e("../../service/lookup_service/LookupServiceBase");var i=e("./LookupServicePathLabels");var s=e("../../util/collection/HashMap");var o=e("../../util/shared");var l=o.Promise;var u=e("../../util/PromiseUtils");var c=r.create(a,{initialize:function(e,t){this.lookupServiceNodeLabels=e;this.lookupServicePathLabels=t||new i(e)},lookup:function(e){var t=[];var r=[];e.forEach(function(e){var n=e.getDeclaredPaths();var a=e.getValue?e.getValue():null;t.push.apply(t,n);if(a&&a.isUri()){r.push(a)}});var a=this.lookupServiceNodeLabels.lookup(r);var i=this.lookupServicePathLabels.lookup(t);var o=u.all([a,i]).spread(function(t,r){var a=new s;e.forEach(function(e){var i=e.getDeclaredPath();var s=e.getValue();var o=s&&s.isUri()?t.get(s):null;var l=o?o.displayLabel:null;l=l||n.toPrettyString(s);var u=r.get(i);var c=u+" = "+l;a.put(e,c)});return a});return o}});module.exports=c},{"../../ext/Class":2,"../../rdf/NodeUtils":100,"../../service/lookup_service/LookupServiceBase":171,"../../util/PromiseUtils":378,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServicePathLabels":63}],60:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/HashMap");var a=e("../../sparql/VarUtils");var i=e("../CountUtils");var s=e("../../service/lookup_service/LookupService");var o=e("../../util/shared");var l=o.Promise;var u=r.create(s,{initialize:function(e,t){this.lsPreCount=e;this.lsExactCount=t},lookup:function(e){var t=this;var r=l.resolve(this.lsPreCount.lookup(e)).then(function(e){var r=e.entries();var n=[];r.forEach(function(e){var t=e.key;var r=e.val;if(r.hasMoreItems===false){n.push(t)}});var a=t.lsExactCount.lookup(n);return[e,a]}).spread(function(t,r){var a=new n;e.forEach(function(e){var n=r.get(e);n=n||t.get(e);n=n||{count:0,hasMoreItems:false};a.put(e,n)});return a});return r}});module.exports=u},{"../../ext/Class":2,"../../service/lookup_service/LookupService":170,"../../sparql/VarUtils":256,"../../util/collection/HashMap":389,"../../util/shared":398,"../CountUtils":7}],61:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../sparql/VarUtils");var a=e("../CountUtils");var i=e("../../util/collection/HashMap");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.sparqlService=e;this.facetRelationIndex=t},lookup:function(e){var t=n.c;var r=a.createQueriesExactCount(this.facetRelationIndex,t,e,this.rowLimit);var s=a.execQueries(this.sparqlService,r,this.facetRelationIndex.getSourceVar(),t);var o=s.then(function(e){var t=new i;var r=e.entries();r.forEach(function(e){var r=e.key;var n=e.val;var a={
count:n,hasMoreItems:false};t.put(r,a)});return t});return o}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":170,"../../sparql/VarUtils":256,"../../util/collection/HashMap":389,"../CountUtils":7}],62:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../sparql/VarUtils");var a=e("../CountUtils");var i=e("../../util/collection/HashMap");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.sparqlService=e;this.facetRelationIndex=t;this.rowLimit=1e4},lookup:function(e){var t=this.rowLimit;var r=n.c;var s=a.createQueriesPreCount(this.facetRelationIndex,r,e,t+1);var o=a.execQueries(this.sparqlService,s,this.facetRelationIndex.getSourceVar(),r);var l=o.then(function(e){var r=new i;var n=e.entries();n.forEach(function(e){var n=e.key;var a=e.val;var i=a>t;var s={count:i?t:a,hasMoreItems:i};r.put(n,s)});return r});return l}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":170,"../../sparql/VarUtils":256,"../../util/collection/HashMap":389,"../CountUtils":7}],63:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../service/lookup_service/LookupServiceBase");var a=e("../../util/collection/HashMap");var i=e("../../facete/PathUtils");var s=r.create(n,{initialize:function(e,t){this.lookupServiceBase=e;this.labelFn=t||i.createLabelFn("Items","$&sup1","&raquo;")},lookup:function(e){var t=this;var r=i.getNodesFromPaths(e);var n=this.lookupServiceBase.lookup(r).then(function(r){var n=new a;e.forEach(function(e){var a=t.labelFn(e,r);n.put(e,a)});return n});return n}});module.exports=s},{"../../ext/Class":2,"../../facete/PathUtils":24,"../../service/lookup_service/LookupServiceBase":171,"../../util/collection/HashMap":389}],64:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.name=e;this.attrs=t},getName:function(){return this.name},getAttrs:function(){return this.attrs}});module.exports=n},{"../../ext/Class":2}],65:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.tableMod=e;this.columnId=t},getId:function(){return this.columnId},getSortConditions:function(){var e={};var t=this.columnId;this.tableMod.getSortConditions().forEach(function(r){var n=r.getColumnId();if(n===t){var a=r.getSortType();e[a]=r.getSortDir()}});return e},getAggregator:function(){var e=this.tableMod.getAggregator(this.columnId);return e},setAggregator:function(e){this.tableMod.getAggregators()[this.columnId]=e}});module.exports=n},{"../../ext/Class":2}],66:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.str=e;this.mode=t}})},{"../../ext/Class":2}],67:[function(e,module,t){},{}],68:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t,r){this.columnId=e;this.sortDir=t==null?1:t;this.sortType=r||"data"},getColumnId:function(){return this.columnId},getSortType:function(){return this.sortType},setSortType:function(e){this.sortType=e},getSortDir:function(){return this.sortDir},setSortDir:function(e){this.sortDir=e}});module.exports=n},{"../../ext/Class":2}],69:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/CollectionUtils");var a=e("./TableMod");var i=e("../ElementUtils");var s=e("../Path");var o=e("../../sparql/Concept");var l=e("../../util/ArrayUtils");var u=e("../../util/collection/ArrayList");var c=r.create({initialize:function(e,t,r){this.facetConfig=e;this.tableMod=t||new a;this.paths=r||[]},getFacetConfig:function(){return this.facetConfig},getTableMod:function(){return this.tableMod},getPaths:function(){return this.paths},getPath:function(e){var t=this.tableMod.getColumnIds().indexOf(e);var r=this.paths[t];return r},getColumnId:function(e){var t=l.firstIndexOf(this.paths,e);var r=this.tableMod.getColumnIds()[t];return r},removeColumn:function(e){var t=this.getPath(e);l.removeItem(this.paths,t)},getColIdForPath:function(e){var t=this.facetConfig.getRootFacetNode();var r=t.forPath(e);var n=r.getVar().getName();return n},togglePath:function(e){var t=new u(this.paths);var r=n.toggleItem(t,e);var a=this.getColIdForPath(e);if(r){this.tableMod.addColumn(a)}else{this.tableMod.removeColumn(a)}},createDataConcept:function(){var e=new s;var t=this.paths.slice(0);if(!l.contains(this.paths,e)){t.push(e)}var r=i.createElementTable(this.facetConfig,t);var n=this.facetConfig.getRootFacetNode();var a=n.getVar();var u=new o(r,a);return u}});module.exports=c},{"../../ext/Class":2,"../../sparql/Concept":228,"../../util/ArrayUtils":368,"../../util/CollectionUtils":371,"../../util/collection/ArrayList":386,"../ElementUtils":8,"../Path":22,"./TableMod":70}],70:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/ArrayUtils");var a=e("./ColumnView");var i=e("../../util/collection/HashMap");var s=r.create({initialize:function(){this.columnIds=[];this.colIdToColView=new i;this.sortConditions=[];this.colIdToAgg=new i;this.limit=null;this.offset=null;this._isDistinct=true},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e},isDistinct:function(){return this._isDistinct},setDistinct:function(e){this._isDistinct=e},getColumnIds:function(){return this.columnIds},getColumn:function(e){return this.colIdToColView[e]},getColumns:function(){var e=this;var t=this.columnIds.map(function(t){var r=e.colIdToColView[t];return r});return t},getSortConditions:function(){return this.sortConditions},getLimitAndOffset:function(){return this.limitAndOffset},getAggregator:function(e){var t=this.colIdToAgg[e];return t},getAggregators:function(){return this.colIdToAgg},addColumn:function(e,t){var r=this.colIdToColView[e];if(r){throw new Error("Column "+e+" already part of the table")}r=new a(this,e);this.colIdToColView[e]=r;if(!t){this.columnIds.push(e)}return r},removeColumn:function(e){delete this.colIdToColView[e];var t=this;n.filter(this.columnIds,function(t){var r=e!=t;return r});n.filter(this.sortConditions,function(t){var r=e!=t.getColumnId()});delete this.colIdToAgg[e]}});module.exports=s},{"../../ext/Class":2,"../../util/ArrayUtils":368,"../../util/collection/HashMap":389,"./ColumnView":65}],71:[function(e,module,t){var r={createNgGridColumnDefs:function(e){var t=e.getColumns();var r=t.forEach(function(e){var t={field:e.getId(),displayName:e.getId()};return t});return r}};module.exports=r},{}],72:[function(e,module,t){var r=e("../ext/Class");var n=r.create({createExpr:function(e){throw new Error("Not implemented")}});module.exports=n},{"../ext/Class":2}],73:[function(e,module,t){var r=e("../ext/Class");var n=e("./BboxExprFactory");var a=e("./GeoExprUtils");var i=r.create(n,{initialize:function(e,t,r){this.xVar=e;this.yVar=t;this.castNode=r},createExpr:function(e){var t=a.createExprWgs84Intersects(this.xVar,this.yVar,e,this.castNode);return t}});module.exports=i},{"../ext/Class":2,"./BboxExprFactory":72,"./GeoExprUtils":79}],74:[function(e,module,t){var r=e("../ext/Class");var n=e("./BboxExprFactory");var a=e("./GeoExprUtils");var i=r.create(n,{initialize:function(e,t,r){this.wktVar=e;this.intersectsFnName=t;this.geomFromTextFnName=r},createExpr:function(e){var t=a.createExprOgcIntersects(this.wktVar,e,this.intersectsFnName,this.geomFromTextFnName);return t}});module.exports=i},{"../ext/Class":2,"./BboxExprFactory":72,"./GeoExprUtils":79}],75:[function(e,module,t){var r=e("../ext/Class");var n=e("./Point");var a=e("./Range");var i=r.create({initialize:function(e,t,r,n){this.left=e;this.right=r;this.bottom=t;this.top=n},containsPoint:function(e){return e.x>=this.left&&e.x<this.right&&e.y>=this.bottom&&e.y<this.top},getCenter:function(){return new n(.5*(this.left+this.right),.5*(this.bottom+this.top))},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},contains:function(e){return e.left>=this.left&&e.right<this.right&&e.bottom>=this.bottom&&e.top<this.top},rangeX:function(){return new a(this.left,this.right)},rangeY:function(){return new a(this.bottom,this.top)},overlap:function(e){if(!e.rangeX||!e.rangeY){console.error("Missing range");throw"Error"}var t=this.rangeX().getOverlap(e.rangeX());if(!t){return null}var r=this.rangeY().getOverlap(e.rangeY());if(!r){return null}return new i(t.min,r.min,r.max,t.max)},isOverlap:function(e){var t=this.overlap(e);return t!=null},toString:function(){return"["+this.left+" - "+this.right+", "+this.bottom+" - "+this.top+"]"}});i.createFromJson=function(e){var t=new i(e.left,e.bottom,e.right,e.top);return t};module.exports=i},{"../ext/Class":2,"./Point":85,"./Range":89}],76:[function(e,module,t){var r=e("../ext/Class");var n=e("lodash.flatten");var a=e("lodash.uniq");var i=e("../service/data_service/DataService");var s=e("../vocab/wgs84");var o=e("../rdf/NodeFactory");var l=e("../util/shared");var u=l.Promise;var c=e("./Bounds");var d=e("./QuadTree");var f=e("./GeoExprUtils");var p=function(){return false};var h=e("../util/PromiseUtils");var v=r.create(i,{initialize:function(e,t,r,n){this.listServiceBbox=e;var a=new c(-180,-90,180,90);this.quadTree=new d(a,18,0);this.maxItemsPerTileCount=r||25;this.maxGlobalItemCount=t||50;this.aquireDepth=n||2},fetchData:function(e){var t=this.runWorkflow(e).then(function(e){var t=e.map(function(e){return e.data.docs});var r=t.filter(function(e){return e});r=n(r,true);e.forEach(function(e){if(e.isLoaded){return}var t=f.boundsToWkt(e.getBounds());var n={key:t,val:{id:t,zoomClusterBounds:e.getBounds(),wkt:t}};r.push(n)});return r});return t},runCheckGlobal:function(){var e;var t=this.quadTree.getRootNode();if(!t.checkedGlobal){var r=this.listServiceBbox.fetchCount(null,this.maxGlobalItemCount);e=r.then(function(e){var r=!e.hasMoreItems;t.canUseGlobal=r;t.checkedGlobal=true;return r})}else{e=u.resolve(t.canUseGlobal).cancellable()}return e},runWorkflow:function(e){var t=this.quadTree.getRootNode();var r=this;var n=this.runCheckGlobal().then(function(n){var a;if(n){a=r.runGlobalWorkflow(t)}else{a=r.runTiledWorkflow(e)}return a.then(function(e){return e})});return n},runGlobalWorkflow:function(e){var t=this;var r=this.listServiceBbox.fetchItems(null).then(function(r){t.loadTaskAction(e,r);return[e]});return r},runTiledWorkflow:function(e){var t=this;var r=this.quadTree.aquireNodes(e,this.aquireDepth);r.forEach(function(e){if(!e.data){e.data={}}});r.forEach(function(e){if(e.isCountComplete()&&e.infMinItemCount===0){e.isLoaded=true}});var n=r.filter(function(e){return t.isCountingNeeded(e)});var a=this.createCountTasks(n);var i=h.all(a).then(function(){var e=r.filter(function(e){return t.isLoadingNeeded(e)});var n=t.createLoadTasks(e);return h.all(n).then(function(){return r})});return i},createCountTask:function(e){var t=this;var r=t.maxItemsPerTileCount;var n=this.listServiceBbox.fetchCount(e.getBounds(),r);var a=n.then(function(t){var r=t.count;e.setMinItemCount(t.count);if(r===0){e.isLoaded=true}});return a},isCountingNeeded:function(e){return!(this.isTooManyGeoms(e)||e.isCountComplete())},isLoadingNeeded:function(e){var t=e.isLoaded||e.isCountComplete()&&e.infMinItemCount===0||this.isTooManyGeoms(e);return!t},isTooManyGeoms:function(e){return e.infMinItemCount>=this.maxItemsPerTileCount},createCountTasks:function(e){var t=this;var r=e.map(function(e){return t.createCountTask(e)}).filter(function(e){return e});return r},loadTaskAction:function(e,t){e.data.docs=t;e.isLoaded=true},createLoadTasks:function(e){var t=this;var r=e.map(function(e){var r=t.listServiceBbox.fetchItems(e.getBounds()).then(function(r){t.loadTaskAction(e,r)});return r});return r},finalizeLoading:function(e){var t=[];e.forEach(function(e){if(e.parent){t.push(e.parent)}});t=a(t);var r=function(t){var r=e.indexOf(t);if(r>=0){e[r]=undefined}};var n=false;do{n=false;for(var i in t){var s=t[i];var o=s.children;var l=p(s);if(!l){continue}n=true;o.forEach(r);e.push(s);if(s.parent){t.push(s.parent)}break}}while(n===true);e=e.filter(function(e){return e})}});module.exports=v},{"../ext/Class":2,"../rdf/NodeFactory":99,"../service/data_service/DataService":151,"../util/PromiseUtils":378,"../util/shared":398,"../vocab/wgs84":404,"./Bounds":75,"./GeoExprUtils":79,"./QuadTree":87,"lodash.flatten":510,"lodash.uniq":724}],77:[function(e,module,t){var r=e("../sparql/Concept");var n=e("../sparql/element/ElementString");var a=e("../sparql/VarUtils");var i={conceptWgs84:new r(n.create("?s <http://www.w3.org/2003/01/geo/wgs84_pos#long> ?x ;  <http://www.w3.org/2003/01/geo/wgs84_pos#lat> ?y"),a.s),conceptGeoVocab:new r(n.create("?s <http://www.opengis.net/ont/geosparql#asWKT> ?w"),a.s),conceptSchemaOrgGeoCoordinate:new r(n.create("?s <http://schema.org/longitude> ?x ;  <http://schema.org/latitude> ?y"),a.s)};module.exports=i},{"../sparql/Concept":228,"../sparql/VarUtils":256,"../sparql/element/ElementString":265}],78:[function(e,module,t){var r=e("../service/LookupServiceUtils");var n=e("../service/lookup_service/LookupServiceConst");var a=e("../service/lookup_service/LookupServiceTransform");var i=e("../service/list_service/ListServiceAugmenter");var s=e("../service/list_service/AugmenterLookup");var o=e("../sparql/BestLabelConfig");var l=e("./ListServiceBbox");var u=e("./DataServiceBboxCache");var r=e("../sponate/LookupServiceUtils");var c=e("../sponate/MappedConceptUtils");var d={createGeoDataSourceLabels:function(e,t,d,f){if(f==null){f={}}var p=new l(e,t,d);var h=new o;var v=c.createMappedConceptBestLabel(h);var g=r.createLookupServiceMappedConcept(e,v);g=new a(g,function(e,t){var r={shortLabel:e};return r});var m=new s(g);p=new i(p,m);var _=new n(f);var x=new s(_);p=new i(p,x);var b=new u(p,1500,500,2);return b}};module.exports=d},{"../service/LookupServiceUtils":134,"../service/list_service/AugmenterLookup":156,"../service/list_service/ListServiceAugmenter":159,"../service/lookup_service/LookupServiceConst":174,"../service/lookup_service/LookupServiceTransform":186,"../sparql/BestLabelConfig":224,"../sponate/LookupServiceUtils":326,"../sponate/MappedConceptUtils":329,"./DataServiceBboxCache":76,"./ListServiceBbox":84}],79:[function(e,module,t){var r=e("../sparql/NodeValueUtils");var n=e("../sparql/expr/ExprVar");var a=e("../sparql/expr/E_Cast");var i=e("../sparql/expr/NodeValue");var s=e("../sparql/expr/E_LogicalAnd");var o=e("../sparql/expr/E_Function");var l=e("../sparql/expr/E_GreaterThan");var u=e("../sparql/expr/E_LessThan");var c={createExprWgs84Intersects:function(e,t,a,i){var c=new n(e);var d=new n(t);if(i){var f=i.getUri();c=new o(f,[c]);d=new o(f,[d])}var p=r.makeDecimal(a.left);var h=r.makeDecimal(a.right);var v=r.makeDecimal(a.bottom);var g=r.makeDecimal(a.top);var m=new s(new s(new l(c,p),new u(c,h)),new s(new l(d,v),new u(d,g)));return m},createExprOgcIntersects:function(e,t,a,i){var s="http://www.opengis.net/rdf#";a=a||s+"intersects";i=i||s+"geomFromText";var l=new n(e);var u=this.boundsToWkt(t);var c=r.makeString(u);var d=new o(a,[l,new o(i,[c])]);return d},boundsToWkt:function(e){var t=e.left;var r=e.bottom;var n=e.right;var a=e.top;var i="POLYGON(("+t+" "+r+","+n+" "+r+","+n+" "+a+","+t+" "+a+","+t+" "+r+"))";return i}};module.exports=c},{"../sparql/NodeValueUtils":243,"../sparql/expr/E_Cast":278,"../sparql/expr/E_Function":280,"../sparql/expr/E_GreaterThan":281,"../sparql/expr/E_LessThan":285,"../sparql/expr/E_LogicalAnd":287,"../sparql/expr/ExprVar":303,"../sparql/expr/NodeValue":304}],80:[function(e,module,t){var r=e("../ext/Class");var n=e("../sparql/Concept");var a=e("../sparql/element/ElementGroup");var i=e("../sparql/element/ElementFilter");var s=e("../sponate/MappedConcept");var o=r.create({classLabel:"GeoMapFactory",initialize:function(e,t){this.mappedConcept=e;this.bboxExprFactory=t},createMap:function(e){var t=this.createMapForBounds(e);return t},createMapForGlobal:function(){var e=this.createMapForBounds(null);return e},createMapForBounds:function(e){var t=this.mappedConcept;var r=this.bboxExprFactory;var o=t.getConcept();var l=t.getAgg();var u=o.getElement();var c=u;if(e){var d=r.createExpr(e);var f=new i(d);c=new a([u,f])}var p=new n(c,o.getVar());var h=new s(p,l);return h}});module.exports=o},{"../ext/Class":2,"../sparql/Concept":228,"../sparql/element/ElementFilter":261,"../sparql/element/ElementGroup":262,"../sponate/MappedConcept":327}],81:[function(e,module,t){var r=e("./BboxExprFactoryWkt");var n=e("./BboxExprFactoryWgs84");var a=e("./GeoMapUtils");var i=e("./GeoMapFactory");var s=e("../sparql/VarUtils");var o=e("../sparql/Concept");var l=e("../sparql/element/ElementString");var u=e("../sparql/element/ElementTriplesBlock");var c=e("../rdf/NodeFactory");var d=e("../rdf/Triple");var f=e("../vocab/rdf");var p=e("../vocab/xsd");var h=e("../sponate/SponateUtils");var v="bif:st_intersects";var g="bif:st_geomFromText";var m={createXyMapFactory:function(e,t,r){var u="?s <"+e+"> ?x ; <"+t+"> ?y";var c=new o(l.create(u),s.s);var d=r?p.xdouble:null;var f=new i(a.createXyView(c),new n(s.x,s.y,d));return f},wgs84MapFactory:new i(a.wgs84GeoView,new n(s.x,s.y)),wgs84CastMapFactory:new i(a.wgs84GeoView,new n(s.x,s.y,p.xdouble)),ogcVirtMapFactory:new i(a.ogcGeoView,new r(s.w,v,g)),createWktMapFactory:function(e,t,n){e=e||"http://www.opengis.net/ont/geosparql#asWKT";t=t||v;n=n||g;var a=c.createUri(e);var l=new o(new u([new d(s.s,a,s.w)]),s.s);var f=h.parseSpec({name:"geoMap-"+e,template:[{id:""+l.getVar(),wkt:""+s.w}],from:l.getElement()});var p=new i(f,new r(s.w,t,n));return p}};module.exports=m},{"../rdf/NodeFactory":99,"../rdf/Triple":102,"../sparql/Concept":228,"../sparql/VarUtils":256,"../sparql/element/ElementString":265,"../sparql/element/ElementTriplesBlock":267,"../sponate/SponateUtils":335,"../vocab/rdf":402,"../vocab/xsd":405,"./BboxExprFactoryWgs84":73,"./BboxExprFactoryWkt":74,"./GeoMapFactory":80,"./GeoMapUtils":82}],82:[function(e,module,t){var r=e("../sparql/VarUtils");var n=e("../rdf/NodeFactory");var a=e("../sparql/Concept");var i=e("./GeoConceptUtils");var s=e("../sponate/SponateUtils");var o={createXyView:function(e,t,n){t=t||r.x;n=n||r.y;var a=s.parseSpec({name:"lonlat",template:[{id:e.getVar(),lon:""+t,lat:""+n,wkt:[""+t,""+n,function(e,t){var r="POINT("+e+" "+t+")";return r}]}],from:e.getElement()});return a},wgs84GeoView:s.parseSpec({name:"lonlat",template:[{id:i.conceptWgs84.getVar(),lon:""+r.x,lat:""+r.y,wkt:[""+r.x,""+r.y,function(e,t){var r="POINT("+e+" "+t+")";return r}]}],from:i.conceptWgs84.getElement()}),ogcGeoView:s.parseSpec({name:"lonlat",template:[{id:i.conceptGeoVocab.getVar(),wkt:""+r.w}],from:i.conceptGeoVocab.getElement()})};module.exports=o},{"../rdf/NodeFactory":99,"../sparql/Concept":228,"../sparql/VarUtils":256,"../sponate/SponateUtils":335,"./GeoConceptUtils":77}],83:[function(e,module,t){var r=e("../rdf/node/Node");var n=e("../sparql/expr/ExprVar");var a=e("../sparql/expr/NodeValue");var i=e("../sparql/expr/E_LogicalAnd");var s=e("../sparql/expr/E_LogicalOr");var o=e("../sparql/expr/E_Function");var l=e("../sparql/expr/E_Cast");var u=e("../sparql/expr/E_GreaterThan");var c=e("../sparql/expr/E_LessThan");var d={boundsToWkt:function(e){var t=e.left;var r=e.bottom;var n=e.right;var a=e.top;var i="POLYGON(("+t+" "+r+","+n+" "+r+","+n+" "+a+","+t+" "+a+","+t+" "+r+"))";return i},createFilterOgcIntersects:function(e,t){var r="http://www.opengis.net/rdf#";var a=new n(e);var i=this.boundsToWkt(t);var s=new o(r+"intersects",a,new o(r+"geomFromText",i));return s},createWgsFilter:function(e,t,s,o){var d=new n(e);var f=new n(t);if(o){d=new l(d,o);f=new l(f,o)}var p=a.makeNode(r.forValue(s.left));var h=a.makeNode(r.forValue(s.right));var v=a.makeNode(r.forValue(s.bottom));var g=a.makeNode(r.forValue(s.top));var m=new i(new i(new u(d,p),new c(d,h)),new i(new u(f,v),new c(f,g)));return m}};module.exports=d},{"../rdf/node/Node":112,"../sparql/expr/E_Cast":278,"../sparql/expr/E_Function":280,"../sparql/expr/E_GreaterThan":281,"../sparql/expr/E_LessThan":285,"../sparql/expr/E_LogicalAnd":287,"../sparql/expr/E_LogicalOr":289,"../sparql/expr/ExprVar":303,"../sparql/expr/NodeValue":304}],84:[function(e,module,t){var r=e("../ext/Class");var n=e("../service/list_service/ListService");var a=e("../sponate/facade/StoreFacade");var i=r.create(n,{initialize:function(e,t,r){this.sparqlService=e;this.geoMapFactory=t;this.concept=r},createListService:function(e){var t=new a(this.sparqlService);var r=this.geoMapFactory.createMap(e);var n={name:"geoMap",template:r};t.addMap(n);var i=t.geoMap.getListService();return i},fetchItems:function(e,t,r){var n=this.createListService(e);var a=n.fetchItems(this.concept,t,r);return a},fetchCount:function(e,t,r){var n=this.createListService(e);var a=n.fetchCount(this.concept,t,r);return a}});module.exports=i},{"../ext/Class":2,"../service/list_service/ListService":157,"../sponate/facade/StoreFacade":365}],85:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.x=e;this.y=t},getX:function(){return this.x},getY:function(){return this.y}});module.exports=n},{"../ext/Class":2}],86:[function(e,module,t){var r={lonlatToWkt:function(e){var t=this.pointToWkt(e.lon,e.lat);return t},xyToWkt:function(e){var t=this.pointToWkt(e.x,e.y);return t},pointToWkt:function(e,t){var r="POINT ("+e+" "+t+")";return r},wktPointRegex:/^\s*POINT\s*\(\s*([^\s]+)\s+([^)]+)\)\s*$/i,isWktPoint:function(e){var t=this.wktPointRegex.exec(e);var r=!!t;return r},wktToXy:function(e){var t=this.wktPointRegex.exec(e);if(!t){return null}var r=t[1];var n=t[2];var a={x:parseFloat(r),y:parseFloat(n)};return a}};module.exports=r},{}],87:[function(e,module,t){var r=e("../ext/Class");var n=e("./QuadTreeNode");var a=r.create({initialize:function(e,t,r){if(r==null){r=.25}this.node=new n(null,e,t,0,r);this.idToNodes=[]},getRootNode:function(){return this.node},aquireNodes:function(e,t){return this.node.aquireNodes(e,t)},query:function(e,t){return this.node.query(e,t)},insert:function(e){}});module.exports=a},{"../ext/Class":2,"./QuadTreeNode":88}],88:[function(e,module,t){var r=e("../ext/Class");var n=e("./Point");var a=e("./Bounds");var i=e("lodash.reduce");var s=r.create({initialize:function(e,t,r,n,a,i){this.parent=e;this.parentChildIndex=i;this._bounds=t;this._maxDepth=r;this._depth=n;this._k=a;this.isLoaded=false;this.children=null;this.data={};this._minItemCount=null;this.infMinItemCount=null;this.idToPos={};this._classConstructor=s},getId:function(){var e=this.parent;var t=e?e.getId():"";var r=this.parentChildIndex!=null?this.parentChildIndex:"r";var n=t+r;return n},isLeaf:function(){return this.children==null},addItem:function(e,t){this.idToPos[e]=t},addItems:function(e){for(var t in e){var r=e[t];this.addItem(t,r)}},removeItem:function(e){delete this.idToPos[e]},setMinItemCount:function(e){this._minItemCount=e;this.infMinItemCount=e;if(this.parent){this.parent.updateInfMinItemCount()}},getMinItemCount:function(){return this._minItemCount},isCountComplete:function(){if(this.getMinItemCount()!=null){return true}if(this.children){var e=i(this.children,function(e,t){return e&&t.isCountComplete()},true);return e}return false},updateInfMinItemCount:function(){if(!this.children&&this._minItemCount!=null){return}var e=0;this.children.forEach(function(t,r){if(t._minItemCount!=null){e+=t._minItemCount}else if(t.infMinItemCount){e+=t.infMinItemCount}});this.infMinItemCount=e;if(this.parent){this.parent.updateInfMinItemCount()}},getBounds:function(){return this._bounds},getCenter:function(){return this._bounds.getCenter()},subdivide:function(){var e=this._depth+1;var t=this.getCenter();var r=this._k*.5*this._bounds.getWidth();var n=this._k*.5*this._bounds.getHeight();this.children=[];this.children[s.TOP_LEFT]=new this._classConstructor(this,new a(this._bounds.left,t.y-n,t.x+r,this._bounds.top),this._maxDepth,e,this._k,s.TOP_LEFT);this.children[s.TOP_RIGHT]=new this._classConstructor(this,new a(t.x-r,t.y-n,this._bounds.right,this._bounds.top),this._maxDepth,e,this._k,s.TOP_RIGHT);this.children[s.BOTTOM_LEFT]=new this._classConstructor(this,new a(this._bounds.left,this._bounds.bottom,t.x+r,t.y+n),this._maxDepth,e,this._k,s.BOTTOM_LEFT);this.children[s.BOTTOM_RIGHT]=new this._classConstructor(this,new a(t.x-r,this._bounds.bottom,this._bounds.right,t.y+n),this._maxDepth,e,this._k,s.BOTTOM_RIGHT)},getOverlaps:function(e){},query:function(e,t){var r=[];this.queryRec(e,r,t);return r},queryRec:function(e,t,r){if(!this._bounds.isOverlap(e)){return}var n=e.getWidth()/this._bounds.getWidth();var a=e.getHeight()/this._bounds.getHeight();var i=Math.max(n,a);if(this.isLoaded||!this.children||i>=r){t.push(this);return}for(var s in this.children){var o=this.children[s];o.queryRec(e,r,t)}},splitFor:function(e,t,r){if(!this._bounds.isOverlap(e)){return}if(this.isLoaded){if(r){r.push(this)}return}var n=e.getWidth()/this._bounds.getWidth();var a=e.getHeight()/this._bounds.getHeight();var i=Math.max(n,a);if(i>=t||this._depth>=this._maxDepth){if(r){r.push(this)}return}if(!this.children){this.subdivide()}for(var s=0;s<this.children.length;++s){var o=this.children[s];o.splitFor(e,t,r)}},aquireNodes:function(e,t){var r=[];this.splitFor(e,t,r);return r},unlink:function(){if(!this.parent){return}for(var e in this.parent.children){var t=this.parent.children[e];if(t==this){this.parent.children=new s(this.parent,this._bounds,this._depth,this._k)}}}});s.TOP_LEFT=0;s.TOP_RIGHT=1;s.BOTTOM_LEFT=2;s.BOTTOM_RIGHT=3;module.exports=s},{"../ext/Class":2,"./Bounds":75,"./Point":85,"lodash.reduce":639}],89:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.min=e;this.max=t},getOverlap:function(e){var t=Math.max(this.min,e.min);var r=Math.min(this.max,e.max);return t>r?null:new n(t,r)}});module.exports=n},{"../ext/Class":2}],90:[function(e,module,t){"use strict";var r={BboxExprFactory:e("./BboxExprFactory"),BboxExprFactoryWgs84:e("./BboxExprFactoryWgs84"),BboxExprFactoryWkt:e("./BboxExprFactoryWkt"),Bounds:e("./Bounds"),DataServiceBboxCache:e("./DataServiceBboxCache"),GeoConceptUtils:e("./GeoConceptUtils"),GeoDataSourceUtils:e("./GeoDataSourceUtils"),GeoExprUtils:e("./GeoExprUtils"),GeoMapFactory:e("./GeoMapFactory"),GeoMapFactoryUtils:e("./GeoMapFactoryUtils"),GeoMapUtils:e("./GeoMapUtils"),GeoUtils:e("./GeoUtils"),ListServiceBbox:e("./ListServiceBbox"),Point:e("./Point"),PointUtils:e("./PointUtils"),QuadTree:e("./QuadTree"),QuadTreeNode:e("./QuadTreeNode"),Range:e("./Range")};module.exports=r},{"./BboxExprFactory":72,"./BboxExprFactoryWgs84":73,"./BboxExprFactoryWkt":74,"./Bounds":75,"./DataServiceBboxCache":76,"./GeoConceptUtils":77,"./GeoDataSourceUtils":78,"./GeoExprUtils":79,"./GeoMapFactory":80,"./GeoMapFactoryUtils":81,"./GeoMapUtils":82,"./GeoUtils":83,"./ListServiceBbox":84,"./Point":85,"./PointUtils":86,"./QuadTree":87,"./QuadTreeNode":88,"./Range":89}],91:[function(e,module,t){var r=e("./util/shared");var n=e("bluebird");var a=e("./util/AjaxUtils");var Jassa=function(t,i){if(arguments.length===1){i=arguments[0];t=null}r.Promise=t||n;r.ajax=a.createAjaxWrapperFn(i);return{ext:e("./ext"),util:e("./util"),rdf:e("./rdf"),io:e("./io"),vocab:e("./vocab"),sparql:e("./sparql"),service:e("./service"),sponate:e("./sponate"),facete:e("./facete"),geo:e("./geo")}};Jassa.ext=e("./ext");Jassa.util=e("./util");Jassa.rdf=e("./rdf");Jassa.vocab=e("./vocab");Jassa.sparql=e("./sparql");Jassa.service=e("./service");Jassa.sponate=e("./sponate");Jassa.facete=e("./facete");module.exports=Jassa},{"./ext":4,"./facete":58,"./geo":90,"./io":93,"./rdf":111,"./service":155,"./sparql":306,"./sponate":366,"./util":397,"./util/AjaxUtils":367,"./util/shared":398,"./vocab":400,bluebird:408}],92:[function(e,module,t){var r=e("../rdf/Triple");var n=e("../rdf/GraphImpl");var a=e("../rdf/NodeFactory");var i=e("../rdf/NodeUtils");var s={containsTriple:function(e,t){},triplesToTalisRdfJson:function(e,t){t=t||{};e.forEach(function(e){s.tripleToTalisRdfJson(e,t)});return t},tripleToTalisRdfJson:function(e,t){t=t||{};var r=e.getSubject();var n=r.isUri()?r.getUri():""+r;var a=t[n]=t[n]||{};var s=e.getPredicate().getUri();var o=a[s]=a[s]||[];var l=e.getObject();var u=i.toTalisRdfJson(l);o.push(u)},talisRdfJsonToGraph:function(e){var t=this.talisRdfJsonToTriples(e);var r=new n;r.addAll(t);return r},talisRdfJsonToTriples:function(e){var t=[];var n=Object.keys(e);n.sort();n.forEach(function(n){var i=a.createUri(n);var o=e[n];var l=Object.keys(o);l.sort();l.forEach(function(e){var n=a.createUri(e);var l=o[e];l.forEach(function(e){var o=s.createTalisRdfJsonObjectWithDefaults(e);try{var l=a.createFromTalisRdfJson(o);var u=new r(i,n,l);t.push(u)}catch(c){console.log("Error: could not create node from "+e)}})})});return t},shortForm:function(e,t){var r=t?t.shortForm(e):e;if(r===e){r="<"+e+">"}return r},talisRdfJsonToTurtle:function(e,t){var r=Object.keys(e);r.sort();var n="";r.forEach(function(r){n+=s.shortForm(r,t)+"\n";var i=e[r];var o=Object.keys(i);o.sort();o.forEach(function(e){n+="    "+s.shortForm(e,t);var r=i[e];var o=r.map(function(e){var r=s.createTalisRdfJsonObjectWithDefaults(e);var n;try{var i=a.createFromTalisRdfJson(r);n=i.isUri()?s.shortForm(i.getUri(),t):""+i}catch(o){n="\n";n+="        // Invalid data for RDF generation:\n";n+="        // raw: "+JSON.stringify(e)+"\n";n+="        // defaults: "+JSON.stringify(e)+"\n";n+="        // "+o+"\n";n+="\n"}return n});n+=" "+o.join(", ")+" ; \n"});n+="    . \n"});return n},createTalisRdfJsonObjectWithDefaults:function(e){var t={type:e.type||"literal",value:e.value||"",lang:e.lang||"",datatype:e.datatype||""};return t}};module.exports=s},{"../rdf/GraphImpl":96,"../rdf/NodeFactory":99,"../rdf/NodeUtils":100,"../rdf/Triple":102}],93:[function(e,module,t){"use strict";var r={TalisRdfJsonUtils:e("./TalisRdfJsonUtils")};module.exports=r},{"./TalisRdfJsonUtils":92}],94:[function(e,module,t){var r=e("../ext/Class");var n=r.create({classLabel:"AnonId",getLabelString:function(){throw new Error("not implemented")}});module.exports=n},{"../ext/Class":2}],95:[function(e,module,t){var r=e("../ext/Class");var n=e("./AnonId");var a=r.create(n,{classLabel:"AnonIdStr",initialize:function(e){this.label=e},getLabelString:function(){return this.label},toString:function(){return this.label}});module.exports=a},{"../ext/Class":2,"./AnonId":94}],96:[function(e,module,t){var r=e("../ext/Class");var n=e("../util/collection/HashSet");var a=e("./Triple");var i=e("./TripleUtils");var s=r.create({initialize:function(e){this.triples=e||new n;var t=this},isEmpty:function(){var e=this.triples.isEmpty();return e},equals:function(){throw new Error("Not implemented yet")},hashCode:function(){var e=this.triples.hashCode();return e},add:function(e){var t=this.triples.add(e);return t},remove:function(e){var t=this.triples.remove(e);return t},removeAll:function(e){this.triples.removeAll(e)},removeMatch:function(e){var t=[];this.triples.forEach(function(r){var n=i.matches(e,r);if(n){t.push(r)}});this.removeAll(t)},forEach:function(e){this.triples.forEach(e)},map:function(e){var t=this.triples.map(e);return t},contains:function(e){var t=this.triples.contains(e);return t},addAll:function(e){var t=this;e.forEach(function(e){t.add(e)})},clear:function(){this.triples.clear()},toArray:function(){var e=this.triples.entries();return e},size:function(){var e=this.triples.size();return e}});module.exports=s},{"../ext/Class":2,"../util/collection/HashSet":390,"./Triple":102,"./TripleUtils":103}],97:[function(e,module,t){var r=e("../util/collection/HashSet");var n=e("../util/collection/HashMap");var a=e("./GraphImpl");var i={extractUris:function(e){var t=new r;e.forEach(function(e){e.toArray().forEach(function(e){if(e!=null&&e.isUri()){t.add(e.getUri())}})});var n=t.entries();return n},indexBySubject:function(e,t){t=t||new n;e.forEach(function(e){var r=e.getSubject();var n=t.get(r);if(!n){n=new a;t.put(r,n)}n.add(e)});return t}};module.exports=i},{"../util/collection/HashMap":389,"../util/collection/HashSet":390,"./GraphImpl":96}],98:[function(e,module,t){var r=e("../ext/Class");var n=e("./node/Node_Concrete");var a=function(e){var t=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"');
return t};var i=r.create(n,{classLabel:"jassa.rdf.LiteralLabel",initialize:function(e,t,r,n){this.val=e;this.lex=t;this.lang=r;this.dtype=n},getValue:function(){return this.val},getLexicalForm:function(){return this.lex instanceof String?this.lex:this.lex.toString()},getLanguage:function(){return this.lang},getDatatype:function(){return this.dtype},toString:function(){var e=this.dtype?this.dtype.getUri():null;var t=a(this.lex);var r;if(e){r='"'+t+'"^^<'+e+">"}else{r='"'+t+'"'+(this.lang?"@"+this.lang:"")}return r}});module.exports=i},{"../ext/Class":2,"./node/Node_Concrete":114}],99:[function(e,module,t){var r=e("./AnonIdStr");var n=e("./node/Var");var a=e("./node/Node");var i=e("./node/Node_Uri");var s=e("./node/Node_Blank");var o=e("./node/Node_Literal");var l=e("./LiteralLabel");var u=e("./TypeMapper");var c=e("./rdf_datatype/DefaultRdfDatatypes");var d=e("../util/ObjectUtils");var f=/"([^"\\]*(\\.[^"\\]*)*)"/;var p=function(e){var t;if(e.charAt(0)==="<"){t=e.slice(1,-1)}else{throw new Error("[ERROR] Cannot deal with "+e)}return t};var h={createAnon:function(e){return new s(e)},createUri:function(e){return new i(e)},createVar:function(e){return new n(e)},createPlainLiteral:function(e,t){if(t==null){t=""}var r=new l(e,e,t);return new o(r)},createTypedLiteralFromValue:function(e,t){var r=c[t];if(!r){var n=u.getInstance();r=n.getSafeTypeByName(t)}var a=r.unparse(e);var i=null;var s=new l(e,a,i,r);return new o(s)},createTypedLiteralFromString:function(e,t){var r=c[t];if(!r){var n=u.getInstance();r=n.getSafeTypeByName(t)}if(!r){throw new Error("Internal error: No datatype object for: "+t+"("+typeof t+")")}var a=r.parse(e);var i=e;var s="";var d=new l(a,i,s,r);return new o(d)},createFromTalisRdfJson:function(e){if(!e||typeof e.type==="undefined"){throw new Error("Invalid node: "+JSON.stringify(e))}var t;var n=e.datatype;switch(e.type){case"bnode":var a=new r(e.value);t=new h.createAnon(a);break;case"uri":t=h.createUri(e.value);break;case"literal":if(!d.isEmptyString(n)){t=h.createTypedLiteralFromString(e.value,n)}else{var i=e.lang||e["xml:lang"];t=h.createPlainLiteral(e.value,i)}break;case"typed-literal":t=h.createTypedLiteralFromString(e.value,n);break;default:console.log("Unknown type: '"+e.type+"'");throw new Error("Bailing out")}return t},parseRdfTerm:function(e){if(!e){throw new Error("[ERROR] Null Pointer Exception")}e=e.trim();if(e.length===0){throw new Error("[ERROR] Empty string")}var t=e.charAt(0);var n;switch(t){case"<":var a=e.slice(1,-1);n=h.createUri(a);break;case"_":var i=new r(e);n=h.createAnon(i);break;case'"':var s=f.exec(e);var o=s[0];var l=o.slice(1,-1);var u=o.length;var c=e.charAt(u);if(!c){n=h.createTypedLiteralFromString(l,"http://www.w3.org/2001/XMLSchema#string")}switch(c){case"":case"@":var d=e.substr(u+1);n=h.createPlainLiteral(l,d);break;case"^":var v=e.substr(u+2);var g=p(v);n=h.createTypedLiteralFromString(l,g);break;default:throw new Error("[ERROR] Excepted @ or ^^")}break;default:throw new Error("Could not parse "+e)}return n}};module.exports=h},{"../util/ObjectUtils":376,"./AnonIdStr":95,"./LiteralLabel":98,"./TypeMapper":104,"./node/Node":112,"./node/Node_Blank":113,"./node/Node_Literal":116,"./node/Node_Uri":117,"./node/Var":119,"./rdf_datatype/DefaultRdfDatatypes":121}],100:[function(e,module,t){var r=e("lodash");var n=e("../util/UriUtils");var a=e("./rdf_datatype/TypedValue");var i={matches:function(e,t){var r=t&&(e==null||t.equals(e));return r},uniq:function(e){var t=r.uniq(e,false,function(e){return""+e});return t},getSubstitute:function(e,t){var r=t(e);if(!r){r=e}return r},pushVar:function(e,t){if(t.isVariable()){var r=false;e.forEach(function(e){r=r||t.equals(e)});if(!r){e.push(t)}}return e},getLang:function(e){var t=e&&e.isLiteral()?e.getLiteralLanguage():null;return t},getUri:function(e){var t=e&&e.isUri()?e.getUri():null;return t},toPrettyString:function(e,t){var r;if(e==null){r=null}else if(e.isUri()){var a=e.getUri();if(t){r=t.shortForm(a);if(r===a){r=n.extractLabel(a)}}else{r=n.extractLabel(a)}}else{r=""+this.getValue(e)}return r},getValue:function(e){var t;if(e==null){t=null}else if(e.isUri()){t=e.getUri()}else if(e.isBlank()){t=e.toString()}else if(e.isLiteral()){var r=e.getLiteralValue();t=r instanceof a?r.getLexicalValue():r}else{throw new Error("Unknow node type: ",e)}return t},toTalisRdfJson:function(e){var t;if(e==null){t=null}else if(e.isUri()){t={type:"uri",value:e.getUri()}}else if(e.isBlank()){t={type:"bnode",value:e.toString()}}else if(e.isLiteral()){t={type:"literal",value:e.getLiteralLexicalForm(),datatype:e.getLiteralDatatypeUri(),lang:e.getLiteralLanguage()}}else{t={type:"unknown"}}return t}};module.exports=i},{"../util/UriUtils":385,"./rdf_datatype/TypedValue":125,lodash:785}],101:[function(e,module,t){var r=e("lodash.foreach");var n=e("../ext/Class");var a=e("../util/CurieUtils");var i=e("../util/PrefixUtils");var s=e("./GraphUtils");var o=function(e,t){if(t===""){return true}if(e==null||t==null){return false}e=String(e);t=String(t);return e.length>=t.length&&e.slice(0,t.length)===t};var l=function(e){return typeof e==="function"};var u=function(e,t){var r;for(r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}return e};var c=n.create({initialize:function(e){this.prefixes=e?e:{}},expandPrefix:function(e){var t=i.parseCurie(e);var r;if(t==null){r=e}else{var n=this.prefixes[t.key];r=n?n+t.val:e}return r},getNsPrefixMap:function(){return this.prefixes},getNsPrefixURI:function(e){return this.prefixes[e]},getNsURIPrefix:function(e){var t=null;var n=null;var a=function(r,a){if(o(e,r)){if(!n||r.length>n.length){t=a;n=r}}};var i=this.prefixes;while(i!=null){r(i,a);i=Object.getPrototypeOf(i)}return t},qnameFor:function(){},removeNsPrefix:function(e){delete this.prefixes[e]},samePrefixMappingAs:function(){throw new Error("Not implemented yet - Sorry")},setNsPrefix:function(e,t){this.prefixes[e]=t;return this},setNsPrefixes:function(e){var t=l(e.getNsPrefixMap)?e.getNsPrefixMap():e;for(var r in t){if(t.hasOwnProperty(r)){var n=t[r];this.setNsPrefix(r,n)}}return this},shortForm:function(e){var t=this.getNsURIPrefix(e);var r;if(t){var n=this.prefixes[t];var i=e.substring(n.length);var s=a.isValidSparqlLocalName(i);r=s?t+":"+i:e}else{r=e}return r},addPrefix:function(e,t){this.prefixes[e]=t},addJson:function(e){u(this.prefixes,e)},getJson:function(){return this.prefixes},toString:function(){var e=i.prefixObjectToString(this.prefixes);return e},retainByGraph:function(e){var t=this;var r={};var n=s.extractUris(e);n.forEach(function(e){var n=t.getNsURIPrefix(e);if(n!=null){r[n]=t.getNsPrefixURI(n)}});var a=new c(r);return a}});module.exports=c},{"../ext/Class":2,"../util/CurieUtils":372,"../util/PrefixUtils":377,"./GraphUtils":97,"lodash.foreach":577}],102:[function(e,module,t){var r=e("../ext/Class");var n=e("./NodeUtils");var a=r.create({classLabel:"jassa.rdf.Triple",initialize:function(e,t,r){this.subject=e;this.predicate=t;this.object=r},equals:function(e){var t=this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object);return t},hashCode:function(){if(this.hash==null){this.hash=this.subject.hashCode()+3*this.predicate.hashCode()+7*this.object.hashCode()}return this.hash},toString:function(){return this.subject+" "+this.predicate+" "+this.object},copySubstitute:function(e){var t=new a(n.getSubstitute(this.subject,e),n.getSubstitute(this.predicate,e),n.getSubstitute(this.object,e));return t},getSubject:function(){return this.subject},getPredicate:function(){return this.predicate},getObject:function(){return this.object},getVarsMentioned:function(){var e=[];n.pushVar(e,this.subject);n.pushVar(e,this.predicate);n.pushVar(e,this.object);return e},toArray:function(){var e=[this.subject,this.predicate,this.object];return e}});module.exports=a},{"../ext/Class":2,"./NodeUtils":100}],103:[function(e,module,t){var r=e("lodash.uniq");var n=e("./NodeUtils");var a={uniqTriples:function(e){var t=r(e,false,function(e){return e.toString()});return t},matches:function(e,t){var r=e.toArray();var a=t.toArray();var i=true;for(var s=0;s<3;++s){var o=r[s];var l=a[s];var u=n.matches(o,l);if(!u){i=false;break}}return i},getNodeAt:function(e,t){if(e==null){t=null}var r;switch(t){case 0:r=e.getSubject();break;case 1:r=e.getPredicate();break;case 2:r=e.getObject();break;default:r=null}return r}};module.exports=a},{"./NodeUtils":100,"lodash.uniq":724}],104:[function(e,module,t){var r=e("../ext/Class");var n=e("./rdf_datatype/DefaultRdfDatatypes");var a=e("./rdf_datatype/BaseDatatype");var i={enableSilentAcceptanceOfUnknownDatatypes:true};var s=null;var o=r.create({classLabel:"jassa.rdf.TypeMapper",initialize:function(e){this.uriToDt=e},getSafeTypeByName:function(e){var t=this.uriToDt;var r=t[e];if(r==null){if(e==null){return null}else{if(i.enableSilentAcceptanceOfUnknownDatatypes){r=new a(e);this.registerDatatype(r)}else{console.log("Attempted to created typed literal using an unknown datatype - "+e);throw new Error("Bailing out")}}}return r},registerDatatype:function(e){var t=e.getUri();this.uriToDt[t]=e}});o.staticInstance=null;o.getInstance=function(){if(o.staticInstance==null){o.staticInstance=new o(n)}return o.staticInstance};module.exports=o},{"../ext/Class":2,"./rdf_datatype/BaseDatatype":120,"./rdf_datatype/DefaultRdfDatatypes":121}],105:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"DatatypeLabel",parse:function(){throw new Error("Not implemented")},unparse:function(){throw new Error("Not implemented")}});module.exports=n},{"../../ext/Class":2}],106:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DatatypeLabel");var a=r.create(n,{classLabel:"jassa.rdf.DatatypeLabelDate",parse:function(e){var t=!e?null:new Date(e);return t},unparse:function(e){var t=!e?null:e.toString();return t}});module.exports=a},{"../../ext/Class":2,"./DatatypeLabel":105}],107:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DatatypeLabel");var a=r.create(n,{classLabel:"jassa.rdf.DatatypeLabelFloat",parse:function(e){return parseFloat(e)},unparse:function(e){return e.toString()}});module.exports=a},{"../../ext/Class":2,"./DatatypeLabel":105}],108:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DatatypeLabel");var a=r.create(n,{classLabel:"jassa.rdf.DatatypeLabelInteger",parse:function(e){return parseInt(e,10)},unparse:function(e){return e.toString()}});module.exports=a},{"../../ext/Class":2,"./DatatypeLabel":105}],109:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DatatypeLabel");var a=r.create(n,{classLabel:"jassa.rdf.DatatypeLabelString",parse:function(e){return e},unparse:function(e){return e.toString()}});module.exports=a},{"../../ext/Class":2,"./DatatypeLabel":105}],110:[function(e,module,t){var r=e("./DatatypeLabelInteger");var n=e("./DatatypeLabelFloat");var a=e("./DatatypeLabelString");var i=e("./DatatypeLabelDate");var s={xinteger:new r,xfloat:new n,xdouble:new n,xstring:new a,date:new i,dateTime:new i,decimal:new n};module.exports=s},{"./DatatypeLabelDate":106,"./DatatypeLabelFloat":107,"./DatatypeLabelInteger":108,"./DatatypeLabelString":109}],111:[function(e,module,t){"use strict";var r={AnonId:e("./AnonId"),AnonIdStr:e("./AnonIdStr"),GraphImpl:e("./GraphImpl"),GraphUtils:e("./GraphUtils"),LiteralLabel:e("./LiteralLabel"),NodeFactory:e("./NodeFactory"),NodeUtils:e("./NodeUtils"),PrefixMappingImpl:e("./PrefixMappingImpl"),Triple:e("./Triple"),TripleUtils:e("./TripleUtils"),TypeMapper:e("./TypeMapper"),DatatypeLabel:e("./datatype/DatatypeLabel"),DatatypeLabelDate:e("./datatype/DatatypeLabelDate"),DatatypeLabelFloat:e("./datatype/DatatypeLabelFloat"),DatatypeLabelInteger:e("./datatype/DatatypeLabelInteger"),DatatypeLabelString:e("./datatype/DatatypeLabelString"),DefaultDatatypeLabels:e("./datatype/DefaultDatatypeLabels"),Node:e("./node/Node"),Node_Blank:e("./node/Node_Blank"),Node_Concrete:e("./node/Node_Concrete"),Node_Fluid:e("./node/Node_Fluid"),Node_Literal:e("./node/Node_Literal"),Node_Uri:e("./node/Node_Uri"),Node_Variable:e("./node/Node_Variable"),Var:e("./node/Var"),BaseDatatype:e("./rdf_datatype/BaseDatatype"),DefaultRdfDatatypes:e("./rdf_datatype/DefaultRdfDatatypes"),RdfDatatype:e("./rdf_datatype/RdfDatatype"),RdfDatatypeBase:e("./rdf_datatype/RdfDatatypeBase"),RdfDatatypeLabel:e("./rdf_datatype/RdfDatatypeLabel"),TypedValue:e("./rdf_datatype/TypedValue"),Coordinate:e("./talis/Coordinate"),GraphTalis:e("./talis/GraphTalis"),TalisRdfJsonUtils:e("./talis/TalisRdfJsonUtils")};module.exports=r},{"./AnonId":94,"./AnonIdStr":95,"./GraphImpl":96,"./GraphUtils":97,"./LiteralLabel":98,"./NodeFactory":99,"./NodeUtils":100,"./PrefixMappingImpl":101,"./Triple":102,"./TripleUtils":103,"./TypeMapper":104,"./datatype/DatatypeLabel":105,"./datatype/DatatypeLabelDate":106,"./datatype/DatatypeLabelFloat":107,"./datatype/DatatypeLabelInteger":108,"./datatype/DatatypeLabelString":109,"./datatype/DefaultDatatypeLabels":110,"./node/Node":112,"./node/Node_Blank":113,"./node/Node_Concrete":114,"./node/Node_Fluid":115,"./node/Node_Literal":116,"./node/Node_Uri":117,"./node/Node_Variable":118,"./node/Var":119,"./rdf_datatype/BaseDatatype":120,"./rdf_datatype/DefaultRdfDatatypes":121,"./rdf_datatype/RdfDatatype":122,"./rdf_datatype/RdfDatatypeBase":123,"./rdf_datatype/RdfDatatypeLabel":124,"./rdf_datatype/TypedValue":125,"./talis/Coordinate":126,"./talis/GraphTalis":127,"./talis/TalisRdfJsonUtils":128}],112:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"Node",getUri:function(){throw new Error("not a URI node")},getName:function(){throw new Error("is not a variable node")},getBlankNodeId:function(){throw new Error("is not a blank node")},getBlankNodeLabel:function(){throw new Error("is not a blank node")},getLiteral:function(){throw new Error("is not a literal node")},getLiteralValue:function(){throw new Error("is not a literal node")},getLiteralLexicalForm:function(){throw new Error("is not a literal node")},getLiteralDatatype:function(){throw new Error("is not a literal node")},getLiteralDatatypeUri:function(){throw new Error("is not a literal node")},isBlank:function(){return false},isUri:function(){return false},isLiteral:function(){return false},isVariable:function(){return false},equals:function(){throw new Error("not overridden")},hashCode:function(){throw new Error("not overridden")}});module.exports=n},{"../../ext/Class":2}],113:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node_Concrete");var a=e("../../util/ObjectUtils");var i=r.create(n,{classLabel:"jassa.rdf.Node_Blank",initialize:function(e){this.anonId=e},isBlank:function(){return true},getBlankNodeId:function(){return this.anonId},getBlankNodeLabel:function(){return this.anonId.getLabelString()},hashCode:function(){if(this.hash==null){var e=this.anonId.getLabelString();this.hash=a.hashCodeStr(e)}return this.hash},equals:function(e){var t=e!=null&&e.anonId!=null&&e.anonId.getLabelString!=null&&this.anonId.getLabelString()===e.anonId.getLabelString();return t},toString:function(){return"_:"+this.anonId}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./Node_Concrete":114}],114:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node");var a=r.create(n,{classLabel:"jassa.rdf.Node_Concrete",isConcrete:function(){return true}});module.exports=a},{"../../ext/Class":2,"./Node":112}],115:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node");var a=r.create(n,{classLabel:"jassa.rdf.Node_Fluid",isConcrete:function(){return false}});module.exports=a},{"../../ext/Class":2,"./Node":112}],116:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node_Concrete");var a=e("../../util/ObjectUtils");var i=r.create(n,{classLabel:"Node_Literal",initialize:function(e){this.literalLabel=e},isLiteral:function(){return true},getLiteral:function(){return this.literalLabel},getLiteralValue:function(){return this.literalLabel.getValue()},getLiteralLexicalForm:function(){return this.literalLabel.getLexicalForm()},getLiteralDatatype:function(){return this.literalLabel.getDatatype()},getLiteralDatatypeUri:function(){var e=this.getLiteralDatatype();var t=e?e.getUri():null;return t},getLiteralLanguage:function(){return this.literalLabel.getLanguage()},hashCode:function(){if(this.hash==null){this.hash=a.hashCodeStr(this.getLiteralLexicalForm())+3*a.hashCodeStr(this.getLiteralDatatypeUri())+7*a.hashCodeStr(this.getLiteralLanguage())}return this.hash},equals:function(e){var t=e!=null&&e.isLiteral!=null&&e.isLiteral()&&this.getLiteralLexicalForm()===e.getLiteralLexicalForm()&&this.getLiteralDatatypeUri()===e.getLiteralDatatypeUri()&&this.getLiteralLanguage()===e.getLiteralLanguage();return t},toString:function(){return this.literalLabel.toString()}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./Node_Concrete":114}],117:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node_Concrete");var a=e("../../util/ObjectUtils");var i=r.create(n,{classLabel:"jassa.rdf.Node_Uri",initialize:function(e){this.uri=e},isUri:function(){return true},getUri:function(){return this.uri},toString:function(){return"<"+this.uri+">"},hashCode:function(){if(this.hash==null){this.hash=a.hashCodeStr(this.uri)}return this.hash},equals:function(e){var t=e!=null&&e.isUri!=null&&e.isUri()&&this.uri===e.uri;return t}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./Node_Concrete":114}],118:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node_Fluid");var a=r.create(n,{classLabel:"jassa.rdf.Node_Variable",isVariable:function(){return true}});module.exports=a},{"../../ext/Class":2,"./Node_Fluid":115}],119:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Node_Variable");var a=e("../../util/ObjectUtils");var i=r.create(n,{classLabel:"Var",initialize:function(e){this.name=e},getName:function(){return this.name},toString:function(){return"?"+this.name},hashCode:function(){if(this.hash==null){this.hash=a.hashCodeStr(this.name)}return this.hash},equals:function(e){var t=e!=null&&e.isVariable!=null&&e.isVariable()&&this.name===e.name;return t}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./Node_Variable":118}],120:[function(e,module,t){var r=e("../../ext/Class");var n=e("./RdfDatatype");var a=e("./TypedValue");var i=r.create(n,{classLabel:"jassa.rdf.BaseDatatype",initialize:function(e){this.datatypeUri=e},getUri:function(){return this.datatypeUri},unparse:function(e){var t;if(e instanceof a){t=e.getLexicalValue()}else{t=e.toString()}return t},parse:function(e){return new a(e,this.datatypeUri)},toString:function(){return"Datatype ["+this.datatypeUri+"]"}});module.exports=i},{"../../ext/Class":2,"./RdfDatatype":122,"./TypedValue":125}],121:[function(e,module,t){var r=e("../../vocab/xsd");var n=e("../datatype/DefaultDatatypeLabels");var a=e("./RdfDatatypeLabel");var i={};var s=function(e,t){var r=e.getUri();i[r]=new a(r,t)};s(r.xint,n.xinteger);s(r.xlong,n.xinteger);s(r.xinteger,n.xinteger);s(r.xstring,n.xstring);s(r.xfloat,n.xfloat);s(r.xdouble,n.xdouble);s(r.decimal,n.xfloat);s(r.date,n.date);s(r.dateTime,n.dateTime);module.exports=i},{"../../vocab/xsd":405,"../datatype/DefaultDatatypeLabels":110,"./RdfDatatypeLabel":124}],122:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"RdfDatatype",getUri:function(){throw new Error("Not implemented")},unparse:function(){throw new Error("Not implemented")},parse:function(){throw new Error("Not implemented")}});module.exports=n},{"../../ext/Class":2}],123:[function(e,module,t){var r=e("../../ext/Class");var n=e("./RdfDatatype");var a=r.create(n,{classLabel:"jassa.rdf.RdfDatatypeBase",initialize:function(e){this.uri=e},getUri:function(){return this.uri}});module.exports=a},{"../../ext/Class":2,"./RdfDatatype":122}],124:[function(e,module,t){var r=e("../../ext/Class");var n=e("./RdfDatatypeBase");var a=r.create(n,{classLabel:"jassa.rdf.RdfDatatype_Label",initialize:function($super,e,t){$super(e);this.datatypeLabel=t},parse:function(e){return this.datatypeLabel.parse(e)},unparse:function(e){return this.datatypeLabel.unparse(e)}});module.exports=a},{"../../ext/Class":2,"./RdfDatatypeBase":123}],125:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"jassa.rdf.TypedValue",initialize:function(e,t){this.lexicalValue=e;this.datatypeUri=t},getLexicalValue:function(){return this.lexicalValue},getDatatypeUri:function(){return this.datatypeUri}});module.exports=n},{"../../ext/Class":2}],126:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/ObjectUtils");var a=r.create({initialize:function(e,t,r,n){this.s=e||"";this.p=t||"";this.i=r||0;this.c=n||""},equals:function(e){var t=this.s===e.s&&this.p===e.p&&this.i===e.i&&this.c===e.c;return t},hashCode:function(){if(this.hash==null){this.hash=n.hashCodeStr(this.s)+3*n.hashCodeStr(this.p)+7*this.i+11*n.hashCodeStr(this.c)}return this.hash},toString:function(){var e=this.s+" "+this.p+" "+this.i+" "+this.c;return e}});module.exports=a},{"../../ext/Class":2,"../../util/ObjectUtils":376}],127:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/HashSet");var a=e("../Triple");var i=e("../TripleUtils");var s=e("../../util/ObjectUtils");var o=r.create({initialize:function(e){this.data=e||{}},isEmpty:function(){var e=this.size()===0;return e},equals:function(){throw new Error("Not implemented yet")},hashCode:function(){var e=s.hashCode(this.data);return e},add:function(e){var t=this.triples.add(e);return t},remove:function(e){var t=this.triples.remove(e);return t},removeAll:function(e){this.triples.removeAll(e)},removeMatch:function(e){var t=[];this.triples.forEach(function(r){var n=i.matches(e,r);if(n){t.push(r)}});this.removeAll(t)},forEach:function(e){this.triples.forEach(e)},map:function(e){this.triples.map(e)},contains:function(e){var t=this.triples.contains(e);return t},addAll:function(e){var t=this;e.forEach(function(e){t.add(e)})},clear:function(){this.triples.clear()},toArray:function(){var e=this.triples.entries();return e},size:function(){var e=this.triples.size();return e}});module.exports=o},{"../../ext/Class":2,"../../util/ObjectUtils":376,"../../util/collection/HashSet":390,"../Triple":102,"../TripleUtils":103}],128:[function(e,module,t){var r=e("./Coordinate");var n=e("../NodeUtils");var a=e("../../util/ArrayUtils");var i={addTripleJson:function(e,t){},removeTripleJson:function(e){},add:function(e,t,r){},remove:function(e,t,r){},merge:function(e,t){},tripleToJson:function(e){var t=e.getSubject();var r=t.isUri()?t.getUri():""+t;var a=e.getPredicate().getUri();var i=e.getObject();var s=n.toTalisRdfJson(i);var o={s:r,p:a,o:s};return o},getObjectsAt:function(e,t){var r=t?e[t.s]:null;var n=r?r[t.p]:null;return n},getObjectAt:function(e,t){var r=this.getObjectsAt(e,t);var n=r?r[t.i]:null;return n},getOrCreateObjectAt:function(e,t,r){var n=e[t.s]=e[t.s]||{};var a=n[t.p]=n[t.p]||[];var i=a[t.i]=a[t.i]||r||{};return i},removeValueAt:function(e,t){var r=e[t.s];var n=r?r[t.p]:null;var i=n?n[t.i]:null;if(i){delete i[t.c];if(Object.keys(i).length===0){delete n[t.i];a.compactTrailingNulls(n);if(n.length===0){delete r[t.p];if(Object.keys(r).length===0){delete e[t.s]}}}}},setValueAt:function(e,t,r){if(t!=null){var n=this.getOrCreateObjectAt(e,t);n[t.c]=r}},getValueAt:function(e,t){var r=this.getObjectAt(e,t);var n=r?r[t.c]:null;return n}};module.exports=i},{"../../util/ArrayUtils":368,"../NodeUtils":100,"./Coordinate":126}],129:[function(e,module,t){var r=e("lodash.defaults");var n={unwrapSingleItem:function(e){var t=e?e.length>1?e:e[0]||null:null;return t},createSparqlUpdateAjaxSpec:function(e,t,a,i,s,o){var l={update:e,"using-graph-uri":n.unwrapSingleItem(a),"using-named-graph-uri":n.unwrapSingleItem(i)};var u={url:t,type:"POST",dataType:"json",crossDomain:true,traditional:true,data:l};r(l,s);r(u,o);return u},createSparqlRequestAjaxSpec:function(e,t,a,i,s){var o=n.unwrapSingleItem(t.getDefaultGraphUris());var l=n.unwrapSingleItem(t.getNamedGraphUris());var u={query:a,"default-graph-uri":o,"named-graph-uri":l};var c={url:e,dataType:"json",crossDomain:true,traditional:true,data:u};r(u,i);r(c,s);return c}};module.exports=n},{"lodash.defaults":442}],130:[function(e,module,t){var r=e("../ext/Class");var n=e("../sparql/ExprUtils");var a=r.create({initialize:function(e,t){this.sparqlService=e;this.element=t},lookupByIterator:function(e){var t=[];while(e.hasNext()){var r=e.nextBinding();var a=n.bindingToExprs(r);var i=a.join(", ");t.push({binding:r,exprs:a,exprsKey:i})}}});module.exports=a},{"../ext/Class":2,"../sparql/ExprUtils":237}],131:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t,r){this.concept=e;this.limit=t;this.offset=r},getConcept:function(){return this.concept},setConcept:function(e){this.concept=e},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e}});module.exports=n},{"../ext/Class":2}],132:[function(e,module,t){var r=e("../sparql/ConceptUtils");var n=e("./list_service/ListServiceSparqlQuery");var a={createTargetListService:function(e,t,a){var i=r.createTargetConcept(t,a);var s=r.createQueryList(i);var o=new n(e,s,i.getVar());return o}};module.exports=a},{"../sparql/ConceptUtils":229,"./list_service/ListServiceSparqlQuery":165}],133:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e){this.ls=e},create:function(){return this.ls},filter:function(){},transform:function(){}});n.from=function(e){var t=new n(e);return t};module.exports=n},{"../ext/Class":2}],134:[function(e,module,t){var r=e("../util/collection/HashMap");var n=e("../util/shared");var a=n.Promise;var i=e("../util/PromiseUtils");var s={lookup:function(e,t){var r;if(!e||!t){r=a.resolve([])}else{r=e.lookup(t)}return r},zip:function(e,t){var n=i.all(t).then(function(){var t=new r;for(var n=0;n<e.length;++n){var a=e[n];var i=arguments[n];t.put(a,i)}return t});return n},unmapKeys:function(e,t,n){var a=new r;e.forEach(function(e){var r=t(e);var i=n.get(r);a.put(e,i)});return a},fetchItemsMapped:function(e,t,r){var n=t.map(r);var a=e.fetchItems(n).then(function(e){var n=s.unmapKeys(t,r,e);return n});return a},fetchCountsMapped:function(e,t,r){var n=t.map(r);var a=e.fetchCounts(n).then(function(e){var n=s.unmapKeys(t,r,e);return n});return a}};module.exports=s},{"../util/PromiseUtils":378,"../util/collection/HashMap":389,"../util/shared":398}],135:[function(e,module,t){var r={computeRange:function(e,t,r){var n=t||0;var a=n%r;n-=a;var i=e;var s=null;if(i){s=i;var o=i%r;var l=o?r-o:0;i+=l}var u={limit:i,offset:n,subLimit:s,subOffset:a};return u}};module.exports=r},{}],136:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.query=e;var r=e.getOffset();var n=e.getLimit();this.nextOffset=r||0;this.nextRemaining=n==null?null:n;this.pageSize=t},getPageSize:function(){return this.pageSize},next:function(){var e=this.nextOffset===0?null:this.nextOffset;this.query.setOffset(e);if(this.nextRemaining==null){this.query.setLimit(this.pageSize);this.nextOffset+=this.pageSize}else{var t=Math.min(this.pageSize,this.nextRemaining);this.nextOffset+=t;this.nextRemaining-=t;if(t===0){return null}this.query.setLimit(t)}return this.query}});module.exports=n},{"../ext/Class":2}],137:[function(e,module,t){var r=e("../ext/Class");var n=e("./cache/CacheSimple");var a=r.create({initialize:function(e,t){this.executionCache=e?e:{};this.resultCache=t?t:new n},getExecutionCache:function(){return this.executionCache},getResultCache:function(){return this.resultCache}});module.exports=a},{"../ext/Class":2,"./cache/CacheSimple":145}],138:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.varNames=e||[];this.bindings=t||[]},getVarNames:function(){return this.varNames},getBindings:function(){return this.bindings},toString:function(){return"ResultSetPart: vars="+this.varNames+", bindings="+this.bindings}});module.exports=n},{"../ext/Class":2}],139:[function(e,module,t){var r=e("../util/collection/HashMap");var n=e("../util/collection/IteratorArray");var a=e("../sparql/VarUtils");var i=e("./result_set/ResultSetArrayIteratorBinding");var s=e("./ResultSetPart");var o=e("../sparql/Binding");var l=e("../rdf/Triple");var u=e("../rdf/GraphImpl");var c={jsonToResultSet:function(e){var t=e.head.vars;var r=e.results.bindings;var a=r.map(function(e){var t=o.fromTalisJson(e);return t});var s=new n(a);var l=new i(s,t);return l},partition:function(e,t){var n=e.getVarNames();var a=new r;while(e.hasNext()){var i=e.next();var o=i.get(t);var l=a.get(o);if(l==null){l=new s(n);a.put(o,l)}l.getBindings().push(i)}return a},createResultSetFromBindings:function(e,t){var r=new n(e);var a=new i(r,t);return a},createEmptyResultSet:function(e){var t=e.getProjectVars();var r=a.getVarNames(t);var n=this.createResultSetFromBindings([],r);return n},resultSetToGraph:function(e,t,r,n){var a=e.getBindings();var i=this.bindingsToGraph(a,t,r,n);return i},bindingsToGraph:function(e,t,r,n){var a=new u;e.forEach(function(e){var i=new l(e.get(t),e.get(r),e.get(n));a.add(i)});return a}};module.exports=c},{"../rdf/GraphImpl":96,"../rdf/Triple":102,"../sparql/Binding":225,"../sparql/VarUtils":256,"../util/collection/HashMap":389,"../util/collection/IteratorArray":393,"./ResultSetPart":138,"./result_set/ResultSetArrayIteratorBinding":200}],140:[function(e,module,t){var r=e("lodash.union");var n=e("../util/shared");var a=n.Promise;var i=e("./result_set/ResultSetArrayIteratorBinding");var s=e("../util/ArrayUtils");var o=e("../util/collection/IteratorArray");var l=e("../sparql/expr/ExprVar");var u=e("../sparql/element/ElementFilter");var c=e("../sparql/expr/E_OneOf");var d=e("../sparql/element/ElementSubQuery");var f=e("../sparql/VarUtils");var p=e("../sparql/Binding");var h=e("../sparql/ConceptUtils");var v=e("../sparql/ElementUtils");var g=e("../sparql/QueryUtils");var m=e("./ResultSetUtils");var _=e("../util/PromiseUtils");var x={constrainQueryVar:function(e,t,r){var n=new l(t);var a=this.constrainQueryExprVar(e,n,r);return a},constrainQueryExprVar:function(e,t,r){var n=e.clone();var a=new u(new c(t,r));n.getElements().push(a);return n},chunkQuery:function(e,t,r,n){var a=s.chunk(r,n);var i=new l(t);var o=this;var u=a.map(function(){var t=o.constrainQueryExprVar(e,i,r);return t});return u},mergeResultSets:function(e){var t=[];var n=[];e.forEach(function(e){var a=e.getVarNames();n=r(n,a);var i=e.getIterator().getArray();t.push.apply(t,i)});var a=new o(t);var s=new i(a,n);return s},execSelectForNodes:function(e,t,r,n,a){var i=this.chunkQuery(t,r,n,a);var s=i.map(function(t){var r=e.createQueryExecution(t);var n=r.execSelect();return n});var o=_.all(s);var l=this;var u=o.then(function(){var e=l.mergeResultSets(arguments);return e});return u},consumeResultSet:function(e){while(e.hasNext()){e.nextBinding()}},resultSetToList:function(e,t){var r=[];while(e.hasNext()){var n=e.nextBinding();var a=n.get(t);r.push(a)}return r},resultSetToInt:function(e,t){var r=null;if(e.hasNext()){var n=e.nextBinding();var a=n.get(t);r=a.getLiteralValue()}return r},fetchList:function(e,t){var r=this;var n=e.execSelect().then(function(e){var n=r.resultSetToList(e,t);return n});return n},fetchInt:function(e,t,r){var n=e.createQueryExecution(t);var a=this.fetchIntQe(n,r);return a},fetchIntQe:function(e,t){var r=this;var n=e.execSelect().then(function(e){var n=r.resultSetToInt(e,t);return n});return n},fetchCountConcept:a.method(function(e,t,r,n){var a=h.freshVar(t);var i=r==null?null:r+1;var s=n==null?null:n+1;var o=h.createQueryCount(t,a,i,s);return x.fetchInt(e,o,a).then(function(e){var t=n!=null?null:r!=null?e>r:false;var a={hasMoreItems:t,count:t?r:e,itemLimit:r,rowLimit:n};return a})}),fetchCountRows:function(e,t,r){var n=v.freshVar(t,"c");var a=v.createQueryCountRows(t,n,r+1);var i=this.fetchInt(e,a,n).then(function(e){var t={count:Math.min(e,r),hasMoreItems:e>r,rowLimit:r};return t});return i},fetchCountQuery:a.method(function(e,t,r,n){
var a=[new d(t)];var i=t.getVarsMentioned();var s=f.createVarGen("c",i);var o=s.next();var l=g.createQueryCount(a,null,null,o,null,null,null);var u=e.createQueryExecution(l);u.setTimeout(r);return x.fetchIntQe(u,o).then(function(e){return{count:e,limit:null,hasMoreItems:false}}).caught(function(){var t=g.createQueryCount(a,n+1,null,o,null,null,null);var r=e.createQueryExecution(t);return x.fetchIntQe(r,o).then(function(e){return{count:e,limit:n,hasMoreItems:e>n}})})}),fetchItemsConcept:function(e,t,r,n){var a=h.createQueryList(t,r,n);var i=e.createQueryExecution(a);var s=i.execSelect().then(function(e){var r=x.resultSetToList(e,t.getVar());return r});return s},execDescribeViaSelect:function(e,t){var r=g.createQueryDescribeViaSelect(t,f.s,f.p,f.o);var n=e.createQueryExecution(r);var a=n.execSelect().then(function(e){var t=m.resultSetToGraph(e,f.s,f.p,f.o);return t});return a}};module.exports=x},{"../sparql/Binding":225,"../sparql/ConceptUtils":229,"../sparql/ElementUtils":233,"../sparql/QueryUtils":249,"../sparql/VarUtils":256,"../sparql/element/ElementFilter":261,"../sparql/element/ElementSubQuery":266,"../sparql/expr/E_OneOf":291,"../sparql/expr/ExprVar":303,"../util/ArrayUtils":368,"../util/PromiseUtils":378,"../util/collection/IteratorArray":393,"../util/shared":398,"./ResultSetUtils":139,"./result_set/ResultSetArrayIteratorBinding":200,"lodash.union":701}],141:[function(e,module,t){var r=e("../ext/Class");var n=e("./sparql_service/SparqlServiceHttp");var a=e("./sparql_service/SparqlServicePaginate");var i=e("./sparql_service/SparqlServicePageExpand");var s=e("./sparql_service/SparqlServiceCache");var o=e("./sparql_service/SparqlServiceVirtFix");var l=e("./sparql_service/SparqlServiceLimit");var u=e("./sparql_service/SparqlServiceConsoleLog");var c=r.create({initialize:function(e){this.sparqlService=e},create:function(){return this.sparqlService},log:function(){this.sparqlService=new u(this.sparqlService);return this},paginate:function(e){this.sparqlService=new a(this.sparqlService,e);return this},pageExpand:function(e){this.sparqlService=new i(this.sparqlService,e);return this},cache:function(e){this.sparqlService=new s(this.sparqlService,e);return this},virtFix:function(){this.sparqlService=new o(this.sparqlService);return this},limit:function(e){this.sparqlService=new l(this.sparqlService,e);return this}});c.from=function(e){var t=new c(e);return t};c.http=function(e,t,r,a){var i=new n(e,t,r,a);var s=c.from(i);return s};module.exports=c},{"../ext/Class":2,"./sparql_service/SparqlServiceCache":204,"./sparql_service/SparqlServiceConsoleLog":205,"./sparql_service/SparqlServiceHttp":210,"./sparql_service/SparqlServiceLimit":211,"./sparql_service/SparqlServicePageExpand":212,"./sparql_service/SparqlServicePaginate":213,"./sparql_service/SparqlServiceVirtFix":215}],142:[function(e,module,t){var r=e("lodash.uniq");var n=e("lodash.foreach");var a=e("../sparql/VarUtils");var i=e("./ServiceUtils");var s=e("../util/collection/IteratorArray");var o=e("./result_set/ResultSetArrayIteratorBinding");var l=e("../util/shared");var u=l.Promise;var c={bindingToJsMap:function(e,t){var r={};e.forEach(function(e){var n=e.getName();r[n]=t.get(e)});return r},createNgGridOptionsFromQuery:function(e){if(!e){return[]}var t=e.getProjectVars();var r=a.getVarNames(t);var n=r.map(function(e){var t={field:e,displayName:e};return t});return n},fetchCount:function(e,t,r,n){var a;if(!e||!t){a=new u(function(e){e(0)})}else{t=t.clone();t.setLimit(null);t.setOffset(null);a=i.fetchCountQuery(e,t,r,n)}return a},fetchData:function(e,t,r,n){if(!e||!t){var a=new s([]);var i=[];var l=new o(a,i);return new u(function(e){e(l)})}t=t.clone();t.setLimit(r);t.setOffset(n);var d=e.createQueryExecution(t);var f=d.execSelect().then(function(e){var r=[];var n=t.getProjectVars();while(e.hasNext()){var a=e.next();var i=c.bindingToJsMap(n,a);r.push(i)}return r});return f},collectNodes:function(e){var t=[];e.forEach(function(e){n(e,function(e){if(e!=null){t.push(e)}else{console.log("should not happen")}})});t=r(t,false,function(e){return e.toString()});return t},fetchSchemaTableConfigFacet:function(e,t){var r=e.getPaths();var n=t.lookup(r);var a=n.then(function(t){var n=r.map(function(r){var n={field:e.getColumnId(r),displayName:t.get(r),path:r};return n});var a={colDefs:n};return a});return a},transformToNodeLabels:function(e,t){var r=this.collectNodes(t);var a=e.lookup(r);var i=a.then(function(e){var r=t.map(function(t){var r={};n(t,function(t,n){var a=e.get(t);r[n]={node:t,displayLabel:a?a.displayLabel:"(no label)"}});return r});return r});return i}};module.exports=c},{"../sparql/VarUtils":256,"../util/collection/IteratorArray":393,"../util/shared":398,"./ServiceUtils":140,"./result_set/ResultSetArrayIteratorBinding":200,"lodash.foreach":577,"lodash.uniq":724}],143:[function(e,module,t){var r=e("../sparql/QuadUtils");var n=e("../sparql/update/UpdateDataInsert");var a=e("../sparql/update/UpdateDataDelete");var i=e("../util/PromiseUtils");var s={performUpdate:function(e,t,r,n){var a=[];var o;var l=s.createDeleteRequest(t.removed,r,n);if(l){o=e.createUpdateExecution(l).execUpdate();a.push(o)}var u=s.createInsertRequest(t.added,r,n);if(u){o=e.createUpdateExecution(u).execUpdate();a.push(o)}var c=i.all(a);return c},createInsertRequest:function(e,t,a){var i;if(e&&!e.isEmpty()){var s=r.triplesToQuads(e,t);i=""+new n(s)}else{i=null}return i},createDeleteRequest:function(e,t,n){var i;if(e&&!e.isEmpty()){var s=r.triplesToQuads(e,t);i=""+new a(s)}else{i=null}return i}};module.exports=s},{"../sparql/QuadUtils":246,"../sparql/update/UpdateDataDelete":316,"../sparql/update/UpdateDataInsert":317,"../util/PromiseUtils":378}],144:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({getItem:function(e){throw new Error("not implemented")},setItem:function(e,t){throw new Error("not implemented")}});module.exports=n},{"../../ext/Class":2}],145:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Cache");var a=e("../../util/ObjectUtils");var i=r.create(n,{initialize:function(e){this.data=e||{}},getItem:function(e){var t=this.data[e];return t},setItem:function(e,t){this.data[e]=t},clear:function(){a.clear(this.data)}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./Cache":144}],146:[function(e,module,t){var r=e("lodash.foreach");var n=e("../../ext/Class");var a=e("../../util/ObjectUtils");var i=e("../../util/collection/HashMap");var s=e("./CacheSimple");var o=n.create({initialize:function(){this.serviceToGraphsToCache={}},getCache:function(e,t){var r=this.serviceToGraphsToCache[e];if(!r){r=new i;this.serviceToGraphsToCache[e]=r}var n=r.get(t);if(!n){n=new s;r.put(t,n)}var a=n;return a},invalidate:function(e,t,n){if(!e){r(this.serviceToGraphsToCache,function(e){e.entries().forEach(function(e){var t=e.val;t.clear()})})}else{if(!t){var a=this.serviceToGraphsToCache[e];if(a){a.entries().forEach(function(e){var t=e.val;t.clear()})}}else{var i=this.serviceToGraphsToCache[e];if(i){i.clear()}}}}});module.exports=o},{"../../ext/Class":2,"../../util/ObjectUtils":376,"../../util/collection/HashMap":389,"./CacheSimple":145,"lodash.foreach":577}],147:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e){this.v=e;this.orders=[];this.restrictions=[];this.subCriteria=[]},createCriteria:function(e,t,r){var a=new n;this.subCriteria.push({property:e})},add:function(e){},getVar:function(){return this.v},addOrder:function(e){this.orders.push(e)},toSparqlString:function(){},createListService:function(){}});module.exports=n},{"../../ext/Class":2}],148:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.property=e;this._isAscending=t},isAscending:function(){return this._isAscending}});module.exports=n},{"../../ext/Class":2}],149:[function(e,module,t){var r={gt:function(e,t){}};module.exports=r},{}],150:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e){}});module.exports=n},{"../../ext/Class":2}],151:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({fetchData:function(e){throw new Error("Not implemented")}});module.exports=n},{"../../ext/Class":2}],152:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DataService");var a=e("../../util/shared");var i=a.Promise;var s=r.create(n,{initialize:function(e){this.data=e||[]},fetchData:function(e){var t=i.resolve(this.data);return t}});module.exports=s},{"../../ext/Class":2,"../../util/shared":398,"./DataService":151}],153:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DataService");var a=r.create(n,{initialize:function(e,t){this.delegate=e;this.filterFn=t||function(){return true}},fetchData:function(e){var t=this;return this.delegate.fetchData(e).then(function(e){return e.filter(t.filterFn)})},setFilter:function(e){this.filter=e}});module.exports=a},{"../../ext/Class":2,"./DataService":151}],154:[function(e,module,t){var r=e("../../ext/Class");var n=e("./DataService");var a=r.create(n,{initialize:function(e,t){this.delegate=e;this.transformFn=t},fetchData:function(e){var t=this;return this.delegate.fetchData(e).then(function(e){var r=e.map(t.transformFn);return r})}});module.exports=a},{"../../ext/Class":2,"./DataService":151}],155:[function(e,module,t){"use strict";var r={AjaxUtils:e("./AjaxUtils"),BindingLookup:e("./BindingLookup"),ListFilter:e("./ListFilter"),LookupServiceBuilder:e("./LookupServiceBuilder"),LookupServiceUtils:e("./LookupServiceUtils"),PageExpandUtils:e("./PageExpandUtils"),QueryPaginator:e("./QueryPaginator"),RequestCache:e("./RequestCache"),ResultSetPart:e("./ResultSetPart"),ResultSetUtils:e("./ResultSetUtils"),ServiceUtils:e("./ServiceUtils"),SparqlServiceBuilder:e("./SparqlServiceBuilder"),TableServiceUtils:e("./TableServiceUtils"),SparqlCacheSupplier:e("./cache/SparqlCacheSupplier"),Cache:e("./cache/Cache"),CacheSimple:e("./cache/CacheSimple"),Criteria:e("./criteria/Criteria"),Order:e("./criteria/Order"),Restrictions:e("./criteria/Restrictions"),ServiceBuilder:e("./criteria/ServiceBuilder"),DataService:e("./data_service/DataService"),DataServiceArray:e("./data_service/DataServiceArray"),DataServiceFilter:e("./data_service/DataServiceFilter"),DataServiceTransformEntry:e("./data_service/DataServiceTransformEntry"),AugmenterLookup:e("./list_service/AugmenterLookup"),ListService:e("./list_service/ListService"),ListServiceArray:e("./list_service/ListServiceArray"),ListServiceAugmenter:e("./list_service/ListServiceAugmenter"),ListServiceConcept:e("./list_service/ListServiceConcept"),ListServiceConceptKeyLookup:e("./list_service/ListServiceConceptKeyLookup"),ListServiceFn:e("./list_service/ListServiceFn"),ListServiceIndexSubString:e("./list_service/ListServiceIndexSubString"),ListServicePageExpand:e("./list_service/ListServicePageExpand"),ListServiceSparqlQuery:e("./list_service/ListServiceSparqlQuery"),ListServiceTransformConcept:e("./list_service/ListServiceTransformConcept"),ListServiceTransformConceptMode:e("./list_service/ListServiceTransformConceptMode"),ListServiceTransformItem:e("./list_service/ListServiceTransformItem"),ListServiceTransformItems:e("./list_service/ListServiceTransformItems"),ListServiceUtils:e("./ListServiceUtils"),LookupService:e("./lookup_service/LookupService"),LookupServiceBase:e("./lookup_service/LookupServiceBase"),LookupServiceCache:e("./lookup_service/LookupServiceCache"),LookupServiceChunker:e("./lookup_service/LookupServiceChunker"),LookupServiceConst:e("./lookup_service/LookupServiceConst"),LookupServiceDelegateBase:e("./lookup_service/LookupServiceDelegateBase"),LookupServiceFn:e("./lookup_service/LookupServiceFn"),LookupServiceGraphSparql:e("./lookup_service/LookupServiceGraphSparql"),LookupServiceIdFilter:e("./lookup_service/LookupServiceIdFilter"),LookupServiceKeyMap:e("./lookup_service/LookupServiceKeyMap"),LookupServiceListServiceSparql:e("./lookup_service/LookupServiceListServiceSparql"),LookupServiceMap:e("./lookup_service/LookupServiceMap"),LookupServiceFallback:e("./lookup_service/LookupServiceFallback"),LookupServiceMulti:e("./lookup_service/LookupServiceMulti"),LookupServiceSparqlQuery:e("./lookup_service/LookupServiceSparqlQuery"),LookupServiceTimeout:e("./lookup_service/LookupServiceTimeout"),LookupServiceTransform:e("./lookup_service/LookupServiceTransform"),LookupServiceTransformKey:e("./lookup_service/LookupServiceTransformKey"),QueryCacheBindingHashSingle:e("./query_cache/QueryCacheBindingHashSingle"),QueryCacheNodeFactory:e("./query_cache/QueryCacheNodeFactory"),QueryCacheNodeFactoryImpl:e("./query_cache/QueryCacheNodeFactoryImpl"),QueryExecution:e("./query_execution/QueryExecution"),QueryExecutionCache:e("./query_execution/QueryExecutionCache"),QueryExecutionDelegate:e("./query_execution/QueryExecutionDelegate"),QueryExecutionFailover:e("./query_execution/QueryExecutionFailover"),QueryExecutionHttp:e("./query_execution/QueryExecutionHttp"),QueryExecutionPageExpand:e("./query_execution/QueryExecutionPageExpand"),QueryExecutionPaginate:e("./query_execution/QueryExecutionPaginate"),UpdateExecutionHttp:e("./query_execution/UpdateExecutionHttp"),ResultSet:e("./result_set/ResultSet"),ResultSetArrayIteratorBinding:e("./result_set/ResultSetArrayIteratorBinding"),ResultSetHashJoin:e("./result_set/ResultSetHashJoin"),SparqlService:e("./sparql_service/SparqlService"),SparqlServiceBaseString:e("./sparql_service/SparqlServiceBaseString"),SparqlServiceCache:e("./sparql_service/SparqlServiceCache"),SparqlServiceConsoleLog:e("./sparql_service/SparqlServiceConsoleLog"),SparqlServiceFactory:e("./sparql_service/SparqlServiceFactory"),SparqlServiceFactoryConst:e("./sparql_service/SparqlServiceFactoryConst"),SparqlServiceFactoryDefault:e("./sparql_service/SparqlServiceFactoryDefault"),SparqlServiceFailover:e("./sparql_service/SparqlServiceFailover"),SparqlServiceHttp:e("./sparql_service/SparqlServiceHttp"),SparqlServiceLimit:e("./sparql_service/SparqlServiceLimit"),SparqlServicePageExpand:e("./sparql_service/SparqlServicePageExpand"),SparqlServicePaginate:e("./sparql_service/SparqlServicePaginate"),SparqlServiceReliableLimit:e("./sparql_service/SparqlServiceReliableLimit"),SparqlServiceVirtFix:e("./sparql_service/SparqlServiceVirtFix"),SparqlUpdateBaseString:e("./sparql_service/SparqlUpdateBaseString"),SparqlUpdateHttp:e("./sparql_service/SparqlUpdateHttp"),TableService:e("./table_service/TableService"),TableServiceDelegateBase:e("./table_service/TableServiceDelegateBase"),TableServiceFacet:e("./table_service/TableServiceFacet"),TableServiceListService:e("./table_service/TableServiceListService"),TableServiceNodeLabels:e("./table_service/TableServiceNodeLabels"),TableServiceQuery:e("./table_service/TableServiceQuery"),UpdateUtils:e("./UpdateUtils")};module.exports=r},{"./AjaxUtils":129,"./BindingLookup":130,"./ListFilter":131,"./ListServiceUtils":132,"./LookupServiceBuilder":133,"./LookupServiceUtils":134,"./PageExpandUtils":135,"./QueryPaginator":136,"./RequestCache":137,"./ResultSetPart":138,"./ResultSetUtils":139,"./ServiceUtils":140,"./SparqlServiceBuilder":141,"./TableServiceUtils":142,"./UpdateUtils":143,"./cache/Cache":144,"./cache/CacheSimple":145,"./cache/SparqlCacheSupplier":146,"./criteria/Criteria":147,"./criteria/Order":148,"./criteria/Restrictions":149,"./criteria/ServiceBuilder":150,"./data_service/DataService":151,"./data_service/DataServiceArray":152,"./data_service/DataServiceFilter":153,"./data_service/DataServiceTransformEntry":154,"./list_service/AugmenterLookup":156,"./list_service/ListService":157,"./list_service/ListServiceArray":158,"./list_service/ListServiceAugmenter":159,"./list_service/ListServiceConcept":160,"./list_service/ListServiceConceptKeyLookup":161,"./list_service/ListServiceFn":162,"./list_service/ListServiceIndexSubString":163,"./list_service/ListServicePageExpand":164,"./list_service/ListServiceSparqlQuery":165,"./list_service/ListServiceTransformConcept":166,"./list_service/ListServiceTransformConceptMode":167,"./list_service/ListServiceTransformItem":168,"./list_service/ListServiceTransformItems":169,"./lookup_service/LookupService":170,"./lookup_service/LookupServiceBase":171,"./lookup_service/LookupServiceCache":172,"./lookup_service/LookupServiceChunker":173,"./lookup_service/LookupServiceConst":174,"./lookup_service/LookupServiceDelegateBase":175,"./lookup_service/LookupServiceFallback":176,"./lookup_service/LookupServiceFn":177,"./lookup_service/LookupServiceGraphSparql":178,"./lookup_service/LookupServiceIdFilter":179,"./lookup_service/LookupServiceKeyMap":180,"./lookup_service/LookupServiceListServiceSparql":181,"./lookup_service/LookupServiceMap":182,"./lookup_service/LookupServiceMulti":183,"./lookup_service/LookupServiceSparqlQuery":184,"./lookup_service/LookupServiceTimeout":185,"./lookup_service/LookupServiceTransform":186,"./lookup_service/LookupServiceTransformKey":187,"./query_cache/QueryCacheBindingHashSingle":188,"./query_cache/QueryCacheNodeFactory":189,"./query_cache/QueryCacheNodeFactoryImpl":190,"./query_execution/QueryExecution":191,"./query_execution/QueryExecutionCache":192,"./query_execution/QueryExecutionDelegate":193,"./query_execution/QueryExecutionFailover":194,"./query_execution/QueryExecutionHttp":195,"./query_execution/QueryExecutionPageExpand":196,"./query_execution/QueryExecutionPaginate":197,"./query_execution/UpdateExecutionHttp":198,"./result_set/ResultSet":199,"./result_set/ResultSetArrayIteratorBinding":200,"./result_set/ResultSetHashJoin":201,"./sparql_service/SparqlService":202,"./sparql_service/SparqlServiceBaseString":203,"./sparql_service/SparqlServiceCache":204,"./sparql_service/SparqlServiceConsoleLog":205,"./sparql_service/SparqlServiceFactory":206,"./sparql_service/SparqlServiceFactoryConst":207,"./sparql_service/SparqlServiceFactoryDefault":208,"./sparql_service/SparqlServiceFailover":209,"./sparql_service/SparqlServiceHttp":210,"./sparql_service/SparqlServiceLimit":211,"./sparql_service/SparqlServicePageExpand":212,"./sparql_service/SparqlServicePaginate":213,"./sparql_service/SparqlServiceReliableLimit":214,"./sparql_service/SparqlServiceVirtFix":215,"./sparql_service/SparqlUpdateBaseString":216,"./sparql_service/SparqlUpdateHttp":217,"./table_service/TableService":218,"./table_service/TableServiceDelegateBase":219,"./table_service/TableServiceFacet":220,"./table_service/TableServiceListService":221,"./table_service/TableServiceNodeLabels":222,"./table_service/TableServiceQuery":223}],156:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/ObjectUtils");var a=r.create({initialize:function(e,t,r){this.lookupService=e;this.itemToKeyFn=t||function(e){return e.key};this.mergeFn=r||function(e,t){var r=n.extend(e,t);return r}},augment:function(e){var t=e.map(this.itemToKeyFn);var r=this;var n=this.lookupService.lookup(t).then(function(n){for(var a=0;a<t.length;++a){var i=t[a];var s=e[a];var o=n.get(i);e[a]=r.mergeFn(s,o)}return e});return n}});module.exports=a},{"../../ext/Class":2,"../../util/ObjectUtils":376}],157:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({fetchItems:function(e,t,r){throw new Error("Not implemented")},fetchCount:function(e,t,r){throw new Error("Not implemented")}});module.exports=n},{"../../ext/Class":2}],158:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ServiceUtils");var a=e("./ListService");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e,t){this.items=e;this.fnFilterSupplier=t},fetchItems:function(e,t,r){var n=this.fnFilterSupplier(e);var a=this.items.filter(n);var i=r||0;var o=t?i+t:a.length;var l=a.slice(i,o);return s.resolve(l)},fetchCount:function(e,t,r){var n=this.fnFilterSupplier(e);var a=this.items.filter(n);var i=a.length;var o=t!=null?Math.min(i,t):i;var l={count:o,hasMoreItems:o<i};return s.resolve(l)}});module.exports=o},{"../../ext/Class":2,"../../util/shared":398,"../ServiceUtils":140,"./ListService":157}],159:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ListService");var a=r.create(n,{initialize:function(e,t){this.listService=e;this.augmenter=t},fetchItems:function(e,t,r){var n=this;var a=this.listService.fetchItems(e,t,r).then(function(e){var t=n.augmenter.augment(e);return t});return a},fetchCount:function(e,t,r){var n=this.listService.fetchCount(e,t,r);return n}});module.exports=a},{"../../ext/Class":2,"./ListService":157}],160:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ServiceUtils");var a=e("./ListService");var i=r.create(a,{initialize:function(e){this.sparqlService=e},fetchItems:function(e,t,r){var a=n.fetchItemsConcept(this.sparqlService,e,t,r);return a},fetchCount:function(e,t,r){var a=n.fetchCountConcept(this.sparqlService,e,t,r);return a}});module.exports=i},{"../../ext/Class":2,"../ServiceUtils":140,"./ListService":157}],161:[function(e,module,t){var r=e("lodash.values");var n=e("../../ext/Class");var a=e("./ListService");var i=e("../ServiceUtils");var s=e("../../util/shared");var o=s.Promise;var l=e("../../sparql/ConceptUtils");var u=e("../../util/ObjectUtils");var c=n.create(a,{initialize:function(e,t,r,n,a){this.keyListService=e;this.keyLookupService=t;this.keyFn=r||function(e){return e.key};this.resolveFn=n||function(e,t){u.extend(e.val||e,t);return e};this.isLeftJoin=a==null?true:a},fetchItems:function(e,t,r){var n=this;var a=o.resolve(this.keyListService.fetchItems(e,t,r)).then(function(e){var t=e.map(n.keyFn);return[e,n.keyLookupService.lookup(t)]}).spread(function(e,t){var r=e.map(function(e){var r=n.keyFn(e);var a=t.get(r);var i=n.resolveFn(e,a);return i});return r});return a},fetchCount:o.method(function(e,t,r){var n;if(this.isLeftJoin){n=this.keyListService.fetchCount(e,t,r)}else{var a=this;n=this.keyListService.fetchItems(e,t).then(function(e){var t=e.map(a.keyFn);return a.keyLookupService.lookup(t)}).then(function(e){var r=e.keys();var n=r.length;var a={count:n,hasMoreItems:t==null?false:null};return a})}return n})});module.exports=c},{"../../ext/Class":2,"../../sparql/ConceptUtils":229,"../../util/ObjectUtils":376,"../../util/shared":398,"../ServiceUtils":140,"./ListService":157,"lodash.values":778}],162:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ListService");var a=r.create(n,{initialize:function(e){this.listServiceFn=e},fetchItems:function(e,t,r){var n=this.listServiceFn();var a=n.fetchItems(e,t,r);return a},fetchCount:function(e,t,r){var n=this.listServiceFn();var a=n.fetchCount(e,t,r);return a}});module.exports=a},{"../../ext/Class":2,"./ListService":157}],163:[function(e,module,t){var r=e("../../ext/Class");var n=e("../PageExpandUtils");var a=e("./ListService");var i=r.create(a,{initialize:function(e,t,r,n,a){this.delegate=e;this.filterSupplierFn=t;this.countThreshold=r||1e3;this.itemLimit=n;this.rowLimit=a;this.strToPromise={}},getBestCandKey:function(e){e=e||"";var t=Object.keys(this.strToPromise);var r=this;var n=t.filter(function(t){var r=e.indexOf(t)!==-1;return r});var a=null;var i=null;n.forEach(function(t){var n=r.strToPromise[t];if(n.isFulfilled()){var s=n.value();var o=s?s.length:null;if(o!=null&&(i==null||o<i)){a=t;i=o}}else{if(i==null&&e.indexOf(a)!==-1){a=e}}});return a},filterEntries:function(e,t){var r=this.filterSupplierFn(e);var n=t.filter(r);return n},fetchItems:function(e,t,r){var n=this;var a=this.strToPromise[""];if(a==null||a.isRejected()){a=this.fetchItemsForStr(null)}var i=a.then(function(t){var r=t||e!=null&&n.fetchItemsForStr(e);return r}).then(function(a){var i=r||0;var s=i+(t||a.length);var o=a?n.filterEntries(e,a).slice(i,s):n.delegate.fetchItems(e,t,r);return o});return i},fetchItemsForStr:function(e){var t=this.getBestCandKey(e);var r=t!=null?this.strToPromise[t]:r=this.fetchForStr(e);return r},removeSubsumedStrs:function(e){var t=this;var r=Object.keys(this.strToPromise);r.forEach(function(r){if(e!==r&&r.indexOf(e)!==-1){delete t.strToPromise[r]}})},fetchForStr:function(e){var t=this;if(e===""){e=null}var r=this.delegate.fetchCount(e,this.itemLimit,this.rowLimit).then(function(r){var n=null;if(r.hasMoreItems===false&&r.count<t.countThreshold){n=t.delegate.fetchItems(e).then(function(r){t.removeSubsumedStrs(e);return r})}return n});var n=e||"";this.strToPromise[n]=r;return r},fetchCount:function(e,t,r){var n=this;var a=this.getBestCandKey(e);var i;if(a!=null){var s=this.strToPromise[a];i=s.then(function(a){var i;if(!a){i=n.delegate.fetchCount(e,t,r)}else{var s=n.filterEntries(e,a);i={count:s.length,hasMoreItems:false}}return i})}else{i=this.delegate.fetchCount(e,t,r)}return i}});module.exports=i},{"../../ext/Class":2,"../PageExpandUtils":135,"./ListService":157}],164:[function(e,module,t){var r=e("../../ext/Class");var n=e("../PageExpandUtils");var a=e("./ListService");var i=r.create(a,{initialize:function(e,t){this.listService=e;this.pageSize=t},fetchItems:function(e,t,r){var a=n.computeRange(t,r,this.pageSize);var i=this.listService.fetchItems(e,a.limit,a.offset);var s=i.then(function(e){var t=a.subLimit?a.subOffset+a.subLimit:e.length;var r=e.slice(a.subOffset,t);return r});return s},fetchCount:function(e,t,r){var n=this.listService.fetchCount(e,t,r);return n}});module.exports=i},{"../../ext/Class":2,"../PageExpandUtils":135,"./ListService":157}],165:[function(e,module,t){var r=e("../../ext/Class");var n=e("lodash.values");var a=e("../../util/shared");var i=a.Promise;var s=e("../../sparql/Concept");var o=e("../../sparql/ConceptUtils");var l=e("../ServiceUtils");var u=e("../ResultSetUtils");var c=e("./ListService");var d=e("../../sparql/element/ElementSubQuery");var f=r.create(c,{initialize:function(e,t,r,n,a){if(t.getLimit()||t.getOffset()){throw new Error("Limit and offset in attribute queries not yet supported")}this.sparqlService=e;this.attrQuery=t;this.attrVar=r;this.isLeftJoin=n;this.forceSubQuery=a},fetchItems:function(e,t,r){var a=this.attrVar;if(!e){e=o.createSubjectConcept()}var i=o.createAttrQuery(this.attrQuery,a,this.isLeftJoin,e,t,r,this.forceSubQuery);var s=this.sparqlService.createQueryExecution(i);var l=s.execSelect().then(function(e){var t=u.partition(e,a);var r=t.entries();var i=n(r);return i});return l},fetchCount:function(e,t,r){if(!e){e=o.createSubjectConcept()}var n;if(this.isLeftJoin){var a=o.createAttrQuery(this.attrQuery,this.attrVar,this.isLeftJoin,e,t,null,this.forceSubQuery);n=new s(a.getQueryPattern(),this.attrVar)}else{var i=this.forceSubQuery?new s(new d(this.attrQuery),this.attrVar):new s(this.attrQuery.getQueryPattern(),this.attrVar);n=o.createCombinedConcept(i,e,true,false,false)}var u=l.fetchCountConcept(this.sparqlService,n,t,r);return u}});module.exports=f},{"../../ext/Class":2,"../../sparql/Concept":228,"../../sparql/ConceptUtils":229,"../../sparql/element/ElementSubQuery":266,"../../util/shared":398,"../ResultSetUtils":139,"../ServiceUtils":140,"./ListService":157,"lodash.values":778}],166:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ListService");var a=r.create(n,{initialize:function(e,t){this.listService=e;this.fnTransformConcept=t;if(!t){throw new Error("No transformation function provided")}},fetchItems:function(e,t,r){var n=this.fnTransformConcept(e);var a=this.listService.fetchItems(n,t,r);return a},fetchCount:function(e,t,r){var n=this.fnTransformConcept(e);var a=this.listService.fetchCount(n,t,r);return a}});module.exports=a},{"../../ext/Class":2,"./ListService":157}],167:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ListService");var a=e("../../sparql/search/KeywordSearchUtils");var i={regex:a.createConceptRegexLabelOnly,fulltext:a.createConceptBifContains};var s=r.create({initialize:function(e,t,r){this.listService=e;this.labelRelationFn=t;this.idToFilterFn=r||i},createConcept:function(e){var t;if(e==null||e.searchString==null||e.searchString.trim()===""){t=null}else{var r=this.labelRelationFn();var n=e.mode?e.mode:"default";var a=this.idToFilterFn[n];if(!a){throw new Error('No filter function registered for mode "'+n+'"')}t=a(r,e.searchString)}return t},fetchItems:function(e,t,r){var n=this.createConcept(e);var a=this.listService.fetchItems(n,t,r);return a},fetchCount:function(e,t,r){var n=this.createConcept(e);var a=this.listService.fetchCount(n,t,r);return a}});module.exports=s},{"../../ext/Class":2,"../../sparql/search/KeywordSearchUtils":314,"./ListService":157}],168:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ListService");var a=r.create(n,{initialize:function(e,t){this.listService=e;this.fnTransformItem=t},fetchItems:function(e,t,r){var n=this;var a=this.listService.fetchItems(e,t,r).then(function(e){if(e==null){throw new Error("Should not happen")}var t=e.map(n.fnTransformItem);return t});return a},fetchCount:function(e,t,r){var n=this.listService.fetchCount(e,t,r);return n}});module.exports=a},{"../../ext/Class":2,"./ListService":157}],169:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ListService");var a=e("../../util/shared");var i=a.Promise;var s=r.create(n,{initialize:function(e,t){this.listService=e;this.fnTransformItems=t},fetchItems:function(e,t,r){var n=this;var a=this.listService.fetchItems(e,t,r).then(function(e){var t=n.fnTransformItems(e);return t});return a},fetchCount:function(e,t,r){var n=this.listService.fetchCount(e,t,r);return n}});module.exports=s},{"../../ext/Class":2,"../../util/shared":398,"./ListService":157}],170:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({getIdStr:function(){throw new Error("Not overridden")},lookup:function(e){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],171:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupService");var a=r.create(n,{getIdStr:function(e){var t=e.toString();return t}});module.exports=a},{"../../ext/Class":2,"./LookupService":170}],172:[function(e,module,t){var r=e("../../ext/Class");var n=e("lodash.uniq");var a=e("lodash.find");var i=e("./LookupServiceDelegateBase");var s=e("../RequestCache");var o=e("../../util/collection/HashMap");var l=e("../../util/PromiseUtils");var u=r.create(i,{initialize:function($super,e,t){$super(e);this.requestCache=t||new s},lookup:function(e){var t=this;var r=n(e,false,function(e){var r=t.getIdStr(e);return r});var i=new o;var s=this.requestCache.getResultCache();var u=this.requestCache.getExecutionCache();var c=[];var d=[];var f=[];r.forEach(function(e){var r=t.getIdStr(e);var n=s.getItem(r);if(!n){var o=u[r];if(o){d.push(e);var l=a(f,function(e){var t=e===o;return t});if(!l){f.push(o)}}else{c.push(e);d.push(e)}}else{i.put(e,n)}});if(c.length>0){var p=this.fetchAndCache(c);f.push(p)}var h=l.all(f).then(function(e){d.forEach(function(t){var r=null;a(e,function(e){r=e.get(t);return Boolean(r)});if(r){i.put(t,r)}});return i});return h},fetchAndCache:function(e){var t=this.requestCache.getResultCache();var r=this.requestCache.getExecutionCache();var n=this;var a=this.delegate.lookup(e);var i=a.then(function(a){var i=new o;e.forEach(function(e){var r=n.getIdStr(e);var s=a.get(e);t.setItem(r,s);i.put(e,s)});e.forEach(function(e){var t=n.getIdStr(e);delete r[t]});return i});e.forEach(function(e){var t=n.getIdStr(e);r[t]=i});return i}});module.exports=u},{"../../ext/Class":2,"../../util/PromiseUtils":378,"../../util/collection/HashMap":389,"../RequestCache":137,"./LookupServiceDelegateBase":175,"lodash.find":448,"lodash.uniq":724}],173:[function(e,module,t){var r=e("../../ext/Class");var n=e("lodash.uniq");var a=e("../../util/ArrayUtils");var i=e("../../util/collection/HashMap");var s=e("./LookupServiceDelegateBase");var o=e("../../util/PromiseUtils");var l=r.create(s,{initialize:function($super,e,t){$super(e);this.maxChunkSize=t},lookup:function(e){var t=this;var r=n(e,false,function(e){var r=t.getIdStr(e);return r});var s=a.chunk(r,this.maxChunkSize);var l=s.map(function(e){var r=t.delegate.lookup(e);return r});var u=o.all(l).then(function(e){var t=new i;e.forEach(function(e){t.putMap(e)});return t});return u}});module.exports=l},{"../../ext/Class":2,"../../util/ArrayUtils":368,"../../util/PromiseUtils":378,"../../util/collection/HashMap":389,"./LookupServiceDelegateBase":175,"lodash.uniq":724}],174:[function(e,module,t){
var r=e("../../ext/Class");var n=e("./LookupServiceBase");var a=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e){this.data=e},lookup:function(e){var t=new a;var r=this;e.forEach(function(e){t.put(e,r.data)});var n=s.resolve(t);return n}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServiceBase":171}],175:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupService");var a=r.create(n,{initialize:function(e){this.delegate=e},getIdStr:function(e){var t=this.delegate.getIdStr(e);return t}});module.exports=a},{"../../ext/Class":2,"./LookupService":170}],176:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceBase");var a=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e,t,r,n){this.primaryLookupService=e;this.fallbackLookupService=t;this.acceptFn=r||function(e,t){return e!=null};this.resolveFn=n||function(e,t,r){return e}},lookup:function(e){var t=this;var r=this.primaryLookupService.lookup(e).then(function(r){var n=e.filter(function(e){var n=r.get(e);var a=t.acceptFn(n,e);return a});var i=t.fallbackLookupService.lookup(n).then(function(e){var i=new a;i.putEntries(r.entries());var s=e.entries();n.forEach(function(n){var a=r.get(n);var s=e.get(n);var o=t.resolveFn(s,a,n);i.put(n,o)});return i});return i});return r}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServiceBase":171}],177:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceBase");var a=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e){this.fn=e},lookup:s.method(function(e){var t=new a;var r=this;e.forEach(function(e){var n=r.fn(e);if(typeof n!=="undefined"){t.put(e,n)}});return t})});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServiceBase":171}],178:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceBase");var a=e("../ServiceUtils");var i=e("../../util/collection/HashMap");var s=e("../../rdf/GraphImpl");var o=e("../../rdf/GraphUtils");var l=r.create(n,{initialize:function(e){this.sparqlService=e},lookup:function(e){var t=a.execDescribeViaSelect(this.sparqlService,e);var r=t.then(function(t){var r=new i;e.forEach(function(e){r.put(e,new s)});o.indexBySubject(t,r);return r});return r}});module.exports=l},{"../../ext/Class":2,"../../rdf/GraphImpl":96,"../../rdf/GraphUtils":97,"../../util/collection/HashMap":389,"../ServiceUtils":140,"./LookupServiceBase":171}],179:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceDelegateBase");var a=r.create(n,{initialize:function($super,e,t){$super(e);this.predicateFn=t},lookup:function(e){var t=e.filter(this.predicateFn);var r=this.delegate.lookup(t);return r}});module.exports=a},{"../../ext/Class":2,"./LookupServiceDelegateBase":175}],180:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupService");var a=e("../../util/ObjectUtils");var i=e("../../util/collection/HashMap");var s=e("../../util/shared");var o=s.Promise;var l=r.create(n,{initialize:function(e){this.fnTransformKey=e||a.identity},lookup:function(e){var t=new i;var r=this;e.forEach(function(e){var n=r.fnTransformKey(e);t.put(e,n)});return o.resolve(t)}});module.exports=l},{"../../ext/Class":2,"../../util/ObjectUtils":376,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupService":170}],181:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/shared");var a=n.Promise;var i=e("../../util/collection/HashMap");var s=e("../../sparql/Concept");var o=e("../../sparql/VarUtils");var l=e("../../sparql/expr/ExprVar");var u=e("../../sparql/expr/E_OneOf");var c=e("../../sparql/element/ElementFilter");var d=e("./LookupServiceBase");var f=r.create(d,{initialize:function(e){this.listService=e},lookup:function(e){var t=o.s;var r=new c(new u(new l(t),e));var n=new s(r,t);var a=this.listService.fetchItems(n).then(function(e){var t=new i;t.putEntries(e);return t});return a}});module.exports=f},{"../../ext/Class":2,"../../sparql/Concept":228,"../../sparql/VarUtils":256,"../../sparql/element/ElementFilter":261,"../../sparql/expr/E_OneOf":291,"../../sparql/expr/ExprVar":303,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServiceBase":171}],182:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceBase");var a=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e){this.map=e},lookup:s.method(function(e){var t=new a;var r=this;e.forEach(function(e){var n=r.map.get(e);t.put(e,n)});return t})});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServiceBase":171}],183:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupService");var a=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e){this.attrToLookupService=e},lookup:function(e){var t=this;var r={};var n=Object.keys(this.attrToLookupService);n.forEach(function(n){var a=t.attrToLookupService[n];if(a){r[n]=a.lookup(e)}else{r[n]=null}});var i=s.props(r).then(function(t){var r=new a;e.forEach(function(e){var a={};n.forEach(function(r){var n=t[r];var i=n?n.get(e):null;a[r]=i});r.put(e,a)});return r});return i}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupService":170}],184:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/shared");var a=n.Promise;var i=e("../../util/collection/HashMap");var s=e("../../sparql/expr/ExprVar");var o=e("../../sparql/expr/E_OneOf");var l=e("../../sparql/element/ElementFilter");var u=e("../../sparql/element/ElementGroup");var c=e("../ResultSetUtils");var d=e("./LookupServiceBase");var f=r.create(d,{initialize:function(e,t,r){this.sparqlService=e;this.query=t;this.v=r},lookup:function(e){var t=e.some(function(e){var t=e==null;return t});if(t){throw new Error("Lookup requests must not include null values as it most likely indicates a problem")}var r=this.v;var n;if(e.length===0){n=a.resolve(new i)}else{var d=this.query.clone();var f=new l(new o(new s(r),e));var p=new u([d.getQueryPattern(),f]);d.setQueryPattern(p);var h=this.sparqlService.createQueryExecution(d);n=h.execSelect().then(function(e){var t=c.partition(e,r);return t})}return n}});module.exports=f},{"../../ext/Class":2,"../../sparql/element/ElementFilter":261,"../../sparql/element/ElementGroup":262,"../../sparql/expr/E_OneOf":291,"../../sparql/expr/ExprVar":303,"../../util/collection/HashMap":389,"../../util/shared":398,"../ResultSetUtils":139,"./LookupServiceBase":171}],185:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceDelegateBase");var a=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=function(){var e;var t;var r=new s(function(){e=arguments[0];t=arguments[1]});return{resolve:e,reject:t,promise:r}};var l=r.create(n,{initialize:function($super,e,t,r){$super(e);this.delayInMs=t;this.maxRefreshCount=r||0;this.idStrToId={};this.currentDeferred=null;this.currentPromise=null;this.currentTimer=null;this.currentRefreshCount=0},getIdStr:function(e){var t=this.delegate.getIdStr(e);return t},lookup:function(e){if(!this.currentDeferred){this.currentDeferred=o();this.currentPromise=this.currentDeferred.promise()}var t=this;e.forEach(function(e){var r=t.getIdStr(e);var n=t.idStrToId[r];if(!n){t.idStrToId[r]=e}});if(!this.currentTimer){this.startTimer()}var r=this.currentPromise.then(function(t){var r=new a;e.forEach(function(e){var n=t.get(e);r.put(e,n)});return r});return r},startTimer:function(){var e=this;var t=this.currentRefreshCount;var r=e.currentDeferred;this.currentTimer=setTimeout(function(){if(e.maxRefreshCount<0||t<e.maxRefreshCount){++e.currentRefreshCount;e.startTimer();return}var n=[];for(var a in e.idStrToId){n.push(e.idStrToId[a])}e.idStrToId={};e.currentRefreshCount=0;e.currentDeferred=null;e.currentTimer=null;e.delegate.lookup(n).then(function(e){r.resolve(e)})},this.delayInMs)}});module.exports=l},{"../../ext/Class":2,"../../util/collection/HashMap":389,"../../util/shared":398,"./LookupServiceDelegateBase":175}],186:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceDelegateBase");var a=r.create(n,{initialize:function($super,e,t,r){$super(e);this.fnTransform=t;this.fnNullHandler=r},lookup:function(e){var t=this.fnTransform;var r=this.fnNullHandler;var n=this.delegate.lookup(e).then(function(n){e.forEach(function(e){var a=n.get(e);if(a!=null){var i=t(a,e);n.put(e,i)}else if(r){a=r(e);if(a!=null){n.put(e,a)}}});return n});return n}});module.exports=a},{"../../ext/Class":2,"./LookupServiceDelegateBase":175}],187:[function(e,module,t){var r=e("../../ext/Class");var n=e("./LookupServiceDelegateBase");var a=e("../../util/collection/HashMap");var i=r.create(n,{initialize:function($super,e,t){$super(e);this.fnKey=t},lookup:function(e){var t=this;var r=new a;e.forEach(function(e){var n=t.fnKey(e);r.put(n,e)});var n=r.keys();var i=this.delegate.lookup(n).then(function(e){var t=new a;e.entries().forEach(function(e){var n=r.get(e.key);t.put(n,e.val)});return t});return i}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":389,"./LookupServiceDelegateBase":175}],188:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../sparql/ExprEvaluatorImpl");var a=e("../../util/collection/IteratorArray");var i=e("../result_set/ResultSetArrayIteratorBinding");var s=e("../../sparql/expr/E_OneOf");var o=e("../../sparql/element/ElementFilter");var l=e("../../util/shared");var u=l.Promise;var c=e("../../util/PromiseUtils");var d=r.create({initialize:function(e,t,r){this.sparqlService=e;this.query=t;this.indexExpr=r;this.maxChunkSize=50;this.exprEvaluator=new n;this.nodeToBindings={};this.nodeMisses={}},fetchResultSet:function(e){var t=this;var r=this.nodeToBindings;var n=this.analyze(e);var s=[];n.cachedNodes.forEach(function(e){var t=r.getItem(e.toString());s.push.apply(s,t)});var o=n.nonCachedChunks.map(function(e){var r=t.fetchChunk(e);return r});var l=c.all(o);var u=this.exprEvaluator;var d=this.indexExpr;return l.then(function(){var e={};for(var t=0;t<arguments.length;++t){var n=arguments[t];while(n.hasNext()){var o=n.nextBinding();s.push(o);var l=u.eval(d,o);var c=l.toString();e[c]=l;var f=r.getItem(c);if(f==null){f=[];r.setItem(c,f)}f.push(o)}}var p=new a(s);var h=new i(p);return h})},fetchChunk:function(e){var t=this.query.clone();var r=new s(this.indexExpr,e);var n=new o([r]);t.getElements().push(n);var a=this.sparqlService.createQueryExecution(t);var i=a.execSelect();return i},analyze:function(e){var t=this.nodeToBindings;var r=[];var n=[];e.forEach(function(e){var a=t.getItem(e.toString());if(a==null){n.push(e)}else{r.push(e)}});var a=this.maxChunkSize;var i=[];for(var s=0;s<n.length;s+=a){var o=e.slice(s,s+a);i.push(o)}var l={cachedNodes:r,nonCachedNodes:n,nonCachedChunks:i,maxChunkSize:a};return l}});module.exports=d},{"../../ext/Class":2,"../../sparql/ExprEvaluatorImpl":235,"../../sparql/element/ElementFilter":261,"../../sparql/expr/E_OneOf":291,"../../util/PromiseUtils":378,"../../util/collection/IteratorArray":393,"../../util/shared":398,"../result_set/ResultSetArrayIteratorBinding":200}],189:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({createQueryCache:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],190:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryCacheNodeFactory");var a=e("./QueryCacheBindingHashSingle");var i=r.create(n,{initialize:function(){this.keyToCache={}},createQueryCache:function(e,t,r){var n="cache:/"+e.getServiceId()+"/"+e.getServiceState()+"/"+t+"/"+r;console.log("cache requested with id: "+n);var i=this.keyToCache.getItem(n);if(i==null){i=new a(e,t,r);this.keyToCache.addItem(n,i)}return i}});module.exports=i},{"../../ext/Class":2,"./QueryCacheBindingHashSingle":188,"./QueryCacheNodeFactory":189}],191:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({execSelect:function(){throw new Error("Not overridden")},execAsk:function(){throw new Error("Not overridden")},execDescribeTriples:function(){throw new Error("Not overridden")},execConstructTriples:function(){throw new Error("Not overridden")},setTimeout:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],192:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryExecution");var a=e("../../util/collection/IteratorArray");var i=e("../result_set/ResultSetArrayIteratorBinding");var s=e("../../util/CacheUtils");var o=r.create(n,{initialize:function(e,t,r){this.queryExecution=e;this.cacheKey=t;this.requestCache=r},createResultSetFromCacheData:function(e){var t=new a(e.bindings);var r=e.varNames;var n=new i(t,r);return n},setTimeout:function(e){this.queryExecution.setTimeout(e)},execSelect:function(){var e=this.cacheKey;var t=this.requestCache;var r=t.getResultCache();var n=t.getExecutionCache();var a=this;var i=s.cacheExecutionAndResult(n,r,e,function(){var e=a.queryExecution.execSelect().then(function(e){var t={bindings:e.getBindings(),varNames:e.getVarNames()};return t});return e});var o=i.then(function(e){var t=a.createResultSetFromCacheData(e);return t});return o}});module.exports=o},{"../../ext/Class":2,"../../util/CacheUtils":369,"../../util/collection/IteratorArray":393,"../result_set/ResultSetArrayIteratorBinding":200,"./QueryExecution":191}],193:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryExecution");var a=r.create(n,{initialize:function(e,t){this.sparqlService=e;this.query=t;this.timeout=null},setTimeout:function(e){this.timeout=e},createQueryExecution:function(e){var t=this.sparqlService.createQueryExecution(e||this.query);t.setTimeout(this.timeout);return t},execSelect:function(){var e=this.createQueryExecution().execSelect(this.query);return e},execAsk:function(){var e=this.createQueryExecution().execAsk(this.query);return e}});module.exports=a},{"../../ext/Class":2,"./QueryExecution":191}],194:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryExecution");var a=e("../QueryPaginator");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=e("../../util/shared");var l=o.Promise;var u=r.create(n,{initialize:function(e){this.sparqlServices=e;this.timeoutInMillis=null},execSelect:function(){var e=this.sparqlServices.createQueryExecution(this.query);e.setTimeout(this.timeoutInMillis);return e},setTimeout:function(e){this.timeoutInMillis=e}});module.exports=u},{"../../ext/Class":2,"../../util/collection/IteratorArray":393,"../../util/shared":398,"../QueryPaginator":136,"../result_set/ResultSetArrayIteratorBinding":200,"./QueryExecution":191}],195:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryExecution");var a=e("../ResultSetUtils");var i=e("../AjaxUtils");var s=e("../../util/shared");var o=s.ajax;var l=s.Promise;var u=r.create(n,{initialize:function(e,t,r,n,a,i){this.queryString=e;this.serviceUri=t;this.defaultGraphUris=r;this.ajaxOptions=n||{};this.httpArgs=a;this.httpClient=i||o},execSelect:function(){var e=this.execAny().then(function(e){var t;try{t=a.jsonToResultSet(e)}catch(r){console.log("Error processing result set. Response was: ",e);throw r}return t});return e},execAsk:function(){var e=this.execAny().then(function(e){return e.boolean});return e},execConstructTriples:function(){throw new Error("Not implemented yet")},execDescribeTriples:function(){throw new Error("Not implemented yet")},setTimeout:function(e){this.ajaxOptions.timeout=e},getTimeout:function(){return this.ajaxOptions.timeout},execAny:function(){var e=i.createSparqlRequestAjaxSpec(this.serviceUri,this.defaultGraphUris,this.queryString,this.httpArgs,this.ajaxOptions);var t=this.httpClient(e);return t}});module.exports=u},{"../../ext/Class":2,"../../util/shared":398,"../AjaxUtils":129,"../ResultSetUtils":139,"./QueryExecution":191}],196:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryExecutionDelegate");var a=e("../PageExpandUtils");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=r.create(n,{initialize:function($super,e,t,r){$super(e,t);this.pageSize=r},execSelect:function(){var e=this.query.clone();var t=a.computeRange(e.getLimit(),e.getOffset(),this.pageSize);e.setLimit(t.limit);e.setOffset(t.offset);var r=this.createQueryExecution(e);var n=r.execSelect();var o=n.then(function(e){var r=e.getIterator().getArray();var n=t.subLimit?t.subOffset+t.subLimit:r.length;var a=r.slice(t.subOffset,n);var o=e.getVarNames();var l=new i(a);var u=new s(l,o);return u});return o}});module.exports=o},{"../../ext/Class":2,"../../util/collection/IteratorArray":393,"../PageExpandUtils":135,"../result_set/ResultSetArrayIteratorBinding":200,"./QueryExecutionDelegate":193}],197:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryExecution");var a=e("../QueryPaginator");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=e("../../util/shared");var l=o.Promise;var u=r.create(n,{initialize:function(e,t,r){this.defaultPageSize=1e3;this.sparqlService=e;this.query=t;this.pageSize=r;this.timeoutInMillis=null},executeSelectRec:l.method(function(e,t){var r=e.next();if(!r){return t}var n=this;var a=this.sparqlService.createQueryExecution(r);a.setTimeout(this.timeoutInMillis);var o=a.execSelect().then(function(a){if(!a){throw new Error("Null result set for query: "+r)}var o;if(!t){o=a}else{var l=t.getIterator().getArray();var u=a.getIterator().getArray();var c=l.concat(u);var d=new i(c);o=new s(d)}var f=a.getIterator().getArray().length;var p=e.getPageSize();var h=f===0||f<p;if(!h){o=n.executeSelectRec(e,o)}return o});return o}),execSelect:function(){var e=this.query.clone();var t=this.pageSize||u.defaultPageSize;var r=new a(e,t);return this.executeSelectRec(r,null)},setTimeout:function(e){this.timeoutInMillis=e;if(!u.timeoutMsgShown){console.log("[WARN] Only preliminary timeout implementation for paginated query execution.");u.timeoutMsgShown=true}}});module.exports=u},{"../../ext/Class":2,"../../util/collection/IteratorArray":393,"../../util/shared":398,"../QueryPaginator":136,"../result_set/ResultSetArrayIteratorBinding":200,"./QueryExecution":191}],198:[function(e,module,t){var r=e("../../ext/Class");var n=e("../AjaxUtils");var a=e("../../util/shared");var i=a.ajax;var s=a.Promise;var o=r.create({initialize:function(e,t,r,n,a,s,o){this.queryString=e;this.serviceUri=t;this.usingGraphUris=r;this.usingNamedGraphUris=n;this.ajaxOptions=a||{};this.httpArgs=s;this.httpClient=o||i},execUpdate:function(){var e=this.execAny();return e},setTimeout:function(e){this.ajaxOptions.timeout=e},getTimeout:function(){return this.ajaxOptions.timeout},execAny:function(){var e=n.createSparqlUpdateAjaxSpec(this.queryString,this.serviceUri,this.usingGraphUris,this.usingNamedGraphUris,this.httpArgs,this.ajaxOptions);var t=this.httpClient(e);return t}});module.exports=o},{"../../ext/Class":2,"../../util/shared":398,"../AjaxUtils":129}],199:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/Iterator");var a=r.create(n,{getVarNames:function(){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2,"../../util/collection/Iterator":391}],200:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ResultSet");var a=r.create(n,{initialize:function(e,t){this.itBinding=e;this.varNames=t},hasNext:function(){return this.itBinding.hasNext()},next:function(){return this.nextBinding()},nextBinding:function(){return this.itBinding.next()},getVarNames:function(){return this.varNames},getBindings:function(){return this.itBinding.getArray()},getIterator:function(){return this.itBinding}});module.exports=a},{"../../ext/Class":2,"./ResultSet":199}],201:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/IteratorAbstract");var a=r.create(n,{initialize:function(e,t,r,n){this.rsA=e;this.serviceB=t;this.elementB=r;this.expr=n;e.getVarsMentioned();n.getVarsMentioned()},$prefetch:function(){}});module.exports=a},{"../../ext/Class":2,"../../util/collection/IteratorAbstract":392}],202:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({getServiceId:function(){throw new Error("[ERROR] Method not overridden")},getStateHash:function(){throw new Error("[ERROR] Method not overridden")},createQueryExecution:function(e){throw new Error("[ERROR] Method not overridden")}});module.exports=n},{"../../ext/Class":2}],203:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=r.create(n,{createQueryExecution:function(e){var t;if(Object.toString(e)==="[object String]"){t=this.createQueryExecutionStr(e)}else{t=this.createQueryExecutionObj(e)}return t},createQueryExecutionObj:function(e){var t=e.toString();var r=this.createQueryExecutionStr(t);return r},createQueryExecutionStr:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2,"./SparqlService":202}],204:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=e("../RequestCache");var i=e("../query_execution/QueryExecutionCache");var s=r.create(n,{initialize:function(e,t){this.sparqlService=e;this.requestCache=t||new a},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"cached:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=this.sparqlService.getServiceId();var r=this.sparqlService.getStateHash();var n=""+e;var a=t+"-"+r+n;var s=this.sparqlService.createQueryExecution(e);var o=new i(s,a,this.requestCache);return o}});module.exports=s},{"../../ext/Class":2,"../RequestCache":137,"../query_execution/QueryExecutionCache":192,"./SparqlService":202}],205:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=r.create(n,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"console-log:"+this.sparqlService.hashCode()},createQueryExecution:function(e){console.log("SparqlServiceConsoleLog saw query: "+e);var t=this.sparqlService.createQueryExecution(e);return t}});module.exports=a},{"../../ext/Class":2,"./SparqlService":202}],206:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({createSparqlService:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],207:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e){this.sparqlService=e},createSparqlService:function(){var e=this.sparqlService;if(e==null){throw new Error("[ERROR] Creation of a SPARQL service requested, but none was provided")}return e},setSparqlService:function(e){this.sparqlService=e}});module.exports=n},{"../../ext/Class":2}],208:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlServiceHttp");var a=e("./SparqlServiceCache");var i=r.create({initialize:function(){this.hashToCache={}},createSparqlService:function(e,t){var r=new n(e,t);r=new a(r);var i=r.getStateHash();var s=this.hashToCache[i];var o;if(s){o=s}else{this.hashToCache[i]=r;o=r}return o}});module.exports=i},{"../../ext/Class":2,"./SparqlServiceCache":204,"./SparqlServiceHttp":210}],209:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=e("../query_execution/QueryExecutionFailover");var i=r.create(n,{initialize:function(e){this.sparqlServices=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"failover:"+this.sparqlService.hashCode()},createQueryExecution:function(e){return new a(this.sparqlServices)}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionFailover":194,"./SparqlService":202}],210:[function(e,module,t){var r=e("../../ext/Class");var n=e("lodash.defaults");var a=e("./SparqlServiceBaseString");var i=e("../query_execution/QueryExecutionHttp");var s=e("../../ext/JSONCanonical");var o=e("../../sparql/DatasetDescription");var l=e("lodash");var u=r.create(a,{initialize:function(e,t,r,n,a){var i=t==null?new o:l.isArray(t)?new o(t):t;this.initializeCore(e,i,r,n,a)},initializeCore:function(e,t,r,n,a){this.serviceUri=e;this.datasetDescription=t;this.ajaxOptions=r;this.httpArgs=n;this.httpClient=a},getServiceId:function(){return this.serviceUri},getStateHash:function(){var e=""+this.datasetDescription+s.stringify(this.httpArgs);return e},hashCode:function(){return this.getServiceId()+"/"+this.getStateHash()},getDatasetDescription:function(){return this.datasetDescription},createQueryExecutionStr:function(e){var t=n({},this.ajaxOptions);var r=new i(e,this.serviceUri,this.datasetDescription,t,this.httpArgs,this.httpClient);return r},createQueryExecutionObj:function($super,e){if(true){if(e.flatten){var t=e;e=t.flatten()}}var r=$super(e);return r}});module.exports=u},{"../../ext/Class":2,"../../ext/JSONCanonical":3,"../../sparql/DatasetDescription":230,"../query_execution/QueryExecutionHttp":195,"./SparqlServiceBaseString":203,lodash:785,"lodash.defaults":442}],211:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=r.create(n,{initialize:function(e,t){this.sparqlService=e;this.maxLimit=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"maxLimit:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=e.getLimit();if(t==null||t>this.maxLimit){e=e.clone();e.setLimit(this.maxLimit)}var r=this.sparqlService.createQueryExecution(e);return r}});module.exports=a},{"../../ext/Class":2,"./SparqlService":202}],212:[function(e,module,t){var r=e("../../ext/Class");var n=e("../query_execution/QueryExecutionPageExpand");var a=e("./SparqlService");var i=r.create(a,{initialize:function(e,t){this.sparqlService=e;this.pageSize=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"page-expand:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=new n(this.sparqlService,e,this.pageSize);return t}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionPageExpand":196,"./SparqlService":202}],213:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=e("../query_execution/QueryExecutionPaginate");var i=r.create(n,{initialize:function(e,t){this.defaultPageSize=1e3;this.sparqlService=e;this.pageSize=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"paginate:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=new a(this.sparqlService,e,this.pageSize);return t}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionPaginate":197,"./SparqlService":202}],214:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=e("../../sparql/element/ElementGroup");var i=r.create({initialize:function(e){},createQueryExecution:function(e){},applyTransform:function(e){var t=e.getQueryPattern();if(t instanceof a){var r=t.getArgs();var n=[];var i=[];r.forEach(function(){})}}});module.exports=i},{"../../ext/Class":2,"../../sparql/element/ElementGroup":262,"./SparqlService":202}],215:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=e("../../sparql/expr/ExprAggregator");var i=e("../../sparql/Query");var s=e("../../sparql/element/ElementSubQuery");var o=r.create(n,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"virtfix:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=e.getOrderBy();var r=e.getLimit();var n=e.getOffset();var a=n!=null&&r==null;var o=e.getAggregators().length>0;var l=t.length>0&&(r||n)||o;var u=a||l;var c=u?e.clone():e;if(a){r=2e9;c.setLimit(r)}if(l){var d=c;d.setLimit(null);d.setOffset(null);var f=new s(d);c=new i;c.setQueryPattern(f);c.setLimit(r);c.setOffset(n);c.setQueryResultStar(true)}var p=this.sparqlService.createQueryExecution(c);return p}});module.exports=o},{"../../ext/Class":2,"../../sparql/Query":247,"../../sparql/element/ElementSubQuery":266,"../../sparql/expr/ExprAggregator":295,"./SparqlService":202}],216:[function(e,module,t){var r=e("../../ext/Class");var n=e("./SparqlService");var a=r.create(n,{createUpdateExecution:function(e){var t;if(Object.toString(e)==="[object String]"){t=this.createUpdateExecutionStr(e)}else{t=this.createUpdateExecutionObj(e)}return t},createUpdateExecutionObj:function(e){var t=e.toString();var r=this.createUpdateExecutionStr(t);return r},createUpdateExecutionStr:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2,"./SparqlService":202}],217:[function(e,module,t){var r=e("../../ext/Class");var n=e("lodash.defaults");var a=e("./SparqlUpdateBaseString");var i=e("../query_execution/UpdateExecutionHttp");var s=e("../../ext/JSONCanonical");var o=r.create(a,{initialize:function(e,t,r,n,a){this.serviceUri=e;this.usingGraphUris=t;this.usingNamedGraphUris=r;this.ajaxOptions=n;this.httpArgs=a},getServiceId:function(){return this.serviceUri},getStateHash:function(){var e="using:"+s.stringify(this.usingGraphUris);e+="usingNamed:"+s.stringify(this.usingNamedGraphUris);e+=s.stringify(this.httpArgs);return e},hashCode:function(){return this.getServiceId()+"/"+this.getStateHash()},createUpdateExecutionStr:function(e){var t=n({},this.ajaxOptions);var r=new i(e,this.serviceUri,this.usingGraphUris,this.usingNamedGraphUris,t,this.httpArgs);return r}});module.exports=o},{"../../ext/Class":2,"../../ext/JSONCanonical":3,"../query_execution/UpdateExecutionHttp":198,"./SparqlUpdateBaseString":216,"lodash.defaults":442}],218:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({fetchSchema:function(){throw new Error("Override me")},fetchCount:function(e){throw new Error("Override me")},fetchData:function(e,t){throw new Error("Override me")}});module.exports=n},{"../../ext/Class":2}],219:[function(e,module,t){var r=e("../../ext/Class");var n=e("./TableService");var a=r.create(n,{initialize:function(e){this.delegate=e},fetchSchema:function(){var e=this.delegate.fetchSchema();return e},fetchCount:function(){var e=this.delegate.fetchCount();return e},fetchData:function(){var e=this.delegate.fetchData();return e}});module.exports=a},{"../../ext/Class":2,"./TableService":218}],220:[function(e,module,t){var r=e("../../ext/Class");var n=e("./TableServiceNodeLabels");var a=e("../TableServiceUtils");var i=r.create(n,{initialize:function($super,e,t,r,n){$super(e,r);this.tableConfigFacet=t;this.lookupServicePathLabels=n},fetchSchema:function(){var e=a.fetchSchemaTableConfigFacet(this.tableConfigFacet,this.lookupServicePathLabels);return e}});module.exports=i},{"../../ext/Class":2,"../TableServiceUtils":142,"./TableServiceNodeLabels":222}],221:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e){this.listService=e},fetchCount:function(e,t){this.listService.fetchCount(null,e,t)},fetchData:function(){}});module.exports=n},{"../../ext/Class":2}],222:[function(e,module,t){var r=e("../../ext/Class");var n=e("./TableServiceDelegateBase");var a=e("../TableServiceUtils");var i=r.create(n,{
initialize:function($super,e,t){$super(e);this.lookupServiceNodeLabels=t},fetchData:function(e,t){var r=this.delegate.fetchData(e,t);var n=this;var i=r.then(function(e){var t=a.transformToNodeLabels(n.lookupServiceNodeLabels,e);return t});return i}});module.exports=i},{"../../ext/Class":2,"../TableServiceUtils":142,"./TableServiceDelegateBase":219}],223:[function(e,module,t){var r=e("../../ext/Class");var n=e("./TableService");var a=e("../TableServiceUtils");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e,t,r,n){this.sparqlService=e;this.query=t;this.timeoutInMillis=r||3e3;this.secondaryCountLimit=n||1e3},fetchSchema:function(){var e={colDefs:a.createNgGridOptionsFromQuery(this.query)};return new s(function(t){t(e)})},fetchCount:function(){var e=a.fetchCount(this.sparqlService,this.query,this.timeoutInMillis,this.secondaryCountLimit);return e},fetchData:function(e,t){var r=a.fetchData(this.sparqlService,this.query,e,t);return r}});module.exports=o},{"../../ext/Class":2,"../../util/shared":398,"../TableServiceUtils":142,"./TableService":218}],224:[function(e,module,t){var r=e("../ext/Class");var n=e("./VarUtils");var a=e("./LiteralPreference");var i=r.create({initialize:function(e,t,r,i){this.literalPreference=e||new a;this.subjectVar=r||n.x;this.predicateVar=i||n.y;this.objectVar=t||n.z},getLangs:function(){var e=this.literalPreference.getLangs();return e},getPredicates:function(){var e=this.literalPreference.getPredicates();return e},getLiteralPreference:function(){return this.literalPrefence},getSubjectVar:function(){return this.subjectVar},getPredicateVar:function(){return this.predicateVar},getObjectVar:function(){return this.objectVar},toString:function(){var e=["BestLabelConfig",this.langs,this.predicates,this.subjectVar,this.predicateVar,this.objectVar].join(", ");return e}});module.exports=i},{"../ext/Class":2,"./LiteralPreference":242,"./VarUtils":256}],225:[function(e,module,t){var r=e("../rdf/NodeFactory");var n=e("../rdf/node/Var");var a=function(e){this.varNameToEntry=e?e:{}};a.create=function(e){var t={};for(var n in e){var i=e[n];t[n]={v:r.createVar(n),node:i}}var s=new a(t);return s};a.fromTalisJson=function(e){var t={};for(var n in e){var i=e[n];var s=r.createFromTalisRdfJson(i);t[n]=s}var o=a.create(t);return o};a.prototype={put:function(e,t){this.varNameToEntry[e.getName()]={v:e,node:t}},get:function(e){if(!(e instanceof n)){throw new Error("var not an instance of Var")}var t=e.getName();var r=this.varNameToEntry[t];var a=r?r.node:null;return a},entries:function(){var e=[];for(var t in this.varNameToEntry){var r=this.varNameToEntry[t];e.push(r)}var n=e.sort(function(e,t){return e.v.getName()>t.v.getName()?1:-1});return n},toString:function(){var e=this.entries();var t=e.map(function(e){return'"'+e.v.getName()+'": "'+e.node+'"'});var r="{"+t.join(", ")+"}";return r},getVars:function(){var e=[];for(var t in this.varNameToEntry){var r=this.varNameToEntry[t];e.push(r.v)}return e}};module.exports=a},{"../rdf/NodeFactory":99,"../rdf/node/Var":119}],226:[function(e,module,t){var r=e("../vocab/xsd");var n=e("../rdf/NodeFactory");var a=e("./Binding");var i={cloneBinding:function(e){var t=new a;var r=e.entries();r.forEach(function(e){t.put(e.v,e.node)});return t},cloneBindings:function(e){var t=e.map(function(e){var t=i.cloneBinding(e);return t});return t},addRowIds:function(e,t,a){a=a||0;e.forEach(function(e,i){var s=a+i;var o=n.createTypedLiteralFromString(""+s,r.xinteger);e.put(t,o)});return e}};module.exports=i},{"../rdf/NodeFactory":99,"../vocab/xsd":405,"./Binding":225}],227:[function(e,module,t){var r=e("../vocab/rdf");var n=e("../vocab/owl");var a=e("../rdf/Triple");var i=e("../sparql/element/ElementTriplesBlock");var s=e("../sparql/element/ElementFilter");var o=e("../sparql/element/ElementGroup");var l=e("../sparql/expr/E_LogicalOr");var u=e("../sparql/expr/E_Equals");var c=e("../sparql/expr/ExprVar");var d=e("../sparql/Concept");var f=e("../sparql/NodeValueUtils");var p=e("../sparql/VarUtils");var h={createConceptDeclaredProperties:function(e,t){e=e||p.s;t=t||p.o;var h=new c(t);var v=f.makeNode(r.Property);var g=f.makeNode(n.DatatypeProperty);var m=f.makeNode(n.ObjectProperty);var _=f.makeNode(n.AnnotationProperty);var x=new d(new o([new i([new a(e,r.type,t)]),new s(new l(new u(h,v),new l(new u(h,g),new l(new u(h,m),new u(h,_)))))]),e);return x}};module.exports=h},{"../rdf/Triple":102,"../sparql/Concept":228,"../sparql/NodeValueUtils":243,"../sparql/VarUtils":256,"../sparql/element/ElementFilter":261,"../sparql/element/ElementGroup":262,"../sparql/element/ElementTriplesBlock":267,"../sparql/expr/E_Equals":279,"../sparql/expr/E_LogicalOr":289,"../sparql/expr/ExprVar":303,"../vocab/owl":401,"../vocab/rdf":402}],228:[function(e,module,t){var r=e("../ext/Class");var n=e("./ElementUtils");var a=e("./element/ElementGroup");var i=e("./element/ElementTriplesBlock");var s=r.create({classLabel:"jassa.sparql.Concept",initialize:function(e,t){this.element=e;this.variable=t},toJson:function(){var e={element:JSON.parse(JSON.stringify(this.element)),variable:this.variable};return e},getElement:function(){return this.element},getVarsMentioned:function(){var e=this.getElement().getVarsMentioned();return e},hasTriples:function(){var e=this.getElements();var t=n.getElementsDirectTriples(e);var r=t.length>0;return r},getElements:function(){var e;if(this.element instanceof a){e=this.element.elements}else{e=[this.element]}return e},getVar:function(){return this.variable},getVariable:function(){if(!this.warningShown){this.warningShown=true}return this.getVar()},toString:function(){return""+this.element+"; "+this.variable},isSubjectConcept:function(){var e=false;var t=this.variable;var r=this.element;if(r instanceof i){var n=r.triples;if(n.length===1){var a=n[0];var s=a.getSubject();var o=a.getPredicate();var l=a.getObject();e=t.equals(s)&&o.isVariable()&&l.isVariable()}}return e},createOptimizedConcept:function(){var e=this.getElement();var t=e.flatten();var r=new s(t,this.variable);return r},getOptimizedElement:function(){return null}});s.createFromElements=function(e,t){var r;if(e.length==1){r=e[0]}else{r=new a(e)}var n=new s(r,t);return n};module.exports=s},{"../ext/Class":2,"./ElementUtils":233,"./element/ElementGroup":262,"./element/ElementTriplesBlock":267}],229:[function(e,module,t){var r=e("../rdf/node/Node");var n=e("../rdf/NodeFactory");var a=e("../rdf/Triple");var i=e("../util/collection/HashMap");var s=e("./../vocab/rdf");var o=e("./VarUtils");var l=e("./ElementUtils");var u=e("./expr/ExprAggregator");var c=e("./agg/AggCount");var d=e("./expr/ExprVar");var f=e("./expr/E_Equals");var p=e("./element/ElementTriplesBlock");var h=e("./element/ElementOptional");var v=e("./element/ElementSubQuery");var g=e("./element/ElementGroup");var m=e("./element/ElementFilter");var _=e("./QueryUtils");var x=e("./NodeValueUtils");var b=e("./Query");var y=e("./Concept");var S={createTargetConcept:function(e,t){var r;var n=t.getElement().getVarsMentioned();var a=e.getElement().getVarsMentioned();var i=[t.getSourceVar()];var s=[e.getVar()];var o=l.createJoinVarMap(n,a,i,s);var u=l.createRenamedElement(e.getElement(),o);var c=t.getElement();var d=t.getTargetVar();if(e.isSubjectConcept()){if(t.isEmpty()){r=e}else{r=new y(c,d)}}else{var f=new g([u,c]);r=new y(f,d)}return r},createVarMap:function(e,t){var r=e.getElement();var n=t.getElement();var a=r.getVarsMentioned();var i=n.getVarsMentioned();var s=[e.getVar()];var o=[t.getVar()];var u=l.createJoinVarMap(a,i,s,o);return u},createRenamedConcept:function(e,t){var r=this.createVarMap(e,t);var n=e.getVar();var a=t.getElement();var i=l.createRenamedElement(a,r);var s=new y(i,n);return s},renameVars:function(e,t){var r=o.fnSubst(t);var n=r(e.getVar());var a=e.getElement().copySubstitute(r);var i=new y(a,n);return i},createCombinedConcept:function(e,t,r,a,s){var o=e.getVar();var l=t.getVar();if(!l.equals(o)){var u=new i;u.put(l,o);var c=n.createVar("cc_"+o.getName());u.put(o,c);t=this.renameVars(t,u)}var d;if(r){d=this.createRenamedConcept(e,t)}else{d=t}var f=d.getElements();var p=e.getElement();var m;if(f.length>0){if(d.isSubjectConcept()){m=e.getElement()}else{var _=[];if(a){p=new h(e.getElement())}_.push(p);if(s){f=[new v(d.asQuery())]}_.push.apply(_,f);m=new g(_);m=m.flatten()}}else{m=p}var x=new y(m,o);return x},createSubjectConcept:function(e,t,r){e=e||o.s;t=t||o._p_;r=r||o._o_;var n=new p([new a(e,t,r)]);var i=new y(n,e);return i},createTypeConcept:function(e,t){var i=e instanceof r?e:n.createUri(e);var o=!t?n.createVar("s"):t instanceof r?t:n.createVar(t);var l=new y(new p([new a(o,s.type,i)]),o);return l},createQueryList:function(e,t,r){var n=new b;n.setQuerySelectType();n.setDistinct(true);n.setLimit(t);n.setOffset(r);n.getProject().add(e.getVar());n.setQueryPattern(e.getElement());return n},freshVar:function(e,t){t=t||"c";var r=e.getVarsMentioned();var n=o.createVarGen(t,r);var a=n.next();return a},wrapAsSubQuery:function(e,t){var r=new v(e);var n=new b;n.setQuerySelectType();n.getProject().add(t);n.setQueryPattern(r);return n},createQueryCount:function(e,t,r,n){var a=this.createQueryList(e);if(n!=null){a.setDistinct(false);a.setLimit(n);a=this.wrapAsSubQuery(a,e.getVar());a.setDistinct(true)}if(r!=null){a.setLimit(r)}var i=new v(a);var s=new b;s.setQuerySelectType();s.getProject().add(t,new u(null,new c));s.setQueryPattern(i);return s},createQueryRawSize:function(e,t,r,n){var a=e.getVar();var i=e.getElement();var s=new d(a);var o=x.makeNode(t);var l=new m(new f(s,o));var p=new g([i,l]).flatten();if(n!=null){var h=new b;h.setQuerySelectType();h.getProject().add(a);h.setQueryPattern(p);h.setLimit(n);p=new v(h)}var _=new b;_.setQuerySelectType();_.getProject().add(a);_.getProject().add(r,new u(null,new c));_.setQueryPattern(p);_.getGroupBy().push(s);return _},isGroupedOnlyByVar:function(e,t){var r=false;var n=e.getGroupBy().length===1;if(n){var a=e.getGroupBy()[0];if(a instanceof d){var i=a.asVar();r=i.equals(t)}}return r},isDistinctConceptVar:function(e,t){var r=e.isDistinct();var n=e.getProjectVars();var a=!e.isQueryResultStar()&&n&&n.length===1;var i=r&&a&&n[0].equals(t);return i},isConceptQuery:function(e,t){var r=this.isGroupedOnlyByVar(e,t);var n=this.isDistinctConceptVar(e,t);var a=r||n;return a},createAttrQuery:function(e,t,r,n,a,i,s){var o=new y(new v(e),t);var l=S.createRenamedConcept(o,n);var u=this.isConceptQuery(e,t);var c;if(u){c=e.clone();var d;if(s){var f=new b;f.setQuerySelectType();f.setDistinct(true);f.getProject().add(o.getVar());f.setQueryPattern(e.getQueryPattern());var p=new v(f);var m=e.getProject().getRefVars();if(m.length===1&&t.equals(m[0])){d=p}else{d=new g([e.getQueryPattern(),p])}}else{d=e.getQueryPattern()}if(!l.isSubjectConcept()){var _=new g([d,l.getElement()]);_=_.flatten();c.setQueryPattern(_)}c.setLimit(a);c.setOffset(i)}else{var x=a!=null||i!=null;var w;if(x){var C;if(r){C=l}else{var E;if(l.isSubjectConcept()){E=e.getQueryPattern()}else{E=new g([e.getQueryPattern(),l.getElement()])}C=new y(E,t)}var j=S.createQueryList(C,a,i);w=new v(j)}else{w=l.getElement()}var k=e.clone();var L=k.getQueryPattern();var q;if(!x&&(!n||n.isSubjectConcept())){q=L}else{if(r){q=new g([w,new h(L)])}else{q=new g([L,w])}}k.setQueryPattern(q);c=k}return c}};module.exports=S},{"../rdf/NodeFactory":99,"../rdf/Triple":102,"../rdf/node/Node":112,"../util/collection/HashMap":389,"./../vocab/rdf":402,"./Concept":228,"./ElementUtils":233,"./NodeValueUtils":243,"./Query":247,"./QueryUtils":249,"./VarUtils":256,"./agg/AggCount":257,"./element/ElementFilter":261,"./element/ElementGroup":262,"./element/ElementOptional":264,"./element/ElementSubQuery":266,"./element/ElementTriplesBlock":267,"./expr/E_Equals":279,"./expr/ExprAggregator":295,"./expr/ExprVar":303}],230:[function(e,module,t){var r=e("../ext/Class");var n=e("../util/ObjectUtils");var a=e("lodash.uniq");var i=r.create({initialize:function(e,t){this.defaultGraphUris=e||[];this.namedGraphUris=t||[]},getDefaultGraphUris:function(){return this.defaultGraphUris},getNamedGraphUris:function(){return this.namedGraphUris},getUrisMentioned:function(){var e=this.defaultGraphUris.concat(this.namedGraphUris);var t=a(e);return t},hashCode:function(){if(this.hash==null){this.hash=n.hashCode(this)}return this.hash},equals:function(e){var t=n.isEqual(this,e);return t},toString:function(){return"DatasetDescription: "+JSON.stringify(this)}});module.exports=i},{"../ext/Class":2,"../util/ObjectUtils":376,"lodash.uniq":724}],231:[function(e,module,t){},{}],232:[function(e,module,t){var r={joinElements:function(e,t){var r=t.map(function(e){return e.toString()});var n=r.filter(function(e){return e.length!==0});return n.join(e)}};module.exports=r},{}],233:[function(e,module,t){var r=e("lodash.uniq");var n=e("./element/ElementTriplesBlock");var a=e("./element/ElementFilter");var i=e("./element/ElementGroup");var s=e("./element/ElementSubQuery");var o=e("./../rdf/TripleUtils");var l=e("./VarUtils");var u=e("./GenSym");var c=e("./GeneratorBlacklist");var d=e("../util/collection/HashBidiMap");var f=e("../rdf/NodeFactory");var p=e("./Query");var h=e("./expr/ExprAggregator");var v=e("./agg/AggCount");var g={isEmpty:function(e){var t=e==null||e instanceof i&&e.getArgs().length===0;return t},groupIfNeeded:function(e){var t=e.length!=1?new i(e):e[0];return t},createQueryCountRows:function(e,t,r){var n;if(r==null){n=e}else{var a=new p;a.setQuerySelectType();a.setQueryPattern(e);a.setQueryResultStar(true);a.setLimit(r);n=new s(e)}var i=new p;i.setQuerySelectType();i.setQueryPattern(n);i.getProject().add(t,new h(null,new v));return i},createFilterElements:function(e){var t=e.map(function(e){var t=new a(e);return t});return t},createElementsTriplesBlock:function(e){var t=[];if(e.length>0){var r=new n(e);t.push(r)}return t},createDistinctVarMap:function(e,t,r){var n=e.map(l.getVarName);if(r==null){var a=new u("v");r=new c(a,n)}var i=new d;t.forEach(function(e){var t=e.getName();var a;if(n.indexOf(t)!==-1){var s=r.next();a=f.createVar(s)}else{a=e}i.put(e,a)});return i},createJoinVarMap:function(e,t,r,n,a){if(r.length!==n.length){console.log("[ERROR] Cannot join on different number of columns");throw"Bailing out"}var i=g.createDistinctVarMap(e,t,a);for(var s=0;s<r.length;++s){var o=r[s];var l=n[s];i.put(l,o)}return i},createRenamedElement:function(e,t){var r=l.fnSubst(t);var n=e.copySubstitute(r);return n},getElementsDirectTriples:function(e){var t=[];for(var r=0;r<e.length;++r){var a=e[r];if(a instanceof n){t.push.apply(t,a.triples)}}return t},freshVar:function(e,t){var r=this.freshVarGen(e,t);var n=r.next();return n},freshVarGen:function(e,t){t=t||"v";var r=e.getVarsMentioned();var n=l.freshVarGen(t,r);return n}};module.exports=g},{"../rdf/NodeFactory":99,"../util/collection/HashBidiMap":388,"./../rdf/TripleUtils":103,"./GenSym":238,"./GeneratorBlacklist":240,"./Query":247,"./VarUtils":256,"./agg/AggCount":257,"./element/ElementFilter":261,"./element/ElementGroup":262,"./element/ElementSubQuery":266,"./element/ElementTriplesBlock":267,"./expr/ExprAggregator":295,"lodash.uniq":724}],234:[function(e,module,t){var r=e("../ext/Class");var n=r.create({eval:function(){throw new Error("Not overridden")}});module.exports=n},{"../ext/Class":2}],235:[function(e,module,t){var r=e("../ext/Class");var n=e("./expr/NodeValue");var a=e("./NodeValueUtils");var i=e("./ExprEvaluator");var s=r.create(i,{eval:function(e,t){var r;var n;if(e.isVar()){n=e.getExprVar();r=this.evalExprVar(n,t)}else if(e.isFunction()){n=e.getFunction();r=this.evalExprFunction(n,t)}else if(e.isConstant()){n=e.getConstant();r=this.evalConstant(n,t)}else{throw new Error("Unsupported expr type")}return r},evalExprVar:function(e,t){var r=e.asVar();var i=t.get(r);var s;if(i==null){return n.nvNothing}else{s=a.makeNode(i)}return s},evalExprFunction:function(){},evalNodeValue:function(){}});module.exports=s},{"../ext/Class":2,"./ExprEvaluator":234,"./NodeValueUtils":243,"./expr/NodeValue":304}],236:[function(e,module,t){var r={newBinaryExpr:function(e,t){if(t.length!==2){throw new Error("Invalid argument")}var r=t[0];var n=t[1];var a=new e(r,n);return a},newUnaryExpr:function(e,t){if(t.length!==1){throw new Error("Invalid argument")}var r=t[0];var n=new e(r);return n},joinElements:function(e,t){var r=t.map(function(e){return e.toString()});var n=r.filter(function(e){return e.length!==0});return n.join(e)}};module.exports=r},{}],237:[function(e,module,t){var r=e("./expr/ExprVar");var n=e("./expr/NodeValue");var a=e("./NodeValueUtils");var i=e("./expr/E_Equals");var s=e("./expr/E_LogicalAnd");var o=e("./expr/E_LogicalOr");var l={copySubstitute:function(e,t){var r=function(e){var r=null;if(e.isVar()){var n=t.get(e);if(n!=null){r=n}}if(r==null){r=e}return r};var n=e.copySubstitute(r);return n},bindingToExprs:function(e,t){if(t==null){t=e.getVars()}var n=[];t.forEach(function(t){var s=new r(t);var o=e.get(t);var l=a.makeNode(o);var u=new i(s,l);n.push(u)});return n},opify:function(e,t){var r=e;var n=[];while(r.length>1){for(var a=0;a<r.length;a+=2){var i=r[a];if(a+1===r.length){n.push(i);break}var s=r[a+1];var o=t(i,s);n.push(o)}r=n;n=[]}return r[0]},andify:function(e){var t=this.opify(e,function(e,t){return new s(e,t)});return t},orify:function(e){var t=this.opify(e,function(e,t){return new o(e,t)});return t}};module.exports=l},{"./NodeValueUtils":243,"./expr/E_Equals":279,"./expr/E_LogicalAnd":287,"./expr/E_LogicalOr":289,"./expr/ExprVar":303,"./expr/NodeValue":304}],238:[function(e,module,t){var r=e("../ext/Class");var n=e("./Generator");var a=r.create(n,{initialize:function(e,t){this.prefix=e?e:"v";this.nextValue=t?t:0},next:function(){++this.nextValue;var e=this.prefix+"_"+this.nextValue;return e}});a.create=function(e){var t=new a(e,0);return t};module.exports=a},{"../ext/Class":2,"./Generator":239}],239:[function(e,module,t){var r=e("../ext/Class");var n=r.create({next:function(){throw new Error("Override me")}});module.exports=n},{"../ext/Class":2}],240:[function(e,module,t){var r=e("../ext/Class");var n=e("./Generator");var a=r.create(n,{initialize:function(e,t){this.generator=e;this.blacklist=t},next:function(){var e;do{e=this.generator.next()}while(this.blacklist.indexOf(e)!==-1);return e}});module.exports=a},{"../ext/Class":2,"./Generator":239}],241:[function(e,module,t){var r=e("../rdf/Triple");var n=e("../rdf/NodeFactory");var a=e("./NodeValueUtils");var i=e("./expr/ExprVar");var s=e("./expr/E_OneOf");var o=e("./expr/E_LangMatches");var l=e("./expr/E_LogicalOr");var u=e("./expr/E_Lang");var c=e("./expr/E_Bound");var d=e("./expr/E_Regex");var f=e("./expr/E_Str");var p=e("./ExprUtils");var h=e("./Concept");var v=e("./Relation");var g=e("./ConceptUtils");var m=e("./element/ElementTriplesBlock");var _=e("./element/ElementGroup");var x=e("./element/ElementOptional");var b=e("./element/ElementFilter");var y=e("./VarUtils");var S=e("./BestLabelConfig");var w={createRelationLiteralPreference:function(e){var t=new S(e);var r=w.createRelationPrefLabels(t);return r},createRelationPrefLabels:function(e){var t=e.getLangs();var n=e.getPredicates();var l=e.getSubjectVar();var c=e.getPredicateVar();var d=e.getObjectVar();var f=new i(c);var h=new i(d);var g=t.map(function(e){var t=new o(new u(h),a.makeString(e));return t});var x=p.orify(g);var y=new s(f,n);var S=[];S.push(new m([new r(l,c,d)]));S.push(new b(y));S.push(new b(x));var w=new _(S);var C=new v(w,l,d);return C}};module.exports=w},{"../rdf/NodeFactory":99,"../rdf/Triple":102,"./BestLabelConfig":224,"./Concept":228,"./ConceptUtils":229,"./ExprUtils":237,"./NodeValueUtils":243,"./Relation":250,"./VarUtils":256,"./element/ElementFilter":261,"./element/ElementGroup":262,"./element/ElementOptional":264,"./element/ElementTriplesBlock":267,"./expr/E_Bound":277,"./expr/E_Lang":283,"./expr/E_LangMatches":284,"./expr/E_LogicalOr":289,"./expr/E_OneOf":291,"./expr/E_Regex":292,"./expr/E_Str":293,"./expr/ExprVar":303}],242:[function(e,module,t){var r=e("../ext/Class");var n=e("../vocab/rdfs");var a=r.create({initialize:function(e,t,r){this.langs=e||["en",""];this.predicates=t||[n.label];this.predicateFavored=!!r},getLangs:function(){return this.langs},getPredicates:function(){return this.predicates},isPredicateFavored:function(){return this.predicateFavored},toString:function(){var e=["LiteralPreference",this.langs,this.predicates,this.predicateFavored].join(", ");return e}});module.exports=a},{"../ext/Class":2,"../vocab/rdfs":403}],243:[function(e,module,t){var r=e("../rdf/NodeFactory");var n=e("./expr/NodeValue");var a=e("./expr/NodeValueNode");var i=e("../rdf/AnonIdStr");var s=e("../vocab/xsd");var o={nvNothing:new n(r.createAnon(new i("node value nothing"))),nvFalse:new n(r.createTypedLiteralFromValue(false,s.xboolean)),nvTrue:new n(r.createTypedLiteralFromValue(false,s.xboolean)),createLiteral:function(e,t){var n=r.createTypedLiteralFromValue(e,t);var i=new a(n);return i},makeString:function(e){return o.createLiteral(e,s.xstring.getUri())},makeInteger:function(e){return o.createLiteral(e,s.xint.getUri())},makeDecimal:function(e){return o.createLiteral(e,s.decimal.getUri())},makeFloat:function(e){return o.createLiteral(e,s.xfloat.getUri())},makeNode:function(e){var t=new a(e);return t}};module.exports=o},{"../rdf/AnonIdStr":95,"../rdf/NodeFactory":99,"../vocab/xsd":405,"./expr/NodeValue":304,"./expr/NodeValueNode":305}],244:[function(e,module,t){var r=e("lodash.union");var n=function(e){return typeof e==="function"};var a={getVarsMentioned:function(e){var t=e.reduce(function(e,t){var a=t.getVarsMentioned;if(!a||!n(a)){console.log("[ERROR] .getVarsMentioned not found on object ",t)}var i=t.getVarsMentioned();var s=r(e,i);return s},[]);return t}};module.exports=a},{"lodash.union":701}],245:[function(e,module,t){var r=e("../ext/Class");var n=e("../rdf/NodeUtils");var a=e("../rdf/NodeFactory");var i=e("../rdf/Triple");var s=r.create({classLabel:"jassa.sparql.Quad",initialize:function(e,t,r,n){this.graph=e||s.defaultGraphNodeGenerated;this.subject=t;this.predicate=r;this.object=n},asTriple:function(){var e=new i(this.subject,this.predicate,this.object);return e},toString:function(){return this.graph+" "+this.subject+" "+this.predicate+" "+this.object},copySubstitute:function(e){var t=new s(n.getSubstitute(this.graph,e),n.getSubstitute(this.subject,e),n.getSubstitute(this.predicate,e),n.getSubstitute(this.object,e));return t},getGraph:function(){return this.graph},getSubject:function(){return this.subject},getPredicate:function(){return this.predicate},getObject:function(){return this.object},getVarsMentioned:function(){var e=[];n.pushVar(e,this.graph);n.pushVar(e,this.subject);n.pushVar(e,this.predicate);n.pushVar(e,this.object);return e}});s.defaultGraphNodeGenerated=a.createUri("urn:x-arq:DefaultGraphNode");s.defaultGraphIri=a.createUri("urn:x-arq:DefaultGraph");s.unionGraph=a.createUri("urn:x-arq:UnionGraph");s.createFromTriple=function(e,t){e=e||s.defaultGraphNodeGenerated;var r=new s(e,t.subject,t.predicate,t.object);return r};module.exports=s},{"../ext/Class":2,"../rdf/NodeFactory":99,"../rdf/NodeUtils":100,"../rdf/Triple":102}],246:[function(e,module,t){var r=e("../util/collection/HashMap");var n=e("../rdf/Triple");var a=e("./element/ElementGroup");var i=e("./element/ElementTriplesBlock");var s=e("./element/ElementNamedGraph");var o=e("./ElementUtils");var l=e("./Quad");var u={triplesToQuads:function(e,t){var r=e.map(function(e){var r=new l.createFromTriple(t,e);return r});return r},quadsToElement:function(e){var t=this.groupByGraph(e);var r=this.groupToElement(t);return r},groupByGraph:function(e){var t=new r;e.forEach(function(e){var r=e.getGraph();var n=t.getOrCreate(r,[]);n.push(e)});return t},groupToElement:function(e){var t=e.entries();var r=t.map(function(e){var t=e.key;var r=e.val;var n=r.map(function(e){return e.asTriple()});var a=new i(n);var o=t==null||t.equals(l.defaultGraphNodeGenerated)?a:new s(t,a);return o});var n=new a(r);return n}};module.exports=u},{"../rdf/Triple":102,"../util/collection/HashMap":389,"./ElementUtils":233,"./Quad":245,"./element/ElementGroup":262,"./element/ElementNamedGraph":263,"./element/ElementTriplesBlock":267}],247:[function(e,module,t){var r=e("../ext/Class");var n=e("lodash.union");var a=e("../util/ObjectUtils");var i=e("./VarExprList");var s=e("../util/ArrayUtils");var o=e("./ElementHelpers");var l=e("./ElementUtils");var u=e("./QueryType");var c=e("./expr/ExprAggregator");var d=r.create({classLabel:"jassa.sparql.Query",initialize:function(){this.type=0;this.distinct=false;this.reduced=false;this.queryResultStar=false;this.projectVars=new i;this.groupBy=[];this.orderBy=[];this.queryPattern=null;this.constructTemplate=null;this.limit=null;this.offset=null},getAggregators:function(){var e=this.getProject().entries();var t=[];e.forEach(function(e){var r=e.expr;if(r instanceof c){var n=r.getAggregator();t.push(n)}});return t},setQuerySelectType:function(){this.type=0},isQueryResultStar:function(){return this.queryResultStar},setQueryResultStar:function(e){this.queryResultStar=e},getQueryPattern:function(){return this.queryPattern},setQueryPattern:function(e){this.queryPattern=e},getProjectVars:function(){var e=this.projectVars?this.projectVars.getVars():null;return e},setProjectVars:function(e){this.projectVars=e},getProject:function(){return this.projectVars},getGroupBy:function(){return this.groupBy},getOrderBy:function(){return this.orderBy},getLimit:function(){return this.limit},getOffset:function(){return this.offset},toStringOrderBy:function(){var e=this.orderBy&&this.orderBy.length>0?"Order By "+this.orderBy.join(" ")+" ":"";return e},toStringGroupBy:function(){var e=this.groupBy&&this.groupBy.length>0?"Group By "+this.groupBy.join(" ")+" ":"";return e},clone:function(){return this.copySubstitute(a.identity)},flatten:function(){var e=this.clone();e.queryPattern=this.queryPattern?this.queryPattern.flatten():null;return e},getVarsMentioned:function(){if(!d.warnGetVarsMentioned){console.log("[WARN] sparql.Query.getVarsMentioned(): Not implemented properly yet. Things may break!");d.warnGetVarsMentioned=true}var e=this.queryPattern.getVarsMentioned();return e},copySubstitute:function(e){var t=new d;t.type=this.type;t.distinct=this.distinct;t.reduced=this.reduced;t.queryResultStar=this.queryResultStar;t.limit=this.limit;t.offset=this.offset;t.projectVars=this.projectVars.copySubstitute(e);if(this.constructTemplate){t.constructTemplate=this.constructTemplate.copySubstitute(e)}t.orderBy=this.orderBy==null?null:this.orderBy.map(function(t){return t.copySubstitute(e)});t.groupBy=this.groupBy==null?null:this.groupBy.map(function(t){return t.copySubstitute(e)});t.queryPattern=this.queryPattern.copySubstitute(e);return t},setOptions:function(e){if(typeof e==="undefined"){return}if(typeof e.limit!=="undefined"){this.setLimit(e.limit)}if(typeof e.offset!=="undefined"){this.setOffset(e.offset)}if(typeof e.distinct!=="undefined"){this.setDistinct(e.distinct)}},setOffset:function(e){this.offset=e?e:null},setLimit:function(e){if(e===0){this.limit=0}else{this.limit=e?e:null}},isDistinct:function(){return this.distinct},setDistinct:function(e){this.distinct=e===true},isReduced:function(){return this.reduced},setReduced:function(e){this.reduced=e===true},toString:function(){switch(this.type){case u.Select:return this.toStringSelect();case u.Construct:return this.toStringConstruct()}},toStringProjection:function(){var e=this.queryResultStar?"*":this.projectVars.toString();return e},toStringLimitOffset:function(){var e="";if(this.limit!=null){e+=" Limit "+this.limit}if(this.offset!=null){e+=" Offset "+this.offset}return e},toStringSelect:function(){var e=this.distinct?"Distinct ":"";var t="Select "+e+this.toStringProjection()+" {"+this.queryPattern+"} "+this.toStringGroupBy()+this.toStringOrderBy()+this.toStringLimitOffset();return t},toStringConstruct:function(){var e="Construct "+this.constructTemplate+" {"+this.queryPattern+"}"+this.toStringOrderBy()+this.toStringLimitOffset();return e}});module.exports=d},{"../ext/Class":2,"../util/ArrayUtils":368,"../util/ObjectUtils":376,"./ElementHelpers":232,"./ElementUtils":233,"./QueryType":248,"./VarExprList":254,"./expr/ExprAggregator":295,"lodash.union":701}],248:[function(e,module,t){var r={};r.Unknown=-1;r.Select=0;r.Construct=1;r.Ask=2;r.Describe=3;module.exports=r},{}],249:[function(e,module,t){var r=e("../rdf/Triple");var n=e("./expr/ExprVar");var a=e("./expr/E_OneOf");var i=e("./expr/ExprAggregator");var s=e("./agg/AggCount");var o=e("./element/ElementFilter");var l=e("./element/ElementGroup");var u=e("./element/ElementUnion");var c=e("./element/ElementSubQuery");var d=e("./element/ElementTriplesBlock");var f=e("./Query");var p={createQueryCount:function(e,t,r,a,o,u,d){var p=e.length===1?e[0]:new l(e);var h=r?new n(r):null;var v;var g=t||u||o&&o.length>0;if(g){var m=new f;m.setQueryPattern(p);if(o){for(var _=0;_<o.length;++_){var x=o[_];m.getProject().add(x)}}if(r){m.getProject().add(r)}if(m.getProjectVars().length===0){m.setQueryResultStar(true)}m.setDistinct(u);m.setLimit(t);v=new c(m)}else{v=new l(e)}var b=new f;b.setQueryPattern(v);if(o){o.forEach(function(e){b.getProject().add(e);b.getGroupBy().push(new n(e))})}b.getProject().add(a,new i(null,new s));return b},createQueryUnionSubQueries:function(e,t){var r;if(e.length===0){r=null}else{if(e.length===1){r=e[0]}else{t=t||e[0].getProjectVars();var n=e.map(function(e){var t=new c(e);return t});var a=new u(n);r=new f;r.setQuerySelectType();t.forEach(function(e){r.getProject().add(e)});r.setQueryPattern(a)}}return r},createQueryDescribeViaSelect:function(e,t,i,s){var u=new f;u.setQuerySelectType();u.setDistinct(true);var c=new l([new d([new r(t,i,s)]),new o(new a(new n(t),e))]);u.setQueryPattern(c);u.getProject().add(t);u.getProject().add(i);u.getProject().add(s);return u}};module.exports=p},{"../rdf/Triple":102,"./Query":247,"./agg/AggCount":257,"./element/ElementFilter":261,"./element/ElementGroup":262,"./element/ElementSubQuery":266,"./element/ElementTriplesBlock":267,"./element/ElementUnion":268,"./expr/E_OneOf":291,"./expr/ExprAggregator":295,"./expr/ExprVar":303}],250:[function(e,module,t){var r=e("../ext/Class");var n=e("./ElementUtils");var a=r.create({initialize:function(e,t,r){this.element=e;this.sourceVar=t;this.targetVar=r},getElement:function(){return this.element},getSourceVar:function(){return this.sourceVar},getTargetVar:function(){return this.targetVar},isEmpty:function(){var e=n.isEmpty(this.element);return e},toString:function(){var e="("+[this.element,this.sourceVar,this.targetVar].join("; ")+")";return e}});module.exports=a},{"../ext/Class":2,"./ElementUtils":233}],251:[function(e,module,t){var r=e("./Relation");var n=e("./Query");var a=e("./expr/ExprVar");var i=e("./expr/ExprAggregator");var s=e("./element/ElementSubQuery");var o=e("./agg/AggCountVarDistinct");var l=e("./Concept");var u=e("./ConceptUtils");var c={createQueryDistinctValueCount:function(e,t){var r=new n;var s=r.getProject();s.add(e.getSourceVar());s.add(t,new i(null,new o(new a(e.getTargetVar()))));r.setQueryPattern(e.getElement());r.getGroupBy().push(new a(e.getSourceVar()));return r},createQueryRawSize:function(e,t,r,n){var a=new l(e.getElement(),e.getSourceVar());var i=u.createQueryRawSize(a,t,r,n);return i},createQueryValueCount:function(e,t,r,s){var l=new n;var u=l.getProject();u.add(e.getSourceVar());u.add(r,new i(null,new o(new a(e.getTargetVar()))));l.setQueryPattern(e.getElement());l.getGroupBy().push(new a(e.getSourceVar()))},createRelationDistinctValueCount:function(e,t){var n=this.createQueryDistinctValueCount(e,t);var a=new s(n);var i=new r(a,e.getSourceVar(),t);return i}};module.exports=c},{"./Concept":228,"./ConceptUtils":229,"./Query":247,"./Relation":250,"./agg/AggCountVarDistinct":258,"./element/ElementSubQuery":266,"./expr/ExprAggregator":295,"./expr/ExprVar":303}],252:[function(e,module,t){var r=e("../ext/Class");var n=r.create({classLabel:"jassa.sparql.SortCondition",initialize:function(e,t){this.expr=e;this.direction=t},getExpr:function(){return this.expr},getDirection:function(){
return this.direction},toString:function(){var e;if(this.direction==="asc"){e="Asc("+this.expr+")"}else if(this.direction==="desc"){e="Desc("+this.expr+")"}else{e=""+this.expr}return e},copySubstitute:function(e){var t=this.expr.copySubstitute(e);var r=new n(t,this.direction);return r}});module.exports=n},{"../ext/Class":2}],253:[function(e,module,t){var r=e("../ext/Class");var n=e("../rdf/NodeFactory");var a=e("./VarUtils");var i=r.create({classLabel:"jassa.sparql.SparqlString",initialize:function(e,t){this.value=e;this.varsMentioned=t?t:[]},toString:function(){return this.value},getString:function(){return this.value},copySubstitute:function(e){var t=this.value;var r=[];var n="@@@@";var a=new RegExp(n,"g");this.varsMentioned.forEach(function(a){var i="\\?"+a.getName()+"([^\\w])?";var s=new RegExp(i,"g");var o=e(a);if(o){var l;if(o.isVariable()){l=n+o.getName();r.push(o)}else{l=o.toString()}t=t.replace(s,l+"$1")}else{r.push(a)}});t=t.replace(a,"?");return new i(t,r)},getVarsMentioned:function(){return this.varsMentioned}});i.create=function(e,t){var r;if(t!=null){r=t.map(function(e){return n.createVar(e)})}else{r=a.extractSparqlVars(e)}var s=new i(e,r);return s};module.exports=i},{"../ext/Class":2,"../rdf/NodeFactory":99,"./VarUtils":256}],254:[function(e,module,t){var r=e("../ext/Class");var n=e("../util/collection/HashMap");var a=e("../util/collection/HashSet");var i=r.create({initialize:function(){this.vars=[];this.varToExpr=new n},contains:function(e){var t=this.vars.some(function(t){var r=t.equals(e);return r});return t},getVars:function(){return this.vars},getExpr:function(e){var t=this.varToExpr.get(e);return t},getExprMap:function(){return this.varToExpr},add:function(e,t){this.vars.push(e);if(t){this.varToExpr.put(e,t)}},addAll:function(e){this.vars.push.apply(this.vars,e)},entries:function(){var e=this;var t=this.vars.map(function(t){var r=e.varToExpr.get(t);return{v:t,expr:r}});return t},copySubstitute:function(e){var t=new i;var r=this.entries();for(var n=0;n<r.length;++n){var a=r[n];var s=e(a.v);var o=a.expr?a.expr.copySubstitute(e):null;t.add(s,o)}return t},toString:function(){var e=[];var t=this.entries();for(var r=0;r<t.length;++r){var n=t[r];var a=n.v;var i=n.expr;if(i){e.push("("+i+" As "+a+")")}else{e.push(a.toString())}}var s=e.join(" ");return s},getRefVars:function(){var e=new a;var t=this.entries();t.forEach(function(t){if(t.expr==null){e.add(t.v)}else{var r=t.expr.getVarsMentioned();r.forEach(function(t){e.add(t)})}});var r=e.map(function(e){return e});return r}});module.exports=i},{"../ext/Class":2,"../util/collection/HashMap":389,"../util/collection/HashSet":390}],255:[function(e,module,t){var r=e("../ext/Class");var n=e("../rdf/NodeFactory");var a=r.create({initialize:function(e){this.genSym=e},next:function(){var e=this.genSym.next();var t=n.createVar(e);return t}});module.exports=a},{"../ext/Class":2,"../rdf/NodeFactory":99}],256:[function(e,module,t){var r=e("./GenSym");var n=e("./GeneratorBlacklist");var a=e("./VarGen");var i=e("../rdf/NodeFactory");var s=e("../util/StringUtils");var o={g:i.createVar("g"),s:i.createVar("s"),p:i.createVar("p"),o:i.createVar("o"),_s_:i.createVar("_s_"),_p_:i.createVar("_p_"),_o_:i.createVar("_o_"),v:i.createVar("v"),w:i.createVar("w"),x:i.createVar("x"),y:i.createVar("y"),z:i.createVar("z"),a:i.createVar("a"),b:i.createVar("b"),c:i.createVar("c"),createVars:function(e){var t=e.map(function(e){return i.createVar(e)});return t},getVarName:function(e){return e.getName()},getVarNames:function(e){var t=e.map(function(e){return e.getName()});return t},createVarGen:function(e,t){if(!e){e="v"}var i=this.getVarNames(t);var s=r.create(e);var o=new n(s,i);var l=new a(o);return l},varPattern:/\?(\w+)/g,extractSparqlVars:function(e){var t=s.extractAllRegexMatches(this.varPattern,e,1);var r=[];for(var n=0;n<t.length;++n){var a=t[n];var o=i.createVar(a);r.push(o)}return r},freshVarGen:function(e,t){var i=o.getVarNames(t);var s=r.create(e);var l=new n(s,i);var u=new a(l);return u},freshVar:function(e,t){var r=this.freshVarGen(e,t);var n=r.next();return n},fnSubst:function(e){var t=function(t){var r=e.get(t);return r};return t}};module.exports=o},{"../rdf/NodeFactory":99,"../util/StringUtils":383,"./GenSym":238,"./GeneratorBlacklist":240,"./VarGen":255}],257:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(){},copySubstitute:function(e){return new n},getVarsMentioned:function(){return[]},toString:function(){return"Count(*)"}});module.exports=n},{"../../ext/Class":2}],258:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){var t=this.expr.copySubstitute(e);var r=new n(t);return r},getVarsMentioned:function(){return this.expr.getVarsMentioned()},toString:function(){var e="Count(Distinct "+this.expr+")";return e}});module.exports=n},{"../../ext/Class":2}],259:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"jassa.sparql.Element"});module.exports=n},{"../../ext/Class":2}],260:[function(e,module,t){var r=e("../../ext/Class");var n=e("lodash.union");var a=e("../../rdf/NodeUtils");var i=e("./Element");var s=r.create(i,{classLabel:"jassa.sparql.ElementBind",initialize:function(e,t){this.expr=t;this.variable=e},getArgs:function(){return[]},getExpr:function(){return this.expr},getVar:function(){return this.variable},getVarsMentioned:function(){return n(this.expr.getVarsMentioned(),this.variable)},copy:function(){return new s(this.variable,this.expr)},copySubstitute:function(e){return new s(a.getSubstitute(this.variable,e),this.expr.copySubstitute(e))},flatten:function(){return this},toString:function(){return"bind("+this.expr+" as "+this.variable+")"}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeUtils":100,"./Element":259,"lodash.union":701}],261:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprUtils");var a=e("./Element");var i=r.create(a,{classLabel:"jassa.sparql.ElementFilter",initialize:function(e){if(Array.isArray(e)){throw new Error("[WARN] Array argument for filter is deprecated")}this.expr=e},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}var t=new i(this.expr);return t},copySubstitute:function(e){var t=this.expr.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},flatten:function(){return this},toString:function(){return"Filter("+this.expr+")"}});module.exports=i},{"../../ext/Class":2,"../ExprUtils":237,"./Element":259}],262:[function(e,module,t){var r=e("lodash.uniq");var n=e("../../ext/Class");var a=e("./Element");var i=e("./ElementFilter");var s=e("./ElementTriplesBlock");var o=e("../../rdf/TripleUtils");var l=e("./../ElementHelpers");var u=e("../PatternUtils");var c=n.create(a,{classLabel:"jassa.sparql.ElementGroup",initialize:function(e){this.elements=e?e:[];if(!Array.isArray(this.elements)){throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)}},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new c(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new c(t)},getVarsMentioned:function(){var e=u.getVarsMentioned(this.elements);return e},toString:function(){return l.joinElements(" . ",this.elements)},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t});var t=[];e.forEach(function(e){if(e instanceof c){t.push.apply(t,e.elements)}else{t.push(e)}});var n=[];var a=[];var l=[];t.forEach(function(e){if(e instanceof s){n.push.apply(n,e.getTriples())}else if(e instanceof i){a.push(e)}else{l.push(e)}});var u=[];if(n.length>0){var d=o.uniqTriples(n);u.push(new s(d))}u.push.apply(u,l);var f=r(a,false,function(e){return e.toString()});u.push.apply(u,f);var p=u.length===1?u[0]:new c(u);return p}});module.exports=c},{"../../ext/Class":2,"../../rdf/TripleUtils":103,"../PatternUtils":244,"./../ElementHelpers":232,"./Element":259,"./ElementFilter":261,"./ElementTriplesBlock":267,"lodash.uniq":724}],263:[function(e,module,t){var r=e("lodash.union");var n=e("../../rdf/NodeUtils");var a=e("../../ext/Class");var i=e("./Element");var s=a.create(i,{classLabel:"jassa.sparql.ElementNamedGraph",initialize:function(e,t){this.node=e;this.element=t},getArgs:function(){return[this.element]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=new s(this.node,e[0]);return t},getVarsMentioned:function(){var e=this.element.getVarsMentioned();if(this.node.isVar()){e=r(e,this.node)}return e},copySubstitute:function(e){return new s(n.getSubstitute(this.node,e),this.element.copySubstitute(e))},flatten:function(){var e=new s(this.element.flatten());return e},toString:function(){var e=this.node!=null?"Graph "+this.node+" { "+this.element+" }":"{ "+this.element+" }";return e}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeUtils":100,"./Element":259,"lodash.union":701}],264:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Element");var a=r.create(n,{classLabel:"jassa.sparql.ElementOptional",initialize:function(e){this.optionalElement=e;if(!(e instanceof n)){throw new Error(this.classLabel+" only accepts an instance of Element as the argument")}},getArgs:function(){return[this.optionalElement]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=new a(e[0]);return t},getVarsMentioned:function(){return this.optionalElement.getVarsMentioned()},copySubstitute:function(e){return new a(this.optionalElement.copySubstitute(e))},flatten:function(){var e=new a(this.optionalElement.flatten());return e},toString:function(){return"Optional {"+this.optionalElement+"}"}});module.exports=a},{"../../ext/Class":2,"./Element":259}],265:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Element");var a=e("../SparqlString");var i=r.create(n,{classLabel:"jassa.sparql.ElementString",initialize:function(e){this.sparqlString=e},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}return this},toString:function(){return this.sparqlString.getString()},copySubstitute:function(e){var t=this.sparqlString.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},flatten:function(){return this}});i.create=function(e,t){var r=a.create(e,t);var n=new i(r);return n};module.exports=i},{"../../ext/Class":2,"../SparqlString":253,"./Element":259}],266:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Element");var a=r.create(n,{classLabel:"jassa.sparql.ElementSubQuery",initialize:function(e){this.query=e},getQuery:function(){return this.query},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}var t=new a(this.query);return t},toString:function(){return"{ "+this.query+" }"},copySubstitute:function(e){return new a(this.query.copySubstitute(e))},flatten:function(){return new a(this.query.flatten())},getVarsMentioned:function(){return this.query.getVarsMentioned()}});module.exports=a},{"../../ext/Class":2,"./Element":259}],267:[function(e,module,t){var r=e("lodash.union");var n=e("../../ext/Class");var a=e("../../rdf/TripleUtils");var i=e("./Element");var s=n.create(i,{classLabel:"jassa.sparql.ElementTriplesBlock",initialize:function(e){this.triples=e?e:[]},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}var t=new s(this.triples);return t},getTriples:function(){return this.triples},addTriples:function(e){this.triples=this.triples.concat(e)},uniq:function(){this.triples=a.uniqTriples(this.triples)},copySubstitute:function(e){var t=this.triples.map(function(t){return t.copySubstitute(e)});return new s(t)},getVarsMentioned:function(){var e=[];this.triples.forEach(function(t){e=r(e,t.getVarsMentioned())});return e},flatten:function(){var e=a.uniqTriples(this.triples);var t=new s(e);return t},toString:function(){return this.triples.join(" . ")}});module.exports=s},{"../../ext/Class":2,"../../rdf/TripleUtils":103,"./Element":259,"lodash.union":701}],268:[function(e,module,t){var r=e("lodash.uniq");var n=e("../../ext/Class");var a=e("./Element");var i=e("./ElementFilter");var s=e("./ElementTriplesBlock");var o=e("../../rdf/TripleUtils");var l=e("./../ElementHelpers");var u=e("../PatternUtils");var c=n.create(a,{classLabel:"jassa.sparql.ElementUnion",initialize:function(e){this.elements=e?e:[];if(!Array.isArray(this.elements)){throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)}},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new c(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new c(t)},getVarsMentioned:function(){var e=u.getVarsMentioned(this.elements);return e},toString:function(){var e="{"+this.elements.join(" } Union {")+"}";return e},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t});var t=new c(e);return t}});module.exports=c},{"../../ext/Class":2,"../../rdf/TripleUtils":103,"../PatternUtils":244,"./../ElementHelpers":232,"./Element":259,"./ElementFilter":261,"./ElementTriplesBlock":267,"lodash.uniq":724}],269:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({createElement:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],270:[function(e,module,t){var r=e("../../ext/Class");var n=e("../element/ElementGroup");var a=e("./ElementFactory");var i=r.create(a,{initialize:function(e,t,r){this.simplify=e;this.elementFactories=t;this.forceGroup=r},isSimplify:function(){return this.simplify},getElementFactories:function(){return this.elementFactories},isForceGroup:function(){return this.forceGroup},createElement:function(){var e=this.elementFactories.map(function(e){var t=e.createElement();return t});var t=e.filter(function(e){return e!=null});var r=new n(t);if(this.simplify){r=r.flatten()}if(!this.forceGroup){var a=r.getArgs();if(a.length===1){r=a[0]}}return r}});module.exports=i},{"../../ext/Class":2,"../element/ElementGroup":262,"./ElementFactory":269}],271:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ElementFactory");var a=r.create(n,{initialize:function(e){this.element=e},createElement:function(){return this.element}});module.exports=a},{"../../ext/Class":2,"./ElementFactory":269}],272:[function(e,module,t){var r=e("../../ext/Class");var n=e("../join/JoinType");var a=e("../ElementUtils");var i=e("../element/ElementOptional");var s=e("../element/ElementGroup");var o=e("./ElementFactory");var l=r.create(o,{initialize:function(e,t,r,a,i){this.elementFactoryA=e;this.elementFactoryB=t;this.joinVarsA=r;this.joinVarsB=a;this.joinType=i?i:n.INNER_JOIN},createElement:function(){var e=this.elementFactoryA.createElement();var t=this.elementFactoryB.createElement();var r=e.getVarsMentioned();var o=t.getVarsMentioned();var l=a.createJoinVarMap(o,r,this.joinVarsB,this.joinVarsA);e=a.createRenamedElement(e,l);if(this.joinType===n.LEFT_JOIN){t=new i(t)}var u=new s([e,t]);return u}});module.exports=l},{"../../ext/Class":2,"../ElementUtils":233,"../element/ElementGroup":262,"../element/ElementOptional":264,"../join/JoinType":313,"./ElementFactory":269}],273:[function(e,module,t){var r=e("../../ext/Class");var n=e("../join/JoinType");var a=e("../join/JoinBuilder");var i=e("../element/ElementGroup");var s=e("./ElementFactory");var o=r.create(s,{initialize:function(e,t,r){this.conceptFactoryA=e;this.conceptFactoryB=t;this.joinType=r||n.INNER_JOIN},createElement:function(){var e=this.conceptFactoryA.createConcept();var t=this.conceptFactoryB.createConcept();var r=e.getElement();var n=t.getElement();if(t.isSubjectConcept()){return r}var s=[e.getVar()];var o=[t.getVar()];var l=a.create(r);var u=l.joinAny(this.joinType,s,n,o);var c=u.getJoinBuilder();var d=c.getElements();var f=new i(d);return f}});module.exports=o},{"../../ext/Class":2,"../element/ElementGroup":262,"../join/JoinBuilder":307,"../join/JoinType":313,"./ElementFactory":269}],274:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({getElement:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],275:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ElementSupplier");var a=r.create(n,{initialize:function(e){this.element=e},getElement:function(){return this.element},setElement:function(e){this.element=e}});module.exports=a},{"../../ext/Class":2,"./ElementSupplier":274}],276:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ElementSupplier");var a=r.create(n,{initialize:function(e){this.elementFn=e},getElement:function(){return this.elementFn}});module.exports=a},{"../../ext/Class":2,"./ElementSupplier":274}],277:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new a(this.expr.copySubstitute(e))},getVarsMentioned:function(){var e=this.expr.getVarsMentioned();return e},getArgs:function(){return[this.expr]},copy:function(e){var t=n.newUnaryExpr(a,e);return t},toString:function(){return"bound("+this.expr+")"}});module.exports=a},{"../../ext/Class":2,"../ExprHelpers":236}],278:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.expr=e;this.node=t},copySubstitute:function(e){return new n(this.expr.copySubstitute(e),this.node.copySubstitute(e))}});module.exports=n},{"../../ext/Class":2}],279:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunction2");var a=r.create(n,{initialize:function($super,e,t){$super("=",e,t)},copySubstitute:function(e){return new a(this.left.copySubstitute(e),this.right.copySubstitute(e))},$copy:function(e,t){return new a(e,t)},toString:function(){return"("+this.left+" = "+this.right+")"},eval:function(){}});module.exports=a},{"../../ext/Class":2,"./ExprFunction2":299}],280:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunctionN");var a=r.create(n,{initialize:function($super,e,t){$super(e,t)},copy:function(e){var t=new a(this.name,e);return t},toString:function(){var e="<"+this.name+">("+this.getArgs().join(", ")+")";return e}});module.exports=a},{"../../ext/Class":2,"./ExprFunctionN":301}],281:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunction2");var a=e("../ExprHelpers");var i=r.create(n,{initialize:function($super,e,t){$super(">",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" > "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":236,"./ExprFunction2":299}],282:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new a(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=n.newUnaryExpr(a,e);return t},toString:function(){return"isIri("+this.expr+")"},getVarsMentioned:function(){return this.expr.getVarsMentioned()}});module.exports=a},{"../../ext/Class":2,"../ExprHelpers":236}],283:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new a(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=n.newUnaryExpr(a,e);return t},toString:function(){return"lang("+this.expr+")"},getVarsMentioned:function(){return this.expr.getVarsMentioned()}});module.exports=a},{"../../ext/Class":2,"../ExprHelpers":236}],284:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=e("../PatternUtils");var i=r.create({initialize:function(e,t){this.left=e;this.right=t},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},getArgs:function(){return[this.left,this.right]},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"langMatches("+this.left+", "+this.right+")"},getVarsMentioned:function(){var e=a.getVarsMentioned(this.getArgs());return e}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":236,"../PatternUtils":244}],285:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunction2");var a=e("../ExprHelpers");var i=r.create(n,{initialize:function($super,e,t){$super("<",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" < "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":236,"./ExprFunction2":299}],286:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=r.create({initialize:function(e,t){this.expr=e;this.pattern=t},copySubstitute:function(e){return new a(this.expr.copySubstitute(e),this.pattern)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){var t=n.newUnaryExpr(a,e);return t},toString:function(){var e=this.pattern.replace("'","\\'");return"("+this.expr+" Like '"+e+"')"}});module.exports=a},{"../../ext/Class":2,"../ExprHelpers":236}],287:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=e("./ExprFunction2");var i=r.create(a,{initialize:function($super,e,t){$super("&&",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" && "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":236,"./ExprFunction2":299}],288:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ExprHelpers");var a=e("./ExprFunction1");var i=r.create(a,{initialize:function(e){this.expr=e},copySubstitute:function(e){return new i(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=n.newUnaryExpr(i,e);return t},toString:function(){return"(!"+this.expr+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":236,"./ExprFunction1":298}],289:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunction2");var a=e("../ExprHelpers");var i=r.create(n,{initialize:function($super,e,t){$super("||",e,t)},copySubstitute:function(e){var t=this.left.copySubstitute(e);var r=this.right.copySubstitute(e);var n=new i(t,r);return n},getArgs:function(){return[this.left,this.right]},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" || "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":236,"./ExprFunction2":299}],290:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunction0");var a=r.create(n,{initialize:function($super,e){$super("jassa.sparql.E_NotExists");this.element=e},getVarsMentioned:function(){return this.element.getVarsMentioned()},$copy:function(){return new a(this.element)},toString:function(){return"Not Exists ("+this.element+") "}});module.exports=a},{"../../ext/Class":2,"./ExprFunction0":297}],291:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Expr");var a=function(e,t){var r=t(e);if(!r){r=e}return r};var i=r.create(n,{initialize:function(e,t){this.lhsExpr=e;if(!Array.isArray(t)){throw new Error("nodes must be an array")}this.nodes=t},getVarsMentioned:function(){var e=this.lhsExpr.getVarsMentioned();return e},copySubstitute:function(e){var t=this.nodes.map(function(t){return a(t,e)});return new i(this.lhsExpr.copySubstitute(e),t)},toString:function(){if(!this.nodes||this.nodes.length===0){return"FALSE"}else{return"("+this.lhsExpr+" in ("+this.nodes.join(", ")+"))"}}});module.exports=i},{"../../ext/Class":2,"./Expr":294}],292:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Expr");var a=r.create(n,{initialize:function(e,t,r){this.expr=e;this.pattern=t;this.flags=r},copySubstitute:function(e){return new a(this.expr.copySubstitute(e),this.pattern,this.flags)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=e[0];var r=new a(t,this.pattern,this.flags);return r},toString:function(){var e=this.pattern.replace('"','\\"');var t=this.flags?', "'+this.flags.replace('"','\\"')+'"':"";return"regex("+this.expr+', "'+e+'"'+t+")"}});module.exports=a},{"../../ext/Class":2,"./Expr":294}],293:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunction1");var a=r.create(n,{initialize:function($super,e){$super("str",e)},getVarsMentioned:function(){return this.subExpr.getVarsMentioned()},copy:function(e){return new a(e[0])},toString:function(){return"str("+this.subExpr+")"}});module.exports=a},{"../../ext/Class":2,"./ExprFunction1":298}],294:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({isFunction:function(){return false},isVar:function(){return false},isConstant:function(){return false},getFunction:function(){throw new Error("Override me")},getExprVar:function(){throw new Error("Override me")},getConstant:function(){throw new Error("Override me")},copySubstitute:function(){throw new Error("Override me")},copy:function(){throw new Error("Override me")}});module.exports=n},{"../../ext/Class":2}],295:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeUtils");var a=e("../ExprHelpers");var i=r.create({initialize:function(e,t){this.v=e;this.agg=t},copySubstitute:function(e){var t=n.getSubstitute(this.v,e);var r=this.agg.copySubstitute(e);var a=new i(t,r);return a},getAggregator:function(){return this.agg},getArgs:function(){return[]},copy:function(e){var t=new i(this.v,this.agg);return t},toString:function(){return this.agg.toString()},getVarsMentioned:function(){var e=this.agg.getVarsMentioned();return e}});module.exports=i},{"../../ext/Class":2,"../../rdf/NodeUtils":100,"../ExprHelpers":236}],296:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Expr");var a=r.create(n,{getName:function(){throw new Error("Implement me")},isFunction:function(){return true},getFunction:function(){return this}});module.exports=a},{"../../ext/Class":2,"./Expr":294}],297:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunctionBase");var a=r.create(n,{initialize:function($super,e){$super(e)},getArgs:function(){return[]},copy:function(e){if(e&&e.length>0){throw new Error("Invalid argument")}var t=this.$copy(e);return t}});module.exports=a},{"../../ext/Class":2,"./ExprFunctionBase":300}],298:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunctionBase");var a=r.create(n,{initialize:function($super,e,t){$super(e);this.subExpr=t},getArgs:function(){return[this.subExpr]},copy:function(e){if(e.length!==1){throw new Error("Invalid argument")}var t=this.$copy(e);return t},getSubExpr:function(){return this.subExpr}});module.exports=a},{"../../ext/Class":2,"./ExprFunctionBase":300}],299:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunctionBase");var a=r.create(n,{initialize:function($super,e,t,r){$super(e);this.left=t;this.right=r},getArgs:function(){return[this.left,this.right]},copy:function(e){if(e.length!==2){throw new Error("Invalid argument")}var t=this.$copy(e[0],e[1]);return t},getLeft:function(){return this.left},getRight:function(){return this.right}});module.exports=a},{"../../ext/Class":2,"./ExprFunctionBase":300}],300:[function(e,module,t){var r=e("../../ext/Class");var n=e("../PatternUtils");var a=e("./ExprFunction");var i=r.create(a,{initialize:function(e){this.name=e},copySubstitute:function(e){var t=this.getArgs();var r=t.map(function(t){var r=t.copySubstitute(e);return r});var n=this.copy(r);return n},getVarsMentioned:function(){var e=n.getVarsMentioned(this.getArgs());return e},toString:function(){var e=this.name+"("+this.getArgs().join(", ")+")";return e}});module.exports=i},{"../../ext/Class":2,"../PatternUtils":244,"./ExprFunction":296}],301:[function(e,module,t){var r=e("../../ext/Class");var n=e("./ExprFunctionBase");var a=r.create(n,{initialize:function($super,e,t){$super(e,t);this.args=t},getArgs:function(){return this.args}});module.exports=a},{"../../ext/Class":2,"./ExprFunctionBase":300}],302:[function(e,module,t){var r=e("../../ext/Class");var n=e("../SparqlString");var a=e("./Expr");var i=r.create(a,{classLabel:"jassa.sparql.ExprString",initialize:function(e){this.sparqlString=e},copySubstitute:function(e){var t=this.sparqlString.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}return this},toString:function(){return"(!"+this.expr+")"},create:function(e,t){var r=new i(n.create(e,t));return r}});module.exports=i},{"../../ext/Class":2,"../SparqlString":253,"./Expr":294}],303:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Expr");var a=e("./../NodeValueUtils");var i=r.create(n,{classLabel:"ExprVar",initialize:function(e){this.v=e},eval:function(e){var t=e.get(this.v);var r=a.makeNode(t);return r},copySubstitute:function(e){var t=e(this.v);var r;if(t==null){r=this}else if(t.isVariable()){r=new i(t)}else{r=a.makeNode(t)}return r},getArgs:function(){return[]},copy:function(e){if(e&&e.length>0){throw new Error("Invalid argument")}var t=new i(this.v);return t},isVar:function(){return true},getExprVar:function(){return this},asVar:function(){return this.v},getVarsMentioned:function(){return[this.v]},toString:function(){return this.v.toString()}});module.exports=i},{"../../ext/Class":2,"./../NodeValueUtils":243,"./Expr":294}],304:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Expr");var a=e("../../vocab/xsd");var i=e("../../rdf/NodeFactory");var s=r.create(n,{initialize:function(e){this.node=e},isConstant:function(){return true},getConstant:function(){return this},getArgs:function(){return[]},getVarsMentioned:function(){return[]},asNode:function(){throw new Error("makeNode is not overridden")},copySubstitute:function(){return this},toString:function(){var e=this.node;var t;if(e.isLiteral()){if(e.getLiteralDatatypeUri()===a.xstring.getUri()){var r=e.getLiteralLexicalForm();t="'"+r+"'"}else if(e.dataType===a.xdouble.value){return parseFloat(this.node.value)}}else{t=e.toString()}return t},eval:function(e){return this}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":99,"../../vocab/xsd":405,"./Expr":294}],305:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../vocab/xsd");var a=e("./NodeValue");var i=r.create(a,{initialize:function(e){this.node=e},asNode:function(){return this.node},toString:function(){var e=this.node;var t=null;if(e.isLiteral()){if(e.getLiteralDatatypeUri()===n.xstring.getUri()){t='"'+e.getLiteralLexicalForm()+'"'}}if(t==null){t=e.toString()}return t}});module.exports=i},{"../../ext/Class":2,"../../vocab/xsd":405,"./NodeValue":304}],306:[function(e,module,t){"use strict";var r={BestLabelConfig:e("./BestLabelConfig"),Binding:e("./Binding"),BindingUtils:e("./BindingUtils"),CannedConceptUtils:e("./CannedConceptUtils"),Concept:e("./Concept"),ConceptUtils:e("./ConceptUtils"),DiffUtils:e("./DiffUtils"),DatasetDescription:e("./DatasetDescription"),ElementHelpers:e("./ElementHelpers"),ElementUtils:e("./ElementUtils"),ExprEvaluator:e("./ExprEvaluator"),ExprEvaluatorImpl:e("./ExprEvaluatorImpl"),ExprHelpers:e("./ExprHelpers"),ExprUtils:e("./ExprUtils"),GenSym:e("./GenSym"),Generator:e("./Generator"),GeneratorBlacklist:e("./GeneratorBlacklist"),LabelUtils:e("./LabelUtils"),LiteralPreference:e("./LiteralPreference"),NodeValueUtils:e("./NodeValueUtils"),PatternUtils:e("./PatternUtils"),Quad:e("./Quad"),QuadUtils:e("./QuadUtils"),
Query:e("./Query"),QueryType:e("./QueryType"),QueryUtils:e("./QueryUtils"),Relation:e("./Relation"),RelationUtils:e("./RelationUtils"),SortCondition:e("./SortCondition"),SparqlString:e("./SparqlString"),VarExprList:e("./VarExprList"),VarGen:e("./VarGen"),VarUtils:e("./VarUtils"),AggCount:e("./agg/AggCount"),AggCountVarDistinct:e("./agg/AggCountVarDistinct"),Element:e("./element/Element"),ElementBind:e("./element/ElementBind"),ElementFilter:e("./element/ElementFilter"),ElementGroup:e("./element/ElementGroup"),ElementNamedGraph:e("./element/ElementNamedGraph"),ElementOptional:e("./element/ElementOptional"),ElementString:e("./element/ElementString"),ElementSubQuery:e("./element/ElementSubQuery"),ElementTriplesBlock:e("./element/ElementTriplesBlock"),ElementUnion:e("./element/ElementUnion"),ElementFactory:e("./element_factory/ElementFactory"),ElementFactoryCombine:e("./element_factory/ElementFactoryCombine"),ElementFactoryConst:e("./element_factory/ElementFactoryConst"),ElementFactoryJoin:e("./element_factory/ElementFactoryJoin"),ElementFactoryJoinConcept:e("./element_factory/ElementFactoryJoinConcept"),ElementSupplier:e("./element_supplier/ElementSupplier"),ElementSupplierConst:e("./element_supplier/ElementSupplierConst"),ElementSupplierFn:e("./element_supplier/ElementSupplierFn"),E_Bound:e("./expr/E_Bound"),E_Cast:e("./expr/E_Cast"),E_Equals:e("./expr/E_Equals"),E_Function:e("./expr/E_Function"),E_GreaterThan:e("./expr/E_GreaterThan"),E_Lang:e("./expr/E_Lang"),E_IsIri:e("./expr/E_IsIri"),E_LangMatches:e("./expr/E_LangMatches"),E_LessThan:e("./expr/E_LessThan"),E_Like:e("./expr/E_Like"),E_LogicalAnd:e("./expr/E_LogicalAnd"),E_LogicalNot:e("./expr/E_LogicalNot"),E_LogicalOr:e("./expr/E_LogicalOr"),E_NotExists:e("./expr/E_NotExists"),E_OneOf:e("./expr/E_OneOf"),E_Regex:e("./expr/E_Regex"),E_Str:e("./expr/E_Str"),Expr:e("./expr/Expr"),ExprAggregator:e("./expr/ExprAggregator"),ExprFunction:e("./expr/ExprFunction"),ExprFunction0:e("./expr/ExprFunction0"),ExprFunction1:e("./expr/ExprFunction1"),ExprFunction2:e("./expr/ExprFunction2"),ExprFunctionBase:e("./expr/ExprFunctionBase"),ExprFunctionN:e("./expr/ExprFunctionN"),ExprString:e("./expr/ExprString"),ExprVar:e("./expr/ExprVar"),NodeValue:e("./expr/NodeValue"),NodeValueNode:e("./expr/NodeValueNode"),JoinBuilder:e("./join/JoinBuilder"),JoinBuilderUtils:e("./join/JoinBuilderUtils"),JoinInfo:e("./join/JoinInfo"),JoinNode:e("./join/JoinNode"),JoinNodeInfo:e("./join/JoinNodeInfo"),JoinTargetState:e("./join/JoinTargetState"),JoinType:e("./join/JoinType"),KeywordSearchUtils:e("./search/KeywordSearchUtils"),UpdateData:e("./update/UpdateData"),UpdateDataDelete:e("./update/UpdateDataDelete"),UpdateDataInsert:e("./update/UpdateDataInsert"),UpdateModify:e("./update/UpdateModify"),UpdateWithUsing:e("./update/UpdateWithUsing")};module.exports=r},{"./BestLabelConfig":224,"./Binding":225,"./BindingUtils":226,"./CannedConceptUtils":227,"./Concept":228,"./ConceptUtils":229,"./DatasetDescription":230,"./DiffUtils":231,"./ElementHelpers":232,"./ElementUtils":233,"./ExprEvaluator":234,"./ExprEvaluatorImpl":235,"./ExprHelpers":236,"./ExprUtils":237,"./GenSym":238,"./Generator":239,"./GeneratorBlacklist":240,"./LabelUtils":241,"./LiteralPreference":242,"./NodeValueUtils":243,"./PatternUtils":244,"./Quad":245,"./QuadUtils":246,"./Query":247,"./QueryType":248,"./QueryUtils":249,"./Relation":250,"./RelationUtils":251,"./SortCondition":252,"./SparqlString":253,"./VarExprList":254,"./VarGen":255,"./VarUtils":256,"./agg/AggCount":257,"./agg/AggCountVarDistinct":258,"./element/Element":259,"./element/ElementBind":260,"./element/ElementFilter":261,"./element/ElementGroup":262,"./element/ElementNamedGraph":263,"./element/ElementOptional":264,"./element/ElementString":265,"./element/ElementSubQuery":266,"./element/ElementTriplesBlock":267,"./element/ElementUnion":268,"./element_factory/ElementFactory":269,"./element_factory/ElementFactoryCombine":270,"./element_factory/ElementFactoryConst":271,"./element_factory/ElementFactoryJoin":272,"./element_factory/ElementFactoryJoinConcept":273,"./element_supplier/ElementSupplier":274,"./element_supplier/ElementSupplierConst":275,"./element_supplier/ElementSupplierFn":276,"./expr/E_Bound":277,"./expr/E_Cast":278,"./expr/E_Equals":279,"./expr/E_Function":280,"./expr/E_GreaterThan":281,"./expr/E_IsIri":282,"./expr/E_Lang":283,"./expr/E_LangMatches":284,"./expr/E_LessThan":285,"./expr/E_Like":286,"./expr/E_LogicalAnd":287,"./expr/E_LogicalNot":288,"./expr/E_LogicalOr":289,"./expr/E_NotExists":290,"./expr/E_OneOf":291,"./expr/E_Regex":292,"./expr/E_Str":293,"./expr/Expr":294,"./expr/ExprAggregator":295,"./expr/ExprFunction":296,"./expr/ExprFunction0":297,"./expr/ExprFunction1":298,"./expr/ExprFunction2":299,"./expr/ExprFunctionBase":300,"./expr/ExprFunctionN":301,"./expr/ExprString":302,"./expr/ExprVar":303,"./expr/NodeValue":304,"./expr/NodeValueNode":305,"./join/JoinBuilder":307,"./join/JoinBuilderUtils":308,"./join/JoinInfo":309,"./join/JoinNode":310,"./join/JoinNodeInfo":311,"./join/JoinTargetState":312,"./join/JoinType":313,"./search/KeywordSearchUtils":314,"./update/UpdateData":315,"./update/UpdateDataDelete":316,"./update/UpdateDataInsert":317,"./update/UpdateModify":318,"./update/UpdateWithUsing":319}],307:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/HashBidiMap");var a=e("../GenSym");var i=e("../GeneratorBlacklist");var s=e("../ElementUtils");var o=e("../element/ElementGroup");var l=e("../element/ElementOptional");var u=e("../VarUtils");var c=e("./JoinNode");var d=e("./JoinTargetState");var f=e("./JoinInfo");var p=e("./JoinType");var h=r.create({initialize:function(e,t,r,s){if(e==null){console.log("[Error] Root element must not be null");throw new Error("Bailing out")}this.usedVarNames=[];this.usedVars=[];this.aliasGenerator=new a("a");this.varNameGenerator=new i(new a("v"),this.usedVarNames);this.aliasToState={};this.rootAlias=r?r:this.aliasGenerator.next();if(s==null){s=[]}var o=this.createTargetState(this.rootAlias,new n,s,e,t,s);this.aliasToState[this.rootAlias]=o;this.rootNode=o.getJoinNode()},getRootNode:function(){return this.rootNode},getJoinNode:function(e){var t=this.aliasToState[e];var r=t?t.getJoinNode():null;return r},getState:function(e){return this.aliasToState[e]},getElement:function(e){var t=this.aliasToState[e];var r=t?t.getElement():null;return r},addVars:function(e){var t=this;e.forEach(function(e){var r=e.getName();var n=t.usedVarNames.indexOf(r)!==-1;if(!n){t.usedVarNames.push(r);t.usedVars.push(e)}})},createTargetState:function(e,t,r,n,a,i){var o=r.map(function(e){var r=t.get(e);return r});var l=s.createJoinVarMap(this.usedVars,a,o,i,this.varNameGenerator);var u=null;if(n!=null){u=s.createRenamedElement(n,l)}var f=l.getInverse().keys();this.addVars(f);var p=new c(this,e,i);var h=new d(l,p,u,f);return h},addJoin:function(e,t,r,n,a,i){var s=this.aliasToState[t];var o=s.getVarMap();if(!i){i=this.aliasGenerator.next()}var l=n.getVarsMentioned();var u=this.createTargetState(i,o,r,n,l,a);var c=new f(i,e);s.getJoinInfos().push(c);this.aliasToState[i]=u;var d=u.getJoinNode();return d},getElementsRec:function(e){var t=[];var r=e.getElement();if(r!=null){t.push(r)}var n=e.getJoinNodeInfos();var a=this;n.forEach(function(e){var r=e.getJoinNode();var n=a.getElementsRec(r);var i=new o(n);var s=e.getJoinType();switch(s){case p.LEFT_JOIN:i=new l(i);break;case p.INNER_JOIN:break;default:throw new Error("[ERROR] Unsupported join type: "+s)}t.push(i)});return t},getElements:function(){var e=this.getRootNode();var t=this.getElementsRec(e);return t},getAliasToVarMap:function(){var e={};this.aliasToState.forEach(function(t,r){e[r]=t.varMap});return e},create:function(e,t,r){var n=e.getVarsMentioned();var a=new h(e,n,t,r);var i=a.getRootNode();return i},createWithEmptyRoot:function(e,t){var r=u.varNamesToNodes(e);var n=new h(null,r,t);var a=n.getRootNode();return a}});module.exports=h},{"../../ext/Class":2,"../../util/collection/HashBidiMap":388,"../ElementUtils":233,"../GenSym":238,"../GeneratorBlacklist":240,"../VarUtils":256,"../element/ElementGroup":262,"../element/ElementOptional":264,"./JoinInfo":309,"./JoinNode":310,"./JoinTargetState":312,"./JoinType":313}],308:[function(e,module,t){var r={getChildren:function(e){return e.getJoinNodes()}};module.exports=r},{}],309:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.alias=e;this.joinType=t},getAlias:function(){return this.alias},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.alias}});module.exports=n},{"../../ext/Class":2}],310:[function(e,module,t){var r=e("../../ext/Class");var n=e("./JoinNodeInfo");var a=e("./JoinType");var i=r.create({initialize:function(e,t,r){this.joinBuilder=e;this.alias=t;this.targetJoinVars=r},getJoinBuilder:function(){return this.joinBuilder},getJoinVars:function(){return this.targetJoinVars},getElement:function(){return this.joinBuilder.getElement(this.alias)},getVarMap:function(){return this.joinBuilder.getVarMap(this.alias)},getJoinNodeInfos:function(){var e=this.joinBuilder.getState(this.alias);var t=this;var r=e.getJoinInfos().map(function(e){var r=e.getAlias();var a=t.joinBuilder.getJoinNode(r);var i=new n(a,e.getJoinType());return i});return r},joinAny:function(e,t,r,n,a){var i=this.joinBuilder.addJoin(e,this.alias,t,r,n,a);return i},join:function(e,t,r,n){var i=this.joinAny(a.INNER_JOIN,e,t,r,n);return i},leftJoin:function(e,t,r,n){var i=this.joinAny(a.LEFT_JOIN,e,t,r,n);return i},joinTree:function(){},leftJoinTree:function(){},joinTreeAny:function(){}});module.exports=i},{"../../ext/Class":2,"./JoinNodeInfo":311,"./JoinType":313}],311:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.joinNode=e;this.joinType=t},getJoinNode:function(){return this.joinNode},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.joinNode}});module.exports=n},{"../../ext/Class":2}],312:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t,r,n){this.varMap=e;this.joinNode=t;this.element=r;this.elementVars=n;this.joinInfos=[]},getVarMap:function(){return this.varMap},getJoinNode:function(){return this.joinNode},getElement:function(){return this.element},getElementVars:function(){return this.elementVars},getJoinInfos:function(){return this.joinInfos}});module.exports=n},{"../../ext/Class":2}],313:[function(e,module,t){var r={INNER_JOIN:"inner_join",LEFT_JOIN:"left_join"};module.exports=r},{}],314:[function(e,module,t){var r=e("../expr/ExprVar");var n=e("../expr/E_LangMatches");var a=e("../expr/E_LogicalOr");var i=e("../expr/E_Lang");var s=e("../expr/E_Bound");var o=e("../expr/E_Regex");var l=e("../expr/E_Str");var u=e("../expr/E_Function");var c=e("../Concept");var d=e("../element/ElementGroup");var f=e("../element/ElementOptional");var p=e("../element/ElementFilter");var h=e("../NodeValueUtils");var v=e("../LabelUtils");var g={createConceptRegex:function(e,t,r){var n=r?this.createConceptRegexIncludeSubject(e,t):this.createConceptRegexLabelOnly(e,t);return n},createConceptRegexLabelOnly:function(e,t){var n;if(t){var a=new d([e.getElement(),new p(new o(new l(new r(e.getTargetVar())),t,"i"))]);n=new c(a,e.getSourceVar())}else{n=null}return n},createConceptRegexIncludeSubject:function(e,t){var n;if(t){var i=e.getElement();var u=e.getSourceVar();var h=e.getTargetVar();var v=new r(u);var g=new r(h);var m=new o(new l(g),t,"i");var _=new a(new o(new l(v),t,"i"),new s(g));var x=new d([new f(new d([i,new p(m)])),new p(_)]);n=new c(x,u)}else{n=null}return n},createConceptBifContains:function(e,t){var n;if(t){var a=e.getElement();var i=e.getTargetVar();var s=new r(i);var o=h.makeString(t);var l=new d([e.getElement(),new p(new u("<bif:contains>",[s,o]))]);var f=e.getSourceVar();n=new c(l,f)}else{n=null}return n}};module.exports=g},{"../Concept":228,"../LabelUtils":241,"../NodeValueUtils":243,"../element/ElementFilter":261,"../element/ElementGroup":262,"../element/ElementOptional":264,"../expr/E_Bound":277,"../expr/E_Function":280,"../expr/E_Lang":283,"../expr/E_LangMatches":284,"../expr/E_LogicalOr":289,"../expr/E_Regex":292,"../expr/E_Str":293,"../expr/ExprVar":303}],315:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../sparql/QuadUtils");var a=r.create({initialize:function(e){this.quads=e||[]},toString:function($super){var e=""+n.quadsToElement(this.quads);return e}});module.exports=a},{"../../ext/Class":2,"../../sparql/QuadUtils":246}],316:[function(e,module,t){var r=e("../../ext/Class");var n=e("./UpdateData");var a=r.create(n,{initialize:function($super,e){$super(e)},toString:function($super){var e="Delete Data { "+$super()+" }";return e}});module.exports=a},{"../../ext/Class":2,"./UpdateData":315}],317:[function(e,module,t){var r=e("../../ext/Class");var n=e("./UpdateData");var a=r.create(n,{initialize:function($super,e){$super(e)},toString:function($super){var e="Insert Data { "+$super()+" }";return e}});module.exports=a},{"../../ext/Class":2,"./UpdateData":315}],318:[function(e,module,t){var r=e("../../ext/Class");var n=e("./UpdateWithUsing");var a=e("../QuadUtils");var i=r.create(n,{initialize:function($super,e,t,r,n,a,i){$super(e,t,r);this.deleteQuads=n||[];this.insertQuads=a||[];this.whereElement=i||null},getDeleteQuads:function(){return this.deleteQuads},getInsertQuads:function(){return this.insertQuads},getWhereElement:function(){return this.whereElement},hasDeleteQuads:function(){var e=this.deleteQuads&&this.deleteQuads.length>0;return e},hasInsertQuads:function(){var e=this.insertQuads&&this.insertQuads.length>0;return e},toString:function($super){var e=this.hasInsertQuads();var t=this.hasDeleteQuads();var r=$super();if(t){r+="Delete { "+a.quadsToElement(this.getDeleteQuads())+" } "}if(e){r+="Insert { "+a.quadsToElement(this.getInsertQuads())+" } "}r+="Where { "+this.getWhereElement()+" } ";return r}});module.exports=i},{"../../ext/Class":2,"../QuadUtils":246,"./UpdateWithUsing":319}],319:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t,r){this.withNode=e;this.usingNodes=t;this.usingNamedNodes=r},toString:function(){var e="";if(this.withNode!=null){e+="WITH "+this.withNode+" "}if(this.usingNodes!=null){e+="USING "+this.usingNodes.join(" ")+" "}if(this.usingNamedNodes!=null){e+="USING NAMED"+this.usingNamedNodes.join(" ")+" "}return e}});module.exports=n},{"../../ext/Class":2}],320:[function(e,module,t){var r=e("./acc/AccRef");var n=e("./acc/AccTransform");var a={unwrapAccTransform:function(e){var t=e;while(t instanceof n){t=t.getSubAcc()}return t},getRefs:function(e,t){t=t||[];if(Array.isArray(e)){e.forEach(function(e){a.getRefs(e,t)})}else if(e instanceof r){t.push(e)}else{var n=e.getSubAccs();a.getRefs(n,t)}return t}};module.exports=a},{"./acc/AccRef":344,"./acc/AccTransform":345}],321:[function(e,module,t){var r=e("./agg/AggRef");var n=e("./agg/AggTransform");var a={unwrapAggTransform:function(e){var t=e;while(t instanceof n){t=t.getSubAgg()}return t},getRefs:function(e,t){t=t||[];if(e instanceof r){t.push(e)}else{var n=e.getSubAggs();n.forEach(function(e){a.getRefs(e,t)})}return t}};module.exports=a},{"./agg/AggRef":356,"./agg/AggTransform":357}],322:[function(e,module,t){var r=e("../ext/Class");var n=e("../util/ObjectUtils");var a=r.create({classLabel:"jassa.sponate.AttrPath",initialize:function(e){this.steps=e?e:[]},getSteps:function(){return this.steps},toString:function(){return this.steps.join(".")},slice:function(e,t){var r=this.steps.slice(e,t);return r},first:function(){return this.steps[0]},at:function(e){return this.steps[e]},isEmpty:function(){return this.steps.length===0},size:function(){return this.steps.length},concat:function(e){var t=this.steps.concat(e.getSteps());var r=new a(t);return r},find:function(e){var t=e;var r=this.steps;for(var a=0;a<r.length;++a){var i=r[a];if(!n.isObject(t)){throw new Error("[ERROR] Cannot access attribute of non-object",this.steps,e,t)}t=t[i]}return t}});a.parse=function(e){var t=e.split(".");return new a(t)};module.exports=a},{"../ext/Class":2,"../util/ObjectUtils":376}],323:[function(e,module,t){var r=e("../ext/Class");var n=e("./MappedConceptSource");var a=e("./MappedConcept");var i=e("./AggUtils");var s=e("../util/ObjectUtils");var o=e("./RefSpec");var l=e("./binding_mapper/BindingMapperExpr");var u=e("../sparql/expr/ExprVar");var c=e("./agg/AggMap");var d=e("lodash.foreach");var f=r.create({initialize:function(e){this.prefixMapping=e;this.nameToSource={}},getSource:function(e){return this.nameToSource[e]},createResolvedContext:function(){var e=new f(this.prefixMapping);d(this.nameToSource,function(t,r){var i=t.getMappedConcept();var s=i.getAgg();var o=s.clone();var l=new a(i.getConcept(),o);var u=new n(l,t.getSparqlService());e.addSource(r,u)});d(e.nameToSource,function(t,r){e.processRefs(r,t)});return e},processRefs:function(e,t){var r=t.getMappedConcept();var d=t.getSparqlService();var f=r.getAgg();var p=i.getRefs(f);var h=this;p.forEach(function(t){var f=t.getRefSpec();var p=f.getTarget();if(s.isFunction(p)){p=p()}if(p instanceof a){var v=p.getAgg();var g=v.getSubAgg();var m=g.getAttrToAgg();var _=i.unwrapAggTransform(m.id);var x=_.getBindingMapper();v=new c(x,g);var b=new a(p.getConcept(),v);var y=0;var S;while(h.getSource(S=e+"_fn_"+y)){++y}t.setRefSpec(new o(S,f.getAttr()));var w=t.getBindingMapper();if(!w){var C=r.getConcept();var E=C.getVar();w=new l(new u(E));t.setBindingMapper(w)}var j=new n(b,d);h.nameToSource[S]=j}else if(!s.isString(p)){throw new Error("Unknown target type: ",p)}})},addSource:function(e,t){this.nameToSource[e]=t}});module.exports=f},{"../ext/Class":2,"../sparql/expr/ExprVar":303,"../util/ObjectUtils":376,"./AggUtils":321,"./MappedConcept":327,"./MappedConceptSource":328,"./RefSpec":332,"./agg/AggMap":353,"./binding_mapper/BindingMapperExpr":360,"lodash.foreach":577}],324:[function(e,module,t){var r=e("../ext/Class");var n=e("./ListServiceUtils");var a=e("./AccUtils");var i=e("../util/collection/HashMap");var s=e("../util/collection/HashSet");var o=e("./LookupServiceUtils");var n=e("./ListServiceUtils");var l=e("../service/list_service/ListServiceTransformItems");var u=e("../util/ObjectUtils");var c=e("../util/Slot");var d=e("lodash.foreach");var f=e("../util/shared");var p=f.Promise;var h=e("../util/PromiseUtils");var v={indexAccMap:function(e,t,r){var n=e[t];if(!n){n=new i;e[t]=n}n.putMap(r)},mergeRefs:function(e,t){t.forEach(function(t){var r=t.getRefSpec();var n=r.getTarget();var a=t.getRefValue();var i;if(!(n in e)){i=new s;e[n]=i}else{i=e[n]}i.add(a)})},filterRefs:function(e,t){var r=[];t.forEach(function(t){var n=t.getRefSpec();var a=n.getTarget();var i=t.getRefValue();var s=e[a];var o=s&&s.containsKey(i);if(!o){r.push(t)}});return r},buildObjs:function(e){var t={};d(e,function(e,r){var n=new i;t[r]=n;e.entries().forEach(function(e){var t=e.key;var r=e.val;var a=r.getValue();n.put(t,a)})});return t},buildLazySlots:function(e,t,r,n){r=r||[];d(e,function(e,a){e.values().forEach(function(e){var a=v.buildSlots(e,t,null,n);a=a.reverse();r.push.apply(r,a)})});return r},buildSlots:function(e,t,r,n){r=r||[];if(Array.isArray(e)){e.forEach(function(a,i){var s=a&&a[t];if(s){var o=new c(e,i,a[t]);r.push(o)}if(!s||n){v.buildSlots(a,t,r,n)}})}else if(u.isObject(e)){d(e,function(a,i){var s=a&&a[t];if(s){var o=new c(e,i,a[t]);r.push(o)}if(!s||n){v.buildSlots(a,t,r,n)}})}return r},createLookupService:function(e,t){var r=e.getSource(t);if(!r){throw new Error("No source mapping with name "+t+" found")}var n=r.getSparqlService();var a=r.getMappedConcept();var i=o.createLookupServiceMappedConceptAcc(n,a);return i},createListService:function(e,t,r){var a=e.getSource(t);if(!a){throw new Error("No source mapping with name "+t+" found")}var i=a.getSparqlService();var s=a.getMappedConcept();if(s.getConcept().getVar().getName()==="rowId"){throw new Error("rowId cannot be used as the root ID of a MappedConcept")}var o=n.createListServiceAcc(i,s,r);var u=this;var c=new l(o,function(r){var n=u.collectState(e,t,r).spread(function(e,r,n){var a=u.postProcess(r,t,e);return a});return n});return c},collectState:function(e,t,r){var n={};var s=r.map(function(e){return e.key});var o=new i;var l={};r.forEach(function(e){var t=e.val;var r=t.getState();o.putMap(r);var n=a.getRefs(t);v.mergeRefs(l,n)});n[t]=o;var u=this.resolveRefs(e,l,n).then(function(e){var t=[s,n,e];return t});return u},postProcess:function(e,t,r){var n=[];d(e,function(e){var t=e.values();var r=a.getRefs(t);n.push.apply(n,r)});n.forEach(function(e){var t=e.getRefSpec();var r=t.getTarget();var n=e.getRefValue();e.setBaseValue({_ref:{targetName:r,refValue:n,attr:t.getAttr()}})});var i=v.buildObjs(e);var s=v.buildSlots(i,"_ref");var o=v.buildLazySlots(i,"_lazy",null,true);s.forEach(function(e){var t=e.getMeta();var r=i[t.targetName];var n=r.get(t.refValue);var a=t.attr;n=n!=null&&a!=null?n[a]:n;e.setValue(n)});o.forEach(function(e){var t=e.getMeta();var r=t.fn;var n=t.value;var a=r(n);e.setValue(a)});var l=r.map(function(e){var r=i[t];var n=r.get(e);var a={key:e,val:n};return a});return l},exec:function(e,t){var r=t.getSourceName();var n=this.createListService(e,r,t.isLeftJoin());var a=t.getLimit();var i=t.getOffset();var s=t.getFilterConcept();var o=n.fetchItems(s,a,i);return o},resolveRefs:function(e,t,r){var n=this;var i=Object.keys(t);var s=i.map(function(i){var s=t[i];var o=n.createLookupService(e,i);var l=s.entries();var u=o.lookup(l).then(function(t){var s=t.values();v.indexAccMap(r,i,t);var o=a.getRefs(s);var l=v.filterRefs(r,o);var u={};v.mergeRefs(u,l);var c=n.resolveRefs(e,u,r);return c});return u});return h.all(s)}};module.exports=v},{"../ext/Class":2,"../service/list_service/ListServiceTransformItems":169,"../util/ObjectUtils":376,"../util/PromiseUtils":378,"../util/Slot":382,"../util/collection/HashMap":389,"../util/collection/HashSet":390,"../util/shared":398,"./AccUtils":320,"./ListServiceUtils":325,"./LookupServiceUtils":326,"lodash.foreach":577}],325:[function(e,module,t){var r=e("../sparql/Concept");var n=e("../sparql/ConceptUtils");var a=e("./ServiceUtils");var i=e("../service/list_service/ListServiceSparqlQuery");var s=e("../service/list_service/ListServiceTransformItem");var o=e("../rdf/NodeFactory");var l=e("../sparql/BindingUtils");var u={createListServiceAcc:function(e,t,r){r=!!r;var a=t.getConcept();var u=n.createQueryList(a);var c=t.getAgg();var d=o.createVar("rowId");u.setQueryResultStar(true);var f=new i(e,u,a.getVar(),r);var p=new s(f,function(e){var t=e.key;var r=e.val.getBindings();r=l.cloneBindings(r);l.addRowIds(r,d);var n=c.createAcc();r.forEach(function(e){n.accumulate(e)});var a={key:t,val:n};return a});return p},createListServiceMappedConcept:function(e,t,r){var n=this.createListServiceAcc(e,t,r);var a=new s(n,function(e){var t=e.map(function(e){var t=e.val.getValue();return t});return t});return a}};module.exports=u},{"../rdf/NodeFactory":99,"../service/list_service/ListServiceSparqlQuery":165,"../service/list_service/ListServiceTransformItem":168,"../sparql/BindingUtils":226,"../sparql/Concept":228,"../sparql/ConceptUtils":229,"./ServiceUtils":334}],326:[function(e,module,t){var r=e("../sparql/ConceptUtils");var n=e("../service/lookup_service/LookupServiceSparqlQuery");var a=e("../service/lookup_service/LookupServiceTransform");var i=e("../service/lookup_service/LookupServiceFallback");var s=e("../service/lookup_service/LookupServiceFn");var o=e("../service/lookup_service/LookupServiceIdFilter");var l=e("../service/lookup_service/LookupServiceChunker");var u=e("../sparql/BestLabelConfig");var c=e("../util/ObjectUtils");var d=e("./MappedConceptUtils");var f=e("../rdf/NodeUtils");var p=e("../util/UriUtils");var h=e("../util/collection/HashMap");var v=e("./AccUtils");var g=e("../sparql/LiteralPreference");var m={createTransformAccResultSetPart:function(e){var t=function(t){var r=e.createAcc();var n=t.getBindings();n.forEach(function(e){r.accumulate(e)});return r};return t},createLookupServiceNodeLabels:function(e,t,r){t=t||new g;var n=new u(t);var a=d.createMappedConceptBestLabel(n);var h=this.createLookupServiceMappedConcept(e,a);if(r){h=new l(h,r)}h=new o(h,function(e){var t=e&&e.isUri();if(t){var r=e.getUri();t=p.isValidUri(r)}return t});var v=new s(function(e){var t=f.toPrettyString(e);return t});h=new i(h,v,function(e,t){var r=e==null||e.displayLabel==null;return r},function(e,t){var r={};if(t!=null){c.extend(r,t)}r.displayLabel=e;return r});return h},createLookupServiceMappedConcept:function(e,t){var r=this.createLookupServiceMappedConceptAcc(e,t);var n=new a(r,function(e){var t=e.getValue();return t});return n},createLookupServiceMappedConceptAcc:function(e,t){var i=t.getConcept();var s=r.createQueryList(i);var o=i.getVar();s.setQueryResultStar(true);var l=t.getAgg();var u=l.getSubAgg();var c=new n(e,s,o);var d=this.createTransformAccResultSetPart(u);var f=new a(c,d);return f}};module.exports=m},{"../rdf/NodeUtils":100,"../service/lookup_service/LookupServiceChunker":173,"../service/lookup_service/LookupServiceFallback":176,"../service/lookup_service/LookupServiceFn":177,"../service/lookup_service/LookupServiceIdFilter":179,"../service/lookup_service/LookupServiceSparqlQuery":184,"../service/lookup_service/LookupServiceTransform":186,"../sparql/BestLabelConfig":224,"../sparql/ConceptUtils":229,"../sparql/LiteralPreference":242,"../util/ObjectUtils":376,"../util/UriUtils":385,"../util/collection/HashMap":389,"./AccUtils":320,"./MappedConceptUtils":329}],327:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.concept=e;this.agg=t},getConcept:function(){return this.concept},getAgg:function(){return this.agg}});module.exports=n},{"../ext/Class":2}],328:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.mappedConcept=e;this.sparqlService=t},getMappedConcept:function(){return this.mappedConcept},getSparqlService:function(){return this.sparqlService}});module.exports=n},{"../ext/Class":2}],329:[function(e,module,t){var r=e("../rdf/NodeUtils");var n=e("../sparql/LabelUtils");var a=e("../sparql/VarUtils");var i=e("../sparql/expr/ExprVar");var s=e("./agg/AggArray");var o=e("./agg/AggLiteral");var l=e("./agg/AggMap");var u=e("./agg/AggObject");var c=e("./agg/AggBestLabel");var d=e("./agg/AggTransform");var f=e("./binding_mapper/BindingMapperExpr");var p=e("./binding_mapper/BindingMapperTransform");var h=e("../sparql/Concept");var v=e("./MappedConcept");var r=e("../rdf/NodeUtils");var g=e("../sparql/BestLabelConfig");var m={createMappedConceptLiteralPreference:function(e){var t=new g(e);var r=m.createMappedConceptBestLabel(t);return r},createMappedConceptBestLabel:function(e){var t=n.createRelationPrefLabels(e);var a=t.getSourceVar();var p=t.getTargetVar();var g=new u({id:new d(new o(new f(new i(a))),r.getValue),displayLabel:new d(new c(e),r.getValue),hiddenLabels:new s(new d(new o(new f(new i(p))),r.getValue))});g=new l(new f(new i(a)),g);var m=new h(t.getElement(),t.getSourceVar());var _=new v(m,g);return _}};module.exports=m},{"../rdf/NodeUtils":100,"../sparql/BestLabelConfig":224,"../sparql/Concept":228,"../sparql/LabelUtils":241,"../sparql/VarUtils":256,"../sparql/expr/ExprVar":303,"./MappedConcept":327,"./agg/AggArray":348,"./agg/AggBestLabel":350,"./agg/AggLiteral":352,"./agg/AggMap":353,"./agg/AggObject":354,"./agg/AggTransform":357,"./binding_mapper/BindingMapperExpr":360,"./binding_mapper/BindingMapperTransform":362}],330:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t,r){this.mapName=e;this.tableRef=t},getMapName:function(){return this.mapName},getTableRef:function(){return this.tableRef},getAttrPath:function(){return this.attrPath},toString:function(){var e=this.patternRef+"/"+this.tableRef+"@"+this.attrPath;return e}});module.exports=n},{"../ext/Class":2}],331:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t,r,n,a,i,s){this.sourceName=e;this.criteria=t;this.limit=r;this.offset=n;this.filterConcept=a;this._isLeftJoin=i;this.nodes=s},shallowClone:function(){var e=new n(this.sourceName,this.criteria,this.limit,this.offset,this.filterConcept,this._isLeftJoin,this.nodes);return e},getSourceName:function(){return this.sourceName},setSourceName:function(e){this.sourceName=e},getCriteria:function(){return this.criteria},setCriteria:function(e){this.criteria=e},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e},getFilterConcept:function(){return this.filterConcept},setFilterConcept:function(e){this.filterConcept=e},isLeftJoin:function(){return this._isLeftJoin},setLeftJoin:function(e){this._isLeftJoin=e},getNodes:function(){return this.nodes},setNodes:function(e){this.nodes=e}});module.exports=n},{"../ext/Class":2}],332:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t){this.target=e;this.attr=t},getTarget:function(){return this.target},getAttr:function(){return this.attr}});module.exports=n},{"../ext/Class":2}],333:[function(e,module,t){var r=e("../rdf/NodeUtils");var n=e("../util/collection/HashMap");var a=e("./MappedConceptUtils");var i=e("../sparql/BestLabelConfig");var s=e("./facade/StoreFacade");var o=e("../service/lookup_service/LookupServiceListServiceSparql");var l={createRexLookupService:function(e){var t=new s(e,{});var l=new i;var u=a.createMappedConceptBestLabel(l);var c=function(e){var t={};var n=e.entries();n.forEach(function(e){var n=e.key;var a=e.val.predicates.entries();var i=t[n]={};a.forEach(function(e){var t=e.key;var n=i[t]={};var a=e.val.values.entries();a.forEach(function(e){var t=e.val.id;var a=r.toTalisRdfJson(t);n.push(a)})})})};var d=function(e){var t=new n;e.forEach(function(e){t.put(e.id,e)});return t};var f=function(e){var t=e.map(function(e){var t=r.toTalisRdfJson(e.id);return t});return t};var p=function(e){var t={};var a=new n;e.forEach(function(e){var n=e.s+" "+e.p;var i=t[n]=t[n]||0;++t[n];var s=r.toTalisRdfJson(e.o);var o=Object.keys(s);o.forEach(function(t){var r={s:e.s,p:e.p,i:i,c:t};var n=s[t];a.put(r,n)})});return a};t.addMap({name:"spo",template:[{id:"?s",data:[[{id:"?rowId",s:"?s",p:"?p",o:"?o | node"}],p]}],from:"?s ?p ?o"});var h=t.spo.getListService();var v=new o(h);return v}};module.exports=l},{"../rdf/NodeUtils":100,"../service/lookup_service/LookupServiceListServiceSparql":181,"../sparql/BestLabelConfig":224,"../util/collection/HashMap":389,"./MappedConceptUtils":329,"./facade/StoreFacade":365}],334:[function(e,module,t){var r={processResultSet:function(e,t){while(e.hasNext()){var r=e.next();t.accumulate(r)}var n=t.getValue();return n},processBindings:function(e,t){e.forEach(function(e){t.accumulate(e)});var r=t.getValue();return r},execAgg:function(e,t,r){var n=r.createAcc();var a=this.execAcc(e,t,n);return a},execAcc:function(e,t,n){var a=e.createQueryExecution(t);var i=a.execSelect().then(function(e){var t=r.processResultSet(e,n);return t});return i}};module.exports=r},{}],335:[function(e,module,t){var r=e("../util/ObjectUtils");var n=e("../util/PrefixUtils");var a=e("../sparql/element/Element");var i=e("../sparql/element/ElementString");var s=e("./TemplateParser");var o=e("./ListServiceUtils");var l=e("./agg/AggMap");var u=e("./MappedConcept");var c=e("../sparql/expr/ExprVar");var d=e("../sparql/Concept");var f=e("./AggUtils");var p={parseSpec:function(e,t,r){var n=e.template;var a=n instanceof u?n:this.parseSpecCore(e,t,r);return a},parseSpecCore:function(e,t,o){o=o||new s;var p=e.template;var h=e.from;var v;if(r.isString(h)){var g=h;if(t!=null){var m=t.getNsPrefixMap();g=n.expandPrefixes(m,g)}v=new i.create(g)}else if(h instanceof a){v=h}else if(r.isFunction(h)){throw new Error("ElementFactories / functions in the FROM part not supported anymore")}else{throw new Error("Unknown argument type for FROM attribute",h)}var _=o.parseAgg(p);var x=f.unwrapAggTransform(_);var b;
if(x instanceof l){var y=x.getKeyBindingMapper();b=y.getExpr()}else{throw new Error("Could not obtain ID attribute from aggregator")}var S;if(b instanceof c){S=b.asVar()}else{throw new Error("Variable required for ID attribute, got an expression instead: "+b)}var w=new d(v,S);var C=new u(w,x);return C}};module.exports=p},{"../sparql/Concept":228,"../sparql/element/Element":259,"../sparql/element/ElementString":265,"../sparql/expr/ExprVar":303,"../util/ObjectUtils":376,"../util/PrefixUtils":377,"./AggUtils":321,"./ListServiceUtils":325,"./MappedConcept":327,"./TemplateParser":336,"./agg/AggMap":353}],336:[function(e,module,t){var r=e("lodash.uniq");var n=e("../ext/Class");var a=e("../util/ObjectUtils");var i=e("../rdf/NodeUtils");var s=e("../rdf/node/Node");var o=e("../rdf/node/Var");var l=e("../rdf/NodeFactory");var u=e("../sparql/expr/Expr");var c=e("../sparql/expr/ExprVar");var d=e("../sparql/expr/NodeValue");var f=e("../sparql/NodeValueUtils");var p=e("./agg/AggLiteral");var h=e("./agg/AggObjectCustom");var v=e("./agg/AggMap");var g=e("./agg/AggMap");var m=e("./agg/AggRef");var _=e("./agg/AggArray");var x=e("./agg/AggArrayStatic");var b=e("./agg/AggTransform");var y=e("./agg/AggTransformLazy");var S=e("./AggUtils");var w=e("./RefSpec");var C=e("./binding_mapper/BindingMapperExpr");var E=n.create({initialize:function(){this.attrs={id:"id",ref:"$ref"}},parseArray:function(e){var t=this;var r=e[e.length-1];var n=a.isFunction(r);var i;if(n){i=this.parseArrayTransform(e)}else{var s=e.some(function(e){var t=e.id||e.$ref||a.isString(e);return t});i=!s?this.parseArrayStatic(e):this.parseArrayDynamic(e)}return i},parseArrayTransform:function(e){var t=e.length-1;var r=e[t];var n=this;var a=e.slice(0,t);var i=a.map(function(e){var t=n.parseAgg(e);return t});var s=new x(i);var o=new y(s,function(e){var t=r.apply(null,e);return t});return o},parseArrayStatic:function(e){var t=this;var r=e.map(function(e){var r=t.parseAgg(e);return r});var n=new x(r);return n},parseArrayDynamic:function(e){if(e.length!==1){throw new Error("[ERROR] Arrays must have exactly one element that is either a string or an object",e)}var t=e[0];var r;if(a.isString(t)){r=this.parseArrayLiteral(t)}else if(Array.isArray(t)){if(t.length===1){var n=t[0];r=this.parseArrayConfig(n);var i=Object.keys(n);var s=i.length===2&&i.indexOf("id")>=0&&i.indexOf("$value")>=0;r=new b(r,function(e){var t={};e.forEach(function(e){t[e.id]=s?e.$value:e});return t})}else{throw new Error("Not implemented")}}else if(a.isObject(t)){r=this.parseArrayConfig(t)}else{throw new Error("Bailing out")}return r},parseArrayConfig:function(e){var t=this.attrs.id;var r=this.attrs.ref;var n=e[t]!=null;var a=e[r]!=null;if(n&&a){throw new Error("[ERROR] id and ref are mutually exclusive")}var i;if(n){var s=this.parseObject(e);var o=s.getAttrToAgg();var l=o[t];l=S.unwrapAggTransform(l);var u=l.getBindingMapper();i=new v(u,s);i=new b(i,function(e){return e.values()})}else if(a){i=this.parseArrayRef(e)}else{throw new Error("[ERROR] Not implemented")}return i},parseArrayRef:function(e){var t=e[this.attrs.ref];var r=this.parseRef(t);var n=r.getBindingMapper();var a=new v(n,r);a=new b(a,function(e){return e.values()});return a},parseArrayLiteral:function(e){var t=this.parseLiteral(e);var n=new b(new _(t),function(e){return r(e,function(e){return""+e})});return n},parseLiteral:function(e){var t=e.split("|").map(function(e){return e.trim()});var r=t[0];var n=this.parseExprString(r);var a=new p(new C(n));var s=t[1];if(s!=="node"){a=new b(a,i.getValue)}return a},parseObject:function(e){var t=e[this.attrs.ref];var r=t!=null?this.parseRef(t):this.parseObjectData(e);return r},parseRef:function(e){var t=e.target;if(!t){throw new Error("Missing target attribute in ref: ",e)}var r=new w(t,e.attr);var n=e.on;var a=null;if(n){var i=this.parseExprString(n);a=new C(i)}var s=new m(a,r);return s},parseObjectData:function(e){var t={};var r=this;var n=Object.keys(e);n.forEach(function(n){var a=e[n];var i=r.parseAgg(a);if(i==null){throw new Error("Failed to create aggregator for attribute ["+n+"] in "+JSON.stringify(e))}t[n]=i});var a=new h(t,this);return a},parseAgg:function(e){var t;if(a.isString(e)){t=this.parseLiteral(e)}else if(Array.isArray(e)){t=this.parseArray(e)}else if(a.isFunction(e)){throw new Error("Implement this case: "+JSON.stringify(e))}else if(e instanceof s&&e.isVariable()){var r=new c(e);t=new p(new C(r))}else if(e instanceof u){t=new p(new C(e))}else if(a.isObject(e)){var n=e.createAgg;if(n){t=new g(e)}else{t=this.parseObject(e)}}else{console.log("[ERROR] Unknown item type: ",e);throw new Error("Unkown item type")}return t},parseExpr:function(e){var t;if(a.isString(e)){t=this.parseExprString(e)}else if(e instanceof s&&e.isVariable()){t=new c(e)}else{throw new Error("Could not parse expression: ",e)}return t},parseExprString:function(e){var t;var r=e.charAt(0);if(r==="?"){var n=e.substr(1);var a=l.createVar(n);t=new c(a)}else if(r==='"'||r==="'"){t=e.substring(1,e.length-1);t=f.makeString(t)}else{t=f.makeString(e)}return t}});module.exports=E},{"../ext/Class":2,"../rdf/NodeFactory":99,"../rdf/NodeUtils":100,"../rdf/node/Node":112,"../rdf/node/Var":119,"../sparql/NodeValueUtils":243,"../sparql/expr/Expr":294,"../sparql/expr/ExprVar":303,"../sparql/expr/NodeValue":304,"../util/ObjectUtils":376,"./AggUtils":321,"./RefSpec":332,"./agg/AggArray":348,"./agg/AggArrayStatic":349,"./agg/AggLiteral":352,"./agg/AggMap":353,"./agg/AggObjectCustom":355,"./agg/AggRef":356,"./agg/AggTransform":357,"./agg/AggTransformLazy":358,"./binding_mapper/BindingMapperExpr":360,"lodash.uniq":724}],337:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"jassa.sponate.acc",accumulate:function(e){throw new Error("override me")},getValue:function(){throw new Error("override me")},getSubAccs:function(){throw new Error("override me")}});module.exports=n},{"../../ext/Class":2}],338:[function(e,module,t){var r=e("../../ext/Class");var n=e("../binding_mapper/BindingMapperIndex");var a=e("./Acc");var i=r.create(a,{classLabel:"jassa.sponate.AccFn",initialize:function(e,t){var r=this;this.i=0;this.subAgg=e;this.indexBindingMapper=t||new n;this.subAccs=[]},accumulate:function(e){var t=this.indexBindingMapper.map(e,this.i++);if(t!=null){var r=this.subAccs[t];if(!r){r=this.subAgg.createAcc();this.subAccs[t]=r}r.accumulate(e)}},getValue:function(){var e=[];this.subAccs.forEach(function(t,r){var n=t.getValue();if(n!=null){e[r]=n}});return e},getSubAccs:function(){var e=[];this.subAccs.forEach(function(t){if(t){e.push(t)}});return e}});module.exports=i},{"../../ext/Class":2,"../binding_mapper/BindingMapperIndex":361,"./Acc":337}],339:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Acc");var a=r.create(n,{classLabel:"jassa.sponate.AccArrayStatic",initialize:function(e){this.subAccs=e},accumulate:function(e){this.subAccs.forEach(function(t){t.accumulate(e)})},getValue:function(){var e=this.subAccs.map(function(e){var t=e.getValue();return t});return e},getSubAccs:function(){return this.subAccs}});module.exports=a},{"../../ext/Class":2,"./Acc":337}],340:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeUtils");var a=e("./Acc");var i=function(e,t){var r=[];var n=Math.max(e.length,t.length);for(var a=0;a<n;++a){var i=[e[a],t[a]];r.push(i)}return r};var s=function(e,t,r){var n=false;var a=Math.max(e.length,t.length);for(var i=0;i<a;++i){var s=e[i];var o=t[i];if(r(s,o)){if(r(o,s)){continue}n=true;break}else{if(!r(o,s)){continue}n=false;break}}return n};var o=function(e,t){return e<t};var l=function(e,t){var r=-1;for(var n=0;n<e.length;++n){var a=e[n];if(a.equals(t)){r=n;break}}return r};var u=r.create(a,{initialize:function(e){this.bestLiteralConfig=e;this.bestMatchNode=null;this.bestMatchScore=[1e3,1e3]},getSubAccs:function(){return[]},accumulate:function(e){var t=this.bestLiteralConfig;var r=e.get(t.getSubjectVar());var a=e.get(t.getPredicateVar());var i=e.get(t.getObjectVar());if(this.bestMatchNode==null){this.bestMatchNode=r}var u=n.getLang(i);var c=l(t.getPredicates(),a);var d=t.getLangs().indexOf(u);var f=[c,d];var p=f.every(function(e){return e>=0});if(p){var h=s(f,this.bestMatchScore,o);if(h===true){this.bestMatchScore=f;this.bestMatchNode=i}}},getValue:function(){return this.bestMatchNode}});module.exports=u},{"../../ext/Class":2,"../../rdf/NodeUtils":100,"./Acc":337}],341:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/ObjectUtils");var a=e("./Acc");var i=r.create(a,{classLabel:"jassa.sponate.AccLiteral",initialize:function(e){this.bindingMapper=e;this.value=null},accumulate:function(e){var t=this.bindingMapper.map(e,0);if(false){if(this.value!=null&&!n.isEqual(this.value,t)){console.log("[WARN] Reassigned value: Original",this.value," New: ",t)}}this.value=t},getValue:function(){return this.value},getSubAccs:function(){return[]}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":376,"./Acc":337}],342:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../util/collection/HashMap");var a=e("./Acc");var i=r.create(a,{classLabel:"jassa.sponate.AccMap",initialize:function(e,t){this.keyBindingMapper=e;this.subAgg=t;this.state=new n},getState:function(){return this.state},accumulate:function(e){var t=this.keyBindingMapper.map(e,0);if(t!=null){var r=this.state.get(t);if(!r){r=this.subAgg.createAcc();this.state.put(t,r)}r.accumulate(e)}},getValue:function(){var e=new n;var t=this.state.entries();t.forEach(function(t){var r=t.key;var n=t.val;var a=n.getValue();e.put(r,a)});return e},getSubAccs:function(){var e=this.state.entries();var t=e.map(function(e){return e.val});return t}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":389,"./Acc":337}],343:[function(e,module,t){var r=e("lodash.foreach");var n=e("../../ext/Class");var a=e("./Acc");var i=n.create(a,{classLabel:"jassa.sponate.AccObject",initialize:function(e){this.attrToAcc=e},accumulate:function(e){r(this.attrToAcc,function(t){t.accumulate(e)})},getValue:function(){var e={};r(this.attrToAcc,function(t,r){var n=t.getValue();e[r]=n});return e},getSubAccs:function(){var e=[];r(this.attrToAcc,function(t){e.push(t)});return e}});module.exports=i},{"../../ext/Class":2,"./Acc":337,"lodash.foreach":577}],344:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Acc");var a=r.create(n,{classLabel:"jassa.sponate.AccRef",initialize:function(e,t){this.bindingMapper=e;this.refSpec=t;this.refValue=null;this.baseValue=null},getSubAccs:function(){return[]},getRefSpec:function(){return this.refSpec},getRefValue:function(){return this.refValue},accumulate:function(e){var t=this.bindingMapper.map(e,0);this.refValue=t},getBaseValue:function(){return this.baseValue},setBaseValue:function(e){this.baseValue=e},getValue:function(){return this.baseValue}});module.exports=a},{"../../ext/Class":2,"./Acc":337}],345:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Acc");var a=r.create(n,{classLabel:"jassa.sponate.AccTransform",initialize:function(e,t){this.subAcc=e;this.fn=t},getSubAcc:function(){return this.subAcc},accumulate:function(e){this.subAcc.accumulate(e)},getValue:function(){var e=this.subAcc.getValue();var t=this.fn(e);return t},getSubAccs:function(){return[this.subAcc]}});module.exports=a},{"../../ext/Class":2,"./Acc":337}],346:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Acc");var a=r.create(n,{classLabel:"jassa.sponate.AccTransformLazy",initialize:function(e,t){this.subAcc=e;this.fn=t},getSubAcc:function(){return this.subAcc},accumulate:function(e){this.subAcc.accumulate(e)},getValue:function(){var e={_lazy:{value:this.subAcc.getValue(),fn:this.fn}};return e},getSubAccs:function(){return[this.subAcc]}});module.exports=a},{"../../ext/Class":2,"./Acc":337}],347:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({classLabel:"jassa.sponate.Agg",createAcc:function(){throw new Error("override me")},getSubAggs:function(){throw new Error("override me")},clone:function(){throw new Error("override me")}});module.exports=n},{"../../ext/Class":2}],348:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Agg");var a=e("../acc/AccArray");var i=r.create(n,{classLabel:"jassa.sponate.AggArray",initialize:function(e,t){this.subAgg=e;this.indexBindingMapper=t},clone:function(){var e=new i(this.subAgg.clone(),this.indexBindingMapper);return e},createAcc:function(){var e=new a(this.subAgg,this.indexBindingMapper);return e},getSubAgg:function(){return this.subAgg},getIndexBindingMapper:function(){return this.indexBindingMapper},getSubAggs:function(){return[this.subAgg]},toString:function(){return this.expr.toString()}});module.exports=i},{"../../ext/Class":2,"../acc/AccArray":338,"./Agg":347}],349:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Agg");var a=e("../acc/AccArrayStatic");var i=r.create(n,{classLabel:"jassa.sponate.AggArrayStatic",initialize:function(e){this.subAggs=e},clone:function(){var e=this.subAggs.map(function(e){return e.clone()});var t=new i(e);return t},createAcc:function(){var e=this.subAggs.map(function(e){return e.createAcc()});var t=new a(e);return t},getSubAggs:function(){return this.subAggs},toString:function(){return"implement me"}});module.exports=i},{"../../ext/Class":2,"../acc/AccArrayStatic":339,"./Agg":347}],350:[function(e,module,t){var r=e("lodash.union");var n=e("../../ext/Class");var a=e("./Agg");var i=e("../acc/AccBestLabel");var s=n.create(a,{initialize:function(e){this.bestLiteralConfig=e},clone:function(){var e=new s(this.bestLiteralConfig);return e},createAcc:function(){var e=new i(this.bestLiteralConfig);return e},getSubAggs:function(){return[]},toString:function(){var e="bestLabel["+this.bestLiteralConfig+"]";return e}});module.exports=s},{"../../ext/Class":2,"../acc/AccBestLabel":340,"./Agg":347,"lodash.union":701}],351:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Agg");var a=r.create(n,{classLabel:"jassa.sponate.AggCustomAgg",initialize:function(e){this.fnAcc=e},getSubAggs:function(){return[]}});module.exports=a},{"../../ext/Class":2,"./Agg":347}],352:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Agg");var a=e("../acc/AccLiteral");var i=r.create(n,{classLabel:"jassa.sponate.AggLiteral",initialize:function(e){this.bindingMapper=e},clone:function(){var e=new i(this.bindingMapper);return e},getBindingMapper:function(){return this.bindingMapper},getSubAggs:function(){return[]},createAcc:function(){var e=new a(this.bindingMapper);return e}});module.exports=i},{"../../ext/Class":2,"../acc/AccLiteral":341,"./Agg":347}],353:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Agg");var a=e("../acc/AccMap");var i=r.create(n,{classLabel:"jassa.sponate.AggMap",initialize:function(e,t){this.keyBindingMapper=e;this.subAgg=t},clone:function(){var e=new i(this.keyBindingMapper,this.subAgg.clone());return e},getKeyBindingMapper:function(){return this.keyBindingMapper},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=new a(this.keyBindingMapper,this.subAgg);return e},toString:function(){var e="["+this.keyExpr+" -> "+this.subAgg+"]";return e}});module.exports=i},{"../../ext/Class":2,"../acc/AccMap":342,"./Agg":347}],354:[function(e,module,t){var r=e("lodash.foreach");var n=e("../../ext/Class");var a=e("./Agg");var i=e("../acc/AccObject");var s=n.create(a,{classLabel:"jassa.sponate.AggObject",initialize:function(e){this.attrToAgg=e},clone:function(){var e={};r(this.attrToAgg,function(t,r){e[r]=t.clone()});var t=new s(e);return t},getAttrToAgg:function(){return this.attrToAgg},createAcc:function(){var e={};r(this.attrToAgg,function(t,r){var n=t.createAcc();e[r]=n});var t=new i(e);return t},getSubAggs:function(){var e=[];r(this.attrToAgg,function(t){e.push(t)});return e},toString:function(){var e=[];r(this.attrToAgg,function(t,r){e.push('"'+r+'": '+t)});var t="{"+e.join(",")+"}";return t}});module.exports=s},{"../../ext/Class":2,"../acc/AccObject":343,"./Agg":347,"lodash.foreach":577}],355:[function(e,module,t){var r=e("../../ext/Class");var n=e("./AggObject");var a=r.create(n,{initialize:function($super,e,t){$super(e);this.templateParser=t},add:function(e,t){var r=this.templateParser.parseAgg(t);this.attrToAgg[e]=r;return r},del:function(e){delete this.attrToAgg[e]}});module.exports=a},{"../../ext/Class":2,"./AggObject":354}],356:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeFactory");var a=e("../acc/AccRef");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggRef",initialize:function(e,t){this.bindingMapper=e;this.refSpec=t},clone:function(){var e=new s(this.bindingMapper,this.refSpec);return e},getBindingMapper:function(){return this.bindingMapper},setBindingMapper:function(e){this.bindingMapper=e},getRefSpec:function(){return this.refSpec},setRefSpec:function(e){this.refSpec=e},getSubAggs:function(){return[]},createAcc:function(){var e=new a(this.bindingMapper,this.refSpec);return e},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":99,"../acc/AccRef":344,"./Agg":347}],357:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeFactory");var a=e("../acc/AccTransform");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggTransform",initialize:function(e,t){this.subAgg=e;this.fn=t},clone:function(){var e=new s(this.subAgg.clone(),this.fn);return e},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=this.subAgg.createAcc();var t=new a(e,this.fn);return t},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":99,"../acc/AccTransform":345,"./Agg":347}],358:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/NodeFactory");var a=e("../acc/AccTransformLazy");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggTransformLazy",initialize:function(e,t){this.subAgg=e;this.fn=t},clone:function(){var e=new s(this.subAgg.clone(),this.fn);return e},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=this.subAgg.createAcc();var t=new a(e,this.fn);return t},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":99,"../acc/AccTransformLazy":346,"./Agg":347}],359:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({map:function(e,t){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],360:[function(e,module,t){var r=e("../../ext/Class");var n=e("./BindingMapper");var a=r.create(n,{initialize:function(e){this.expr=e},getExpr:function(){return this.expr},map:function(e,t){var r=this.expr.eval(e);var n=r.asNode();return n}});module.exports=a},{"../../ext/Class":2,"./BindingMapper":359}],361:[function(e,module,t){var r=e("../../ext/Class");var n=e("./BindingMapper");var a=r.create(n,{map:function(e,t){return t}});module.exports=a},{"../../ext/Class":2,"./BindingMapper":359}],362:[function(e,module,t){var r=e("../../ext/Class");var n=e("./BindingMapper");var a=r.create(n,{initialize:function(e,t){this.subBindingMapper=e;this.fn=t},map:function(e,t){var r=this.subBindingMapper.map(e,t);var n=this.fn(r);return n}});module.exports=a},{"../../ext/Class":2,"./BindingMapper":359}],363:[function(e,module,t){var r=e("../../ext/Class");var n=e("./QueryFlow");var a=r.create({initialize:function(e,t){this.storeFacade=e;this.mappingName=t},getAggObject:function(){var e=this.getSource().getMappedConcept().getAgg().getSubAgg();return e},getSource:function(){var e=this.storeFacade.getContext().getSource(this.mappingName);return e},getListService:function(){var e=this.storeFacade.getListService(this.mappingName);return e},find:function(e){if(e){throw new Error("Criteria queries are currently not supported anymore - Sorry :/")}var t=new n(this.storeFacade,this.mappingName,e);return t}});module.exports=a},{"../../ext/Class":2,"./QueryFlow":364}],364:[function(e,module,t){var r=e("../../ext/Class");var n=e("../Query");var a=e("../Engine");var i=r.create({initialize:function(e,t,r){this.storeFacade=e;this.query=new n;this.query.setSourceName(t);this.query.setCriteria(r)},concept:function(e,t){this.query.setFilterConcept(e);this.query.setLeftJoin(t);return this},nodes:function(e){this.query.setNodes(e);return this},skip:function(e){this.query.setOffset(e);return this},limit:function(e){this.query.setLimit(e);return this},offset:function(e){this.query.setOffset(e);return this},list:function(){var e=this.storeFacade.getContext().createResolvedContext();var t=a.exec(e,this.query);return t},count:function(){}});module.exports=i},{"../../ext/Class":2,"../Engine":324,"../Query":331}],365:[function(e,module,t){var r=e("../../ext/Class");var n=e("../../rdf/PrefixMappingImpl");var a=e("../../util/ObjectUtils");var i=e("../Context");var s=e("../Engine");var o=e("../SponateUtils");var l=e("../MappedConceptSource");var u=e("../MappedConcept");var c=e("../../service/list_service/ListServiceFn");var d=e("./CollectionFacade");var a=e("../../util/ObjectUtils");var f=e("lodash.foreach");var p=r.create({initialize:function(e,t,r){this.defaultSparqlService=e;this.prefixMapping=t?t instanceof n?t:new n(t):new n;this.context=r||new i(t);this.nameToMappedConcept={}},getContext:function(){return this.context},addTemplate:function(e){var t=e.name;if(!t){throw new Error("Sponate spec must have a name")}var r=o.parseSpec(e,this.prefixMapping);this.nameToMappedConcept[t]=r},addMap:function(e){var t=e.name;if(!t){throw new Error("Sponate spec must have a name")}var r=e.service||this.defaultSparqlService;if(!r){throw new Error("No service provided for ",e)}var n;if(a.isString(e.template)){var i=e.template;var s=this.nameToMappedConcept[i];if(!s){throw new Error("No template with name "+i+" registered.")}n=new u(s.getConcept(),s.getAgg().clone())}else{n=o.parseSpec(e,this.prefixMapping)}var c=new l(n,r);this.context.addSource(t,c);this[t]=new d(this,t);return c},getListService:function(e,t){var r=this;var n=function(){var n=r.context.createResolvedContext();var a=s.createListService(n,e,t);return a};var a=new c(n);return a}});module.exports=p},{"../../ext/Class":2,"../../rdf/PrefixMappingImpl":101,"../../service/list_service/ListServiceFn":162,"../../util/ObjectUtils":376,"../Context":323,"../Engine":324,"../MappedConcept":327,"../MappedConceptSource":328,"../SponateUtils":335,"./CollectionFacade":363,"lodash.foreach":577}],366:[function(e,module,t){"use strict";var r={AccUtils:e("./AccUtils"),AggUtils:e("./AggUtils"),AttrPath:e("./AttrPath"),Context:e("./Context"),Engine:e("./Engine"),ListServiceUtils:e("./ListServiceUtils"),LookupServiceUtils:e("./LookupServiceUtils"),MappedConcept:e("./MappedConcept"),MappedConceptSource:e("./MappedConceptSource"),MappedConceptUtils:e("./MappedConceptUtils"),MappingRef:e("./MappingRef"),Query:e("./Query"),RefSpec:e("./RefSpec"),ServiceUtils:e("./ServiceUtils"),SponateUtils:e("./SponateUtils"),TemplateParser:e("./TemplateParser"),Acc:e("./acc/Acc"),AccArray:e("./acc/AccArray"),AccArrayStatic:e("./acc/AccArrayStatic"),AccBestLabel:e("./acc/AccBestLabel"),AccLiteral:e("./acc/AccLiteral"),AccMap:e("./acc/AccMap"),AccObject:e("./acc/AccObject"),AccRef:e("./acc/AccRef"),AccTransform:e("./acc/AccTransform"),AccTransformLazy:e("./acc/AccTransformLazy"),Agg:e("./agg/Agg"),AggArray:e("./agg/AggArray"),AggArrayStatic:e("./agg/AggArrayStatic"),AggBestLabel:e("./agg/AggBestLabel"),AggCustomAcc:e("./agg/AggCustomAcc"),AggLiteral:e("./agg/AggLiteral"),AggMap:e("./agg/AggMap"),AggObject:e("./agg/AggObject"),AggObjectCustom:e("./agg/AggObjectCustom"),AggRef:e("./agg/AggRef"),AggTransform:e("./agg/AggTransform"),AggTransformLazy:e("./agg/AggTransformLazy"),BindingMapper:e("./binding_mapper/BindingMapper"),BindingMapperExpr:e("./binding_mapper/BindingMapperExpr"),BindingMapperIndex:e("./binding_mapper/BindingMapperIndex"),BindingMapperTransform:e("./binding_mapper/BindingMapperTransform"),CollectionFacade:e("./facade/CollectionFacade"),QueryFlow:e("./facade/QueryFlow"),StoreFacade:e("./facade/StoreFacade"),RexUtils:e("./RexUtils")};module.exports=r},{"./AccUtils":320,"./AggUtils":321,"./AttrPath":322,"./Context":323,"./Engine":324,"./ListServiceUtils":325,"./LookupServiceUtils":326,"./MappedConcept":327,"./MappedConceptSource":328,"./MappedConceptUtils":329,"./MappingRef":330,"./Query":331,"./RefSpec":332,"./RexUtils":333,"./ServiceUtils":334,"./SponateUtils":335,"./TemplateParser":336,"./acc/Acc":337,"./acc/AccArray":338,"./acc/AccArrayStatic":339,"./acc/AccBestLabel":340,"./acc/AccLiteral":341,"./acc/AccMap":342,"./acc/AccObject":343,"./acc/AccRef":344,"./acc/AccTransform":345,"./acc/AccTransformLazy":346,"./agg/Agg":347,"./agg/AggArray":348,"./agg/AggArrayStatic":349,"./agg/AggBestLabel":350,"./agg/AggCustomAcc":351,"./agg/AggLiteral":352,"./agg/AggMap":353,"./agg/AggObject":354,"./agg/AggObjectCustom":355,"./agg/AggRef":356,"./agg/AggTransform":357,"./agg/AggTransformLazy":358,"./binding_mapper/BindingMapper":359,"./binding_mapper/BindingMapperExpr":360,"./binding_mapper/BindingMapperIndex":361,"./binding_mapper/BindingMapperTransform":362,"./facade/CollectionFacade":363,"./facade/QueryFlow":364,"./facade/StoreFacade":365}],367:[function(e,module,t){var r=e("./shared");var n=e("lodash.foreach");var a={transformHttpRequestHeadersAngularToJquery:function(e){if(e&&e.headers){var t=e.beforeSend;e.beforeSend=function(r){n(e.headers,function(e,t){r.setRequestHeader(t,e)});if(t){t(r)}}}},createAjaxWrapperFn:function(e){var t=function(){var t=r.Promise;var n=arguments[0];a.transformHttpRequestHeadersAngularToJquery(n);var i=e.apply(this,arguments);var s=t.resolve(i).cancellable().catch(t.TimeoutError,t.CancellationError,function(e){i.abort();throw e});return s};return t}};module.exports=a},{"./shared":398,"lodash.foreach":577}],368:[function(e,module,t){var r=e("./ObjectUtils");var n={compactTrailingNulls:function(e){while(e.length&&e[e.length-1]==null){e.pop()}},indexesOf:function(e,t,n){n=n||r.isEqual;var a=[];e.forEach(function(e,r){var i=n(t,e);if(i){a.push(r)}});return a},firstIndexOf:function(e,t,r){var a=n.indexesOf(e,t,r);var i=a.length>0?a[0]:-1;return i},contains:function(e,t,r){var a=n.indexesOf(e,t,r);var i=a.length>0;return i},addAll:function(e,t){return e.push.apply(e,t)},chunk:function(e,t){var r=[];for(var n=0;n<e.length;n+=t){var a=e.slice(n,n+t);r.push(a)}return r},clear:function(e){while(e.length>0){e.pop()}},replace:function(e,t){this.clear(e);if(t){e.push.apply(e,t)}},filter:function(e,t){var r=e.filter(t);this.replace(e,r);return e},find:function(e,t){var r=null;for(var n=0;n<e.length;++n){var a=e[n];var i=t(a);if(i){r=a;break}}return r},indexOf:function(e,t,n){n=n||r.isEqual;var a=-1;for(var i=0;i<e.length;++i){var s=e[i];if(n(t,s)){a=i;break}}return a},grep:function(e,t){var r=[];e.forEach(function(e,n){var a=t(e,n);if(a){r.push(n)}});return r},copyWithoutIndexes:function(e,t){var r={};t.forEach(function(e){r[e]=true});var n=[];for(var a=0;a<e.length;++a){var i=r[a];if(!i){n.push(e[a])}}return n},removeItemStrict:function(e,t){var r=e.indexOf(t);if(r>-1){this.removeIndexes(e,[r])}return e},removeIndexes:function(e,t){var r=this.copyWithoutIndexes(e,t);this.replace(e,r);return e},removeByGrep:function(e,t){var r=this.grep(e,t);this.removeIndexes(e,r)},removeItem:function(e,t,r){var a=n.firstIndexOf(e,t,r);if(a>=0){e.splice(a,1)}}};module.exports=n},{"./ObjectUtils":376}],369:[function(e,module,t){var r=e("./shared");var n=r.Promise;var a={extractArgs:function(e){var t=Array.prototype.slice.call(e,0);var r=t.length>1?t:t[0];return r},cacheExecution:function(e,t,r){var i=e[t];if(i==null){var s=false;var o=function(){s=true;delete e[t]};var l=r();var u=l.then(function(){o();var e=a.extractArgs(arguments);return e},function(e){o();throw e});i={promise:u,clients:{},nextId:0};if(!s){e[t]=i}}var c=i.promise;var d=i.clients;var f="client_"+i.nextId++;d[f]=true;var p=function(){if(f!=null){var e=d[f];if(!e){console.log("[ASSERTION ERROR] unknown client "+f)}delete d[f]}};var h=new n(function(e,t){c.then(function(t){p();e(t)},function(e){p();t(e)})}).cancellable().catch(function(e){p();f=null;if(Object.keys(d).length===0){c.cancel()}throw e});return h},cacheResult:function(e,t,r){var i;var s=e.getItem(t);if(s){i=n.resolve(s)}else{i=r().then(function(){var r=a.extractArgs(arguments);e.setItem(t,r);return r})}return i},cacheExecutionAndResult:function(e,t,r,n){var i=a.cacheResult(t,r,function(){var t=a.cacheExecution(e,r,function(){var e=n();return e});return t});return i}};module.exports=a},{"./shared":398}],370:[function(e,module,t){var r={indexPredicates:function(e,t,r,n){r=r||{};var a=e.id.toString();var i=r[a];if(!i){i=a}var s=t[i];if(!s){s={id:i,valueToMember:{},sources:[]};t[i]=s}var o=s.sources;if(o.indexOf(n)<0){o.push(n)}var l=s.valueToMember;e.values.forEach(function(t){var r=t.id.toString();var a=l[r];if(!a){a={predicate:e.id,value:t,sources:[]};l[r]=a}var i=a.sources;if(i.indexOf(n)<0){i.push(n)}})},clusterLink:function(e,t,n){n=n||{};if(e.source){e.source.predicates.forEach(function(e){r.indexPredicates(e,n,t,"source")})}if(e.target){e.target.predicates.forEach(function(e){r.indexPredicates(e,n,t,"target")})}return n}};module.exports=r},{}],371:[function(e,module,t){var r={toggleItem:function(e,t){var r;if(e.contains(t)){e.remove(t);r=false}else{e.add(t);r=true}return r}};module.exports=r},{}],372:[function(e,module,t){var r={pnLocalPattern:/^[^\s/]+$/,isValidSparqlLocalName:function(e){var t=this.pnLocalPattern.exec(e);var r=!!t;return r}};module.exports=r},{}],373:[function(e,module,t){var r={tryEval:function(e,t){var r;try{r=e()}catch(n){r=t}return r}};module.exports=r},{}],374:[function(e,module,t){var r=e("../ext/JSONCanonical");var n=function(e){var t=typeof e;return t==="function"||t==="object"&&Boolean(e)};var a={stringifyCyclic:function(e,t){var a=[];var i=r.stringify(e,function(e,r){if(n(r)){if(a.indexOf(r)>=0){return}a.push(r);if(t){r=t(e,r)}}return r});return i}};module.exports=a},{"../ext/JSONCanonical":3}],375:[function(e,module,t){var r=e("./collection/HashMap");var n=e("./ObjectUtils");var a={indexBy:function(e,t,a){a=a||new r;var i;if(n.isString(t)){i=function(e){return e[t]}}else{i=t}e.forEach(function(e){var t=i(e);a.put(t,e)});return a},retainKeys:function(e,t){var r=e.keys();r.forEach(function(r){var n=t.contains(r);if(!n){e.remove(r)}})}};module.exports=a},{"./ObjectUtils":376,"./collection/HashMap":389}],376:[function(e,module,t){var r=e("lodash.isequal");var n=e("./JsonUtils");var a={alloc:function(e,t){var r;if(!(t in e)){r=e[t]=1}else{r=++e[t]}return r},free:function(e,t){var r;if(t in e){r=--e[t];if(r<=0){delete e[t]}}else{r=null}return r},isEmptyString:function(e){var t=e==null||e.length===0||e.trim()==="";return t},isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&Boolean(e)},isFunction:function(e){return typeof e==="function"},isString:function(e){return Object.prototype.toString.call(e)==="[object String]"},extend:function(e,t){for(var r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}return e},clear:function(e){for(var t in e){if(e.hasOwnProperty(t)){delete e[t]}}},isEqual:function(e,t){var n;if(e&&e.equals){n=e.equals(t)}else if(t&&t.equals){n=t.equals(e)}else{n=r(e,t)}return n},defaultHashCode:function(e){var t;if(e&&e.hashCode){t=e.hashCode()}else{t=a.hashCode(e)}return t},identity:function(e){return e},hashCodeStr:function(e){var t=0,r=e&&e.length?e.length:0;for(var n=0;n<r;n++){t=t*31+e.charCodeAt(n);t=t&t}return t},hashCode:function(e,t){var r=n.stringifyCyclic(e,function(e,r){var n=null;if(!t&&a.isObject(r)){var i=null;a.defaultHashFnNames.some(function(e){if(a.isFunction(r[e])){i=e;return true}});var s=r[i];if(i&&s&&a.isFunction(s)){n=s.apply(r)}else{n=r}}else{n=r}if(t){t=false}return n});return r}};a.defaultHashFnNames=["hashCode"];module.exports=a},{"./JsonUtils":374,"lodash.isequal":607}],377:[function(e,module,t){var r=e("./StringUtils");
var n={prefixPattern:/((\w|-)+):(\w|-)+/g,extractPrefixes:function(e){var t=r.extractAllRegexMatches(this.prefixPattern,e,1);return t},expandPrefixes:function(e,t){var r=this.extractPrefixes(t);var n=t;r.forEach(function(t){var r=e[t];if(r){var a=new RegExp(t+":(\\w+)","g");n=n.replace(a,"<"+r+"$1>")}});return n},permissiveCuriePattern:/^\s*([^:/]+):([^\s/:]*)\s*$/,permissivePrefixPattern:/\s*([^:]+)\s*:\s*([^\s]*)\s*/gm,parseCurie:function(e){var t=this.permissiveCuriePattern.exec(e);var r=t?{key:t[1],val:t[2]}:null;return r},parsePrefixDecls:function(e){var t={};var r;while((r=this.permissivePrefixPattern.exec(e))!=null){var n=r[1];var a=r[2];t[n]=a}return t}};module.exports=n},{"./StringUtils":383}],378:[function(e,module,t){var r=e("./shared");var n=r.Promise;var a=e("./ObjectUtils");var i={replaceService:function(e,t,r){var n=e[t];if(n&&n.cancelAll){n.cancelAll()}e[t]=r!=null?i.lastRequestify(r):null},lastRequestify:function(e){var t={};var r=function(e,t){var r=function(){var r=e.apply(t,arguments);return r};return r};var n=[];for(var s in e){var o=e[s];if(a.isFunction(o)){var l=i.lastRequest(r(o,e));t[s]=l;n.push(l)}}t.cancelAll=function(){n.forEach(function(e){try{if(e.deferred){e.deferred.cancel()}}catch(t){console.log(t)}})};return t},all:function(e){var t=n.all(e).cancellable().catch(n.CancellationError,function(t){e.forEach(function(e){try{if(e&&e.cancel){e.cancel()}}catch(t){console.log("[ERROR] Cancelling a promise raised an exception")}});throw t});return t},createDeferred:function(e){var t;var r;var a=new n(function(){t=arguments[0];r=arguments[1]});if(e){a.cancellable()}return{resolve:t,reject:r,promise:function(){return a},isCancellable:function(){var e;if(a.isCancellable){e=a.isCancellable()}else if(a.abort){e=true}return e},cancel:function(){if(a.cancel){a.cancel()}else if(a.abort){a.abort()}}}},defaultAbortFn:function(e){e.cancel()},defaultDeferredFn:function(){return i.createDeferred(true)},postpone:function(e,t,r,n){t=t==null?50:t;r=r||this.defaultAbortFn;n=n||i.defaultDeferredFn;return function(){var a=arguments;var i=n();var s=null;var o=setTimeout(function(){s=e.apply(this,a);s.then(function(){i.resolve.apply(this,arguments)}).fail(function(){i.reject.apply(this,arguments)})},t);var l=i.promise();l.abort=function(){if(s==null){clearTimeout(o)}else if(r!=null){r(s)}};return l}},lastRequest:function(e,t,r){var n=null;var a=null;var s=0;t=t||i.defaultAbortFn;r=r||i.defaultDeferredFn;return function(){if(n==null){n=r()}this.deferred=n;var i=++s;var o=e.apply(this,arguments);if(t!=null&&a!=null){t(a)}a=o;o.then(function(){if(i===s&&n){n.resolve.apply(this,arguments);n=null}},function(){if(i===s&&n){n.reject.apply(this,arguments);n=null}});return n.promise()}}};module.exports=i},{"./ObjectUtils":376,"./shared":398}],379:[function(e,module,t){var r=e("../ext/Class");var n=e("./collection/HashMap");var a=e("./ObjectUtils");var i=r.create({initialize:function(){this._nextId=1;this.objToId=new n(function(e,t){return e===t},function(e){return a.hashCode(e)});this.idToState={}},nextId:function(){var e=(this._nextId++).toString();return e},getIdToState:function(){return this.idToState},getObjToId:function(){return this.objToId}});module.exports=i},{"../ext/Class":2,"./ObjectUtils":376,"./collection/HashMap":389}],380:[function(e,module,t){var r=e("../ext/Class");var n=e("./ObjectUtils");var a=e("./SerializationContext");var i=r.create({initialize:function(){this.classNameToClass={};this.classNameToFnSerialize={};this.classNameToFnDeserialize={};this.classNameToPrototype={}},registerOverride:function(e,t,r){this.classNameToFnSerialize[e]=t;this.classNameToFnDeserialize[e]=r},indexClasses:function(e){var t=this.findClasses(e);n.extend(this.classNameToClass,t);return t},findClasses:function(e){var t={};e.forEach(function(e){var r=e.classLabel||(e.prototype?e.prototype.classLabel:null);if(r){t[r]=e}});return t},getLabelForClass:function(e){var t=Object.getPrototypeOf(e);var r;this.classNameToClass.find(function(e,n){if(t===e.prototype){r=n;return true}});return r},getClassForLabel:function(e){var t;this.classNameToClass.find(function(r,n){if(n===e){t=r;return true}});return t},serialize:function(e,t){t=t||new a;var r=this.serializeRec(e,t);var n={root:r,idToState:t.getIdToState()};return n},serializeRec:function(e,t){var r;var a=t.getObjToId();var i=a.get(e);if(!i){i=t.nextId();a.put(e,i)}var s=t.getIdToState();var o=s[i];if(o){r={ref:i}}else if(n.isFunction(e)){r=undefined}else if(n.isObject(e)){var l=this.getLabelForClass(e);var u=function(e){var t=Boolean(e)||Object.toString.call(e)==="[object Number]"||Object.toString.call(e)==="[object Date]"||Object.toString.call(e)==="[object String]"||Object.toString.call(e)==="[object RegExp]";return t};var c=function(e){var t=e.prototype;var r=n.isObject(e)&&!u(e);var a=r&&t==null;return a};var d=u(e)||c(e)||Array.isArray(e);if(l==null&&!d){throw new Error("Failed to serialize instance without class label")}var f;if(l){f=this.classNameToPrototype[l];if(!f){var p=this.getClassForLabel(l);if(p){try{f=new p;this.classNameToPrototype[l]=f}catch(h){console.log("[WARN] Failed to create a prototype instance of class "+l,h)}}}}if(!f){f={}}var v=this.serializeAttrs(e,t,f);var g={};if(l){g.classLabel=l}if(Object.keys(v).length>0){g.attrs=v.attrs;if(v.parent!=null){g.parent=v.parent}}if(Array.isArray(e)){g.length=e.length}s[i]=g;r={ref:i}}else{r={value:e}}return r},serializeAttrs:function(e,t,r){var a={};var i=a;var s=i.attrs={};var o=this;var l=Object.keys(e);l.forEach(function(a){var i=e[a];var l=o.serializeRec(i,t);var u=r[a];var c=n.isEqual(l,u)||l==null&&u==null;if(c){return}if(l){s[a]=l}});return a},deserialize:function(e){var t=e.root;var r=e.idToState;var n={};var a=this.deserializeRef(t,r,n);return a},deserializeRef:function(e,t,r){var n=e.ref;var a=e.value;var i;if(n!=null){var s=n in r;if(s){i=r[n]}else{i=this.deserializeState(n,t,r)}}else{i=a}return i},deserializeState:function(e,t,r){var a;var i=t[e];if(i==null||!n.isObject(i)){console.log("State must be an object, was: ",i);throw new Error("Deserialization error")}var s=i.attrs;var o=i.classLabel;var l=i.length;if(o){var u=this.getClassForLabel(o);if(!u){throw new Error("Unknown class label encountered in deserialization: "+o)}a=new u}else if(l!=null){a=[]}else{a={}}r[e]=a;var c=this;if(s!=null){var d=Object.keys(s);d.forEach(function(e){var n=s[e];var i=c.deserializeRef(n,t,r);a[e]=i})}if(l!=null){a.length=l}return a}});module.exports=new i},{"../ext/Class":2,"./ObjectUtils":376,"./SerializationContext":379}],381:[function(e,module,t){var r=e("./collection/HashSet");var n={arrayToSet:function(e){var t=new r;t.addAll(e);return t}};module.exports=n},{"./collection/HashSet":390}],382:[function(e,module,t){var r=e("../ext/Class");var n=r.create({initialize:function(e,t,r){this.obj=e;this.attr=t;this.meta=r},setValue:function(e){this.obj[this.attr]=e},getValue:function(){return this.obj[this.attr]},getMeta:function(){return this.meta},toString:function(){return JSON.stringify(this)}});module.exports=n},{"../ext/Class":2}],383:[function(e,module,t){var r=e("lodash.uniq");var n={capitalize:function(e){return e&&e[0].toUpperCase()+e.slice(1)},createFnPrefix:function(e,t){return function(r){var n=t&&r==null?null:e+r;return n}},createFnSuffix:function(e,t){return function(r){var n=t&&r==null?null:r+e;return n}},extractAllRegexMatches:function(e,t,n){var a;var i=[];while((a=e.exec(t))!=null){i.push(a[n])}i=r(i);return i},parseAffixFn:function(e){var t;var r=e==null||e===""?"-":e.charAt(0);var n=r==="^"||r==="$"?e.slice(1):e;switch(r){case"^":t=function(e){return n+e};break;case"$":t=function(e){return e+n};break;default:t=function(e){return e}}return t}};module.exports=n},{"lodash.uniq":724}],384:[function(e,module,t){var r={visitDepthFirst:function(e,t,n){var a=n(e);if(a){var i=t(e);i.forEach(function(e){r.visitDepthFirst(e,t,n)})}},flattenTree:function(e,t,r){if(r==null){r=[]}if(e){r.push(e)}var n=e[t];var a=this;if(n){n.forEach(function(e){a.flattenTree(e,t,r)})}return r}};module.exports=r},{}],385:[function(e,module,t){var r={isValidUri:function(e){var t=true;t=t&&e.indexOf(" ")<0;t=t&&e.indexOf("<")<0;t=t&&e.indexOf(">")<0;return t},extractLabel:function(e){var t=e.lastIndexOf("#");var r=e.lastIndexOf("/");var n=Math.max(t,r);var a=n===e.length?e:e.substring(n+1);if(a===""){a=e}return a}};module.exports=r},{}],386:[function(e,module,t){var r=e("../../ext/Class");var n=e("../ObjectUtils");var a=e("../ArrayUtils");var i=r.create({initialize:function(e,t){this.items=e||[];this.fnEquals=t||n.isEqual},setItems:function(e){this.items=e},getArray:function(){return this.items},get:function(e){var t=this.items[e];return t},add:function(e){this.items.push(e)},indexesOf:function(e){var t=a.indexesOf(this.items,e,this.fnEquals);return t},contains:function(e){var t=a.contains(this.items,e,this.fnEquals);return t},firstIndexOf:function(e){var t=a.firstIndexOf(this.items,e,this.fnEquals);return t},lastIndexOf:function(e){var t=this.indexesOf(e);var r=t.length>0?t[t.length-1]:-1;return r},remove:function(e){a.removeItem(this.items,e,this.fnEquals)},size:function(){return this.items.length}});module.exports=i},{"../../ext/Class":2,"../ArrayUtils":368,"../ObjectUtils":376}],387:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(e,t){this.key=e;this.value=t},getKey:function(){return this.key},getValue:function(){return this.value},toString:function(){return this.key+"->"+this.value}});module.exports=n},{"../../ext/Class":2}],388:[function(e,module,t){var r=e("../../ext/Class");var n=e("./HashMap");var a=r.create({initialize:function(e,t,r){this.forward=new n(e,t);this.inverse=r?r:new a(e,t,this)},getInverse:function(){return this.inverse},put:function(e,t){this.remove(e);this.forward.put(e,t);this.inverse.forward.put(t,e)},remove:function(e){var t=this.get(e);if(t!==null){this.inverse.forward.remove(t)}this.forward.remove(e)},getMap:function(){return this.forward},get:function(e){var t=this.forward.get(e);return t},keyList:function(){var e=this.forward.keys();return e}});module.exports=a},{"../../ext/Class":2,"./HashMap":389}],389:[function(e,module,t){var r=e("lodash.foreach");var n=e("../../ext/Class");var a=e("./../ObjectUtils");var i=n.create({initialize:function(e,t){this.fnEquals=e?e:a.isEqual;this.fnHash=t?t:a.defaultHashCode;this.hashToBucket={};var r=this;this.fnGet=function(e){var t=r.get(e);return t}},hashCode:function(){var e=this;var t=function(t){var r=e.fnHash(t);if(r==null){r=3}else if(a.isString(r)){r=a.hashCodeStr(r)}return r};if(this.hash==null){var r=this.entries();var n=0;r.forEach(function(e){var r=t(e.key);var a=t(e.val);n+=19*r+7919*a});this.hash=n}return this.hash},equals:function(e){throw new Error("Not implemented yet")},clear:function(){this.hashToBucket={};this.hash=null},putEntry:function(e){this.put(e.key,e.val)},putEntries:function(e){var t=this;e.forEach(function(e){t.putEntry(e)});return this},putAll:function(e){return this.putMap(e)},putMap:function(e){var t=e.entries();var r=this.putEntries(t);return r},getOrCreate:function(e,t){var r;var n=this.containsKey(e);if(!n){this.put(e,t);r=t}else{r=this.get(e)}return r},put:function(e,t){this.hash=null;var r=this.fnHash(e);var n=this.hashToBucket[r];if(n==null){n=[];this.hashToBucket[r]=n}var a=this._indexOfKey(n,e);if(a>=0){n[a].val=t;return}var i={key:e,val:t};n.push(i)},_indexOfKey:function(e,t){if(e!=null){for(var r=0;r<e.length;++r){var n=e[r];var a=n.key;if(this.fnEquals(a,t)){return r}}}return-1},get:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var n=this._indexOfKey(r,e);var a=n>=0?r[n].val:null;return a},remove:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var n=this._indexOfKey(r,e);var a=n>=0;if(a){this.hash=null;r.splice(n,1);if(r.length===0){delete this.hashToBucket[t]}}return a},containsKey:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var n=this._indexOfKey(r,e)>=0;return n},keys:function(){var e=[];r(this.hashToBucket,function(t){var r=[];t.forEach(function(e){if(e.key){r.push(e.key)}});e.push.apply(e,r)});return e},values:function(){var e=this.entries();var t=e.map(function(e){return e.val});return t},entries:function(){var e=[];r(this.hashToBucket,function(t){e.push.apply(e,t)});return e},forEach:function(e){var t=this.entries();t.forEach(function(t){e(t.val,t.key)})},toString:function(){var e=this.entries();var t=e.map(function(e){return e.key+": "+e.val});var r="{"+t.join(", ")+"}";return r},asFn:function(){return this.fnGet},size:function(){var e=this.entries();var t=e.length;return t},isEmpty:function(){var e=this.size();var t=e===0;return t}});module.exports=i},{"../../ext/Class":2,"./../ObjectUtils":376,"lodash.foreach":577}],390:[function(e,module,t){var r=e("../../ext/Class");var n=e("./HashMap");var a=r.create({initialize:function(e,t){this._map=new n(e,t)},isEmpty:function(){var e=this._map.isEmpty();return e},add:function(e){this._map.put(e,true)},hashCode:function(){var e=this._map.hashCode();return e},equals:function(e){var t=e!=null&&e._map!=null&&this._map.equals(e._map);return t},contains:function(e){var t=this._map.containsKey(e);return t},forEach:function(e){var t=this.entries();t.forEach(e)},map:function(e){var t=this.entries();var r=t.map(e);return r},retainAll:function(e){var t=this;this.forEach(function(r){var n=e.contains(r);if(!n){t.remove(r)}})},addAll:function(e){var t=this;e.forEach(function(e){t.add(e)})},removeAll:function(e){var t=this;e.forEach(function(e){t.remove(e)})},remove:function(e){this._map.remove(e)},entries:function(){var e=this._map.entries().map(function(e){return e.key});return e},clear:function(){this._map.clear()},toString:function(){var e=this.entries();var t="{"+e.join(", ")+"}";return t},size:function(){var e=this._map.size();return e}});module.exports=a},{"../../ext/Class":2,"./HashMap":389}],391:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({next:function(){throw new Error("Not overridden")},hasNext:function(){throw new Error("Not overridden")}});module.exports=n},{"../../ext/Class":2}],392:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Iterator");var a=r.create(n,{initialize:function(){this.current=null;this.advance=true;this.finished=false},finish:function(){this.finished=true;this.close();return null},$prefetch:function(){this.current=this.prefetch()},hasNext:function(){if(this.advance){this.$prefetch();this.advance=false}return this.finished===false},next:function(){if(this.finished){throw new Error("No more elments")}if(this.advance){this.$prefetch()}this.advance=true;return this.current},prefetch:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2,"./Iterator":391}],393:[function(e,module,t){var r=e("../../ext/Class");var n=e("./Iterator");var a=r.create(n,{initialize:function(e,t){this.array=e;this.offset=t?t:0},getArray:function(){return this.array},hasNext:function(){var e=this.offset<this.array.length;return e},next:function(){var e=this.hasNext();var t;if(e){t=this.array[this.offset];++this.offset}else{t=null}return t}});module.exports=a},{"../../ext/Class":2,"./Iterator":391}],394:[function(e,module,t){var r=e("../../ext/Class");var n=e("./HashMap");var a=r.create({initialize:function(e,t){this.map=new n(e,t);this.keys=[]},put:function(e,t){var r=this.map.get(e);if(r){throw new Error("Key "+e+" already inserted")}this.keys.push(e);this.map.put(e,t)},get:function(e){var t=this.map.get(e);return t},getByIndex:function(e){var t=this.keys[e];var r=this.map.get(t);return r},entries:function(){var e=this;var t=this.keys.map(function(t){var r=e.map.get(t);var n={key:t,val:r};return n});return t},remove:function(e){for(var t=0;t<this.keys.length;t++){var r=this.keys[t];if(r===e){this.keys.splice(t,1);break}}this.map.remove(e)},removeByIndex:function(e){var t=this.keys[e];this.remove(t)},keyList:function(){return this.keys},size:function(){return this.keys.length}});module.exports=a},{"../../ext/Class":2,"./HashMap":389}],395:[function(e,module,t){var r=e("../../ext/Class");var n=e("./HashSet");var a=e("../ArrayUtils");var i=r.create({initialize:function(e){this.subMaps=e},get:function(e){var t=a.find(this.subMaps,function(t){var r=t.containsKey(e);return r});var r=t?t.get(e):null;return r},containsKey:function(e){var t=this.subMaps.some(function(t){var r=t.containsKey(e);return r});return t},entries:function(){var e=new n;var t=[];this.subMaps.forEach(function(r){var n=r.entries();n.forEach(function(r){var n=r.key;var a=e.contains(n);if(!a){e.add(n);t.push(r)}})});return t}});module.exports=i},{"../../ext/Class":2,"../ArrayUtils":368,"./HashSet":390}],396:[function(e,module,t){var r=e("../../ext/Class");var n=r.create({initialize:function(){this.entries={}},clone:function(){var e=new n;e.addMultiMap(this);return e},clear:function(){var e=Object.keys(this.entries);var t=this;e.forEach(function(e){delete t.entries[e]})},addMultiMap:function(e){for(var t in e.entries){var r=e.entries[t];for(var n=0;n<r.length;++n){var a=r[n];this.put(t,a)}}},get:function(e){return e in this.entries?this.entries[e]:[]},put:function(e,t){var r;if(e in this.entries){r=this.entries[e]}else{r=[];this.entries[e]=r}r.push(t)},removeKey:function(e){delete this.entries[e]}});module.exports=n},{"../../ext/Class":2}],397:[function(e,module,t){"use strict";var r={ArrayUtils:e("./ArrayUtils"),ExceptionUtils:e("./ExceptionUtils"),CacheUtils:e("./CacheUtils"),ClusterUtils:e("./ClusterUtils"),CollectionUtils:e("./CollectionUtils"),JsonUtils:e("./JsonUtils"),MapUtils:e("./MapUtils"),ObjectUtils:e("./ObjectUtils"),PrefixUtils:e("./PrefixUtils"),PromiseUtils:e("./PromiseUtils"),SerializationContext:e("./SerializationContext"),Serializer:e("./Serializer"),SetUtils:e("./SetUtils"),StringUtils:e("./StringUtils"),TreeUtils:e("./TreeUtils"),UriUtils:e("./UriUtils"),shared:e("./shared"),ArrayList:e("./collection/ArrayList"),Entry:e("./collection/Entry"),HashBidiMap:e("./collection/HashBidiMap"),HashMap:e("./collection/HashMap"),HashSet:e("./collection/HashSet"),Iterator:e("./collection/Iterator"),IteratorAbstract:e("./collection/IteratorAbstract"),IteratorArray:e("./collection/IteratorArray"),ListMap:e("./collection/ListMap"),MapUnion:e("./collection/MapUnion"),MultiMapObjectArray:e("./collection/MultiMapObjectArray"),AjaxUtils:e("./AjaxUtils")};module.exports=r},{"./AjaxUtils":367,"./ArrayUtils":368,"./CacheUtils":369,"./ClusterUtils":370,"./CollectionUtils":371,"./ExceptionUtils":373,"./JsonUtils":374,"./MapUtils":375,"./ObjectUtils":376,"./PrefixUtils":377,"./PromiseUtils":378,"./SerializationContext":379,"./Serializer":380,"./SetUtils":381,"./StringUtils":383,"./TreeUtils":384,"./UriUtils":385,"./collection/ArrayList":386,"./collection/Entry":387,"./collection/HashBidiMap":388,"./collection/HashMap":389,"./collection/HashSet":390,"./collection/Iterator":391,"./collection/IteratorAbstract":392,"./collection/IteratorArray":393,"./collection/ListMap":394,"./collection/MapUnion":395,"./collection/MultiMapObjectArray":396,"./shared":398}],398:[function(e,module,t){var r={Promise:null,ajax:function(){throw new Error("not set!")}};module.exports=r},{}],399:[function(e,module,t){var r={dcat:"http://www.w3.org/ns/dcat#",qb:"http://purl.org/linked-data/cube#",grddl:"http://www.w3.org/2003/g/data-view#",ma:"http://www.w3.org/ns/ma-ont#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",sd:"http://www.w3.org/ns/sparql-service-description#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",wdr:"http://www.w3.org/2007/05/powder#","void":"http://rdfs.org/ns/void#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",gldp:"http://www.w3.org/ns/people#",cnt:"http://www.w3.org/2008/content#",earl:"http://www.w3.org/ns/earl#",ht:"http://www.w3.org/2006/http#",ptr:"http://www.w3.org/2009/pointers#",cc:"http://creativecommons.org/ns#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dcterms:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",foaf:"http://xmlns.com/foaf/0.1/",gr:"http://purl.org/goodrelations/v1#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",og:"http://ogp.me/ns#",rev:"http://purl.org/stuff/rev#",sioc:"http://rdfs.org/sioc/ns#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",schema:"http://schema.org/"};module.exports=r},{}],400:[function(e,module,t){"use strict";var r={owl:e("./owl"),rdf:e("./rdf"),rdfs:e("./rdfs"),wgs84:e("./wgs84"),xsd:e("./xsd"),InitialContext:e("./InitialContext")};module.exports=r},{"./InitialContext":399,"./owl":401,"./rdf":402,"./rdfs":403,"./wgs84":404,"./xsd":405}],401:[function(e,module,t){var r=e("../rdf/NodeFactory");var n="http://www.w3.org/2002/07/owl#";var a={Class:r.createUri(n+"Class"),DatatypeProperty:r.createUri(n+"DatatypeProperty"),ObjectProperty:r.createUri(n+"ObjectProperty"),AnnotationProperty:r.createUri(n+"AnnotationProperty")};module.exports=a},{"../rdf/NodeFactory":99}],402:[function(e,module,t){var r=e("../rdf/NodeFactory");var n="http://www.w3.org/1999/02/22-rdf-syntax-ns#";var a={type:r.createUri(n+"type"),Property:r.createUri(n+"Property")};module.exports=a},{"../rdf/NodeFactory":99}],403:[function(e,module,t){var r=e("../rdf/NodeFactory");var n="http://www.w3.org/2000/01/rdf-schema#";var a={label:r.createUri(n+"label"),comment:r.createUri(n+"comment"),subClassOf:r.createUri(n+"subClassOf")};module.exports=a},{"../rdf/NodeFactory":99}],404:[function(e,module,t){var r=e("../rdf/NodeFactory");var n="http://www.w3.org/2003/01/geo/wgs84_pos#";var a={lon:r.createUri(n+"long"),lat:r.createUri(n+"lat")};module.exports=a},{"../rdf/NodeFactory":99}],405:[function(e,module,t){var r="http://www.w3.org/2001/XMLSchema#";var n=e("../rdf/node/Node_Uri");var a={xboolean:new n(r+"boolean"),xint:new n(r+"int"),xinteger:new n(r+"integer"),xlong:new n(r+"long"),decimal:new n(r+"decimal"),xfloat:new n(r+"float"),xdouble:new n(r+"double"),xstring:new n(r+"string"),date:new n(r+"date"),dateTime:new n(r+"dateTime")};module.exports=a},{"../rdf/node/Node_Uri":117}],406:[function(e,module,t){"use strict";module.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e);var n=r.promise();if(n.isRejected()){return n}r.setHowMany(1);r.setUnwrap();r.init();return n}e.any=function(e){return r(e)};e.prototype.any=function(){return r(this)}}},{}],407:[function(e,module,t){(function(t){"use strict";var r=new Error;var n=e("./schedule.js");var a=e("./queue.js");var i=typeof t!=="undefined"?t:undefined;function s(){this._isTickUsed=false;this._lateQueue=new a(16);this._normalQueue=new a(16);var e=this;this.drainQueues=function(){e._drainQueues()};this._schedule=n.isStatic?n(this.drainQueues):n}s.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0};s.prototype._withDomain=function(e){if(i!==undefined&&i.domain!=null&&!e.domain){e=i.domain.bind(e)}return e};s.prototype.throwLater=function(e,t){if(arguments.length===1){t=e;e=function(){throw t}}e=this._withDomain(e);if(typeof setTimeout!=="undefined"){setTimeout(function(){e(t)},0)}else try{this._schedule(function(){e(t)})}catch(r){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}};s.prototype.invokeLater=function(e,t,r){e=this._withDomain(e);this._lateQueue.push(e,t,r);this._queueTick()};s.prototype.invokeFirst=function(e,t,r){e=this._withDomain(e);this._normalQueue.unshift(e,t,r);this._queueTick()};s.prototype.invoke=function(e,t,r){e=this._withDomain(e);this._normalQueue.push(e,t,r);this._queueTick()};s.prototype.settlePromises=function(e){this._normalQueue._pushOne(e);this._queueTick()};s.prototype._drainQueue=function(e){while(e.length()>0){var t=e.shift();if(typeof t!=="function"){t._settlePromises();continue}var r=e.shift();var n=e.shift();t.call(r,n)}};s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._drainQueue(this._lateQueue)};s.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};s.prototype._reset=function(){this._isTickUsed=false};module.exports=new s;module.exports.firstLineError=r}).call(this,e("_process"))},{"./queue.js":430,"./schedule.js":433,_process:441}],408:[function(e,module,t){"use strict";var r;if(typeof Promise!=="undefined")r=Promise;function n(e){try{if(Promise===e)Promise=r}catch(t){}return e}module.exports=e("./promise.js")();module.exports.noConflict=n},{"./promise.js":425}],409:[function(e,module,t){"use strict";var r=Object.create;if(r){var n=r(null);var a=r(null);n[" size"]=a[" size"]=0}module.exports=function(t){var r=e("./util.js");var i=r.canEvaluate;var s=r.isIdentifier;function o(e){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,e))}function l(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))}function u(e,t,r){var n=r[e];if(typeof n!=="function"){if(!s(e)){return null}n=t(e);r[e]=n;r[" size"]++;if(r[" size"]>512){var a=Object.keys(r);for(var i=0;i<256;++i)delete r[a[i]];r[" size"]=a.length-256}}return n}function c(e){return u(e,o,n)}function d(e){return u(e,l,a)}function f(e){return e[this.pop()].apply(e,this)}t.prototype.call=function(e){var t=arguments.length;var r=new Array(t-1);for(var n=1;n<t;++n){r[n-1]=arguments[n]}if(i){var a=c(e);if(a!==null){return this._then(a,undefined,undefined,r,undefined)}}r.push(e);return this._then(f,undefined,undefined,r,undefined)};function p(e){return e[this]}function h(e){var t=+this;if(t<0)t=Math.max(0,t+e.length);return e[t]}t.prototype.get=function(e){var t=typeof e==="number";var r;if(!t){if(i){var n=d(e);r=n!==null?n:p}else{r=p}}else{r=h}return this._then(r,undefined,undefined,e,undefined)}}},{"./util.js":440}],410:[function(e,module,t){"use strict";module.exports=function(t,r){var n=e("./errors.js");var a=n.canAttachTrace;var i=e("./async.js");var s=e("./util.js");var o=n.CancellationError;t.prototype._cancel=function(e){if(!this.isCancellable())return this;var t;var r=this;while((t=r._cancellationParent)!==undefined&&t.isCancellable()){r=t}this._unsetCancellable();var n=a(e)?e:new Error(s.toString(e));r._attachExtraTrace(n);r._target()._rejectUnchecked(e,n)};t.prototype.cancel=function(e){if(!this.isCancellable())return this;if(e===undefined)e=new o;i.invokeLater(this._cancel,this,e);return this};t.prototype.cancellable=function(){if(this._cancellable())return this;this._setCancellable();this._cancellationParent=undefined;return this};t.prototype.uncancellable=function(){var e=new t(r);e._propagateFrom(this,2|4);e._follow(this);e._unsetCancellable();return e};t.prototype.fork=function(e,t,r){var n=this._then(e,t,r,undefined,undefined);n._setCancellable();n._cancellationParent=undefined;return n}}},{"./async.js":407,"./errors.js":415,"./util.js":440}],411:[function(e,module,t){"use strict";module.exports=function(){var t=e("./util.js").inherits;var r=e("./es5.js").defineProperty;var n=null;var a=null;function i(e){this._parent=e;d(this,i)}t(i,Error);i.prototype.parent=function(){return this._parent};i.prototype.setParent=function(e){if(e===this)return;this._parent=e};i.prototype.hasParent=function(){return this._parent!==undefined};i.prototype.attachExtraTrace=function(e){var t=this;var r=e.stack;r=typeof r==="string"?r.split("\n"):[];this.protectErrorMessageNewlines(r);var n=1;var a=1;do{r=t.combine(r);a++}while((t=t.parent())!=null);var i=Error.stackTraceLimit||10;var s=(i+n)*a;var o=r.length;if(o>s){r.length=s}if(o>0)r[0]=r[0].split("\x00").join("\n");if(r.length<=n){e.stack="(No stack trace)"}else{e.stack=r.join("\n")}};i.prototype.combine=function(e){var t=this.stack.split("\n");var r=e.length-1;var a=e[r];var i=-1;for(var s=t.length-1;s>=0;--s){if(t[s]===a){i=s;break}}for(var s=i;s>=0;--s){var o=t[s];if(e[r]===o){e.pop();r--}else{break}}e.push("From previous event:");var u=e.concat(t);var c=[];for(var s=0,d=u.length;s<d;++s){if(n.test(u[s])&&l(u[s])||s>0&&!n.test(u[s])&&u[s]!=="From previous event:"){continue}c.push(u[s])}return c};i.prototype.protectErrorMessageNewlines=function(e){for(var t=0;t<e.length;++t){if(n.test(e[t])){break}}if(t<=1)return;var r=[];for(var a=0;a<t;++a){r.push(e.shift())}e.unshift(r.join("\x00"))};i.formatAndLogError=function(e,t){if(typeof console==="object"){var r;if(typeof e==="object"||typeof e==="function"){var n=e.stack;r=t+a(n,e)}else{r=t+String(e)}if(typeof console.warn==="function"||typeof console.warn==="object"){console.warn(r)}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(r)}}};i.unhandledRejection=function(e){i.formatAndLogError(e,"^--- With additional stack trace: ")};i.possiblyUnhandledRejection=function(e){i.formatAndLogError(e,"Possibly unhandled ")};i.isSupported=function(){return typeof d==="function"};function s(e){var t;if(typeof e==="function"){t="[function "+(e.name||"anonymous")+"]"}else{t=e.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t)){try{var n=JSON.stringify(e);t=n}catch(a){}}if(t.length===0){t="(empty array)"}}return"(<"+o(t)+">, no stack trace)"}function o(e){var t=41;if(e.length<t){return e}return e.substr(0,t-3)+"..."}var l=function(){return false};var u=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function c(e){var t=e.match(u);if(t){return{fileName:t[1],line:parseInt(t[2],10)}}}i.setBounds=function(e,t){if(!i.isSupported())return;var r=e.stack.split("\n");var n=t.stack.split("\n");var a=-1;var s=-1;var o;var u;for(var d=0;d<r.length;++d){var f=c(r[d]);if(f){o=f.fileName;a=f.line;break}}for(var d=0;d<n.length;++d){var f=c(n[d]);if(f){u=f.fileName;s=f.line;break}}if(a<0||s<0||!o||!u||o!==u||a>=s){return}l=function(e){var t=c(e);if(t){if(t.fileName===o&&(a<=t.line&&t.line<=s)){return true}}return false}};var d=function f(){if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){n=/^\s*at\s*/;a=function(e,t){if(typeof e==="string")return e;if(t.name!==undefined&&t.message!==undefined){return t.name+". "+t.message}return s(t)};var e=Error.captureStackTrace;var t=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo)/;l=function(e){return t.test(e)};return function(t,r){e(t,r)}}var i=new Error;if(typeof i.stack==="string"&&typeof"".startsWith==="function"&&i.stack.startsWith("stackDetection@")&&f.name==="stackDetection"){r(Error,"stackTraceLimit",{writable:true,enumerable:false,configurable:false,value:25});n=/@/;var o=/[@\n]/;a=function(e,t){if(typeof e==="string"){return t.name+". "+t.message+"\n"+e}if(t.name!==undefined&&t.message!==undefined){return t.name+". "+t.message}return s(t)};return function u(e){var t=(new Error).stack;var r=t.split(o);var n=r.length;var a="";for(var i=0;i<n;i+=2){a+=r[i];a+="@";a+=r[i+1];a+="\n"}e.stack=a}}else{a=function(e,t){if(typeof e==="string")return e;
if((typeof t==="object"||typeof t==="function")&&t.name!==undefined&&t.message!==undefined){return t.name+". "+t.message}return s(t)};return null}}();return i}},{"./es5.js":417,"./util.js":440}],412:[function(e,module,t){"use strict";module.exports=function(t){var r=e("./util.js");var n=e("./errors.js");var a=r.tryCatch1;var i=r.errorObj;var s=e("./es5.js").keys;var o=n.TypeError;function l(e,t,r){this._instances=e;this._callback=t;this._promise=r}function u(e,t){var r={};var n=a(e,r,t);if(n===i)return n;var l=s(r);if(l.length){i.e=new o("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");return i}return n}l.prototype.doFilter=function(e){var s=this._callback;var o=this._promise;var l=o._boundTo;for(var c=0,d=this._instances.length;c<d;++c){var f=this._instances[c];var p=f===Error||f!=null&&f.prototype instanceof Error;if(p&&e instanceof f){var h=a(s,l,e);if(h===i){t.e=h.e;return t}return h}else if(typeof f==="function"&&!p){var v=u(f,e);if(v===i){var g=n.canAttachTrace(i.e)?i.e:new Error(r.toString(i.e));this._promise._attachExtraTrace(g);e=i.e;break}else if(v){var h=a(s,l,e);if(h===i){t.e=h.e;return t}return h}}}t.e=e;return t};return l}},{"./errors.js":415,"./es5.js":417,"./util.js":440}],413:[function(e,module,t){"use strict";var r=e("./util.js");var n=r.isPrimitive;var a=r.wrapsPrimitiveReceiver;module.exports=function(e){var t=function(){return this};var r=function(){throw this};var i=function(e,t){if(t===1){return function(){throw e}}else if(t===2){return function(){return e}}};e.prototype["return"]=e.prototype.thenReturn=function(e){if(a&&n(e)){return this._then(i(e,2),undefined,undefined,undefined,undefined)}return this._then(t,undefined,undefined,e,undefined)};e.prototype["throw"]=e.prototype.thenThrow=function(e){if(a&&n(e)){return this._then(i(e,1),undefined,undefined,undefined,undefined)}return this._then(r,undefined,undefined,e,undefined)}}},{"./util.js":440}],414:[function(e,module,t){"use strict";module.exports=function(e,t){var r=e.reduce;e.prototype.each=function(e){return r(this,e,null,t)};e.each=function(e,n){return r(e,n,null,t)}}},{}],415:[function(e,module,t){"use strict";var r=e("./es5.js").freeze;var n=e("./es5.js").propertyIsWritable;var a=e("./util.js");var i=a.inherits;var s=a.notEnumerableProp;function o(e){try{s(e,"isOperational",true)}catch(t){}}function l(e){if(e==null)return false;return e instanceof y||e["isOperational"]===true}function u(e){return e instanceof Error}function c(e){return u(e)&&n(e,"stack")}function d(e,t){function r(n){if(!(this instanceof r))return new r(n);s(this,"message",typeof n==="string"?n:t);s(this,"name",e);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}i(r,Error);return r}var f,p;var h=d("CancellationError","cancellation error");var v=d("TimeoutError","timeout error");var g=d("AggregateError","aggregate error");try{f=TypeError;p=RangeError}catch(m){f=d("TypeError","type error");p=d("RangeError","range error")}var _=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var x=0;x<_.length;++x){if(typeof Array.prototype[_[x]]==="function"){g.prototype[_[x]]=Array.prototype[_[x]]}}g.prototype.length=0;g.prototype["isOperational"]=true;var b=0;g.prototype.toString=function(){var e=Array(b*4+1).join(" ");var t="\n"+e+"AggregateError of:"+"\n";b++;e=Array(b*4+1).join(" ");for(var r=0;r<this.length;++r){var n=this[r]===this?"[Circular AggregateError]":this[r]+"";var a=n.split("\n");for(var i=0;i<a.length;++i){a[i]=e+a[i]}n=a.join("\n");t+=n+"\n"}b--;return t};function y(e){s(this,"name","OperationalError");s(this,"message",e);this.cause=e;this["isOperational"]=true;if(e instanceof Error){s(this,"message",e.message);s(this,"stack",e.stack)}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}i(y,Error);var S="__BluebirdErrorTypes__";var w=Error[S];if(!w){w=r({CancellationError:h,TimeoutError:v,OperationalError:y,RejectionError:y,AggregateError:g});s(Error,S,w)}module.exports={Error:Error,TypeError:f,RangeError:p,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,originatesFromRejection:l,markAsOriginatingFromRejection:o,canAttachTrace:c}},{"./es5.js":417,"./util.js":440}],416:[function(e,module,t){"use strict";module.exports=function(t){var r=e("./errors.js").TypeError;function n(e){var n=new r(e);var a=t.rejected(n);var i=a._peekContext();if(i!=null){i.attachExtraTrace(n)}return a}return n}},{"./errors.js":415}],417:[function(e,module,t){var r=function(){"use strict";return this===undefined}();if(r){module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!!(!r||r.writable||r.set)}}}else{var n={}.hasOwnProperty;var a={}.toString;var i={}.constructor.prototype;var s=function(e){var t=[];for(var r in e){if(n.call(e,r)){t.push(r)}}return t};var o=function(e,t,r){e[t]=r.value;return e};var l=function(e){return e};var u=function(e){try{return Object(e).constructor.prototype}catch(t){return i}};var c=function(e){try{return a.call(e)==="[object Array]"}catch(t){return false}};module.exports={isArray:c,keys:s,defineProperty:o,freeze:l,getPrototypeOf:u,isES5:r,propertyIsWritable:function(){return true}}}},{}],418:[function(e,module,t){"use strict";module.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)};e.filter=function(e,n,a){return r(e,n,a,t)}}},{}],419:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./util.js");var i=a.wrapsPrimitiveReceiver;var s=a.isPrimitive;var o=a.thrower;function l(){return this}function u(){throw this}function c(e){return function(){return e}}function d(e){return function(){throw e}}function f(e,t,r){var n;if(i&&s(t)){n=r?c(t):d(t)}else{n=r?l:u}return e._then(n,o,undefined,t,undefined)}function p(e){var a=this.promise;var i=this.handler;var s=a._isBound()?i.call(a._boundTo):i();if(s!==undefined){var o=n(s,undefined);if(o instanceof t){o=o._target();return f(o,e,a.isFulfilled())}}if(a.isRejected()){r.e=e;return r}else{return e}}function h(e){var r=this.promise;var a=this.handler;var i=r._isBound()?a.call(r._boundTo,e):a(e);if(i!==undefined){var s=n(i,undefined);if(s instanceof t){s=s._target();return f(s,e,true)}}return e}t.prototype._passThroughHandler=function(e,t){if(typeof e!=="function")return this.then();var r={promise:this,handler:e};return this._then(t?p:h,t?p:undefined,undefined,r,undefined)};t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThroughHandler(e,true)};t.prototype.tap=function(e){return this._passThroughHandler(e,false)}}},{"./util.js":440}],420:[function(e,module,t){"use strict";module.exports=function(t,r,n,a){var i=e("./errors.js");var s=i.TypeError;var o=e("./util.js").deprecated;var l=e("./util.js");var u=l.errorObj;var c=l.tryCatch1;var d=[];function f(e,r,n){var i=u;var s=t;var o=r.length;for(var l=0;l<o;++l){var d=c(r[l],undefined,e);if(d===i){return s.reject(i.e)}var f=a(d,n);if(f instanceof s)return f}return null}function p(e,r,a){var i=this._promise=new t(n);i._setTrace(undefined);this._generatorFunction=e;this._receiver=r;this._generator=undefined;this._yieldHandlers=typeof a==="function"?[a].concat(d):d}p.prototype.promise=function(){return this._promise};p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._next(undefined)};p.prototype._continue=function(e){if(e===u){this._generator=undefined;var r=i.canAttachTrace(e.e)?e.e:new Error(l.toString(e.e));this._promise._attachExtraTrace(r);this._promise._reject(e.e,r);return}var n=e.value;if(e.done===true){this._generator=undefined;if(!this._promise._tryFollow(n)){this._promise._fulfill(n)}}else{var o=a(n,this._promise);if(!(o instanceof t)){o=f(o,this._yieldHandlers,this._promise);if(o===null){this._throw(new s("A value was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n"));return}}o._then(this._next,this._throw,undefined,this,null)}};p.prototype._throw=function(e){if(i.canAttachTrace(e))this._promise._attachExtraTrace(e);this._continue(c(this._generator["throw"],this._generator,e))};p.prototype._next=function(e){this._continue(c(this._generator.next,this._generator,e))};t.coroutine=function(e,t){if(typeof e!=="function"){throw new s("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n")}var r=Object(t).yieldHandler;var n=p;return function(){var t=e.apply(this,arguments);var a=new n(undefined,undefined,r);a._generator=t;a._next(undefined);return a.promise()}};t.coroutine.addYieldHandler=function(e){if(typeof e!=="function")throw new s("fn must be a function\n\n    See http://goo.gl/916lJJ\n");d.push(e)};t.spawn=function(e){o("Promise.spawn is deprecated. Use Promise.coroutine instead.");if(typeof e!=="function"){return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n")}var n=new p(e,this);var a=n.promise();n._run(t.spawn);return a}}},{"./errors.js":415,"./util.js":440}],421:[function(e,module,t){"use strict";module.exports=function(t,r,n,a){var i=e("./util.js");var s=i.canEvaluate;var o=i.tryCatch1;var l=i.errorObj;if(s){var u=function(e){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,e))};var c=function(e){var t=[];for(var r=1;r<=e;++r)t.push("holder.p"+r);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,t.join(", ")))};var d=[];var f=[undefined];for(var p=1;p<=5;++p){d.push(u(p));f.push(c(p))}var h=function(e,t){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=t;this.total=e;this.now=0};h.prototype.callers=f;h.prototype.checkFulfillment=function(e){var t=this.now;t++;var r=this.total;if(t>=r){var n=this.callers[r];var a=o(n,undefined,this);if(a===l){e._rejectUnchecked(a.e)}else if(!e._tryFollow(a)){e._fulfillUnchecked(a)}}else{this.now=t}}}function v(e){this._reject(e)}t.join=function(){var e=arguments.length-1;var i;if(e>0&&typeof arguments[e]==="function"){i=arguments[e];if(e<6&&s){var o=new t(a);o._setTrace(undefined);var l=new h(e,i);var u=d;for(var c=0;c<e;++c){var f=n(arguments[c],undefined);if(f instanceof t){f=f._target();if(f._isPending()){f._then(u[c],v,undefined,o,l)}else if(f._isFulfilled()){u[c].call(o,f._value(),l)}else{o._reject(f._reason());f._unsetRejectionIsUnhandled()}}else{u[c].call(o,f,l)}}return o}}var p=arguments.length;var g=new Array(p);for(var m=0;m<p;++m){g[m]=arguments[m]}var o=new r(g).promise();return i!==undefined?o.spread(i):o}}},{"./util.js":440}],422:[function(e,module,t){"use strict";module.exports=function(t,r,n,a,i){var s=e("./util.js");var o=s.tryCatch3;var l=s.errorObj;var u={};var c=[];function d(e,t,r,n){this.constructor$(e);this._promise._setIsSpreadable();this._callback=t;this._preservedValues=n===i?new Array(this.length()):null;this._limit=r;this._inFlight=0;this._queue=r>=1?[]:c;this._init$(undefined,-2)}s.inherits(d,r);d.prototype._init=function(){};d.prototype._promiseFulfilled=function(e,r){var n=this._values;var i=this.length();var s=this._preservedValues;var c=this._limit;if(n[r]===u){n[r]=e;if(c>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return}}else{if(c>=1&&this._inFlight>=c){n[r]=e;this._queue.push(r);return}if(s!==null)s[r]=e;var d=this._callback;var f=this._promise._boundTo;var p=o(d,f,e,r,i);if(p===l)return this._reject(p.e);var h=a(p,this._promise);if(h instanceof t){h=h._target();if(h._isPending()){if(c>=1)this._inFlight++;n[r]=u;return h._proxyPromiseArray(this,r)}else if(h._isFulfilled()){p=h._value()}else{h._unsetRejectionIsUnhandled();return this._reject(h._reason())}}n[r]=p}var v=++this._totalResolved;if(v>=i){if(s!==null){this._filter(n,s)}else{this._resolve(n)}}};d.prototype._drainQueue=function(){var e=this._queue;var t=this._limit;var r=this._values;while(e.length>0&&this._inFlight<t){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}};d.prototype._filter=function(e,t){var r=t.length;var n=new Array(r);var a=0;for(var i=0;i<r;++i){if(e[i])n[a++]=t[i]}n.length=a;this._resolve(n)};d.prototype.preservedValues=function(){return this._preservedValues};function f(e,t,r,n){var a=typeof r==="object"&&r!==null?r.concurrency:0;a=typeof a==="number"&&isFinite(a)&&a>=1?a:0;return new d(e,t,a,n)}t.prototype.map=function(e,t){if(typeof e!=="function")return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return f(this,e,t,null).promise()};t.map=function(e,t,r,a){if(typeof t!=="function")return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return f(e,t,r,a).promise()}}},{"./util.js":440}],423:[function(e,module,t){"use strict";module.exports=function(t){var r=e("./util.js");var n=e("./async.js");var a=r.tryCatch2;var i=r.tryCatch1;var s=r.errorObj;function o(e,t){if(!r.isArray(e))return l(e,t);var a=r.tryCatchApply(this,[null].concat(e),t);if(a===s){n.throwLater(a.e)}}function l(e,t){var r=this;var o=e===undefined?i(r,t,null):a(r,t,null,e);if(o===s){n.throwLater(o.e)}}function u(e,t){var r=this;var a=i(r,t,e);if(a===s){n.throwLater(a.e)}}t.prototype.nodeify=function(e,t){if(typeof e=="function"){var r=l;if(t!==undefined&&Object(t).spread){r=o}this._then(r,u,undefined,e,this._boundTo)}return this}}},{"./async.js":407,"./util.js":440}],424:[function(e,module,t){"use strict";module.exports=function(t,r){var n=e("./util.js");var a=e("./async.js");var i=e("./errors.js");var s=n.tryCatch1;var o=n.errorObj;t.prototype.progressed=function(e){return this._then(undefined,undefined,e,undefined,undefined)};t.prototype._progress=function(e){if(this._isFollowingOrFulfilledOrRejected())return;this._target()._progressUnchecked(e)};t.prototype._progressHandlerAt=function(e){return e===0?this._progressHandler0:this[(e<<2)+e-5+2]};t.prototype._doProgressWith=function(e){var r=e.value;var a=e.handler;var l=e.promise;var u=e.receiver;var c=s(a,u,r);if(c===o){if(c.e!=null&&c.e.name!=="StopProgressPropagation"){var d=i.canAttachTrace(c.e)?c.e:new Error(n.toString(c.e));l._attachExtraTrace(d);l._progress(c.e)}}else if(c instanceof t){c._then(l._progress,null,null,l,undefined)}else{l._progress(c)}};t.prototype._progressUnchecked=function(e){var n=this._length();var i=this._progress;for(var s=0;s<n;s++){var o=this._progressHandlerAt(s);var l=this._promiseAt(s);if(!(l instanceof t)){var u=this._receiverAt(s);if(typeof o==="function"){o.call(u,e,l)}else if(u instanceof r&&!u._isResolved()){u._promiseProgressed(e,l)}continue}if(typeof o==="function"){a.invoke(this._doProgressWith,this,{handler:o,promise:l,receiver:this._receiverAt(s),value:e})}else{a.invoke(i,l,e)}}}}},{"./async.js":407,"./errors.js":415,"./util.js":440}],425:[function(e,module,t){(function(t){"use strict";module.exports=function(){var r=function(){return new y("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")};var n=function(){return new F.PromiseInspection(this._target())};var a=e("./util.js");var i=e("./async.js");var s=e("./errors.js");var o=function(){};var l={};var u={e:null};var c=e("./thenables.js")(F,o);var d=e("./promise_array.js")(F,o,c);var f=e("./captured_trace.js")();var p=e("./catch_filter.js")(u);var h=e("./promise_resolver.js");var v=a.isArray;var g=a.errorObj;var m=a.tryCatch1;var _=a.tryCatch2;var x=a.tryCatchApply;var b=s.RangeError;var y=s.TypeError;var S=s.CancellationError;var w=s.TimeoutError;var C=s.OperationalError;var E=s.originatesFromRejection;var j=s.markAsOriginatingFromRejection;var k=s.canAttachTrace;var L=e("./errors_api_rejection")(F);var q;var T=false||!!(typeof t!=="undefined"&&typeof t.execPath==="string"&&typeof t.env==="object"&&(t.env["BLUEBIRD_DEBUG"]||t.env["NODE_ENV"]==="development"));function F(e){if(typeof e!=="function"){throw new y("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n")}if(this.constructor!==F){throw new y("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n")}this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._progressHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._settledValue=undefined;this._boundTo=undefined;if(e!==o)this._resolveFromResolver(e)}F.prototype.bind=function(e){var t=c(e,this);var r=new F(o);r._propagateFrom(this,2|1);var n=this._target();if(t instanceof F){n._then(o,r._reject,r._progress,r,null);t._then(function(e){if(r._isPending()){r._setBoundTo(e);r._follow(n)}},r._reject,r._progress,r,null)}else{r._setBoundTo(e);r._follow(n)}return r};F.prototype.toString=function(){return"[object Promise]"};F.prototype.caught=F.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var r=new Array(t-1),n=0,a;for(a=0;a<t-1;++a){var i=arguments[a];if(typeof i==="function"){r[n++]=i}else{var s=new y("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");this._attachExtraTrace(s);return F.reject(s)}}r.length=n;e=arguments[a];this._resetTrace();var o=new p(r,e,this);return this._then(undefined,o.doFilter,undefined,o,undefined)}return this._then(undefined,e,undefined,undefined,undefined)};F.prototype.reflect=function(){return this._then(n,n,undefined,this,undefined)};F.prototype.then=function(e,t,r){return this._then(e,t,r,undefined,undefined)};F.prototype.done=function(e,t,r){var n=this._then(e,t,r,undefined,undefined);n._setIsFinal()};F.prototype.spread=function(e,t){var r=this._target();var n=r._isSpreadable()?r===this?this:this.then():this.all();return n._then(e,t,undefined,l,undefined)};F.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()};F.prototype.toJSON=function(){var e={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){e.fulfillmentValue=this.value();e.isFulfilled=true}else if(this.isRejected()){e.rejectionReason=this.reason();e.isRejected=true}return e};F.prototype.all=function(){var e=new d(this).promise();e._setIsSpreadable();return e};F.prototype.error=function(e){return this.caught(E,e)};F.is=function(e){return e instanceof F};F.all=function(e){var t=new d(e).promise();t._setIsSpreadable();return t};F.method=function(e){if(typeof e!=="function"){throw new y("fn must be a function\n\n    See http://goo.gl/916lJJ\n")}return function(){var t;switch(arguments.length){case 0:t=m(e,this,undefined);break;case 1:t=m(e,this,arguments[0]);break;case 2:t=_(e,this,arguments[0],arguments[1]);break;default:var r=arguments.length;var n=new Array(r);for(var a=0;a<r;++a){n[a]=arguments[a]}t=x(e,n,this);break}var i=new F(o);i._setTrace(undefined);i._resolveFromSyncValue(t);return i}};F.attempt=F["try"]=function(e,t,r){if(typeof e!=="function"){return L("fn must be a function\n\n    See http://goo.gl/916lJJ\n")}var n=v(t)?x(e,t,r):m(e,r,t);var a=new F(o);a._setTrace(undefined);a._resolveFromSyncValue(n);return a};F.defer=F.pending=function(){var e=new F(o);e._setTrace(undefined);return new h(e)};F.bind=function(e){var t=c(e,undefined);var r=new F(o);r._setTrace(undefined);if(t instanceof F){t._then(function(e){r._setBoundTo(e);r._fulfill(undefined)},r._reject,r._progress,r,null)}else{r._setBoundTo(e);r._setFulfilled()}return r};F.cast=function(e){var t=c(e,undefined);if(!(t instanceof F)){var r=t;t=new F(o);t._setTrace(undefined);t._setFulfilled();t._settledValue=r;t._cleanValues()}return t};F.resolve=F.fulfilled=F.cast;F.reject=F.rejected=function(e){var t=new F(o);t._setTrace(undefined);j(e);t._setRejected();t._settledValue=e;t._cleanValues();if(!k(e)){var r=new Error(a.toString(e));t._setCarriedStackTrace(r)}t._ensurePossibleRejectionHandled();return t};F.onPossiblyUnhandledRejection=function(e){f.possiblyUnhandledRejection=typeof e==="function"?e:undefined};F.onUnhandledRejectionHandled=function(e){q=typeof e==="function"?e:undefined};F.longStackTraces=function(){if(i.haveItemsQueued()&&T===false){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n")}T=f.isSupported()};F.hasLongStackTraces=function(){return T&&f.isSupported()};F.setScheduler=function(e){if(typeof e!=="function")throw new y("fn must be a function\n\n    See http://goo.gl/916lJJ\n");i._schedule=e};F.prototype._then=function(e,t,r,n,a){var s=a!==undefined;var l=s?a:new F(o);if(!s){l._propagateFrom(this,7)}var u=this._target();if(u!==this){if(n===undefined)n=this._boundTo;if(!s)l._setIsMigrated()}var c=u._addCallbacks(e,t,r,l,n);if(u._isResolved()&&!u._isSettlePromisesQueued()){i.invoke(u._settlePromiseAtPostResolution,u,c)}return l};F.prototype._settlePromiseAtPostResolution=function(e){if(this._isRejectionUnhandled())this._unsetRejectionIsUnhandled();this._settlePromiseAt(e)};F.prototype._length=function(){return this._bitField&131071};F.prototype._isFollowingOrFulfilledOrRejected=function(){return(this._bitField&939524096)>0};F.prototype._isFollowing=function(){return(this._bitField&536870912)===536870912};F.prototype._setLength=function(e){this._bitField=this._bitField&-131072|e&131071};F.prototype._setFulfilled=function(){this._bitField=this._bitField|268435456};F.prototype._setRejected=function(){this._bitField=this._bitField|134217728};F.prototype._setFollowing=function(){this._bitField=this._bitField|536870912};F.prototype._setIsFinal=function(){this._bitField=this._bitField|33554432};F.prototype._isFinal=function(){return(this._bitField&33554432)>0};F.prototype._cancellable=function(){return(this._bitField&67108864)>0};F.prototype._setCancellable=function(){this._bitField=this._bitField|67108864};F.prototype._unsetCancellable=function(){this._bitField=this._bitField&~67108864};F.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|2097152};F.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&~2097152;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};F.prototype._isRejectionUnhandled=function(){return(this._bitField&2097152)>0};F.prototype._isSpreadable=function(){return(this._bitField&131072)>0};F.prototype._setIsSpreadable=function(){this._bitField=this._bitField|131072};F.prototype._setIsMigrated=function(){this._bitField=this._bitField|4194304};F.prototype._unsetIsMigrated=function(){this._bitField=this._bitField&~4194304};F.prototype._isMigrated=function(){return(this._bitField&4194304)>0};F.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|524288};F.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&~524288};F.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&524288)>0};F.prototype._setCarriedStackTrace=function(e){this._bitField=this._bitField|1048576;this._fulfillmentHandler0=e};F.prototype._unsetCarriedStackTrace=function(){this._bitField=this._bitField&~1048576;this._fulfillmentHandler0=undefined};F.prototype._isCarryingStackTrace=function(){return(this._bitField&1048576)>0};F.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:undefined};F.prototype._receiverAt=function(e){var t=e===0?this._receiver0:this[e*5-5+4];if(this._isBound()&&t===undefined){return this._boundTo}return t};F.prototype._promiseAt=function(e){return e===0?this._promise0:this[e*5-5+3]};F.prototype._fulfillmentHandlerAt=function(e){return e===0?this._fulfillmentHandler0:this[e*5-5+0]};F.prototype._rejectionHandlerAt=function(e){return e===0?this._rejectionHandler0:this[e*5-5+1]};F.prototype._migrateCallbacks=function(e,t,r,n,a){if(n instanceof F)n._setIsMigrated();this._addCallbacks(e,t,r,n,a)};F.prototype._addCallbacks=function(e,t,r,n,a){var i=this._length();if(i>=131071-5){i=0;this._setLength(0)}if(i===0){this._promise0=n;if(a!==undefined)this._receiver0=a;if(typeof e==="function"&&!this._isCarryingStackTrace())this._fulfillmentHandler0=e;if(typeof t==="function")this._rejectionHandler0=t;if(typeof r==="function")this._progressHandler0=r}else{var s=i*5-5;this[s+3]=n;this[s+4]=a;if(typeof e==="function")this[s+0]=e;if(typeof t==="function")this[s+1]=t;if(typeof r==="function")this[s+2]=r}this._setLength(i+1);return i};F.prototype._setProxyHandlers=function(e,t){var r=this._length();if(r>=131071-5){r=0;this._setLength(0)}if(r===0){this._promise0=t;this._receiver0=e}else{var n=r*5-5;this[n+3]=t;this[n+4]=e}this._setLength(r+1)};F.prototype._proxyPromiseArray=function(e,t){this._setProxyHandlers(e,t)};F.prototype._setBoundTo=function(e){if(e!==undefined){this._bitField=this._bitField|8388608;this._boundTo=e}else{this._bitField=this._bitField&~8388608}};F.prototype._isBound=function(){return(this._bitField&8388608)===8388608};F.prototype._resolveFromResolver=function(e){var t=this;this._setTrace(undefined);this._pushContext();var r=_(e,undefined,function(e){if(t._tryFollow(e)){return}t._fulfill(e)},function(e){var r=k(e)?e:new Error(a.toString(e));t._attachExtraTrace(r);j(e);t._reject(e,r===e?undefined:r)});this._popContext();if(r!==undefined&&r===g){var n=r.e;var i=k(n)?n:new Error(a.toString(n));t._reject(n,i)}};F.prototype._settlePromiseFromHandler=function(e,t,n,i){if(i._isRejected())return;i._pushContext();var s;if(t===l&&!this._isRejected()){s=x(e,n,this._boundTo)}else{s=m(e,t,n)}i._popContext();if(s===g||s===i||s===u){var o=s===i?r():s.e;var d=k(o)?o:new Error(a.toString(o));if(s!==u)i._attachExtraTrace(d);i._rejectUnchecked(o,d)}else{s=c(s,i);if(s instanceof F){s=s._target();if(s._isRejected()&&!s._isCarryingStackTrace()&&!k(s._reason())){var d=new Error(a.toString(s._reason()));i._attachExtraTrace(d);s._setCarriedStackTrace(d)}i._follow(s)}else{i._fulfillUnchecked(s)}}};F.prototype._target=function(){var e=this;while(e._isFollowing())e=e._followee();return e};F.prototype._followee=function(){return this._rejectionHandler0};F.prototype._setFollowee=function(e){this._rejectionHandler0=e};F.prototype._follow=function(e){if(e._isPending()){var t=this._length();for(var r=0;r<t;++r){e._migrateCallbacks(this._fulfillmentHandlerAt(r),this._rejectionHandlerAt(r),this._progressHandlerAt(r),this._promiseAt(r),this._receiverAt(r))}this._setFollowing();this._setLength(0);this._setFollowee(e);this._propagateFrom(e,1)}else if(e._isFulfilled()){this._fulfillUnchecked(e._value())}else{this._rejectUnchecked(e._reason(),e._getCarriedStackTrace())}if(e._isRejectionUnhandled())e._unsetRejectionIsUnhandled();if(T&&!e._trace.hasParent()){e._trace.setParent(this._trace)}};F.prototype._tryFollow=function(e){if(this._isFollowingOrFulfilledOrRejected()||e===this){return false}var t=c(e,this);if(!(t instanceof F)){return false}this._follow(t._target());return true};F.prototype._resetTrace=function(){if(T){this._trace=new f(this._peekContext())}};F.prototype._setTrace=function(e){if(T){var t=this._peekContext();if(e!==undefined&&e._trace.parent()===t){this._trace=e._trace}else{this._trace=new f(t)}}return this};F.prototype._attachExtraTrace=function(e){if(T&&k(e)){this._trace.attachExtraTrace(e)}};F.prototype._cleanValues=function(){if(this._cancellable()){this._cancellationParent=undefined}};F.prototype._propagateFrom=function(e,t){if((t&1)>0&&e._cancellable()){this._setCancellable();this._cancellationParent=e}if((t&4)>0){this._setBoundTo(e._boundTo)}if((t&2)>0){this._setTrace(e)}};F.prototype._fulfill=function(e){if(this._isFollowingOrFulfilledOrRejected())return;this._fulfillUnchecked(e)};F.prototype._reject=function(e,t){if(this._isFollowingOrFulfilledOrRejected())return;this._rejectUnchecked(e,t)};F.prototype._settlePromiseAt=function(e){var t=this._promiseAt(e);var r=t instanceof F;if(r&&t._isMigrated()){t._unsetIsMigrated();return i.invoke(this._settlePromiseAt,this,e)}var n=this._isFulfilled()?this._fulfillmentHandlerAt(e):this._rejectionHandlerAt(e);var a=this._isCarryingStackTrace()?this._getCarriedStackTrace():undefined;var s=this._settledValue;var o=this._receiverAt(e);this._clearCallbackDataAtIndex(e);if(typeof n==="function"){if(!r){n.call(o,s,t)}else{this._settlePromiseFromHandler(n,o,s,t)}}else if(o instanceof d){if(!o._isResolved()){if(this._isFulfilled()){o._promiseFulfilled(s,t)}else{o._promiseRejected(s,t)}}}else if(this._isFulfilled()){t._fulfill(s)}else{t._reject(s,a)}if(e>=4&&(e&31)===4)i.invokeLater(this._setLength,this,0)};F.prototype._clearCallbackDataAtIndex=function(e){if(e===0){if(!this._isCarryingStackTrace()){this._fulfillmentHandler0=undefined}this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=undefined}else{var t=e*5-5;this[t+3]=this[t+4]=this[t+0]=this[t+1]=this[t+2]=undefined}};F.prototype._isSettlePromisesQueued=function(){return(this._bitField&-1073741824)===-1073741824};F.prototype._setSettlePromisesQueued=function(){this._bitField=this._bitField|-1073741824};F.prototype._unsetSettlePromisesQueued=function(){this._bitField=this._bitField&~-1073741824};F.prototype._queueSettlePromises=function(){if(!this._isSettlePromisesQueued()){i.settlePromises(this);this._setSettlePromisesQueued()}};F.prototype._fulfillUnchecked=function(e){if(e===this){var t=r();this._attachExtraTrace(t);return this._rejectUnchecked(t,undefined)}this._setFulfilled();this._settledValue=e;this._cleanValues();if(this._length()>0){this._queueSettlePromises()}};F.prototype._rejectUncheckedCheckError=function(e){var t=k(e)?e:new Error(a.toString(e));this._rejectUnchecked(e,t===e?undefined:t)};F.prototype._rejectUnchecked=function(e,t){if(e===this){var n=r();this._attachExtraTrace(n);return this._rejectUnchecked(n)}this._setRejected();this._settledValue=e;this._cleanValues();if(this._isFinal()){i.throwLater(function(e){if("stack"in e){i.invokeFirst(f.unhandledRejection,undefined,e)}throw e},t===undefined?e:t);return}if(t!==undefined)this._setCarriedStackTrace(t);if(this._length()>0){this._queueSettlePromises()}else{this._ensurePossibleRejectionHandled()}};F.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();var e=this._length();for(var t=0;t<e;t++){this._settlePromiseAt(t)}};F.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled();if(f.possiblyUnhandledRejection!==undefined){i.invokeLater(this._notifyUnhandledRejection,this,undefined)}};F.prototype._notifyUnhandledRejectionIsHandled=function(){if(typeof q==="function"){i.throwLater(q,this)}};F.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue;var t=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified();if(t!==undefined){this._unsetCarriedStackTrace();e=t}if(typeof f.possiblyUnhandledRejection==="function"){f.possiblyUnhandledRejection(e,this)}}};var U=[];F.prototype._peekContext=function(){var e=U.length-1;if(e>=0){return U[e]}return undefined};F.prototype._pushContext=function(){if(!T)return;U.push(this._trace)};F.prototype._popContext=function(){if(!T)return;U.pop()};F.prototype._resolveFromSyncValue=function(e){if(e===g){this._setRejected();var t=e.e;this._settledValue=t;this._cleanValues();this._attachExtraTrace(t);this._ensurePossibleRejectionHandled()}else{var r=c(e,this);if(r instanceof F){r=r._target();this._follow(r)}else{this._setFulfilled();this._settledValue=e;this._cleanValues()}}};if(!f.isSupported()){F.longStackTraces=function(){};T=false}F._makeSelfResolutionError=r;
e("./finally.js")(F,u,c);e("./direct_resolve.js")(F);e("./synchronous_inspection.js")(F);e("./join.js")(F,d,c,o);F.RangeError=b;F.CancellationError=S;F.TimeoutError=w;F.TypeError=y;F.OperationalError=C;F.RejectionError=C;F.AggregateError=s.AggregateError;a.toFastProperties(F);a.toFastProperties(F.prototype);F.Promise=F;f.setBounds(i.firstLineError,a.lastLineError);e("./nodeify.js")(F);e("./using.js")(F,L,c);e("./generators.js")(F,L,o,c);e("./map.js")(F,d,L,c,o);e("./cancel.js")(F,o);e("./promisify.js")(F,o);e("./props.js")(F,d,c);e("./race.js")(F,o,c);e("./reduce.js")(F,d,L,c,o);e("./settle.js")(F,d);e("./call_get.js")(F);e("./some.js")(F,d,L);e("./progress.js")(F,d);e("./any.js")(F);e("./each.js")(F,o);e("./timers.js")(F,o,c);e("./filter.js")(F,o);F.prototype=F.prototype;return F}}).call(this,e("_process"))},{"./any.js":406,"./async.js":407,"./call_get.js":409,"./cancel.js":410,"./captured_trace.js":411,"./catch_filter.js":412,"./direct_resolve.js":413,"./each.js":414,"./errors.js":415,"./errors_api_rejection":416,"./filter.js":418,"./finally.js":419,"./generators.js":420,"./join.js":421,"./map.js":422,"./nodeify.js":423,"./progress.js":424,"./promise_array.js":426,"./promise_resolver.js":427,"./promisify.js":428,"./props.js":429,"./race.js":431,"./reduce.js":432,"./settle.js":434,"./some.js":435,"./synchronous_inspection.js":436,"./thenables.js":437,"./timers.js":438,"./using.js":439,"./util.js":440,_process:441}],426:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./errors.js").canAttachTrace;var i=e("./util.js");var s=i.isArray;function o(e){switch(e){case-1:return undefined;case-2:return[];case-3:return{}}}function l(e){var n=this._promise=new t(r);var a;if(e instanceof t){a=e;n._propagateFrom(a,1|4)}n._setTrace(a);this._values=e;this._length=0;this._totalResolved=0;this._init(undefined,-2)}l.prototype.length=function(){return this._length};l.prototype.promise=function(){return this._promise};l.prototype._init=function u(e,r){var a=n(this._values,undefined);if(a instanceof t){a._setBoundTo(this._promise._boundTo);a=a._target();this._values=a;if(a._isFulfilled()){a=a._value();if(!s(a)){var i=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");this.__hardReject__(i);return}}else if(a._isPending()){a._then(u,this._reject,undefined,this,r);return}else{a._unsetRejectionIsUnhandled();this._reject(a._reason());return}}else if(!s(a)){var i=new t.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");this.__hardReject__(i);return}if(a.length===0){if(r===-5){this._resolveEmptyArray()}else{this._resolve(o(r))}return}var l=this.getActualLength(a.length);this._length=l;this._values=this.shouldCopyValues()?new Array(l):this._values;var c=this._promise;for(var d=0;d<l;++d){if(this._isResolved())return;var f=n(a[d],c);if(f instanceof t){f=f._target();if(f._isPending()){f._proxyPromiseArray(this,d)}else if(f._isFulfilled()){this._promiseFulfilled(f._value(),d)}else{f._unsetRejectionIsUnhandled();this._promiseRejected(f._reason(),d)}}else{this._promiseFulfilled(f,d)}}};l.prototype._isResolved=function(){return this._values===null};l.prototype._resolve=function(e){this._values=null;this._promise._fulfill(e)};l.prototype.__hardReject__=l.prototype._reject=function(e){this._values=null;var t=a(e)?e:new Error(i.toString(e));this._promise._attachExtraTrace(t);this._promise._reject(e,t)};l.prototype._promiseProgressed=function(e,t){this._promise._progress({index:t,value:e})};l.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){this._resolve(this._values)}};l.prototype._promiseRejected=function(e,t){this._totalResolved++;this._reject(e)};l.prototype.shouldCopyValues=function(){return true};l.prototype.getActualLength=function(e){return e};return l}},{"./errors.js":415,"./util.js":440}],427:[function(e,module,t){"use strict";var r=e("./util.js");var n=r.maybeWrapAsError;var a=e("./errors.js");var i=a.TimeoutError;var s=a.OperationalError;var o=e("./async.js");var l=r.haveGetters;var u=e("./es5.js");function c(e){return e instanceof Error&&u.getPrototypeOf(e)===Error.prototype}function d(e){var t;if(c(e)){t=new s(e)}else{t=e}a.markAsOriginatingFromRejection(t);return t}function f(e){e._setIsSpreadable();return function(t,r){if(e===null)return;if(t){var a=d(n(t));e._attachExtraTrace(a);e._reject(a)}else if(arguments.length>2){var i=arguments.length;var s=new Array(i-1);for(var o=1;o<i;++o){s[o-1]=arguments[o]}e._fulfill(s)}else{e._fulfill(r)}e=null}}var p;if(!l){p=function(e){this.promise=e;this.asCallback=f(e);this.callback=this.asCallback}}else{p=function(e){this.promise=e}}if(l){var h={get:function(){return f(this.promise)}};u.defineProperty(p.prototype,"asCallback",h);u.defineProperty(p.prototype,"callback",h)}p._nodebackForPromise=f;p.prototype.toString=function(){return"[object PromiseResolver]"};p.prototype.resolve=p.prototype.fulfill=function(e){if(!(this instanceof p)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n")}var t=this.promise;if(t._tryFollow(e)){return}o.invoke(t._fulfill,t,e)};p.prototype.reject=function(e){if(!(this instanceof p)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n")}var t=this.promise;a.markAsOriginatingFromRejection(e);var n=a.canAttachTrace(e)?e:new Error(r.toString(e));t._attachExtraTrace(n);o.invoke(t._reject,t,e);if(n!==e){o.invoke(this._setCarriedStackTrace,this,n)}};p.prototype.progress=function(e){if(!(this instanceof p)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n")}o.invoke(this.promise._progress,this.promise,e)};p.prototype.cancel=function(){o.invoke(this.promise.cancel,this.promise,undefined)};p.prototype.timeout=function(){this.reject(new i("timeout"))};p.prototype.isResolved=function(){return this.promise.isResolved()};p.prototype.toJSON=function(){return this.promise.toJSON()};p.prototype._setCarriedStackTrace=function(e){if(this.promise.isRejected()){this.promise._setCarriedStackTrace(e)}};module.exports=p},{"./async.js":407,"./errors.js":415,"./es5.js":417,"./util.js":440}],428:[function(e,module,t){"use strict";module.exports=function(t,r){var n={};var a=e("./util.js");var i=e("./promise_resolver.js")._nodebackForPromise;var s=a.withAppended;var o=a.maybeWrapAsError;var l=a.canEvaluate;var u=e("./errors").TypeError;var c="Async";var d=function(e,t){return a.isIdentifier(e)&&e.charAt(0)!=="_"&&!a.isClass(t)};var f={__isPromisified__:true};function p(e){return e.replace(/([$])/,"\\$")}function h(e){try{return e.__isPromisified__===true}catch(t){return false}}function v(e,t,r){var n=a.getDataPropertyOrDefault(e,t+r,f);return n?h(n):false}function g(e,t,r){for(var n=0;n<e.length;n+=2){var a=e[n];if(r.test(a)){var i=a.replace(r,"");for(var s=0;s<e.length;s+=2){if(e[s]===i){throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",t))}}}}}function m(e,t,r,n){var i=a.inheritedDataKeys(e);var s=[];for(var o=0;o<i.length;++o){var l=i[o];var u=e[l];if(typeof u==="function"&&!h(u)&&!v(e,l,t)&&n(l,u,e)){s.push(l,u)}}g(s,t,r);return s}function _(e){var t=[e];var r=Math.max(0,e-1-5);for(var n=e-1;n>=r;--n){if(n===e)continue;t.push(n)}for(var n=e+1;n<=5;++n){t.push(n)}return t}function x(e){return a.filledRange(e,"arguments[","]")}function b(e){return a.filledRange(e,"_arg","")}function y(e){if(typeof e.length==="number"){return Math.max(Math.min(e.length,1023+1),0)}return 0}function S(e){if(a.isIdentifier(e)){return"."+e}else return"['"+e.replace(/(['\\])/g,"\\$1")+"']"}function w(e,l,u,c,d){var f=Math.max(0,y(c)-1);var p=_(f);var h=typeof u==="string"&&a.isIdentifier(u)?u+d:"promisified";function v(t){var r=x(t).join(", ");var a=t>0?", ":"";var i;if(typeof e==="string"){i="                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",S(e))}else if(l===n){i="                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            "}else if(l!==undefined){i="                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            "}else{i="                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            "}return i.replace("{{args}}",r).replace(", ",a)}function g(){var t="";for(var r=0;r<p.length;++r){t+="case "+p[r]+":"+v(p[r])}var a;if(typeof e==="string"){a="                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",S(e))}else if(l===n){a="                                                  \n                callback.apply(this, args);                                  \n            "}else{a="                                                  \n                callback.apply(receiver, args);                              \n            "}t+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",a);return t}return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function (Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(undefined);                                    \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",h).replace("Parameters",b(f)).replace("[CodeForSwitchCase]",g()))(t,e,l,s,o,i,r)}function C(e,a){function l(){var l=a;if(a===n)l=this;if(typeof e==="string"){e=l[e]}var u=new t(r);u._setTrace(undefined);var c=i(u);try{e.apply(l,s(arguments,c))}catch(d){var f=o(d);u._attachExtraTrace(f);u._reject(f)}return u}l.__isPromisified__=true;return l}var E=l?w:C;function j(e,t,r,i){var s=new RegExp(p(t)+"$");var o=m(e,t,s,r);for(var l=0,u=o.length;l<u;l+=2){var c=o[l];var d=o[l+1];var f=c+t;e[f]=i===E?E(c,n,c,d,t):i(d)}a.toFastProperties(e);return e}function k(e,t){return E(e,t,undefined,e)}t.promisify=function(e,t){if(typeof e!=="function"){throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n")}if(h(e)){return e}return k(e,arguments.length<2?n:t)};t.promisifyAll=function(e,t){if(typeof e!=="function"&&typeof e!=="object"){throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n")}t=Object(t);var r=t.suffix;if(typeof r!=="string")r=c;var n=t.filter;if(typeof n!=="function")n=d;var i=t.promisifier;if(typeof i!=="function")i=E;if(!a.isIdentifier(r)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n")}var s=a.inheritedDataKeys(e,{includeHidden:true});for(var o=0;o<s.length;++o){var l=e[s[o]];if(s[o]!=="constructor"&&a.isClass(l)){j(l.prototype,r,n,i);j(l,r,n,i)}}return j(e,r,n,i)}}},{"./errors":415,"./promise_resolver.js":427,"./util.js":440}],429:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./util.js");var i=e("./errors_api_rejection")(t);var s=a.isObject;var o=e("./es5.js");function l(e){var t=o.keys(e);var r=t.length;var n=new Array(r*2);for(var a=0;a<r;++a){var i=t[a];n[a]=e[i];n[a+r]=i}this.constructor$(n)}a.inherits(l,r);l.prototype._init=function(){this._init$(undefined,-3)};l.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){var n={};var a=this.length();for(var i=0,s=this.length();i<s;++i){n[this._values[i+a]]=this._values[i]}this._resolve(n)}};l.prototype._promiseProgressed=function(e,t){this._promise._progress({key:this._values[t+this.length()],value:e})};l.prototype.shouldCopyValues=function(){return false};l.prototype.getActualLength=function(e){return e>>1};function u(e){var r;var a=n(e,undefined);if(!s(a)){return i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}else if(a instanceof t){r=a._then(t.props,undefined,undefined,undefined,undefined)}else{r=new l(a).promise()}if(a instanceof t){r._propagateFrom(a,4)}return r}t.prototype.props=function(){return u(this)};t.props=function(e){return u(e)}}},{"./errors_api_rejection":416,"./es5.js":417,"./util.js":440}],430:[function(e,module,t){"use strict";function r(e,t,r,n,a){for(var i=0;i<a;++i){r[i+n]=e[i+t];e[i+t]=void 0}}function n(e){this._capacity=e;this._length=0;this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e};n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var r=this._front+t&this._capacity-1;this[r]=e;this._length=t+1};n.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var r=this._front;var n=(r-1&t-1^t)-t;this[n]=e;this._front=n;this._length=this.length()+1};n.prototype.unshift=function(e,t,r){this._unshiftOne(r);this._unshiftOne(t);this._unshiftOne(e)};n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n)){this._pushOne(e);this._pushOne(t);this._pushOne(r);return}var a=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[a+0&i]=e;this[a+1&i]=t;this[a+2&i]=r;this._length=n};n.prototype.shift=function(){var e=this._front,t=this[e];this[e]=undefined;this._front=e+1&this._capacity-1;this._length--;return t};n.prototype.length=function(){return this._length};n.prototype._checkCapacity=function(e){if(this._capacity<e){this._resizeTo(this._capacity<<1)}};n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front;var a=this._length;if(n+a>t){var i=n+a&t-1;r(this,0,this,t,i)}};module.exports=n},{}],431:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./errors_api_rejection.js")(t);var i=e("./util.js").isArray;var s=function(e){return e.then(function(t){return o(t,e)})};function o(e,o){var l=n(e,undefined);if(l instanceof t){return s(l)}else if(!i(e)){return a("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")}var u=new t(r);if(o!==undefined){u._propagateFrom(o,7)}else{u._setTrace(undefined)}var c=u._fulfill;var d=u._reject;for(var f=0,p=e.length;f<p;++f){var h=e[f];if(h===undefined&&!(f in e)){continue}t.cast(h)._then(c,d,undefined,u,null)}return u}t.race=function(e){return o(e,undefined)};t.prototype.race=function(){return o(this,undefined)}}},{"./errors_api_rejection.js":416,"./util.js":440}],432:[function(e,module,t){"use strict";module.exports=function(t,r,n,a,i){var s=e("./util.js");var o=s.tryCatch4;var l=s.tryCatch3;var u=s.errorObj;function c(e,r,n,s){this.constructor$(e);this._preservedValues=s===i?[]:null;this._zerothIsAccum=n===undefined;this._gotAccum=false;this._reducingIndex=this._zerothIsAccum?1:0;this._valuesPhase=undefined;var o=a(n,undefined);var l=false;var u=o instanceof t;if(u){o=o._target();if(o._isPending()){o._proxyPromiseArray(this,-1)}else if(o._isFulfilled()){n=o._value();this._gotAccum=true}else{o._unsetRejectionIsUnhandled();this._reject(o._reason());l=true}}if(!(u||this._zerothIsAccum))this._gotAccum=true;this._callback=r;this._accum=n;if(!l)this._init$(undefined,-5)}s.inherits(c,r);c.prototype._init=function(){};c.prototype._resolveEmptyArray=function(){if(this._gotAccum||this._zerothIsAccum){this._resolve(this._preservedValues!==null?[]:this._accum)}};c.prototype._promiseFulfilled=function(e,r){var n=this._values;n[r]=e;var i=this.length();var s=this._preservedValues;var c=s!==null;var d=this._gotAccum;var f=this._valuesPhase;var p;if(!f){f=this._valuesPhase=Array(i);for(p=0;p<i;++p){f[p]=0}}p=f[r];if(r===0&&this._zerothIsAccum){if(!d){this._accum=e;this._gotAccum=d=true}f[r]=p===0?1:2}else if(r===-1){if(!d){this._accum=e;this._gotAccum=d=true}}else{if(p===0){f[r]=1}else{f[r]=2;if(d){this._accum=e}}}if(!d)return;var h=this._callback;var v=this._promise._boundTo;var g;for(var m=this._reducingIndex;m<i;++m){p=f[m];if(p===2){this._reducingIndex=m+1;continue}if(p!==1)return;e=n[m];if(e instanceof t){e=e._target();if(e._isFulfilled()){e=e._value()}else if(e._isPending()){return}else{e._unsetRejectionIsUnhandled();return this._reject(e._reason())}}if(c){s.push(e);g=l(h,v,e,m,i)}else{g=o(h,v,this._accum,e,m,i)}if(g===u)return this._reject(g.e);var _=a(g,this._promise);if(_ instanceof t){_=_._target();if(_._isPending()){f[m]=4;return _._proxyPromiseArray(this,m)}else if(_._isFulfilled()){g=_._value()}else{_._unsetRejectionIsUnhandled();return this._reject(_._reason())}}this._reducingIndex=m+1;this._accum=g}if(this._reducingIndex<i)return;this._resolve(c?s:this._accum)};function d(e,t,r,a){if(typeof t!=="function")return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var i=new c(e,t,r,a);return i.promise()}t.prototype.reduce=function(e,t){return d(this,e,t,null)};t.reduce=function(e,t,r,n){return d(e,t,r,n)}}},{"./util.js":440}],433:[function(e,module,t){(function(e){"use strict";var t;if(typeof e==="object"&&typeof e.version==="string"){t=parseInt(e.version.split(".")[1],10)>10?setImmediate:e.nextTick}else if(typeof MutationObserver!=="undefined"){t=function(e){var t=document.createElement("div");var r=new MutationObserver(e);r.observe(t,{attributes:true});return function(){t.classList.toggle("foo")}};t.isStatic=true}else if(typeof setTimeout!=="undefined"){t=function(e){setTimeout(e,0)}}else{t=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}}module.exports=t}).call(this,e("_process"))},{_process:441}],434:[function(e,module,t){"use strict";module.exports=function(t,r){var n=t.PromiseInspection;var a=e("./util.js");function i(e){this.constructor$(e);this._promise._setIsSpreadable()}a.inherits(i,r);i.prototype._promiseResolved=function(e,t){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){this._resolve(this._values)}};i.prototype._promiseFulfilled=function(e,t){var r=new n;r._bitField=268435456;r._settledValue=e;this._promiseResolved(t,r)};i.prototype._promiseRejected=function(e,t){var r=new n;r._bitField=134217728;r._settledValue=e;this._promiseResolved(t,r)};t.settle=function(e){return new i(e).promise()};t.prototype.settle=function(){return new i(this).promise()}}},{"./util.js":440}],435:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./util.js");var i=e("./errors.js").RangeError;var s=e("./errors.js").AggregateError;var o=a.isArray;function l(e){this.constructor$(e);this._howMany=0;this._unwrap=false;this._initialized=false}a.inherits(l,r);l.prototype._init=function(){if(!this._initialized){return}this._promise._setIsSpreadable();if(this._howMany===0){this._resolve([]);return}this._init$(undefined,-5);var e=o(this._values);if(!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()))}};l.prototype.init=function(){this._initialized=true;this._init()};l.prototype.setUnwrap=function(){this._unwrap=true};l.prototype.howMany=function(){return this._howMany};l.prototype.setHowMany=function(e){if(this._isResolved())return;this._howMany=e};l.prototype._promiseFulfilled=function(e){this._addFulfilled(e);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0])}else{this._resolve(this._values)}}};l.prototype._promiseRejected=function(e){this._addRejected(e);if(this.howMany()>this._canPossiblyFulfill()){var t=new s;for(var r=this.length();r<this._values.length;++r){t.push(this._values[r])}this._reject(t)}};l.prototype._fulfilled=function(){return this._totalResolved};l.prototype._rejected=function(){return this._values.length-this.length()};l.prototype._addRejected=function(e){this._values.push(e)};l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e};l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new i(t)};l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function u(e,t){if((t|0)!==t||t<0){return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n")}var r=new l(e);var a=r.promise();if(a.isRejected()){return a}r.setHowMany(t);r.init();return a}t.some=function(e,t){return u(e,t)};t.prototype.some=function(e){return u(this,e)};t._SomePromiseArray=l}},{"./errors.js":415,"./util.js":440}],436:[function(e,module,t){"use strict";module.exports=function(e){function t(e){if(e!==undefined){e=e._target();this._bitField=e._bitField;this._settledValue=e._isResolved()?e._settledValue:undefined}else{this._bitField=0;this._settledValue=undefined}}t.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n")}return this._settledValue};t.prototype.error=t.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n")}return this._settledValue};t.prototype.isFulfilled=e.prototype._isFulfilled=function(){return(this._bitField&268435456)>0};t.prototype.isRejected=e.prototype._isRejected=function(){return(this._bitField&134217728)>0};t.prototype.isPending=e.prototype._isPending=function(){return(this._bitField&402653184)===0};t.prototype.isResolved=e.prototype._isResolved=function(){return(this._bitField&402653184)>0};e.prototype.isPending=function(){return this._target()._isPending()};e.prototype.isRejected=function(){return this._target()._isRejected()};e.prototype.isFulfilled=function(){return this._target()._isFulfilled()};e.prototype.isResolved=function(){return this._target()._isResolved()};e.prototype._value=function(){return this._settledValue};e.prototype._reason=function(){return this._settledValue};e.prototype.value=function(){var e=this._target();if(!e.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n")}return e._settledValue};e.prototype.reason=function(){var e=this._target();if(!e.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n")}return e._settledValue};e.PromiseInspection=t}},{}],437:[function(e,module,t){"use strict";module.exports=function(t,r){var n=e("./util.js");var a=e("./errors.js").canAttachTrace;var i=n.errorObj;var s=n.isObject;function o(e){try{return e.then}catch(t){i.e=t;return i}}function l(e,n){if(s(e)){if(e instanceof t){return e}else if(c(e)){var l=new t(r);l._setTrace(undefined);e._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null);return l}var u=o(e);if(u===i){if(n!==undefined&&a(u.e)){n._attachExtraTrace(u.e)}return t.reject(u.e)}else if(typeof u==="function"){return d(e,u,n)}}return e}var u={}.hasOwnProperty;function c(e){return u.call(e,"_promise0")}function d(e,r,i){var s=t.defer();var o=false;try{r.call(e,c,d,f)}catch(l){if(!o){o=true;var u=a(l)?l:new Error(n.toString(l));if(i!==undefined){i._attachExtraTrace(u)}s.promise._reject(l,u)}}return s.promise;function c(r){if(o)return;o=true;if(e===r){var n=t._makeSelfResolutionError();if(i!==undefined){i._attachExtraTrace(n)}s.promise._reject(n,undefined);return}s.resolve(r)}function d(e){if(o)return;o=true;var t=a(e)?e:new Error(n.toString(e));if(i!==undefined){i._attachExtraTrace(t)}s.promise._reject(e,t)}function f(e){if(o)return;var t=s.promise;if(typeof t._progress==="function"){t._progress(e)}}}return l}},{"./errors.js":415,"./util.js":440}],438:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./errors.js");var i=t.TimeoutError;var s=function(e,t){if(!e.isPending())return;if(typeof t!=="string"){t="operation timed out"}var r=new i(t);a.markAsOriginatingFromRejection(r);e._attachExtraTrace(r);e._cancel(r)};var o=function(e,t){t._fulfill(e)};var l=t.delay=function(e,a){if(a===undefined){a=e;e=undefined}a=+a;var i=n(e,undefined);var s=new t(r);if(i instanceof t){s._propagateFrom(i,7);s._follow(i._target());return s.then(function(e){return t.delay(e,a)})}else{s._setTrace(undefined);setTimeout(function l(){o(e,s)},a)}return s};t.prototype.delay=function(e){return l(this,e)};function u(e){var t=this;if(t instanceof Number)t=+t;clearTimeout(t);return e}function c(e){var t=this;if(t instanceof Number)t=+t;clearTimeout(t);throw e}t.prototype.timeout=function(e,n){var a=this._target();e=+e;var i=new t(r).cancellable();i._propagateFrom(this,7);i._follow(a);var o=setTimeout(function l(){s(i,n)},e);return i._then(u,c,undefined,o,undefined)}}},{"./errors.js":415}],439:[function(e,module,t){"use strict";module.exports=function(t,r,n){var a=e("./errors.js").TypeError;var i=e("./util.js").inherits;var s=t.PromiseInspection;function o(e){var r=e.length;for(var n=0;n<r;++n){var a=e[n];if(a.isRejected()){return t.reject(a.error())}e[n]=a._settledValue}return e}function l(e){setTimeout(function(){throw e},0)}function u(e){var t=n(e,undefined);if(t!==e&&typeof e._isDisposable==="function"&&typeof e._getDisposer==="function"&&e._isDisposable()){t._setDisposable(e._getDisposer())}return t}function c(e,r){var a=0;var i=e.length;var s=t.defer();function o(){if(a>=i)return s.resolve();var c=u(e[a++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),undefined)}catch(d){return l(d)}if(c instanceof t){return c._then(o,l,null,null,null)}}o()}o();return s.promise}function d(e){var t=new s;t._settledValue=e;t._bitField=268435456;return c(this,t).thenReturn(e)}function f(e){var t=new s;t._settledValue=e;t._bitField=134217728;return c(this,t).thenThrow(e)}function p(e,t){this._data=e;this._promise=t}p.prototype.data=function(){return this._data};p.prototype.promise=function(){return this._promise};p.prototype.resource=function(){if(this.promise()._isFulfilled()){return this.promise()._value()}return null};p.prototype.tryDispose=function(e){var t=this.resource();var r=t!==null?this.doDispose(t,e):null;this._promise._unsetDisposable();this._data=this._promise=null;return r};p.isDisposer=function(e){return e!=null&&typeof e.resource==="function"&&typeof e.tryDispose==="function"};function h(e,t){this.constructor$(e,t)}i(h,p);h.prototype.doDispose=function(e,t){var r=this.data();return r.call(e,e,t)};t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var n=arguments[e-1];if(typeof n!=="function")return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");e--;var a=new Array(e);for(var i=0;i<e;++i){var s=arguments[i];if(p.isDisposer(s)){var l=s;s=s.promise();s._setDisposable(l)}a[i]=s}return t.settle(a).then(o).spread(n)._then(d,f,undefined,a,undefined)};t.prototype._setDisposable=function(e){this._bitField=this._bitField|262144;this._disposer=e};t.prototype._isDisposable=function(){return(this._bitField&262144)>0};t.prototype._getDisposer=function(){return this._disposer};t.prototype._unsetDisposable=function(){this._bitField=this._bitField&~262144;this._disposer=undefined};t.prototype.disposer=function(e){if(typeof e==="function"){return new h(e,this._target())}throw new a}}},{"./errors.js":415,"./util.js":440}],440:[function(require,module,exports){"use strict";var es5=require("./es5.js");var haveGetters=function(){try{var e={};es5.defineProperty(e,"f",{get:function(){return 3}});return e.f===3}catch(t){return false}}();var canEvaluate=typeof navigator=="undefined";var errorObj={e:{}};function tryCatch1(e,t,r){try{return e.call(t,r)}catch(n){errorObj.e=n;return errorObj}}function tryCatch2(e,t,r,n){try{return e.call(t,r,n)}catch(a){errorObj.e=a;return errorObj}}function tryCatch3(e,t,r,n,a){try{return e.call(t,r,n,a)}catch(i){errorObj.e=i;return errorObj}}function tryCatch4(e,t,r,n,a,i){try{return e.call(t,r,n,a,i)}catch(s){errorObj.e=s;return errorObj}}function tryCatchApply(e,t,r){try{return e.apply(r,t)}catch(n){errorObj.e=n;return errorObj}}var inherits=function(e,t){var r={}.hasOwnProperty;function n(){this.constructor=e;this.constructor$=t;for(var n in t.prototype){if(r.call(t.prototype,n)&&n.charAt(n.length-1)!=="$"){this[n+"$"]=t.prototype[n]}}}n.prototype=t.prototype;e.prototype=new n;return e.prototype};function asString(e){return typeof e==="string"?e:""+e}function isPrimitive(e){return e==null||e===true||e===false||typeof e==="string"||typeof e==="number"}function isObject(e){return!isPrimitive(e)}function maybeWrapAsError(e){if(!isPrimitive(e))return e;return new Error(asString(e))}function withAppended(e,t){var r=e.length;var n=new Array(r+1);var a;for(a=0;a<r;++a){n[a]=e[a]}n[a]=t;return n}function getDataPropertyOrDefault(e,t,r){if(es5.isES5){var n=Object.getOwnPropertyDescriptor(e,t);if(n!=null){return n.get==null&&n.set==null?n.value:r}}else{return{}.hasOwnProperty.call(e,t)?e[t]:undefined}}function notEnumerableProp(e,t,r){if(isPrimitive(e))return e;var n={value:r,configurable:true,enumerable:false,writable:true};es5.defineProperty(e,t,n);return e}var wrapsPrimitiveReceiver=function(){return this!=="string"}.call("string");function thrower(e){throw e}var inheritedDataKeys=function(){if(es5.isES5){return function(e,t){var r=[];var n=Object.create(null);
var a=Object(t).includeHidden?Object.getOwnPropertyNames:Object.keys;while(e!=null){var i;try{i=a(e)}catch(s){return r}for(var o=0;o<i.length;++o){var l=i[o];if(n[l])continue;n[l]=true;var u=Object.getOwnPropertyDescriptor(e,l);if(u!=null&&u.get==null&&u.set==null){r.push(l)}}e=es5.getPrototypeOf(e)}return r}}else{return function(e){var t=[];for(var r in e){t.push(r)}return t}}}();function isClass(e){try{if(typeof e==="function"){var t=es5.keys(e.prototype);return t.length>0&&!(t.length===1&&t[0]==="constructor")}return false}catch(r){return false}}function toFastProperties(obj){function f(){}f.prototype=obj;return f;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(e){return rident.test(e)}function filledRange(e,t,r){var n=new Array(e);for(var a=0;a<e;++a){n[a]=t+a+r}return n}function safeToString(e){try{return e+""}catch(t){return"[no string representation]"}}var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,haveGetters:haveGetters,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch1:tryCatch1,tryCatch2:tryCatch2,tryCatch3:tryCatch3,tryCatch4:tryCatch4,tryCatchApply:tryCatchApply,inherits:inherits,withAppended:withAppended,asString:asString,maybeWrapAsError:maybeWrapAsError,wrapsPrimitiveReceiver:wrapsPrimitiveReceiver,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,lastLineError:new Error};module.exports=ret},{"./es5.js":417}],441:[function(e,module,t){var r=module.exports={};r.nextTick=function(){var e=typeof window!=="undefined"&&window.setImmediate;var t=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(e){return function(e){return window.setImmediate(e)}}if(t){var r=[];window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(r.length>0){var n=r.shift();n()}}},true);return function n(e){r.push(e);window.postMessage("process-tick","*")}}return function a(e){setTimeout(e,0)}}();r.title="browser";r.browser=true;r.env={};r.argv=[];function n(){}r.on=n;r.addListener=n;r.once=n;r.off=n;r.removeListener=n;r.removeAllListeners=n;r.emit=n;r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],442:[function(e,module,t){var r=e("lodash.keys"),n=e("lodash._objecttypes");var a=function(e,t,a){var i,s=e,o=s;if(!s)return o;var l=arguments,u=0,c=typeof a=="number"?2:l.length;while(++u<c){s=l[u];if(s&&n[typeof s]){var d=-1,f=n[typeof s]&&r(s),p=f?f.length:0;while(++d<p){i=f[d];if(typeof o[i]=="undefined")o[i]=s[i]}}}return o};module.exports=a},{"lodash._objecttypes":443,"lodash.keys":444}],443:[function(e,module,t){var r={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};module.exports=r},{}],444:[function(e,module,t){var r=e("lodash._isnative"),n=e("lodash.isobject"),a=e("lodash._shimkeys");var i=r(i=Object.keys)&&i;var s=!i?a:function(e){if(!n(e)){return[]}return i(e)};module.exports=s},{"lodash._isnative":445,"lodash._shimkeys":446,"lodash.isobject":447}],445:[function(e,module,t){var r=Object.prototype;var n=r.toString;var a=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");function i(e){return typeof e=="function"&&a.test(e)}module.exports=i},{}],446:[function(e,module,t){var r=e("lodash._objecttypes");var n=Object.prototype;var a=n.hasOwnProperty;var i=function(e){var t,n=e,i=[];if(!n)return i;if(!r[typeof e])return i;for(t in n){if(a.call(n,t)){i.push(t)}}return i};module.exports=i},{"lodash._objecttypes":443}],447:[function(e,module,t){var r=e("lodash._objecttypes");function n(e){return!!(e&&r[typeof e])}module.exports=n},{"lodash._objecttypes":443}],448:[function(e,module,t){var r=e("lodash.createcallback"),n=e("lodash.forown");function a(e,t,a){t=r(t,a,3);var i=-1,s=e?e.length:0;if(typeof s=="number"){while(++i<s){var o=e[i];if(t(o,i,e)){return o}}}else{var l;n(e,function(e,r,n){if(t(e,r,n)){l=e;return false}});return l}}module.exports=a},{"lodash.createcallback":449,"lodash.forown":484}],449:[function(e,module,t){var r=e("lodash._basecreatecallback"),n=e("lodash._baseisequal"),a=e("lodash.isobject"),i=e("lodash.keys"),s=e("lodash.property");function o(e,t,o){var l=typeof e;if(e==null||l=="function"){return r(e,t,o)}if(l!="object"){return s(e)}var u=i(e),c=u[0],d=e[c];if(u.length==1&&d===d&&!a(d)){return function(e){var t=e[c];return d===t&&(d!==0||1/d==1/t)}}return function(t){var r=u.length,a=false;while(r--){if(!(a=n(t[u[r]],e[u[r]],null,true))){break}}return a}}module.exports=o},{"lodash._basecreatecallback":450,"lodash._baseisequal":468,"lodash.isobject":477,"lodash.keys":479,"lodash.property":483}],450:[function(e,module,t){var r=e("lodash.bind"),n=e("lodash.identity"),a=e("lodash._setbinddata"),i=e("lodash.support");var s=/^\s*function[ \n\r\t]+\w/;var o=/\bthis\b/;var l=Function.prototype.toString;function u(e,t,u){if(typeof e!="function"){return n}if(typeof t=="undefined"||!("prototype"in e)){return e}var c=e.__bindData__;if(typeof c=="undefined"){if(i.funcNames){c=!e.name}c=c||!i.funcDecomp;if(!c){var d=l.call(e);if(!i.funcNames){c=!s.test(d)}if(!c){c=o.test(d);a(e,c)}}}if(c===false||c!==true&&c[1]&1){return e}switch(u){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)};case 4:return function(r,n,a,i){return e.call(t,r,n,a,i)}}return r(e,t)}module.exports=u},{"lodash._setbinddata":451,"lodash.bind":454,"lodash.identity":606,"lodash.support":466}],451:[function(e,module,t){var r=e("lodash._isnative"),n=e("lodash.noop");var a={configurable:false,enumerable:false,value:null,writable:false};var i=function(){try{var e={},t=r(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(a){}return n}();var s=!i?n:function(e,t){a.value=t;i(e,"__bindData__",a)};module.exports=s},{"lodash._isnative":452,"lodash.noop":453}],452:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],453:[function(e,module,t){function r(){}module.exports=r},{}],454:[function(e,module,t){var r=e("lodash._createwrapper"),n=e("lodash._slice");function a(e,t){return arguments.length>2?r(e,17,n(arguments,2),null,t):r(e,1,null,null,t)}module.exports=a},{"lodash._createwrapper":455,"lodash._slice":465}],455:[function(e,module,t){var r=e("lodash._basebind"),n=e("lodash._basecreatewrapper"),a=e("lodash.isfunction"),i=e("lodash._slice");var s=[];var o=s.push,l=s.unshift;function u(e,t,s,c,d,f){var p=t&1,h=t&2,v=t&4,g=t&8,m=t&16,_=t&32;if(!h&&!a(e)){throw new TypeError}if(m&&!s.length){t&=~16;m=s=false}if(_&&!c.length){t&=~32;_=c=false}var x=e&&e.__bindData__;if(x&&x!==true){x=i(x);if(x[2]){x[2]=i(x[2])}if(x[3]){x[3]=i(x[3])}if(p&&!(x[1]&1)){x[4]=d}if(!p&&x[1]&1){t|=8}if(v&&!(x[1]&4)){x[5]=f}if(m){o.apply(x[2]||(x[2]=[]),s)}if(_){l.apply(x[3]||(x[3]=[]),c)}x[1]|=t;return u.apply(null,x)}var b=t==1||t===17?r:n;return b([e,t,s,c,d,f])}module.exports=u},{"lodash._basebind":456,"lodash._basecreatewrapper":460,"lodash._slice":465,"lodash.isfunction":464}],456:[function(e,module,t){var r=e("lodash._basecreate"),n=e("lodash.isobject"),a=e("lodash._setbinddata"),i=e("lodash._slice");var s=[];var o=s.push;function l(e){var t=e[0],s=e[2],l=e[4];function u(){if(s){var e=i(s);o.apply(e,arguments)}if(this instanceof u){var a=r(t.prototype),c=t.apply(a,e||arguments);return n(c)?c:a}return t.apply(l,e||arguments)}a(u,e);return u}module.exports=l},{"lodash._basecreate":457,"lodash._setbinddata":451,"lodash._slice":465,"lodash.isobject":477}],457:[function(e,module,t){(function(t){var r=e("lodash._isnative"),n=e("lodash.isobject"),a=e("lodash.noop");var i=r(i=Object.create)&&i;function s(e,t){return n(e)?i(e):{}}if(!i){s=function(){function e(){}return function(r){if(n(r)){e.prototype=r;var a=new e;e.prototype=null}return a||t.Object()}}()}module.exports=s}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._isnative":458,"lodash.isobject":477,"lodash.noop":459}],458:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],459:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],460:[function(e,module,t){var r=e("lodash._basecreate"),n=e("lodash.isobject"),a=e("lodash._setbinddata"),i=e("lodash._slice");var s=[];var o=s.push;function l(e){var t=e[0],s=e[1],u=e[2],c=e[3],d=e[4],f=e[5];var p=s&1,h=s&2,v=s&4,g=s&8,m=t;function _(){var e=p?d:this;if(u){var a=i(u);o.apply(a,arguments)}if(c||v){a||(a=i(arguments));if(c){o.apply(a,c)}if(v&&a.length<f){s|=16&~32;return l([t,g?s:s&~3,a,null,d,f])}}a||(a=arguments);if(h){t=e[m]}if(this instanceof _){e=r(t.prototype);var x=t.apply(e,a);return n(x)?x:e}return t.apply(e,a)}a(_,e);return _}module.exports=l},{"lodash._basecreate":461,"lodash._setbinddata":451,"lodash._slice":465,"lodash.isobject":477}],461:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":462,"lodash.isobject":477,"lodash.noop":463}],462:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],463:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],464:[function(e,module,t){function r(e){return typeof e=="function"}module.exports=r},{}],465:[function(e,module,t){function r(e,t,r){t||(t=0);if(typeof r=="undefined"){r=e?e.length:0}var n=-1,a=r-t||0,i=Array(a<0?0:a);while(++n<a){i[n]=e[t+n]}return i}module.exports=r},{}],466:[function(e,module,t){(function(t){var r=e("lodash._isnative");var n=/\bthis\b/;var a={};a.funcDecomp=!r(t.WinRTError)&&n.test(function(){return this});a.funcNames=typeof Function.name=="string";module.exports=a}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._isnative":467}],467:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],468:[function(e,module,t){var r=e("lodash.forin"),n=e("lodash._getarray"),a=e("lodash.isfunction"),i=e("lodash._objecttypes"),s=e("lodash._releasearray");var o="[object Arguments]",l="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Number]",f="[object Object]",p="[object RegExp]",h="[object String]";var v=Object.prototype;var g=v.toString;var m=v.hasOwnProperty;function _(e,t,v,x,b,y){if(v){var S=v(e,t);if(typeof S!="undefined"){return!!S}}if(e===t){return e!==0||1/e==1/t}var w=typeof e,C=typeof t;if(e===e&&!(e&&i[w])&&!(t&&i[C])){return false}if(e==null||t==null){return e===t}var E=g.call(e),j=g.call(t);if(E==o){E=f}if(j==o){j=f}if(E!=j){return false}switch(E){case u:case c:return+e==+t;case d:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case p:case h:return e==String(t)}var k=E==l;if(!k){var L=m.call(e,"__wrapped__"),q=m.call(t,"__wrapped__");if(L||q){return _(L?e.__wrapped__:e,q?t.__wrapped__:t,v,x,b,y)}if(E!=f){return false}var T=e.constructor,F=t.constructor;if(T!=F&&!(a(T)&&T instanceof T&&a(F)&&F instanceof F)&&("constructor"in e&&"constructor"in t)){return false}}var U=!b;b||(b=n());y||(y=n());var A=b.length;while(A--){if(b[A]==e){return y[A]==t}}var V=0;S=true;b.push(e);y.push(t);if(k){A=e.length;V=t.length;S=V==A;if(S||x){while(V--){var N=A,P=t[V];if(x){while(N--){if(S=_(e[N],P,v,x,b,y)){break}}}else if(!(S=_(e[V],P,v,x,b,y))){break}}}}else{r(t,function(t,r,n){if(m.call(n,r)){V++;return S=m.call(e,r)&&_(e[r],t,v,x,b,y)}});if(S&&!x){r(e,function(e,t,r){if(m.call(r,t)){return S=--V>-1}})}}b.pop();y.pop();if(U){s(b);s(y)}return S}module.exports=_},{"lodash._getarray":469,"lodash._objecttypes":471,"lodash._releasearray":472,"lodash.forin":475,"lodash.isfunction":476}],469:[function(e,module,t){var r=e("lodash._arraypool");function n(){return r.pop()||[]}module.exports=n},{"lodash._arraypool":470}],470:[function(e,module,t){var r=[];module.exports=r},{}],471:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],472:[function(e,module,t){var r=e("lodash._arraypool"),n=e("lodash._maxpoolsize");function a(e){e.length=0;if(r.length<n){r.push(e)}}module.exports=a},{"lodash._arraypool":473,"lodash._maxpoolsize":474}],473:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],474:[function(e,module,t){var r=40;module.exports=r},{}],475:[function(e,module,t){var r=e("lodash._basecreatecallback"),n=e("lodash._objecttypes");var a=function(e,t,a){var i,s=e,o=s;if(!s)return o;if(!n[typeof s])return o;t=t&&typeof a=="undefined"?t:r(t,a,3);for(i in s){if(t(s[i],i,e)===false)return o}return o};module.exports=a},{"lodash._basecreatecallback":450,"lodash._objecttypes":471}],476:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],477:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":478}],478:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],479:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":480,"lodash._shimkeys":481,"lodash.isobject":477}],480:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],481:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":482}],482:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],483:[function(e,module,t){function r(e){return function(t){return t[e]}}module.exports=r},{}],484:[function(e,module,t){var r=e("lodash._basecreatecallback"),n=e("lodash.keys"),a=e("lodash._objecttypes");var i=function(e,t,i){var s,o=e,l=o;if(!o)return l;if(!a[typeof o])return l;t=t&&typeof i=="undefined"?t:r(t,i,3);var u=-1,c=a[typeof o]&&n(o),d=c?c.length:0;while(++u<d){s=c[u];if(t(o[s],s,e)===false)return l}return l};module.exports=i},{"lodash._basecreatecallback":485,"lodash._objecttypes":505,"lodash.keys":506}],485:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":486,"lodash.bind":489,"lodash.identity":606,"lodash.support":503}],486:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":487,"lodash.noop":488}],487:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],488:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],489:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":490,"lodash._slice":502}],490:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":491,"lodash._basecreatewrapper":496,"lodash._slice":502,"lodash.isfunction":501}],491:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":492,"lodash._setbinddata":486,"lodash._slice":502,"lodash.isobject":495}],492:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":493,"lodash.isobject":495,"lodash.noop":494}],493:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],494:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],495:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":505}],496:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":497,"lodash._setbinddata":486,"lodash._slice":502,"lodash.isobject":500}],497:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":498,"lodash.isobject":500,"lodash.noop":499}],498:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],499:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],500:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":505}],501:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],502:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],503:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":504}],504:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],505:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],506:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":507,"lodash._shimkeys":508,"lodash.isobject":509}],507:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],508:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":505}],509:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":505}],510:[function(e,module,t){var r=e("lodash._baseflatten"),n=e("lodash.map");function a(e,t,a,i){if(typeof t!="boolean"&&t!=null){i=a;a=typeof t!="function"&&i&&i[t]===e?null:t;t=false}if(a!=null){e=n(e,a,i)}return r(e,t)}module.exports=a},{"lodash._baseflatten":511,"lodash.map":515}],511:[function(e,module,t){var r=e("lodash.isarguments"),n=e("lodash.isarray");function a(e,t,i,s){var o=(s||0)-1,l=e?e.length:0,u=[];while(++o<l){var c=e[o];if(c&&typeof c=="object"&&typeof c.length=="number"&&(n(c)||r(c))){if(!t){c=a(c,t,i)}var d=-1,f=c.length,p=u.length;u.length+=f;while(++d<f){u[p++]=c[d]}}else if(!i){u.push(c)}}return u}module.exports=a},{"lodash.isarguments":512,"lodash.isarray":513}],512:[function(e,module,t){var r="[object Arguments]";var n=Object.prototype;var a=n.toString;function i(e){return e&&typeof e=="object"&&typeof e.length=="number"&&a.call(e)==r||false}module.exports=i},{}],513:[function(e,module,t){var r=e("lodash._isnative");var n="[object Array]";var a=Object.prototype;var i=a.toString;var s=r(s=Array.isArray)&&s;var o=s||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&i.call(e)==n||false};module.exports=o},{"lodash._isnative":514}],514:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],515:[function(e,module,t){var r=e("lodash.createcallback"),n=e("lodash.forown");function a(e,t,a){var i=-1,s=e?e.length:0;t=r(t,a,3);if(typeof s=="number"){var o=Array(s);while(++i<s){o[i]=t(e[i],i,e)}}else{o=[];n(e,function(e,r,n){o[++i]=t(e,r,n)})}return o}module.exports=a},{"lodash.createcallback":516,"lodash.forown":551}],516:[function(e,module,t){module.exports=e(449)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/index.js":449,"lodash._basecreatecallback":517,"lodash._baseisequal":535,"lodash.isobject":544,"lodash.keys":546,"lodash.property":550}],517:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":518,"lodash.bind":521,"lodash.identity":606,"lodash.support":533}],518:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":519,"lodash.noop":520}],519:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],520:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],521:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":522,"lodash._slice":532}],522:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":523,"lodash._basecreatewrapper":527,"lodash._slice":532,"lodash.isfunction":531}],523:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":524,"lodash._setbinddata":518,"lodash._slice":532,"lodash.isobject":544}],524:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":525,"lodash.isobject":544,"lodash.noop":526}],525:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],526:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],527:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":528,"lodash._setbinddata":518,"lodash._slice":532,"lodash.isobject":544}],528:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":529,"lodash.isobject":544,"lodash.noop":530}],529:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],530:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],531:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],532:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],533:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":534}],534:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],535:[function(e,module,t){module.exports=e(468)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":468,"lodash._getarray":536,"lodash._objecttypes":538,"lodash._releasearray":539,"lodash.forin":542,"lodash.isfunction":543}],536:[function(e,module,t){module.exports=e(469)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":469,"lodash._arraypool":537}],537:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],538:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],539:[function(e,module,t){module.exports=e(472)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":472,"lodash._arraypool":540,"lodash._maxpoolsize":541}],540:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],541:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],542:[function(e,module,t){module.exports=e(475)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":475,"lodash._basecreatecallback":517,"lodash._objecttypes":538}],543:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],544:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":545}],545:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],546:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":547,"lodash._shimkeys":548,"lodash.isobject":544}],547:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],548:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":549}],549:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],550:[function(e,module,t){module.exports=e(483)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":483}],551:[function(e,module,t){module.exports=e(484)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.forown/index.js":484,
"lodash._basecreatecallback":552,"lodash._objecttypes":572,"lodash.keys":573}],552:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":553,"lodash.bind":556,"lodash.identity":606,"lodash.support":570}],553:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":554,"lodash.noop":555}],554:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],555:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],556:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":557,"lodash._slice":569}],557:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":558,"lodash._basecreatewrapper":563,"lodash._slice":569,"lodash.isfunction":568}],558:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":559,"lodash._setbinddata":553,"lodash._slice":569,"lodash.isobject":562}],559:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":560,"lodash.isobject":562,"lodash.noop":561}],560:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],561:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],562:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":572}],563:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":564,"lodash._setbinddata":553,"lodash._slice":569,"lodash.isobject":567}],564:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":565,"lodash.isobject":567,"lodash.noop":566}],565:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],566:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],567:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":572}],568:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],569:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],570:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":571}],571:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],572:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],573:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":574,"lodash._shimkeys":575,"lodash.isobject":576}],574:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],575:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":572}],576:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":572}],577:[function(e,module,t){var r=e("lodash._basecreatecallback"),n=e("lodash.forown");function a(e,t,a){var i=-1,s=e?e.length:0;t=t&&typeof a=="undefined"?t:r(t,a,3);if(typeof s=="number"){while(++i<s){if(t(e[i],i,e)===false){break}}}else{n(e,t)}return e}module.exports=a},{"lodash._basecreatecallback":578,"lodash.forown":600}],578:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":579,"lodash.bind":582,"lodash.identity":606,"lodash.support":598}],579:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":580,"lodash.noop":581}],580:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],581:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],582:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":583,"lodash._slice":597}],583:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":584,"lodash._basecreatewrapper":590,"lodash._slice":597,"lodash.isfunction":596}],584:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":585,"lodash._setbinddata":579,"lodash._slice":597,"lodash.isobject":588}],585:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":586,"lodash.isobject":588,"lodash.noop":587}],586:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],587:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],588:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":589}],589:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],590:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":591,"lodash._setbinddata":579,"lodash._slice":597,"lodash.isobject":594}],591:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":592,"lodash.isobject":594,"lodash.noop":593}],592:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],593:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],594:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":595}],595:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],596:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],597:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],598:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":599}],599:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],600:[function(e,module,t){module.exports=e(484)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.forown/index.js":484,"lodash._basecreatecallback":578,"lodash._objecttypes":601,"lodash.keys":602}],601:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],602:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":603,"lodash._shimkeys":604,"lodash.isobject":605}],603:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],604:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":601}],605:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":601}],606:[function(e,module,t){function r(e){return e}module.exports=r},{}],607:[function(e,module,t){var r=e("lodash._basecreatecallback"),n=e("lodash._baseisequal");function a(e,t,a,i){return n(e,t,typeof a=="function"&&r(a,i,2))}module.exports=a},{"lodash._basecreatecallback":608,"lodash._baseisequal":630}],608:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":609,"lodash.bind":612,"lodash.identity":606,"lodash.support":628}],609:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":610,"lodash.noop":611}],610:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],611:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],612:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":613,"lodash._slice":627}],613:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":614,"lodash._basecreatewrapper":620,"lodash._slice":627,"lodash.isfunction":626}],614:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":615,"lodash._setbinddata":609,"lodash._slice":627,"lodash.isobject":618}],615:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":616,"lodash.isobject":618,"lodash.noop":617}],616:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],617:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],618:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":619}],619:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],620:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":621,"lodash._setbinddata":609,"lodash._slice":627,"lodash.isobject":624}],621:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":622,"lodash.isobject":624,"lodash.noop":623}],622:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],623:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],624:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":625}],625:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],626:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],627:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],628:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":629}],629:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],630:[function(e,module,t){module.exports=e(468)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":468,"lodash._getarray":631,"lodash._objecttypes":633,"lodash._releasearray":634,"lodash.forin":637,"lodash.isfunction":638}],631:[function(e,module,t){module.exports=e(469)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":469,"lodash._arraypool":632}],632:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],633:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],634:[function(e,module,t){module.exports=e(472)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":472,"lodash._arraypool":635,"lodash._maxpoolsize":636}],635:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],636:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],637:[function(e,module,t){module.exports=e(475)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":475,"lodash._basecreatecallback":608,"lodash._objecttypes":633}],638:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],639:[function(e,module,t){var r=e("lodash.createcallback"),n=e("lodash.forown");function a(e,t,a,i){if(!e)return a;var s=arguments.length<3;t=r(t,i,4);var o=-1,l=e.length;if(typeof l=="number"){if(s){a=e[++o]}while(++o<l){a=t(a,e[o],o,e)}}else{n(e,function(e,r,n){a=s?(s=false,e):t(a,e,r,n)})}return a}module.exports=a},{"lodash.createcallback":640,"lodash.forown":675}],640:[function(e,module,t){module.exports=e(449)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/index.js":449,"lodash._basecreatecallback":641,"lodash._baseisequal":659,"lodash.isobject":668,"lodash.keys":670,"lodash.property":674}],641:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":642,"lodash.bind":645,"lodash.identity":606,"lodash.support":657}],642:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":643,"lodash.noop":644}],643:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],644:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],645:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":646,"lodash._slice":656}],646:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":647,"lodash._basecreatewrapper":651,"lodash._slice":656,"lodash.isfunction":655}],647:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":648,"lodash._setbinddata":642,"lodash._slice":656,"lodash.isobject":668}],648:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":649,"lodash.isobject":668,"lodash.noop":650}],649:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],650:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],651:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":652,"lodash._setbinddata":642,"lodash._slice":656,"lodash.isobject":668}],652:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":653,"lodash.isobject":668,"lodash.noop":654}],653:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],654:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],655:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],656:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],657:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":658}],658:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],659:[function(e,module,t){module.exports=e(468)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":468,"lodash._getarray":660,"lodash._objecttypes":662,"lodash._releasearray":663,"lodash.forin":666,"lodash.isfunction":667}],660:[function(e,module,t){module.exports=e(469)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":469,"lodash._arraypool":661}],661:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],662:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],663:[function(e,module,t){module.exports=e(472)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":472,"lodash._arraypool":664,"lodash._maxpoolsize":665}],664:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],665:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],666:[function(e,module,t){module.exports=e(475)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":475,"lodash._basecreatecallback":641,"lodash._objecttypes":662}],667:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],668:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":669}],669:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],670:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":671,"lodash._shimkeys":672,"lodash.isobject":668}],671:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],672:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":673}],673:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],674:[function(e,module,t){module.exports=e(483)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":483}],675:[function(e,module,t){module.exports=e(484)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.forown/index.js":484,"lodash._basecreatecallback":676,"lodash._objecttypes":696,"lodash.keys":697}],676:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":677,"lodash.bind":680,"lodash.identity":606,"lodash.support":694}],677:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":678,"lodash.noop":679}],678:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],679:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],680:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":681,"lodash._slice":693}],681:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":682,"lodash._basecreatewrapper":687,"lodash._slice":693,"lodash.isfunction":692}],682:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":683,"lodash._setbinddata":677,"lodash._slice":693,"lodash.isobject":686}],683:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,
"lodash._isnative":684,"lodash.isobject":686,"lodash.noop":685}],684:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],685:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],686:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":696}],687:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":688,"lodash._setbinddata":677,"lodash._slice":693,"lodash.isobject":691}],688:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":689,"lodash.isobject":691,"lodash.noop":690}],689:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],690:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],691:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":696}],692:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],693:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],694:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":695}],695:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],696:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],697:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":698,"lodash._shimkeys":699,"lodash.isobject":700}],698:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],699:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":696}],700:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":696}],701:[function(e,module,t){var r=e("lodash._baseflatten"),n=e("lodash._baseuniq");function a(){return n(r(arguments,true,true))}module.exports=a},{"lodash._baseflatten":702,"lodash._baseuniq":706}],702:[function(e,module,t){module.exports=e(511)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/index.js":511,"lodash.isarguments":703,"lodash.isarray":704}],703:[function(e,module,t){module.exports=e(512)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/node_modules/lodash.isarguments/index.js":512}],704:[function(e,module,t){module.exports=e(513)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/node_modules/lodash.isarray/index.js":513,"lodash._isnative":705}],705:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],706:[function(e,module,t){var r=e("lodash._baseindexof"),n=e("lodash._cacheindexof"),a=e("lodash._createcache"),i=e("lodash._getarray"),s=e("lodash._largearraysize"),o=e("lodash._releasearray"),l=e("lodash._releaseobject");function u(e,t,u){var c=-1,d=r,f=e?e.length:0,p=[];var h=!t&&f>=s,v=u||h?i():p;if(h){var g=a(v);d=n;v=g}while(++c<f){var m=e[c],_=u?u(m,c,e):m;if(t?!c||v[v.length-1]!==_:d(v,_)<0){if(u||h){v.push(_)}p.push(m)}}if(h){o(v.array);l(v)}else if(u){o(v)}return p}module.exports=u},{"lodash._baseindexof":707,"lodash._cacheindexof":708,"lodash._createcache":710,"lodash._getarray":715,"lodash._largearraysize":717,"lodash._releasearray":718,"lodash._releaseobject":721}],707:[function(e,module,t){function r(e,t,r){var n=(r||0)-1,a=e?e.length:0;while(++n<a){if(e[n]===t){return n}}return-1}module.exports=r},{}],708:[function(e,module,t){var r=e("lodash._baseindexof"),n=e("lodash._keyprefix");function a(e,t){var a=typeof t;e=e.cache;if(a=="boolean"||t==null){return e[t]?0:-1}if(a!="number"&&a!="string"){a="object"}var i=a=="number"?t:n+t;e=(e=e[a])&&e[i];return a=="object"?e&&r(e,t)>-1?0:-1:e?0:-1}module.exports=a},{"lodash._baseindexof":707,"lodash._keyprefix":709}],709:[function(e,module,t){var r="__1335248838000__";module.exports=r},{}],710:[function(e,module,t){var r=e("lodash._cachepush"),n=e("lodash._getobject"),a=e("lodash._releaseobject");function i(e){var t=-1,a=e.length,i=e[0],s=e[a/2|0],o=e[a-1];if(i&&typeof i=="object"&&s&&typeof s=="object"&&o&&typeof o=="object"){return false}var l=n();l["false"]=l["null"]=l["true"]=l["undefined"]=false;var u=n();u.array=e;u.cache=l;u.push=r;while(++t<a){u.push(e[t])}return u}module.exports=i},{"lodash._cachepush":711,"lodash._getobject":713,"lodash._releaseobject":721}],711:[function(e,module,t){var r=e("lodash._keyprefix");function n(e){var t=this.cache,n=typeof e;if(n=="boolean"||e==null){t[e]=true}else{if(n!="number"&&n!="string"){n="object"}var a=n=="number"?e:r+e,i=t[n]||(t[n]={});if(n=="object"){(i[a]||(i[a]=[])).push(e)}else{i[a]=true}}}module.exports=n},{"lodash._keyprefix":712}],712:[function(e,module,t){module.exports=e(709)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":709}],713:[function(e,module,t){var r=e("lodash._objectpool");function n(){return r.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}module.exports=n},{"lodash._objectpool":714}],714:[function(e,module,t){var r=[];module.exports=r},{}],715:[function(e,module,t){module.exports=e(469)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":469,"lodash._arraypool":716}],716:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],717:[function(e,module,t){var r=75;module.exports=r},{}],718:[function(e,module,t){module.exports=e(472)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":472,"lodash._arraypool":719,"lodash._maxpoolsize":720}],719:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],720:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],721:[function(e,module,t){var r=e("lodash._maxpoolsize"),n=e("lodash._objectpool");function a(e){var t=e.cache;if(t){a(t)}e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null;if(n.length<r){n.push(e)}}module.exports=a},{"lodash._maxpoolsize":722,"lodash._objectpool":723}],722:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],723:[function(e,module,t){module.exports=e(714)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":714}],724:[function(e,module,t){var r=e("lodash._baseuniq"),n=e("lodash.createcallback");function a(e,t,a,i){if(typeof t!="boolean"&&t!=null){i=a;a=typeof t!="function"&&i&&i[t]===e?null:t;t=false}if(a!=null){a=n(a,i,3)}return r(e,t,a)}module.exports=a},{"lodash._baseuniq":725,"lodash.createcallback":743}],725:[function(e,module,t){module.exports=e(706)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/index.js":706,"lodash._baseindexof":726,"lodash._cacheindexof":727,"lodash._createcache":729,"lodash._getarray":734,"lodash._largearraysize":736,"lodash._releasearray":737,"lodash._releaseobject":740}],726:[function(e,module,t){module.exports=e(707)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._baseindexof/index.js":707}],727:[function(e,module,t){module.exports=e(708)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/index.js":708,"lodash._baseindexof":726,"lodash._keyprefix":728}],728:[function(e,module,t){module.exports=e(709)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":709}],729:[function(e,module,t){module.exports=e(710)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/index.js":710,"lodash._cachepush":730,"lodash._getobject":732,"lodash._releaseobject":740}],730:[function(e,module,t){module.exports=e(711)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._cachepush/index.js":711,"lodash._keyprefix":731}],731:[function(e,module,t){module.exports=e(709)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":709}],732:[function(e,module,t){module.exports=e(713)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/index.js":713,"lodash._objectpool":733}],733:[function(e,module,t){module.exports=e(714)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":714}],734:[function(e,module,t){module.exports=e(469)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":469,"lodash._arraypool":735}],735:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],736:[function(e,module,t){module.exports=e(717)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._largearraysize/index.js":717}],737:[function(e,module,t){module.exports=e(472)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":472,"lodash._arraypool":738,"lodash._maxpoolsize":739}],738:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],739:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],740:[function(e,module,t){module.exports=e(721)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._releaseobject/index.js":721,"lodash._maxpoolsize":741,"lodash._objectpool":742}],741:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],742:[function(e,module,t){module.exports=e(714)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":714}],743:[function(e,module,t){module.exports=e(449)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/index.js":449,"lodash._basecreatecallback":744,"lodash._baseisequal":762,"lodash.isobject":771,"lodash.keys":773,"lodash.property":777}],744:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":450,"lodash._setbinddata":745,"lodash.bind":748,"lodash.identity":606,"lodash.support":760}],745:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":451,"lodash._isnative":746,"lodash.noop":747}],746:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],747:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],748:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":454,"lodash._createwrapper":749,"lodash._slice":759}],749:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":455,"lodash._basebind":750,"lodash._basecreatewrapper":754,"lodash._slice":759,"lodash.isfunction":758}],750:[function(e,module,t){module.exports=e(456)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":456,"lodash._basecreate":751,"lodash._setbinddata":745,"lodash._slice":759,"lodash.isobject":771}],751:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":752,"lodash.isobject":771,"lodash.noop":753}],752:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],753:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],754:[function(e,module,t){module.exports=e(460)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":460,"lodash._basecreate":755,"lodash._setbinddata":745,"lodash._slice":759,"lodash.isobject":771}],755:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":457,"lodash._isnative":756,"lodash.isobject":771,"lodash.noop":757}],756:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],757:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":453}],758:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],759:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":465}],760:[function(e,module,t){module.exports=e(466)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":466,"lodash._isnative":761}],761:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],762:[function(e,module,t){module.exports=e(468)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":468,"lodash._getarray":763,"lodash._objecttypes":765,"lodash._releasearray":766,"lodash.forin":769,"lodash.isfunction":770}],763:[function(e,module,t){module.exports=e(469)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":469,"lodash._arraypool":764}],764:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],765:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],766:[function(e,module,t){module.exports=e(472)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":472,"lodash._arraypool":767,"lodash._maxpoolsize":768}],767:[function(e,module,t){module.exports=e(470)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":470}],768:[function(e,module,t){module.exports=e(474)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":474}],769:[function(e,module,t){module.exports=e(475)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":475,"lodash._basecreatecallback":744,"lodash._objecttypes":765}],770:[function(e,module,t){module.exports=e(464)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":464}],771:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":772}],772:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],773:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":774,"lodash._shimkeys":775,"lodash.isobject":771}],774:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],775:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":776}],776:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],777:[function(e,module,t){module.exports=e(483)},{"/pipeline/build/node_modules/lodash.find/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":483}],778:[function(e,module,t){var r=e("lodash.keys");function n(e){var t=-1,n=r(e),a=n.length,i=Array(a);while(++t<a){i[t]=e[n[t]]}return i}module.exports=n},{"lodash.keys":779}],779:[function(e,module,t){module.exports=e(444)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":444,"lodash._isnative":780,"lodash._shimkeys":781,"lodash.isobject":783}],780:[function(e,module,t){module.exports=e(445)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":445}],781:[function(e,module,t){module.exports=e(446)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":446,"lodash._objecttypes":782}],782:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],783:[function(e,module,t){module.exports=e(447)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":447,"lodash._objecttypes":784}],784:[function(e,module,t){module.exports=e(443)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":443}],785:[function(e,module,t){(function(e){(function(){var r;var n=[],a=[];var i=0;var s=+new Date+"";var o=75;var l=40;var u=" 	\x0B\f\ufeff"+"\n\r\u2028\u2029"+"";var c=/\b__p \+= '';/g,d=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var h=/\w*$/;var v=/^\s*function[ \n\r\t]+\w/;var g=/<%=([\s\S]+?)%>/g;var m=RegExp("^["+u+"]*0+(?=.$)");var _=/($^)/;var x=/\bthis\b/;var b=/['\n\r\t\u2028\u2029\\]/g;var y=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"];var S=0;var w="[object Arguments]",C="[object Array]",E="[object Boolean]",j="[object Date]",k="[object Function]",L="[object Number]",q="[object Object]",T="[object RegExp]",F="[object String]";var U={};U[k]=false;U[w]=U[C]=U[E]=U[j]=U[L]=U[q]=U[T]=U[F]=true;var A={leading:false,maxWait:0,trailing:false};var V={configurable:false,enumerable:false,value:null,writable:false};var N={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var P={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};var R=N[typeof window]&&window||this;var I=N[typeof t]&&t&&!t.nodeType&&t;var M=N[typeof module]&&module&&!module.nodeType&&module;var O=M&&M.exports===I&&I;var B=N[typeof e]&&e;if(B&&(B.global===B||B.window===B)){R=B}function D(e,t,r){var n=(r||0)-1,a=e?e.length:0;while(++n<a){if(e[n]===t){return n}}return-1}function z(e,t){var r=typeof t;e=e.cache;if(r=="boolean"||t==null){return e[t]?0:-1}if(r!="number"&&r!="string"){r="object"}var n=r=="number"?t:s+t;e=(e=e[r])&&e[n];return r=="object"?e&&D(e,t)>-1?0:-1:e?0:-1}function Q(e){var t=this.cache,r=typeof e;if(r=="boolean"||e==null){t[e]=true}else{if(r!="number"&&r!="string"){r="object"}var n=r=="number"?e:s+e,a=t[r]||(t[r]={});if(r=="object"){(a[n]||(a[n]=[])).push(e)}else{a[n]=true}}}function H(e){return e.charCodeAt(0)}function G(e,t){var r=e.criteria,n=t.criteria,a=-1,i=r.length;while(++a<i){var s=r[a],o=n[a];if(s!==o){if(s>o||typeof s=="undefined"){return 1}if(s<o||typeof o=="undefined"){return-1}}}return e.index-t.index}function J(e){var t=-1,r=e.length,n=e[0],a=e[r/2|0],i=e[r-1];if(n&&typeof n=="object"&&a&&typeof a=="object"&&i&&typeof i=="object"){return false}var s=$();s["false"]=s["null"]=s["true"]=s["undefined"]=false;var o=$();o.array=e;o.cache=s;o.push=Q;while(++t<r){o.push(e[t])}return o}function W(e){return"\\"+P[e]}function K(){return n.pop()||[]}function $(){return a.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}function X(e){e.length=0;if(n.length<l){n.push(e)}}function Y(e){var t=e.cache;if(t){Y(t)}e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null;if(a.length<l){a.push(e)}}function Z(e,t,r){t||(t=0);if(typeof r=="undefined"){r=e?e.length:0}var n=-1,a=r-t||0,i=Array(a<0?0:a);while(++n<a){i[n]=e[t+n]}return i}function ee(e){e=e?te.defaults(R.Object(),e,te.pick(R,y)):R;var t=e.Array,n=e.Boolean,a=e.Date,l=e.Function,P=e.Math,I=e.Number,M=e.Object,O=e.RegExp,B=e.String,Q=e.TypeError;var re=[];var ne=M.prototype;var ae=e._;var ie=ne.toString;var se=O("^"+B(ie).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var oe=P.ceil,le=e.clearTimeout,ue=P.floor,ce=l.prototype.toString,de=Ge(de=M.getPrototypeOf)&&de,fe=ne.hasOwnProperty,pe=re.push,he=e.setTimeout,ve=re.splice,ge=re.unshift;var me=function(){try{var e={},t=Ge(t=M.defineProperty)&&t,r=t(e,e,e)&&t}catch(n){}return r}();var _e=Ge(_e=M.create)&&_e,xe=Ge(xe=t.isArray)&&xe,be=e.isFinite,ye=e.isNaN,Se=Ge(Se=M.keys)&&Se,we=P.max,Ce=P.min,Ee=e.parseInt,je=P.random;var ke={};ke[C]=t;ke[E]=n;ke[j]=a;ke[k]=l;ke[q]=M;ke[L]=I;ke[T]=O;ke[F]=B;function Le(e){return e&&typeof e=="object"&&!Xe(e)&&fe.call(e,"__wrapped__")?e:new qe(e)}function qe(e,t){this.__chain__=!!t;this.__wrapped__=e}qe.prototype=Le.prototype;var Te=Le.support={};Te.funcDecomp=!Ge(e.WinRTError)&&x.test(ee);Te.funcNames=typeof l.name=="string";Le.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:g,variable:"",imports:{_:Le}};function Fe(e){var t=e[0],r=e[2],n=e[4];function a(){if(r){var e=Z(r);pe.apply(e,arguments)}if(this instanceof a){var i=Ae(t.prototype),s=t.apply(i,e||arguments);return Et(s)?s:i}return t.apply(n,e||arguments)}Je(a,e);return a}function Ue(e,t,r,n,a){if(r){var i=r(e);if(typeof i!="undefined"){return i}}var s=Et(e);if(s){var o=ie.call(e);if(!U[o]){return e}var l=ke[o];switch(o){case E:case j:return new l(+e);case L:case F:return new l(e);case T:i=l(e.source,h.exec(e));i.lastIndex=e.lastIndex;return i}}else{return e}var u=Xe(e);if(t){var c=!n;n||(n=K());a||(a=K());var d=n.length;while(d--){if(n[d]==e){return a[d]}}i=u?l(e.length):{}}else{i=u?Z(e):at({},e)}if(u){if(fe.call(e,"index")){i.index=e.index}if(fe.call(e,"input")){i.input=e.input}}if(!t){return i}n.push(e);a.push(i);(u?Jt:pt)(e,function(e,s){i[s]=Ue(e,t,r,n,a)});if(c){X(n);X(a)}return i}function Ae(e,t){return Et(e)?_e(e):{}}if(!_e){Ae=function(){function t(){}return function(r){if(Et(r)){t.prototype=r;var n=new t;t.prototype=null}return n||e.Object()}}()}function Ve(e,t,r){if(typeof e!="function"){return Yr}if(typeof t=="undefined"||!("prototype"in e)){return e}var n=e.__bindData__;if(typeof n=="undefined"){if(Te.funcNames){n=!e.name}n=n||!Te.funcDecomp;if(!n){var a=ce.call(e);if(!Te.funcNames){n=!v.test(a)}if(!n){n=x.test(a);Je(e,n)}}}if(n===false||n!==true&&n[1]&1){return e}switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)};case 4:return function(r,n,a,i){return e.call(t,r,n,a,i)}}return Nr(e,t)}function Ne(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],s=e[5];var o=r&1,l=r&2,u=r&4,c=r&8,d=t;function f(){var e=o?i:this;if(n){var p=Z(n);pe.apply(p,arguments)}if(a||u){p||(p=Z(arguments));if(a){pe.apply(p,a)}if(u&&p.length<s){r|=16&~32;return Ne([t,c?r:r&~3,p,null,i,s])}}p||(p=arguments);if(l){t=e[d]}if(this instanceof f){e=Ae(t.prototype);var h=t.apply(e,p);return Et(h)?h:e}return t.apply(e,p)}Je(f,e);return f}function Pe(e,t){var r=-1,n=He(),a=e?e.length:0,i=a>=o&&n===D,s=[];if(i){var l=J(t);if(l){n=z;t=l}else{i=false}}while(++r<a){var u=e[r];if(n(t,u)<0){s.push(u)}}if(i){Y(t)}return s}function Re(e,t,r,n){var a=(n||0)-1,i=e?e.length:0,s=[];while(++a<i){var o=e[a];if(o&&typeof o=="object"&&typeof o.length=="number"&&(Xe(o)||$e(o))){if(!t){o=Re(o,t,r)}var l=-1,u=o.length,c=s.length;s.length+=u;while(++l<u){s[c++]=o[l]}}else if(!r){s.push(o)}}return s}function Ie(e,t,r,n,a,i){if(r){var s=r(e,t);if(typeof s!="undefined"){return!!s}}if(e===t){return e!==0||1/e==1/t}var o=typeof e,l=typeof t;if(e===e&&!(e&&N[o])&&!(t&&N[l])){return false}if(e==null||t==null){return e===t}var u=ie.call(e),c=ie.call(t);if(u==w){u=q}if(c==w){c=q}if(u!=c){return false}switch(u){case E:case j:return+e==+t;case L:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case T:case F:return e==B(t)}var d=u==C;if(!d){var f=fe.call(e,"__wrapped__"),p=fe.call(t,"__wrapped__");if(f||p){return Ie(f?e.__wrapped__:e,p?t.__wrapped__:t,r,n,a,i)}if(u!=q){return false}var h=e.constructor,v=t.constructor;if(h!=v&&!(Ct(h)&&h instanceof h&&Ct(v)&&v instanceof v)&&("constructor"in e&&"constructor"in t)){return false}}var g=!a;a||(a=K());i||(i=K());var m=a.length;while(m--){if(a[m]==e){return i[m]==t}}var _=0;s=true;a.push(e);i.push(t);if(d){m=e.length;_=t.length;s=_==m;if(s||n){while(_--){var x=m,b=t[_];if(n){while(x--){if(s=Ie(e[x],b,r,n,a,i)){break}}}else if(!(s=Ie(e[_],b,r,n,a,i))){break}}}}else{dt(t,function(t,o,l){if(fe.call(l,o)){_++;return s=fe.call(e,o)&&Ie(e[o],t,r,n,a,i)}});if(s&&!n){dt(e,function(e,t,r){if(fe.call(r,t)){return s=--_>-1}})}}a.pop();i.pop();if(g){X(a);X(i)}return s}function Me(e,t,r,n,a){(Xe(t)?Jt:pt)(t,function(t,i){var s,o,l=t,u=e[i];if(t&&((o=Xe(t))||qt(t))){var c=n.length;while(c--){if(s=n[c]==t){u=a[c];break}}if(!s){var d;if(r){l=r(u,t);if(d=typeof l!="undefined"){u=l}}if(!d){u=o?Xe(u)?u:[]:qt(u)?u:{}}n.push(t);a.push(u);if(!d){Me(u,t,r,n,a)}}}else{if(r){l=r(u,t);if(typeof l=="undefined"){l=t}}if(typeof l!="undefined"){u=l}}e[i]=u})}function Oe(e,t){return e+ue(je()*(t-e+1))}function Be(e,t,r){var n=-1,a=He(),i=e?e.length:0,s=[];var l=!t&&i>=o&&a===D,u=r||l?K():s;if(l){var c=J(u);a=z;u=c}while(++n<i){var d=e[n],f=r?r(d,n,e):d;if(t?!n||u[u.length-1]!==f:a(u,f)<0){if(r||l){u.push(f)}s.push(d);
}}if(l){X(u.array);Y(u)}else if(r){X(u)}return s}function De(e){return function(t,r,n){var a={};r=Le.createCallback(r,n,3);var i=-1,s=t?t.length:0;if(typeof s=="number"){while(++i<s){var o=t[i];e(a,o,r(o,i,t),t)}}else{pt(t,function(t,n,i){e(a,t,r(t,n,i),i)})}return a}}function ze(e,t,r,n,a,i){var s=t&1,o=t&2,l=t&4,u=t&8,c=t&16,d=t&32;if(!o&&!Ct(e)){throw new Q}if(c&&!r.length){t&=~16;c=r=false}if(d&&!n.length){t&=~32;d=n=false}var f=e&&e.__bindData__;if(f&&f!==true){f=Z(f);if(f[2]){f[2]=Z(f[2])}if(f[3]){f[3]=Z(f[3])}if(s&&!(f[1]&1)){f[4]=a}if(!s&&f[1]&1){t|=8}if(l&&!(f[1]&4)){f[5]=i}if(c){pe.apply(f[2]||(f[2]=[]),r)}if(d){ge.apply(f[3]||(f[3]=[]),n)}f[1]|=t;return ze.apply(null,f)}var p=t==1||t===17?Fe:Ne;return p([e,t,r,n,a,i])}function Qe(e){return et[e]}function He(){var e=(e=Le.indexOf)===_r?D:e;return e}function Ge(e){return typeof e=="function"&&se.test(e)}var Je=!me?tn:function(e,t){V.value=t;me(e,"__bindData__",V);V.value=null};function We(e){var t,r;if(!(e&&ie.call(e)==q)||(t=e.constructor,Ct(t)&&!(t instanceof t))){return false}dt(e,function(e,t){r=t});return typeof r=="undefined"||fe.call(e,r)}function Ke(e){return tt[e]}function $e(e){return e&&typeof e=="object"&&typeof e.length=="number"&&ie.call(e)==w||false}var Xe=xe||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&ie.call(e)==C||false};var Ye=function(e){var t,r=e,n=[];if(!r)return n;if(!N[typeof e])return n;for(t in r){if(fe.call(r,t)){n.push(t)}}return n};var Ze=!Se?Ye:function(e){if(!Et(e)){return[]}return Se(e)};var et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var tt=mt(et);var rt=O("("+Ze(tt).join("|")+")","g"),nt=O("["+Ze(et).join("")+"]","g");var at=function(e,t,r){var n,a=e,i=a;if(!a)return i;var s=arguments,o=0,l=typeof r=="number"?2:s.length;if(l>3&&typeof s[l-2]=="function"){var u=Ve(s[--l-1],s[l--],2)}else if(l>2&&typeof s[l-1]=="function"){u=s[--l]}while(++o<l){a=s[o];if(a&&N[typeof a]){var c=-1,d=N[typeof a]&&Ze(a),f=d?d.length:0;while(++c<f){n=d[c];i[n]=u?u(i[n],a[n]):a[n]}}}return i};function it(e,t,r,n){if(typeof t!="boolean"&&t!=null){n=r;r=t;t=false}return Ue(e,t,typeof r=="function"&&Ve(r,n,1))}function st(e,t,r){return Ue(e,true,typeof t=="function"&&Ve(t,r,1))}function ot(e,t){var r=Ae(e);return t?at(r,t):r}var lt=function(e,t,r){var n,a=e,i=a;if(!a)return i;var s=arguments,o=0,l=typeof r=="number"?2:s.length;while(++o<l){a=s[o];if(a&&N[typeof a]){var u=-1,c=N[typeof a]&&Ze(a),d=c?c.length:0;while(++u<d){n=c[u];if(typeof i[n]=="undefined")i[n]=a[n]}}}return i};function ut(e,t,r){var n;t=Le.createCallback(t,r,3);pt(e,function(e,r,a){if(t(e,r,a)){n=r;return false}});return n}function ct(e,t,r){var n;t=Le.createCallback(t,r,3);ht(e,function(e,r,a){if(t(e,r,a)){n=r;return false}});return n}var dt=function(e,t,r){var n,a=e,i=a;if(!a)return i;if(!N[typeof a])return i;t=t&&typeof r=="undefined"?t:Ve(t,r,3);for(n in a){if(t(a[n],n,e)===false)return i}return i};function ft(e,t,r){var n=[];dt(e,function(e,t){n.push(t,e)});var a=n.length;t=Ve(t,r,3);while(a--){if(t(n[a--],n[a],e)===false){break}}return e}var pt=function(e,t,r){var n,a=e,i=a;if(!a)return i;if(!N[typeof a])return i;t=t&&typeof r=="undefined"?t:Ve(t,r,3);var s=-1,o=N[typeof a]&&Ze(a),l=o?o.length:0;while(++s<l){n=o[s];if(t(a[n],n,e)===false)return i}return i};function ht(e,t,r){var n=Ze(e),a=n.length;t=Ve(t,r,3);while(a--){var i=n[a];if(t(e[i],i,e)===false){break}}return e}function vt(e){var t=[];dt(e,function(e,r){if(Ct(e)){t.push(r)}});return t.sort()}function gt(e,t){return e?fe.call(e,t):false}function mt(e){var t=-1,r=Ze(e),n=r.length,a={};while(++t<n){var i=r[t];a[e[i]]=i}return a}function _t(e){return e===true||e===false||e&&typeof e=="object"&&ie.call(e)==E||false}function xt(e){return e&&typeof e=="object"&&ie.call(e)==j||false}function bt(e){return e&&e.nodeType===1||false}function yt(e){var t=true;if(!e){return t}var r=ie.call(e),n=e.length;if(r==C||r==F||r==w||r==q&&typeof n=="number"&&Ct(e.splice)){return!n}pt(e,function(){return t=false});return t}function St(e,t,r,n){return Ie(e,t,typeof r=="function"&&Ve(r,n,2))}function wt(e){return be(e)&&!ye(parseFloat(e))}function Ct(e){return typeof e=="function"}function Et(e){return!!(e&&N[typeof e])}function jt(e){return Lt(e)&&e!=+e}function kt(e){return e===null}function Lt(e){return typeof e=="number"||e&&typeof e=="object"&&ie.call(e)==L||false}var qt=!de?We:function(e){if(!(e&&ie.call(e)==q)){return false}var t=e.valueOf,r=Ge(t)&&(r=de(t))&&de(r);return r?e==r||de(e)==r:We(e)};function Tt(e){return e&&typeof e=="object"&&ie.call(e)==T||false}function Ft(e){return typeof e=="string"||e&&typeof e=="object"&&ie.call(e)==F||false}function Ut(e){return typeof e=="undefined"}function At(e,t,r){var n={};t=Le.createCallback(t,r,3);pt(e,function(e,r,a){n[r]=t(e,r,a)});return n}function Vt(e){var t=arguments,r=2;if(!Et(e)){return e}if(typeof t[2]!="number"){r=t.length}if(r>3&&typeof t[r-2]=="function"){var n=Ve(t[--r-1],t[r--],2)}else if(r>2&&typeof t[r-1]=="function"){n=t[--r]}var a=Z(arguments,1,r),i=-1,s=K(),o=K();while(++i<r){Me(e,a[i],n,s,o)}X(s);X(o);return e}function Nt(e,t,r){var n={};if(typeof t!="function"){var a=[];dt(e,function(e,t){a.push(t)});a=Pe(a,Re(arguments,true,false,1));var i=-1,s=a.length;while(++i<s){var o=a[i];n[o]=e[o]}}else{t=Le.createCallback(t,r,3);dt(e,function(e,r,a){if(!t(e,r,a)){n[r]=e}})}return n}function Pt(e){var r=-1,n=Ze(e),a=n.length,i=t(a);while(++r<a){var s=n[r];i[r]=[s,e[s]]}return i}function Rt(e,t,r){var n={};if(typeof t!="function"){var a=-1,i=Re(arguments,true,false,1),s=Et(e)?i.length:0;while(++a<s){var o=i[a];if(o in e){n[o]=e[o]}}}else{t=Le.createCallback(t,r,3);dt(e,function(e,r,a){if(t(e,r,a)){n[r]=e}})}return n}function It(e,t,r,n){var a=Xe(e);if(r==null){if(a){r=[]}else{var i=e&&e.constructor,s=i&&i.prototype;r=Ae(s)}}if(t){t=Le.createCallback(t,n,4);(a?Jt:pt)(e,function(e,n,a){return t(r,e,n,a)})}return r}function Mt(e){var r=-1,n=Ze(e),a=n.length,i=t(a);while(++r<a){i[r]=e[n[r]]}return i}function Ot(e){var r=arguments,n=-1,a=Re(r,true,false,1),i=r[2]&&r[2][r[1]]===e?1:a.length,s=t(i);while(++n<i){s[n]=e[a[n]]}return s}function Bt(e,t,r){var n=-1,a=He(),i=e?e.length:0,s=false;r=(r<0?we(0,i+r):r)||0;if(Xe(e)){s=a(e,t,r)>-1}else if(typeof i=="number"){s=(Ft(e)?e.indexOf(t,r):a(e,t,r))>-1}else{pt(e,function(e){if(++n>=r){return!(s=e===t)}})}return s}var Dt=De(function(e,t,r){fe.call(e,r)?e[r]++:e[r]=1});function zt(e,t,r){var n=true;t=Le.createCallback(t,r,3);var a=-1,i=e?e.length:0;if(typeof i=="number"){while(++a<i){if(!(n=!!t(e[a],a,e))){break}}}else{pt(e,function(e,r,a){return n=!!t(e,r,a)})}return n}function Qt(e,t,r){var n=[];t=Le.createCallback(t,r,3);var a=-1,i=e?e.length:0;if(typeof i=="number"){while(++a<i){var s=e[a];if(t(s,a,e)){n.push(s)}}}else{pt(e,function(e,r,a){if(t(e,r,a)){n.push(e)}})}return n}function Ht(e,t,r){t=Le.createCallback(t,r,3);var n=-1,a=e?e.length:0;if(typeof a=="number"){while(++n<a){var i=e[n];if(t(i,n,e)){return i}}}else{var s;pt(e,function(e,r,n){if(t(e,r,n)){s=e;return false}});return s}}function Gt(e,t,r){var n;t=Le.createCallback(t,r,3);Wt(e,function(e,r,a){if(t(e,r,a)){n=e;return false}});return n}function Jt(e,t,r){var n=-1,a=e?e.length:0;t=t&&typeof r=="undefined"?t:Ve(t,r,3);if(typeof a=="number"){while(++n<a){if(t(e[n],n,e)===false){break}}}else{pt(e,t)}return e}function Wt(e,t,r){var n=e?e.length:0;t=t&&typeof r=="undefined"?t:Ve(t,r,3);if(typeof n=="number"){while(n--){if(t(e[n],n,e)===false){break}}}else{var a=Ze(e);n=a.length;pt(e,function(e,r,i){r=a?a[--n]:--n;return t(i[r],r,i)})}return e}var Kt=De(function(e,t,r){(fe.call(e,r)?e[r]:e[r]=[]).push(t)});var $t=De(function(e,t,r){e[r]=t});function Xt(e,r){var n=Z(arguments,2),a=-1,i=typeof r=="function",s=e?e.length:0,o=t(typeof s=="number"?s:0);Jt(e,function(e){o[++a]=(i?r:e[r]).apply(e,n)});return o}function Yt(e,r,n){var a=-1,i=e?e.length:0;r=Le.createCallback(r,n,3);if(typeof i=="number"){var s=t(i);while(++a<i){s[a]=r(e[a],a,e)}}else{s=[];pt(e,function(e,t,n){s[++a]=r(e,t,n)})}return s}function Zt(e,t,r){var n=-Infinity,a=n;if(typeof t!="function"&&r&&r[t]===e){t=null}if(t==null&&Xe(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];if(o>a){a=o}}}else{t=t==null&&Ft(e)?H:Le.createCallback(t,r,3);Jt(e,function(e,r,i){var s=t(e,r,i);if(s>n){n=s;a=e}})}return a}function er(e,t,r){var n=Infinity,a=n;if(typeof t!="function"&&r&&r[t]===e){t=null}if(t==null&&Xe(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];if(o<a){a=o}}}else{t=t==null&&Ft(e)?H:Le.createCallback(t,r,3);Jt(e,function(e,r,i){var s=t(e,r,i);if(s<n){n=s;a=e}})}return a}var tr=Yt;function rr(e,t,r,n){if(!e)return r;var a=arguments.length<3;t=Le.createCallback(t,n,4);var i=-1,s=e.length;if(typeof s=="number"){if(a){r=e[++i]}while(++i<s){r=t(r,e[i],i,e)}}else{pt(e,function(e,n,i){r=a?(a=false,e):t(r,e,n,i)})}return r}function nr(e,t,r,n){var a=arguments.length<3;t=Le.createCallback(t,n,4);Wt(e,function(e,n,i){r=a?(a=false,e):t(r,e,n,i)});return r}function ar(e,t,r){t=Le.createCallback(t,r,3);return Qt(e,function(e,r,n){return!t(e,r,n)})}function ir(e,t,n){if(e&&typeof e.length!="number"){e=Mt(e)}if(t==null||n){return e?e[Oe(0,e.length-1)]:r}var a=sr(e);a.length=Ce(we(0,t),a.length);return a}function sr(e){var r=-1,n=e?e.length:0,a=t(typeof n=="number"?n:0);Jt(e,function(e){var t=Oe(0,++r);a[r]=a[t];a[t]=e});return a}function or(e){var t=e?e.length:0;return typeof t=="number"?t:Ze(e).length}function lr(e,t,r){var n;t=Le.createCallback(t,r,3);var a=-1,i=e?e.length:0;if(typeof i=="number"){while(++a<i){if(n=t(e[a],a,e)){break}}}else{pt(e,function(e,r,a){return!(n=t(e,r,a))})}return!!n}function ur(e,r,n){var a=-1,i=Xe(r),s=e?e.length:0,o=t(typeof s=="number"?s:0);if(!i){r=Le.createCallback(r,n,3)}Jt(e,function(e,t,n){var s=o[++a]=$();if(i){s.criteria=Yt(r,function(t){return e[t]})}else{(s.criteria=K())[0]=r(e,t,n)}s.index=a;s.value=e});s=o.length;o.sort(G);while(s--){var l=o[s];o[s]=l.value;if(!i){X(l.criteria)}Y(l)}return o}function cr(e){if(e&&typeof e.length=="number"){return Z(e)}return Mt(e)}var dr=Qt;function fr(e){var t=-1,r=e?e.length:0,n=[];while(++t<r){var a=e[t];if(a){n.push(a)}}return n}function pr(e){return Pe(e,Re(arguments,true,true,1))}function hr(e,t,r){var n=-1,a=e?e.length:0;t=Le.createCallback(t,r,3);while(++n<a){if(t(e[n],n,e)){return n}}return-1}function vr(e,t,r){var n=e?e.length:0;t=Le.createCallback(t,r,3);while(n--){if(t(e[n],n,e)){return n}}return-1}function gr(e,t,n){var a=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=-1;t=Le.createCallback(t,n,3);while(++s<i&&t(e[s],s,e)){a++}}else{a=t;if(a==null||n){return e?e[0]:r}}return Z(e,0,Ce(we(0,a),i))}function mr(e,t,r,n){if(typeof t!="boolean"&&t!=null){n=r;r=typeof t!="function"&&n&&n[t]===e?null:t;t=false}if(r!=null){e=Yt(e,r,n)}return Re(e,t)}function _r(e,t,r){if(typeof r=="number"){var n=e?e.length:0;r=r<0?we(0,n+r):r||0}else if(r){var a=kr(e,t);return e[a]===t?a:-1}return D(e,t,r)}function xr(e,t,r){var n=0,a=e?e.length:0;if(typeof t!="number"&&t!=null){var i=a;t=Le.createCallback(t,r,3);while(i--&&t(e[i],i,e)){n++}}else{n=t==null||r?1:t||n}return Z(e,0,Ce(we(0,a-n),a))}function br(){var e=[],t=-1,r=arguments.length,n=K(),a=He(),i=a===D,s=K();while(++t<r){var l=arguments[t];if(Xe(l)||$e(l)){e.push(l);n.push(i&&l.length>=o&&J(t?e[t]:s))}}var u=e[0],c=-1,d=u?u.length:0,f=[];e:while(++c<d){var p=n[0];l=u[c];if((p?z(p,l):a(s,l))<0){t=r;(p||s).push(l);while(--t){p=n[t];if((p?z(p,l):a(e[t],l))<0){continue e}}f.push(l)}}while(r--){p=n[r];if(p){Y(p)}}X(n);X(s);return f}function yr(e,t,n){var a=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=i;t=Le.createCallback(t,n,3);while(s--&&t(e[s],s,e)){a++}}else{a=t;if(a==null||n){return e?e[i-1]:r}}return Z(e,we(0,i-a))}function Sr(e,t,r){var n=e?e.length:0;if(typeof r=="number"){n=(r<0?we(0,n+r):Ce(r,n-1))+1}while(n--){if(e[n]===t){return n}}return-1}function wr(e){var t=arguments,r=0,n=t.length,a=e?e.length:0;while(++r<n){var i=-1,s=t[r];while(++i<a){if(e[i]===s){ve.call(e,i--,1);a--}}}return e}function Cr(e,r,n){e=+e||0;n=typeof n=="number"?n:+n||1;if(r==null){r=e;e=0}var a=-1,i=we(0,oe((r-e)/(n||1))),s=t(i);while(++a<i){s[a]=e;e+=n}return s}function Er(e,t,r){var n=-1,a=e?e.length:0,i=[];t=Le.createCallback(t,r,3);while(++n<a){var s=e[n];if(t(s,n,e)){i.push(s);ve.call(e,n--,1);a--}}return i}function jr(e,t,r){if(typeof t!="number"&&t!=null){var n=0,a=-1,i=e?e.length:0;t=Le.createCallback(t,r,3);while(++a<i&&t(e[a],a,e)){n++}}else{n=t==null||r?1:we(0,t)}return Z(e,n)}function kr(e,t,r,n){var a=0,i=e?e.length:a;r=r?Le.createCallback(r,n,1):Yr;t=r(t);while(a<i){var s=a+i>>>1;r(e[s])<t?a=s+1:i=s}return a}function Lr(){return Be(Re(arguments,true,true))}function qr(e,t,r,n){if(typeof t!="boolean"&&t!=null){n=r;r=typeof t!="function"&&n&&n[t]===e?null:t;t=false}if(r!=null){r=Le.createCallback(r,n,3)}return Be(e,t,r)}function Tr(e){return Pe(e,Z(arguments,1))}function Fr(){var e=-1,t=arguments.length;while(++e<t){var r=arguments[e];if(Xe(r)||$e(r)){var n=n?Be(Pe(n,r).concat(Pe(r,n))):r}}return n||[]}function Ur(){var e=arguments.length>1?arguments:arguments[0],r=-1,n=e?Zt(tr(e,"length")):0,a=t(n<0?0:n);while(++r<n){a[r]=tr(e,r)}return a}function Ar(e,t){var r=-1,n=e?e.length:0,a={};if(!t&&n&&!Xe(e[0])){t=[]}while(++r<n){var i=e[r];if(t){a[i]=t[r]}else if(i){a[i[0]]=i[1]}}return a}function Vr(e,t){if(!Ct(t)){throw new Q}return function(){if(--e<1){return t.apply(this,arguments)}}}function Nr(e,t){return arguments.length>2?ze(e,17,Z(arguments,2),null,t):ze(e,1,null,null,t)}function Pr(e){var t=arguments.length>1?Re(arguments,true,false,1):vt(e),r=-1,n=t.length;while(++r<n){var a=t[r];e[a]=ze(e[a],1,null,null,e)}return e}function Rr(e,t){return arguments.length>2?ze(t,19,Z(arguments,2),null,e):ze(t,3,null,null,e)}function Ir(){var e=arguments,t=e.length;while(t--){if(!Ct(e[t])){throw new Q}}return function(){var t=arguments,r=e.length;while(r--){t=[e[r].apply(this,t)]}return t[0]}}function Mr(e,t){t=typeof t=="number"?t:+t||e.length;return ze(e,4,null,null,null,t)}function Or(e,t,n){var a,i,s,o,l,u,c,d=0,f=false,p=true;if(!Ct(e)){throw new Q}t=we(0,t)||0;if(n===true){var h=true;p=false}else if(Et(n)){h=n.leading;f="maxWait"in n&&(we(t,n.maxWait)||0);p="trailing"in n?n.trailing:p}var v=function(){var n=t-(rn()-o);if(n<=0){if(i){le(i)}var f=c;i=u=c=r;if(f){d=rn();s=e.apply(l,a);if(!u&&!i){a=l=null}}}else{u=he(v,n)}};var g=function(){if(u){le(u)}i=u=c=r;if(p||f!==t){d=rn();s=e.apply(l,a);if(!u&&!i){a=l=null}}};return function(){a=arguments;o=rn();l=this;c=p&&(u||!h);if(f===false){var r=h&&!u}else{if(!i&&!h){d=o}var n=f-(o-d),m=n<=0;if(m){if(i){i=le(i)}d=o;s=e.apply(l,a)}else if(!i){i=he(g,n)}}if(m&&u){u=le(u)}else if(!u&&t!==f){u=he(v,t)}if(r){m=true;s=e.apply(l,a)}if(m&&!u&&!i){a=l=null}return s}}function Br(e){if(!Ct(e)){throw new Q}var t=Z(arguments,1);return he(function(){e.apply(r,t)},1)}function Dr(e,t){if(!Ct(e)){throw new Q}var n=Z(arguments,2);return he(function(){e.apply(r,n)},t)}function zr(e,t){if(!Ct(e)){throw new Q}var r=function(){var n=r.cache,a=t?t.apply(this,arguments):s+arguments[0];return fe.call(n,a)?n[a]:n[a]=e.apply(this,arguments)};r.cache={};return r}function Qr(e){var t,r;if(!Ct(e)){throw new Q}return function(){if(t){return r}t=true;r=e.apply(this,arguments);e=null;return r}}function Hr(e){return ze(e,16,Z(arguments,1))}function Gr(e){return ze(e,32,null,Z(arguments,1))}function Jr(e,t,r){var n=true,a=true;if(!Ct(e)){throw new Q}if(r===false){n=false}else if(Et(r)){n="leading"in r?r.leading:n;a="trailing"in r?r.trailing:a}A.leading=n;A.maxWait=t;A.trailing=a;return Or(e,t,A)}function Wr(e,t){return ze(t,16,[e])}function Kr(e){return function(){return e}}function $r(e,t,r){var n=typeof e;if(e==null||n=="function"){return Ve(e,t,r)}if(n!="object"){return an(e)}var a=Ze(e),i=a[0],s=e[i];if(a.length==1&&s===s&&!Et(s)){return function(e){var t=e[i];return s===t&&(s!==0||1/s==1/t)}}return function(t){var r=a.length,n=false;while(r--){if(!(n=Ie(t[a[r]],e[a[r]],null,true))){break}}return n}}function Xr(e){return e==null?"":B(e).replace(nt,Qe)}function Yr(e){return e}function Zr(e,t,r){var n=true,a=t&&vt(t);if(!t||!r&&!a.length){if(r==null){r=t}i=qe;t=e;e=Le;a=vt(t)}if(r===false){n=false}else if(Et(r)&&"chain"in r){n=r.chain}var i=e,s=Ct(i);Jt(a,function(r){var a=e[r]=t[r];if(s){i.prototype[r]=function(){var t=this.__chain__,r=this.__wrapped__,s=[r];pe.apply(s,arguments);var o=a.apply(e,s);if(n||t){if(r===o&&Et(o)){return this}o=new i(o);o.__chain__=t}return o}}})}function en(){e._=ae;return this}function tn(){}var rn=Ge(rn=a.now)&&rn||function(){return(new a).getTime()};var nn=Ee(u+"08")==8?Ee:function(e,t){return Ee(Ft(e)?e.replace(m,""):e,t||0)};function an(e){return function(t){return t[e]}}function sn(e,t,r){var n=e==null,a=t==null;if(r==null){if(typeof e=="boolean"&&a){r=e;e=1}else if(!a&&typeof t=="boolean"){r=t;a=true}}if(n&&a){t=1}e=+e||0;if(a){t=e;e=0}else{t=+t||0}if(r||e%1||t%1){var i=je();return Ce(e+i*(t-e+parseFloat("1e-"+((i+"").length-1))),t)}return Oe(e,t)}function on(e,t){if(e){var r=e[t];return Ct(r)?e[t]():r}}function ln(e,t,n){var a=Le.templateSettings;e=B(e||"");n=lt({},n,a);var i=lt({},n.imports,a.imports),s=Ze(i),o=Mt(i);var u,h=0,v=n.interpolate||_,m="__p += '";var x=O((n.escape||_).source+"|"+v.source+"|"+(v===g?p:_).source+"|"+(n.evaluate||_).source+"|$","g");e.replace(x,function(t,r,n,a,i,s){n||(n=a);m+=e.slice(h,s).replace(b,W);if(r){m+="' +\n__e("+r+") +\n'"}if(i){u=true;m+="';\n"+i+";\n__p += '"}if(n){m+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"}h=s+t.length;return t});m+="';\n";var y=n.variable,w=y;if(!w){y="obj";m="with ("+y+") {\n"+m+"\n}\n"}m=(u?m.replace(c,""):m).replace(d,"$1").replace(f,"$1;");m="function("+y+") {\n"+(w?"":y+" || ("+y+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var C="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+S++ +"]")+"\n*/";try{var E=l(s,"return "+m+C).apply(r,o)}catch(j){j.source=m;throw j}if(t){return E(t)}E.source=m;return E}function un(e,r,n){e=(e=+e)>-1?e:0;var a=-1,i=t(e);r=Ve(r,n,1);while(++a<e){i[a]=r(a)}return i}function cn(e){return e==null?"":B(e).replace(rt,Ke)}function dn(e){var t=++i;return B(e==null?"":e)+t}function fn(e){e=new qe(e);e.__chain__=true;return e}function pn(e,t){t(e);return e}function hn(){this.__chain__=true;return this}function vn(){return B(this.__wrapped__)}function gn(){return this.__wrapped__}Le.after=Vr;Le.assign=at;Le.at=Ot;Le.bind=Nr;Le.bindAll=Pr;Le.bindKey=Rr;Le.chain=fn;Le.compact=fr;Le.compose=Ir;Le.constant=Kr;Le.countBy=Dt;Le.create=ot;Le.createCallback=$r;Le.curry=Mr;Le.debounce=Or;Le.defaults=lt;Le.defer=Br;Le.delay=Dr;Le.difference=pr;Le.filter=Qt;Le.flatten=mr;Le.forEach=Jt;Le.forEachRight=Wt;Le.forIn=dt;Le.forInRight=ft;Le.forOwn=pt;Le.forOwnRight=ht;Le.functions=vt;Le.groupBy=Kt;Le.indexBy=$t;Le.initial=xr;Le.intersection=br;Le.invert=mt;Le.invoke=Xt;Le.keys=Ze;Le.map=Yt;Le.mapValues=At;Le.max=Zt;Le.memoize=zr;Le.merge=Vt;Le.min=er;Le.omit=Nt;Le.once=Qr;Le.pairs=Pt;Le.partial=Hr;Le.partialRight=Gr;Le.pick=Rt;Le.pluck=tr;Le.property=an;Le.pull=wr;Le.range=Cr;Le.reject=ar;Le.remove=Er;Le.rest=jr;Le.shuffle=sr;Le.sortBy=ur;Le.tap=pn;Le.throttle=Jr;Le.times=un;Le.toArray=cr;Le.transform=It;Le.union=Lr;Le.uniq=qr;Le.values=Mt;Le.where=dr;Le.without=Tr;Le.wrap=Wr;Le.xor=Fr;Le.zip=Ur;Le.zipObject=Ar;Le.collect=Yt;Le.drop=jr;Le.each=Jt;Le.eachRight=Wt;Le.extend=at;Le.methods=vt;Le.object=Ar;Le.select=Qt;Le.tail=jr;Le.unique=qr;Le.unzip=Ur;Zr(Le);Le.clone=it;Le.cloneDeep=st;Le.contains=Bt;Le.escape=Xr;Le.every=zt;Le.find=Ht;Le.findIndex=hr;Le.findKey=ut;Le.findLast=Gt;Le.findLastIndex=vr;Le.findLastKey=ct;Le.has=gt;Le.identity=Yr;Le.indexOf=_r;Le.isArguments=$e;Le.isArray=Xe;Le.isBoolean=_t;Le.isDate=xt;Le.isElement=bt;Le.isEmpty=yt;Le.isEqual=St;Le.isFinite=wt;Le.isFunction=Ct;Le.isNaN=jt;Le.isNull=kt;Le.isNumber=Lt;Le.isObject=Et;Le.isPlainObject=qt;Le.isRegExp=Tt;Le.isString=Ft;Le.isUndefined=Ut;Le.lastIndexOf=Sr;Le.mixin=Zr;Le.noConflict=en;Le.noop=tn;Le.now=rn;Le.parseInt=nn;Le.random=sn;Le.reduce=rr;Le.reduceRight=nr;Le.result=on;Le.runInContext=ee;Le.size=or;Le.some=lr;Le.sortedIndex=kr;Le.template=ln;Le.unescape=cn;Le.uniqueId=dn;Le.all=zt;Le.any=lr;Le.detect=Ht;Le.findWhere=Ht;Le.foldl=rr;Le.foldr=nr;Le.include=Bt;Le.inject=rr;Zr(function(){var e={};pt(Le,function(t,r){if(!Le.prototype[r]){e[r]=t}});return e}(),false);Le.first=gr;Le.last=yr;Le.sample=ir;Le.take=gr;Le.head=gr;pt(Le,function(e,t){var r=t!=="sample";if(!Le.prototype[t]){Le.prototype[t]=function(t,n){var a=this.__chain__,i=e(this.__wrapped__,t,n);return!a&&(t==null||n&&!(r&&typeof t=="function"))?i:new qe(i,a)}}});Le.VERSION="2.4.2";Le.prototype.chain=hn;Le.prototype.toString=vn;Le.prototype.value=gn;Le.prototype.valueOf=gn;Jt(["join","pop","shift"],function(e){var t=re[e];Le.prototype[e]=function(){var e=this.__chain__,r=t.apply(this.__wrapped__,arguments);return e?new qe(r,e):r}});Jt(["push","reverse","sort","unshift"],function(e){var t=re[e];Le.prototype[e]=function(){t.apply(this.__wrapped__,arguments);return this}});Jt(["concat","slice","splice"],function(e){var t=re[e];Le.prototype[e]=function(){return new qe(t.apply(this.__wrapped__,arguments),this.__chain__)}});return Le}var te=ee();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){R._=te;define(function(){return te})}else if(I&&M){if(O){(M.exports=te)._=te}else{I._=te}}else{R._=te}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);