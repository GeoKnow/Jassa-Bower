(function e(t,r,a){function n(s,o){if(!r[s]){if(!t[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return n(r?r:e)},c,c.exports,e,t,r,a)}return r[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<a.length;s++)n(a[s]);return n})({1:[function(e,module,t){var Jassa=e("./index.js");if(typeof define=="function"&&define.amd){define("Jassa",function(){return Jassa})}else{window.Jassa=Jassa}},{"./index.js":61}],2:[function(e,module,t){var r=function(){function e(e,t){var r;for(var a=1,n=arguments.length;a<n;a++){t=arguments[a];for(r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}}return e}function t(e){if(!e){return[]}if("toArray"in Object(e)){return e.toArray()}var t=e.length||0,r=new Array(t);while(t--){r[t]=e[t]}return r}var a=function(){};var n="[object Function]";var i=Object.prototype.toString;function s(e){return i.call(e)===n}function o(e){var t=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return t.length===1&&!t[0]?[]:t}function l(e,t){var r=e.length,a=t.length;while(a--){e[r+a]=t[a]}return e}function u(e,t){return function(){var r=l([e.bind(this)],arguments);return t.apply(this,r)}}var c=function(){for(var e in{toString:1}){if(e==="toString"){return false}}return true}();function d(){}function p(){var n=null,i=t(arguments);if(s(i[0])){n=i.shift()}function o(){this.initialize.apply(this,arguments)}e(o,r.Methods);o.superclass=n;o.subclasses=[];if(n){d.prototype=n.prototype;o.prototype=new d;n.subclasses.push(o)}for(var l=0,u=i.length;l<u;l++){o.addMethods(i[l])}if(!o.prototype.initialize){o.prototype.initialize=a}o.prototype.constructor=o;return o}function f(e){var t=this.superclass&&this.superclass.prototype,r=Object.keys(e);if(c){if(e.toString!==Object.prototype.toString){r.push("toString")}if(e.valueOf!==Object.prototype.valueOf){r.push("valueOf")}}for(var a=0,n=r.length;a<n;a++){var i=r[a],l=e[i];if(t&&s(l)&&o(l)[0]==="$super"){var d=l;l=u(function(e){return function(){return t[e].apply(this,arguments)}}(i),d);l.valueOf=function(e){return function(){return e.valueOf.call(e)}}(d);l.toString=function(e){return function(){return e.toString.call(e)}}(d)}this.prototype[i]=l}return this}return{create:p,Methods:{addMethods:f}}}();module.exports=r},{}],3:[function(e,module,t){var r;var a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var n;var i;var s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var o;function l(e){a.lastIndex=0;return a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function u(e,t){var r,a,s,c,d=n,p,f=t[e];if(f&&typeof f==="object"&&typeof f.toJSON==="function"){f=f.toJSON(e)}if(typeof o==="function"){f=o.call(t,e,f)}switch(typeof f){case"string":return l(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f){return"null"}n+=i;p=[];if(Object.prototype.toString.apply(f)==="[object Array]"){c=f.length;for(r=0;r<c;r+=1){p[r]=u(r,f)||"null"}s=p.length===0?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+d+"]":"["+p.join(",")+"]";n=d;return s}if(o&&typeof o==="object"){c=o.length;for(r=0;r<c;r+=1){if(typeof o[r]==="string"){a=o[r];s=u(a,f);if(s){p.push(l(a)+(n?": ":":")+s)}}}}else{var v=Object.keys(f).sort();for(r in v){a=v[r];if(Object.prototype.hasOwnProperty.call(f,a)){s=u(a,f);if(s){p.push(l(a)+(n?": ":":")+s)}}}}s=p.length===0?"{}":n?"{\n"+n+p.join(",\n"+n)+"\n"+d+"}":"{"+p.join(",")+"}";n=d;return s}}var c=function(e,t,r){var a;n="";i="";if(typeof r==="number"){for(a=0;a<r;a+=1){i+=" "}}else if(typeof r==="string"){i=r}o=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return u("",{"":e})};r={stringify:c};module.exports=r},{}],4:[function(e,module,t){var r=e("lodash.foreach");var a=e("lodash.uniq");var n=e("../ext/Class");var i=e("../sparql/ExprUtils");var s=e("./ElementsAndExprs");var o=n.create({classLabel:"jassa.facete.ConstraintManager",initialize:function(e){this.constraints=e||[]},shallowClone:function(){var e=new o(this.constraints.slice(0));return e},getConstraintsByPath:function(e){var t=[];var r=this.constraints;r.forEach(function(r){var a=r.getDeclaredPaths();var n=a.some(function(t){var r=t.equals(e);return r});if(n){t.push(r)}});return t},getConstrainedSteps:function(e){var t=[];var r=e.getSteps();var n=this.constraints;for(var i=0;i<n.length;++i){var s=n[i];var o=s.getDeclaredPaths();for(var l=0;l<o.length;++l){var u=o[l];var c=u.getSteps();var d=c.length-r.length;var p=u.startsWith(e);if(d==1&&p){var f=c[c.length-1];t.push(f)}}}var v=a(t,function(e){return""+e});return v},getConstraints:function(){return this.constraints},addConstraint:function(e){this.constraints.push(e)},removeConstraint:function(e){var t=false;var r=this.constraints;var a=[];for(var n=0;n<r.length;++n){var i=r[n];if(!i.equals(e)){a.push(i)}else{t=true}}this.constraints=a;return t},toggleConstraint:function(e){var t=this.removeConstraint(e);if(!t){this.addConstraint(e)}},createElementsAndExprs:function(e,t){var a=[];var n=[];var o={};var l=this;this.constraints.forEach(function(r){var n=r.getDeclaredPaths();var s=n.join(" ");if(t){var l=n.some(function(e){var r=t.equals(e);return r});if(l){return}}n.forEach(function(t){var r=e.forPath(t);var n=r.getElements();a.push.apply(a,n)});var u=r.createElementsAndExprs(e);var c=u.getElements();var d=u.getExprs();if(c){a.push.apply(a,c)}if(d&&d.length>0){var p=o[s];if(!p){p=[];o[s]=p}var f=i.andify(d);p.push(f)}});r(o,function(e){var t=i.orify(e);n.push(t)});var u=new s(a,n);return u}});module.exports=o},{"../ext/Class":2,"../sparql/ExprUtils":162,"./ElementsAndExprs":8,"lodash.foreach":382,"lodash.uniq":468}],5:[function(e,module,t){var r=e("../sparql/ElementUtils");var a=e("../sparql/expr/ExprVar");var n=e("../sparql/expr/E_Lang");var i=e("../sparql/expr/E_LangMatches");var s=e("../sparql/expr/E_Regex");var o=e("../sparql/expr/E_Equals");var l=e("../sparql/NodeValueUtils");var u=e("../sparql/element/ElementTriplesBlock");var c=e("./ElementsAndExprs");var d=e("../sparql/Concept");var p=e("../sparql/ConceptUtils");var f={createConstraintExists:function(e,t){var a=e.forPath(t);var n=r.createElementsTriplesBlock(a.getTriples());var i=new c(n,[]);return i},createConstraintLang:function(e,t,s){var o=e.forPath(t);var l=o.getVar();var u=new a(l);var d=r.createElementsTriplesBlock(o.getTriples());var p=s;var f=[new i(new n(u),p)];var v=new c(d,f);return v},createConstraintRegex:function(e,t,n){var i=e.forPath(t);var o=i.getVar();var l=new a(o);var u=r.createElementsTriplesBlock(i.getTriples());var d=n;var p=[new s(l,d,"i")];var f=new c(u,p);return f},createConstraintEquals:function(e,t,n){var i=e.forPath(t);var s=i.getVar();var u=new a(s);var d=r.createElementsTriplesBlock(i.getTriples());var p=l.makeNode(n);var f=[new o(u,p)];var v=new c(d,f);return v},createConstraintConcept:function(e,t,r){var a=e.forPath(t);var n=a.getVar();var i=new u(a.getTriples());var s=new d(i,n);var o=p.createCombinedConcept(s,r,true,false);var l=[];var f=new c([o.getElement()],l);return f}};module.exports=f},{"../sparql/Concept":155,"../sparql/ConceptUtils":156,"../sparql/ElementUtils":158,"../sparql/NodeValueUtils":167,"../sparql/element/ElementTriplesBlock":188,"../sparql/expr/E_Equals":197,"../sparql/expr/E_Lang":200,"../sparql/expr/E_LangMatches":201,"../sparql/expr/E_Regex":209,"../sparql/expr/ExprVar":220,"./ElementsAndExprs":8}],6:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/collection/HashMap");var n=e("../rdf/NodeUtils");var i=e("../rdf/NodeFactory");var s=e("../sparql/element/ElementSubQuery");var o=e("../sparql/element/ElementUnion");var l=e("../sparql/element/ElementFilter");var u=e("../sparql/element/ElementGroup");var c=e("../sparql/Query");var d=e("../sparql/Concept");var p=e("../sparql/ConceptUtils");var f=e("../sparql/expr/ExprVar");var v=e("../sparql/expr/E_OneOf");var h=e("../service/list_service/ListServiceSparqlQuery");var g=e("../service/lookup_service/LookupService");var m=e("./FacetUtils");var x=e("../sparql/Relation");var _=e("../sparql/RelationUtils");var b=e("../sparql/VarUtils");var y=e("../sponate/agg/AggMap");var S=e("../sponate/agg/AggTransform");var C=e("../sponate/agg/AggLiteral");var E=e("../sponate/binding_mapper/BindingMapperExpr");var w=e("../sponate/LookupServiceUtils");var j=e("../sponate/ServiceUtils");var k=e("../util/shared");var L=k.Promise;var q=e("../sparql/QueryUtils");var A={createAggMapCount:function(e,t){var r=new y(new E(new f(e)),new S(new C(new E(new f(t))),n.getValue));return r},execQueries:function(e,t,r,n){var i=q.createQueryUnionSubQueries(t,[r,n]);var s;if(i){var o=this.createAggMapCount(r,n);s=j.execAgg(e,i,o)}else{s=L.resolve(new a)}return s},createQueriesPreCount:function(e,t,r,a){var n=e.getDefaultRelation();var i=e.getPropertyToRelation();var s=r.map(function(e){var r=i.get(e);if(!r){r=n}var s=_.createQueryRawSize(r,e,t,a);return s});return s},createQueriesExactCount:function(e,t,r){var a=e.getSourceVar();var n=e.getDefaultRelation();var i=e.getPropertyToRelation();var s=[];var o=[];r.forEach(function(e){var r=i.get(e);if(!r){s.push(e)}else{var a=_.createQueryDistinctValueCount(r,t);o.push(a)}});var c=n;var d=new l(new v(new f(a),s));var p=new x(new u([c.getElement(),d]),c.getSourceVar(),c.getTargetVar());var h=_.createQueryDistinctValueCount(p,t);o.push(h);return o}};module.exports=A},{"../ext/Class":2,"../rdf/NodeFactory":65,"../rdf/NodeUtils":66,"../service/list_service/ListServiceSparqlQuery":110,"../service/lookup_service/LookupService":113,"../sparql/Concept":155,"../sparql/ConceptUtils":156,"../sparql/Query":169,"../sparql/QueryUtils":171,"../sparql/Relation":172,"../sparql/RelationUtils":173,"../sparql/VarUtils":178,"../sparql/element/ElementFilter":183,"../sparql/element/ElementGroup":184,"../sparql/element/ElementSubQuery":187,"../sparql/element/ElementUnion":189,"../sparql/expr/E_OneOf":208,"../sparql/expr/ExprVar":220,"../sponate/LookupServiceUtils":238,"../sponate/ServiceUtils":245,"../sponate/agg/AggLiteral":260,"../sponate/agg/AggMap":261,"../sponate/agg/AggTransform":264,"../sponate/binding_mapper/BindingMapperExpr":266,"../util/collection/HashMap":291,"../util/shared":300,"./FacetUtils":15}],7:[function(e,module,t){var r=e("./FacetUtils");var a=e("../sparql/element/ElementGroup");var n=e("../sparql/element/ElementOptional");var i=e("./Path");var s={createElementTable:function(e,t){var s=r.createConceptResources(e,new i,false);var o=this.facetConfig.getRootFacetNode();var l=this.paths.map(function(e){var t=o.forPath(e);var r=t.getElements(true);var i=new a(r);var s;if(r.length!==0){s=new n(i)}else{s=i}return s});var u=[];u.push.apply(u,s.getElements());u.push.apply(u,l);var c=new a(u);var d=c.flatten();return d}};module.exports=s},{"../sparql/element/ElementGroup":184,"../sparql/element/ElementOptional":185,"./FacetUtils":15,"./Path":16}],8:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/ElementUtils");var n=r.create({initialize:function(e,t){this.elements=e;this.exprs=t},getElements:function(){return this.elements},getExprs:function(){return this.exprs},toElements:function(){var e=[];var t=a.createFilterElements(this.exprs);e.push.apply(e,this.elements);e.push.apply(e,t);return e}});module.exports=n},{"../ext/Class":2,"../sparql/ElementUtils":158}],9:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/ConceptUtils");var n=e("./FacetNode");var i=e("./ConstraintManager");var s=r.create({classLabel:"jassa.facete.FacetConfig",initialize:function(e,t,r){this.baseConcept=e||a.createSubjectConcept();this.rootFacetNode=t||n.createRoot(this.baseConcept.getVar());this.constraintManager=r||new i},getBaseConcept:function(){return this.baseConcept},setBaseConcept:function(e){this.baseConcept=e},getRootFacetNode:function(){return this.rootFacetNode},setRootFacetNode:function(e){this.rootFacetNode=e},getConstraintManager:function(){return this.constraintManager},setConstraintManager:function(e){this.constraintManager=e}});module.exports=s},{"../ext/Class":2,"../sparql/ConceptUtils":156,"./ConstraintManager":4,"./FacetNode":10}],10:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeFactory");var n=e("../sparql/element/ElementTriplesBlock");var i=e("../sparql/GenSym");var s=e("../sparql/VarUtils");var o=e("./Path");var l=e("./Step");var u=e("./VarNode");var c=r.create({initialize:function(e,t,r,a){this.parent=r;this.root=a;if(!this.root){if(this.parent){this.root=r.root}else{this.root=this}}this.varNode=e;this.step=t;this._isActive=true;this.idToChild={}},getRootNode:function(){return this.root},isRoot:function(){var e=this.parent?false:true;return e},getVar:function(){var e=this.varNode.getVariableName();var t=a.createVar(e);return t},getVariable:function(){if(!this.warningShown){this.warningShown=true}return this.getVar()},getStep:function(){return this.step},getParent:function(){return this.parent},getPath:function(){var e=[];var t=this;while(t!=this.root){e.push(t.getStep());t=t.getParent()}e.reverse();var r=new o(e);return r},forPath:function(e){var t=e.getSteps();var r=this;t.forEach(function(e){r=r.forStep(e)});return r},getIdStr:function(){},getSteps:function(){return this.steps},isActiveDirect:function(){return this._isActive},getElements:function(){var e=[];var t=this.getTriples();if(t.length>0){var r=new n(t);e.push(r)}return e},getTriples:function(){var e=[];this.getTriples2(e);return e},getTriples2:function(e){this.createDirectTriples2(e);if(this.parent){this.parent.getTriples2(e)}return e},createDirectTriples:function(){var e=[];this.createDirectTriples2(e);return e},createDirectTriples2:function(e){if(this.step){var t=this.parent.getVariable();var r=this.getVariable();var a=this.step.createElement(t,r,this.generator);var n=a.getTriples();e.push.apply(e,n)}return e},isActive:function(){if(!this._isActive){return false}if(this.parent){return this.parent.isActive()}return true},attachToParent:function(){if(!this.parent){return}this.parent[this.id]=this;this.parent.attachToParent()},forProperty:function(e,t){var r=new l(e,t);var a=this.forStep(r);return a},forStep:function(e){var t=""+JSON.stringify(e);var r=this.idToChild[t];if(!r){var a=this.varNode.forStepId(t);r=new c(a,e,this,this.root);this.idToChild[t]=r}return r},copyExclude:function(){var e=new c;console.log("Now root:",e);this.root.copyExcludeRec(e,this);return e},copyExcludeRec:function(e,t){console.log("Copy:",this,e);if(this===t){return}this.copyTo(e);this.steps.forEach(function(r){var a=r.step;var n=r.child;console.log("child:",a,n);if(n===t){return}var i=e.forStep(a);console.log("New child:",i);n.copyExcludeRec(i,t)})}});c.createRoot=function(e,t){var r=e?e.getName():s.s.getName();t=t?t:new i("fv");var a=new u(r,t);var n=new c(a);return n};module.exports=c},{"../ext/Class":2,"../rdf/NodeFactory":65,"../sparql/GenSym":163,"../sparql/VarUtils":178,"../sparql/element/ElementTriplesBlock":188,"./Path":16,"./Step":20,"./VarNode":23}],11:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r,a){this.expansionState=e||0;this.limit=t||10;this.offset=r;this.filter=a},getExpansionState:function(){return this.expansionState},getLimit:function(){return this.limit},getOffset:function(){return this.offset},getFilter:function(){return this.filter},setExpansionState:function(e){this.expansionState=e},setLimit:function(e){this.limit=e},setOffset:function(e){this.offset=e}});module.exports=a},{"../ext/Class":2}],12:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.sourceVar=e;this.defaultRelation=t;this.propertyToRelation=r},getSourceVar:function(){return this.sourceVar},getDefaultRelation:function(){return this.defaultRelation},getPropertyToRelation:function(){return this.propertyToRelation}});module.exports=a},{"../ext/Class":2}],13:[function(e,module,t){var r=e("../ext/Class");var a=e("./FacetNodeState");var n=e("../util/collection/HashMap");var i=r.create({initialize:function(e){this.defaultState=e||new a;this.pathToState=new n},getState:function(e){var t=this.pathToState.get(e);var r=t||this.defaultState;return r},setState:function(e,t){this.pathToState.put(e,t)}});module.exports=i},{"../ext/Class":2,"../util/collection/HashMap":291,"./FacetNodeState":11}],14:[function(e,module,t){},{}],15:[function(e,module,t){var r=e("../sparql/Concept");var a=e("../sparql/Relation");var n=e("../util/collection/HashMap");var i=e("../rdf/NodeFactory");var s=e("../rdf/Triple");var o=e("../rdf/NodeUtils");var l=e("../sparql/expr/ExprVar");var u=e("../sparql/expr/E_Equals");var c=e("../sparql/expr/NodeValue");var d=e("../sparql/expr/E_LogicalNot");var p=e("../sparql/expr/E_OneOf");var f=e("../sparql/element/ElementGroup");var v=e("../sparql/element/ElementFilter");var h=e("../sparql/element/ElementTriplesBlock");var g=e("../sparql/PatternUtils");var m=e("../sparql/ElementUtils");var x=e("../sparql/VarUtils");var _=e("./Step");var b=e("./StepUtils");var y=e("./StepRelation");var S=e("./FacetRelationIndex");var C=e("./PathHead");var E={createConceptResources:function(e,t,a){var n=e.getBaseConcept();var i=e.getRootFacetNode();var s=e.getConstraintManager();var o=a?t:null;var l=s.createElementsAndExprs(i,o);var u=l.getElements();var c=l.getExprs();var d=i.forPath(t);var p=d.getVar();var h=n.getElements();var g=d.getElements();var m=[];m.push.apply(m,g);m.push.apply(m,u);if(n.isSubjectConcept()){if(m.length===0){m=h}}else{m.push.apply(m,h)}var x=c.map(function(e){var t=new v(e);return t});m.push.apply(m,x);var _=new f(m).flatten();var b=new r(_,p);return b},createConceptFacets:function(e,t){var a=this.createRelationFacets(e,t);var n=new r(a.getElement(),a.getSourceVar());return n},createRelationFacets:function(e,t,r){var n=t.getPath();var i=t.isInverse();var o=e.getBaseConcept();var d=e.getRootFacetNode();var p=e.getConstraintManager();var m=null;if(r){m=new _(r.getUri(),i)}var b=null;if(m){b=n.copyAppendStep(m)}var y=p.createElementsAndExprs(d,b);var S=y.toElements();var C=d.forPath(n);var E=C.getVar();var w=o.getElements();var j;if(o.isSubjectConcept()){j=S}else{j=w.concat(S)}var k=g.getVarsMentioned(j);var L=x.freshVar("p",k);var q=x.freshVar("o",k);var A=!i?new s(E,L,q):new s(q,L,E);j.push(new h([A]));if(m){var V=new l(L);var N=new u(V,c.makeNode(r));j.push(new v(N))}var U=C.getElements();j.push.apply(j,U);var T=new f(j).flatten();var F=new a(T,L,q);return F},createStepRelationsProperties:function(e,t,r,n){var i=[];var s=t.getPath();var l=t.isInverse();var u=e.getBaseConcept();var c=e.getRootFacetNode();var d=e.getConstraintManager();var p=r.map(o.getUri);var v=c.forPath(s);var h=d.getConstrainedSteps(s);var g=h.filter(function(e){var t=e.isInverse()===l;if(!t){return false}var r=p.indexOf(e.getPropertyName())>=0;var a=n?!r:r;return a});var m=g.map(b.getPropertyName);var x=[];var _=[];r.forEach(function(e){if(m.indexOf(e.getUri())>=0){_.push(e)}else{x.push(e)}});var S=this.createStepRelations(e,s,g);i.push.apply(i,S);var C=this.createRelationFacets(e,t);var E=this.createElementFilterBindVar(C.getSourceVar(),x,false);if(E!=null){C=new a(new f([C.getElement(),E]),C.getSourceVar(),C.getTargetVar())}if(x.length>0||n){var w=new y(null,C);i.push(w)}return i},createFacetRelationIndex:function(e,t){var r=E.createStepRelationsProperties(e,t,[],true);var a=r.length>0?r[0].getRelation().getSourceVar():null;var s=new n;var o=null;r.forEach(function(e){var t=e.getStep();var r=e.getRelation();var a=t?i.createUri(t.getPropertyName()):null;if(a){s.put(a,r)}else{o=r}});var l=new S(a,o,s);return l},createElementFilterBindVar:function(e,t,r){var a=null;if(t.length>0){var n=new p(new l(e),t);if(r){n=new d(n)}a=new v(n)}return a},createStepRelations:function(e,t,r){var a=this;var n=r.map(function(r){var n=a.createStepRelation(e,t,r);return n});return n},createStepRelation:function(e,t,r){var a=r.getPropertyName();var n=i.createUri(a);var s=new C(t,r.isInverse());var o=this.createRelationFacets(e,s,n);var l=new y(r,o);return l}};module.exports=E},{"../rdf/NodeFactory":65,"../rdf/NodeUtils":66,"../rdf/Triple":68,"../sparql/Concept":155,"../sparql/ElementUtils":158,"../sparql/PatternUtils":168,"../sparql/Relation":172,"../sparql/VarUtils":178,"../sparql/element/ElementFilter":183,"../sparql/element/ElementGroup":184,"../sparql/element/ElementTriplesBlock":188,"../sparql/expr/E_Equals":197,"../sparql/expr/E_LogicalNot":205,"../sparql/expr/E_OneOf":208,"../sparql/expr/ExprVar":220,"../sparql/expr/NodeValue":221,"../util/collection/HashMap":291,"./FacetRelationIndex":12,"./PathHead":17,"./Step":20,"./StepRelation":21,"./StepUtils":22}],16:[function(e,module,t){var r=e("../ext/Class");var a=e("./Step");var n=r.create({classLabel:"jassa.facete.Path",initialize:function(e){this.steps=e?e:[]},getLength:function(){return this.steps.length},isEmpty:function(){var e=this.steps.length===0;return e},toString:function(){var e=this.steps.join(" ");return e},concat:function(e){var t=new n(this.steps.concat(e.steps));return t},getLastStep:function(){var e=this.steps;var t=e.length;var r;if(t===0){r=null}else{r=e[t-1]}return r},getSteps:function(){return this.steps},startsWith:function(e){var t=e.steps.length;if(t>this.steps.length){return false}for(var r=0;r<t;++r){var a=this.steps[r];var n=e.steps[r];if(!a.equals(n)){return false}}return true},hashCode:function(){return this.toString()},equals:function(e){var t=this.steps.length;if(t!=e.steps.length){return false}var r=this.startsWith(e);return r},copyAppendStep:function(e){var t=this.steps.slice(0);t.push(e);var r=new n(t);return r},toJson:function(){var e=[];var t=this.steps;for(var r=0;r<t.length;++r){var a=t[r];var n=a.toJson();e.push(n)}return e},getPropertyNames:function(){var e=[];var t=this.steps;for(var r=0;r<t.length;++r){var a=t[r];var n=a.getPropertyName();e.push(n)}return e}});n.fromJson=function(e){var t=[];for(var r=0;r<e.length;++r){var i=e[r];var s=a.fromJson(i);t.push(s)}var o=new n(t);return o};n.parse=function(e){e=e.trim();var t=e.length!==0?e.split(" "):[];var r=t.map(function(e){return a.parse(e)});var i=new n(r);return i};module.exports=n},{"../ext/Class":2,"./Step":20}],17:[function(e,module,t){var r=e("../ext/Class");var a=e("./Path");var n=r.create({initialize:function(e,t){this.path=e;this._isInverse=!!t},getPath:function(){return this.path},isInverse:function(){return this._isInverse}});n.parse=function(e,t){var r=a.parse(e);var i=new n(r,!!t);return i};module.exports=n},{"../ext/Class":2,"./Path":16}],18:[function(e,module,t){var r=e("../rdf/NodeFactory");var a=e("../sparql/Query");var n=e("../sparql/expr/ExprVar");var i=e("../sparql/SortCondition");var s=[];var o=e("../sparql/expr/E_LogicalNot");var l=e("../sparql/expr/E_Bound");var u={createQueryFacet:function(e,t){if(!e){return null}var u=t.isDistinct();var c=new a;c.setQueryPattern(e);var d=t.getColumns();var p={};var f=[];var v=[];d.forEach(function(e){var t=e.getId();var a=r.createVar(t);var i=new n(a);var o=e.getAggregator();if(o){f.push(t);var l=o.getName();var u=s[l];if(!u){throw"No aggExprFactory for "+l}var d=u.createExpr(i);i=d;c.getProject().add(a,i)}else{v.push(t);c.getProject().add(a)}p[t]=i});if(f.length>0){v.forEach(function(e){var t=p[e];c.getGroupBy().push(t)});u=false}var h=t.getLimitAndOffset();c.setLimit(h.getLimit());c.setOffset(h.getOffset());var g=t.getSortConditions();g.forEach(function(e){var t=e.getColumnId();var r=p[t];if(!r){console.log("[ERROR] Should not happen");throw"Should not happen"}var a=e.getSortDir();var n=e.getSortType();var s=null;switch(n){case"null":if(f.indexOf(t)<0){if(a>0){s=new i(new o(new l(r)),1)}else if(a<0){s=new i(new l(r),1)}}break;case"data":s=!a?null:new i(r,a);break;default:console.log("Should not happen");throw"Should not happen"}if(s){c.getOrderBy().push(s)}});c.setDistinct(u);return c}}},{"../rdf/NodeFactory":65,"../sparql/Query":169,"../sparql/SortCondition":174,"../sparql/expr/E_Bound":195,"../sparql/expr/E_LogicalNot":205,"../sparql/expr/ExprVar":220}],19:[function(e,module,t){},{}],20:[function(e,module,t){var r=e("lodash.isequal");var a=e("../ext/Class");var n=e("../rdf/NodeFactory");var i=e("../rdf/Triple");var s=e("../sparql/element/ElementTriplesBlock");var o=e("../util/ObjectUtils");var l=a.create({classLabel:"jassa.facete.Step",initialize:function(e,t){this.type="property";this.propertyName=e;this._isInverse=t},toJson:function(){var e={isInverse:this.isInverse,propertyName:this.propertyName};return e},getPropertyName:function(){return this.propertyName},isInverse:function(){return this._isInverse},equals:function(e){var t=r(this,e);return t},toString:function(){if(this._isInverse){return"<"+this.propertyName}else{return this.propertyName}},createElement:function(e,t,r){var a=n.createUri(this.propertyName);var o;if(this._isInverse){o=new i(t,a,e)}else{o=new i(e,a,t)}var l=new s([o]);return l}});l.fromJson=function(e){var t=e.propertyName;var r=e.IsInverse();var a=new l(t,r);return a};l.parse=function(e){var t;if(e.charAt("<")>=0){t=new l(e.substring(1),true)}else{t=new l(e,false)}return t};module.exports=l},{"../ext/Class":2,"../rdf/NodeFactory":65,"../rdf/Triple":68,"../sparql/element/ElementTriplesBlock":188,"../util/ObjectUtils":280,"lodash.isequal":412}],21:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.step=e;this.relation=t},getStep:function(){return this.step},getRelation:function(){return this.relation},toString:function(){return this.step+": "+this.relation}});module.exports=a},{"../ext/Class":2}],22:[function(e,module,t){var r={getPropertyName:function(e){var t=e.getPropertyName();return t}};module.exports=r},{}],23:[function(e,module,t){var r=e("lodash.foreach");var a=e("../ext/Class");var n=e("./VarNode");var i=e("./Step");var n=a.create({initialize:function(e,t,r,a,n){this.variableName=e;this.generator=t;this.stepId=r;this.parent=a;this.root=n;if(!this.root){if(this.parent){this.root=a.root}else{this.root=this}}this.idToChild={}},isRoot:function(){var e=this.parent?false:true;return e},getVariableName:function(){return this.variableName},getIdStr:function(){var e=this.parent?this.parent.getIdStr():"";var t=e+this.variableName;return t},getStepId:function(e){return""+JSON.stringify(e)},getSteps:function(){return this.steps},forProperty:function(e,t){var r=new i(e,t);var a=this.forStep(r);return a},forStepId:function(e){var t=this.idToChild[e];if(!t){var r=this.generator.next();t=new n(r,this.generator,e,this);this.idToChild[e]=t}return t},findNodeByVarName:function(e){if(this.variableName===e){return this}var t=[];r(this.idToChild,function(e){t.push(e)});for(var a=0;a<t.length;++a){var n=t[a];var i=n.findNodeByVarName(e);if(i){return i}}return null}});module.exports=n},{"../ext/Class":2,"./Step":20,"./VarNode":23,"lodash.foreach":382}],24:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getName:function(){throw new Error("Override me")},getDeclaredPaths:function(){console.log("[ERROR] Override me");throw new Error("Override me")},createElementsAndExprs:function(e){throw new Error("Override me")},equals:function(){throw new Error("Override me")},hashCode:function(){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],25:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Constraint");var n=r.create(a,{initialize:function(e,t){this.name=e;this.path=t},getName:function(){return this.name},getDeclaredPaths:function(){return[this.path]},getDeclaredPath:function(){return this.path}});module.exports=n},{"../../ext/Class":2,"./Constraint":24}],26:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ObjectUtils");var n=e("./ConstraintBasePath");var i=r.create(n,{initialize:function($super,e,t,r){$super(e,t);this.value=r},getValue:function(){return this.value},equals:function(e){if(!e instanceof n){return false}var t=this.name==e.name;var r=this.path.equals(e.path);var a=this.value.equals(e.value);var i=t&&r&&a;return i},hashCode:function(){var e=a.hashCode(this,true);return e}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":280,"./ConstraintBasePath":25}],27:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePath");var i=r.create(n,{classLabel:"jassa.facete.ConstraintConcept",initialize:function($super,e,t){$super("concept",e);this.concept=t},createElementsAndExprs:function(e){var t=a.createConstraintConcept(e,this.path,this.concept);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePath":25}],28:[function(e,module,t){},{}],29:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePathValue");var i=r.create(n,{classLabel:"jassa.facete.ConstraintEquals",initialize:function($super,e,t){$super("equals",e,t)},createElementsAndExprs:function(e){var t=a.createConstraintEquals(e,this.path,this.value);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePathValue":26}],30:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePath");var i=r.create(n,{classLabel:"jassa.facete.ConstraintExists",initialize:function($super,e){$super("exists",e)},createElementsAndExprs:function(e){var t=a.createConstraintExists(e,this.path);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePath":25}],31:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePathValue");var i=r.create(n,{classLabel:"jassa.facete.ConstraintLang",initialize:function($super,e,t){$super("lang",e,t)},createElementsAndExprs:function(e){var t=a.createConstraintLang(e,this.path,this.value);return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePathValue":26}],32:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ConstraintUtils");var n=e("./ConstraintBasePathValue");var i=r.create(n,{classLabel:"jassa.facete.ConstraintRegex",initialize:function($super,e,t){$super("regex",e,t)},createElementsAndExprs:function(e){var t=a.createConstraintRegex(e,this.path,this.value.getLiteralLexicalForm());return t}});module.exports=i},{"../../ext/Class":2,"../ConstraintUtils":5,"./ConstraintBasePathValue":26}],33:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getConcept:function(e){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],34:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/Concept");var n=e("../FacetUtils");var i=e("./FacetConceptSupplier");var s=r.create(i,{initialize:function(e){this.facetConfig=e},getConcept:function(e){var t=n.createRelationFacets(this.facetConfig,e);var r=new a(t.getElement(),t.getSourceVar());return r}});module.exports=s},{"../../ext/Class":2,"../../sparql/Concept":155,"../FacetUtils":15,"./FacetConceptSupplier":33}],35:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashMap");var n=e("../FacetUtils");var i=e("./FacetConceptSupplier");var s=r.create({initialize:function(e,t){this.facetConceptSupplierFallback=e;this.pathHeadToConcept=t||new a},getPathHeadToConcept:function(){return this.pathHeadToConcept},getConcept:function(e){var t=this.pathHeadToConcept.get(e);var r=t||this.facetConceptSupplierFallback.getConcept(e);return r}});module.exports=s},{"../../ext/Class":2,"../../util/collection/HashMap":291,"../FacetUtils":15,"./FacetConceptSupplier":33}],36:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createListService:function(e){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],37:[function(e,module,t){var r=e("../../ext/Class");
var a=e("../../service/list_service/ListServiceArray");var n=e("../../service/list_service/ListServiceTransformItem");var i=function(e,t){var r=e.map(function(e){var r=t.get(e);var a={id:e,displayLabel:r?r.displayLabel:e.getUri(),hiddenLabels:r?r.hiddenLabels:[]};return a});var i=function(e){var t;if(e!=null){var r=new RegExp(e,"mi");t=function(e){var t=r.test(e.id.getUri());var a=t||r.test(e.displayLabel);var n=a||e.hiddenLabels&&e.hiddenLabels.some(function(e){return r.test(e)});return n}}else{t=function(e){return true}}return t};var s=new a(r,i);s=new n(s,function(e){return e.id});return s};var s=function(e,t){var r=e.fetchItems().then(function(e){var r=t.lookup(e);return[e,r]}).spread(function(e,t){var r=i(e,t);return r});return r};var o=r.create({initialize:function(e,t){this.facetService=e;this.lookupServiceNodeLabels=t},createListService:function(e){var t=this;var r=this.facetService.createListService(e).then(function(e){var t=e.fetchCount(null,500);return[t,e]}).spread(function(e,r){var a=e.hasMoreItems?r:s(r,t.lookupServiceNodeLabels);return a});return r}});module.exports=o},{"../../ext/Class":2,"../../service/list_service/ListServiceArray":106,"../../service/list_service/ListServiceTransformItem":112}],38:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetService");var n=e("../../util/collection/HashMap");var i=e("../../service/list_service/ListServiceConceptKeyLookup");var s=e("../../service/list_service/ListServiceTransformItem");var o=r.create(a,{initialize:function(e,t){this.facetService=e;this.fnLookupService=t},createListService:function(e){var t=this.fnLookupService(e);var r=this.facetService.createListService(e).then(function(e){e=new i(e,t);e=new s(e,function(e){return e.val});return e});return r}});module.exports=o},{"../../ext/Class":2,"../../service/list_service/ListServiceConceptKeyLookup":108,"../../service/list_service/ListServiceTransformItem":112,"../../util/collection/HashMap":291,"./FacetService":36}],39:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetService");var n=e("../../util/collection/HashMap");var i=r.create(a,{initialize:function(e,t){this.facetServiceFallback=e;this.pathHeadToFacetService=this.pathHeadToFacetService||new n},getPathHeadToFacetService:function(){return this.pathHeadToFacetService},createListService:function(e){var t=this.pathHeadToFacetService.get(e);var r=t||this.facetServiceFallback;var a=r.createListService(e);return a}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":291,"./FacetService":36}],40:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/Concept");var n=e("../../sparql/ConceptUtils");var i=e("../../service/list_service/ListServiceSparqlQuery");var s=e("../../service/list_service/ListServiceTransformItem");var o=e("./FacetService");var l=e("../FacetUtils");var u=e("../../sparql/RelationUtils");var c=e("../../sparql/VarUtils");var d=e("../../util/shared");var p=d.Promise;var f=r.create(o,{initialize:function(e,t){this.sparqlService=e;this.facetConceptSupplier=t},createListService:function(e){var t=this.facetConceptSupplier.getConcept(e);var r=n.createQueryList(t);var a=new i(this.sparqlService,r,t.getVar(),false);a=new s(a,function(e){return e.key});var o=p.resolve(a);return o}});module.exports=f},{"../../ext/Class":2,"../../service/list_service/ListServiceSparqlQuery":110,"../../service/list_service/ListServiceTransformItem":112,"../../sparql/Concept":155,"../../sparql/ConceptUtils":156,"../../sparql/RelationUtils":173,"../../sparql/VarUtils":178,"../../util/shared":300,"../FacetUtils":15,"./FacetService":36}],41:[function(e,module,t){},{}],42:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../service/list_service/ListServiceTransformConcept");var n=e("./FacetService");var i=r.create({initialize:function(e,t){this.facetService=e;this.fnTransform=t},createListService:function(e){var t=this.facetService.createListService(e);var r=this;var n=t.then(function(e){var t=new a(e,r.fnTransform);return t});return n}});module.exports=i},{"../../ext/Class":2,"../../service/list_service/ListServiceTransformConcept":111,"./FacetService":36}],43:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createFacetService:function(e,t){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],44:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/ConceptUtils");var n=e("../FacetNode");var i=e("../facet_concept_supplier/FacetConceptSupplierExact");var s=e("../facet_concept_supplier/FacetConceptSupplierMeta");var o=e("../facet_service/FacetServiceSparql");var l=e("../facet_service/FacetServiceTransformConcept");var u=e("../facet_service/FacetServiceClientIndex");var c=e("../facet_service/FacetServiceLookup");var d=e("../../sparql/LabelUtils");var p=e("../../sparql/search/KeywordSearchUtils");var f=e("../FacetConfig");var v=e("../ConstraintManager");var h=e("../../sparql/BestLabelConfig");var g=e("../../sponate/MappedConceptUtils");var m=e("../../sponate/LookupServiceUtils");var x=e("../../service/lookup_service/LookupServiceMulti");var _=e("../../service/lookup_service/LookupServiceKeyMap");var b=e("../FacetUtils");var y=e("../lookup_service/LookupServiceFacetCount");var S=e("../lookup_service/LookupServiceFacetPreCount");var C=e("../lookup_service/LookupServiceFacetExactCount");var E=r.create({initialize:function(e,t,r){this.sparqlService=e;this.baseConcept=t||a.createSubjectConcept();this.rootFacetNode=r||n.createRoot(this.baseConcept.getVar());this.lookupServiceNodeLabels=null},createFacetService:function(e){var t=this.baseConcept.isSubjectConcept();var r=e.getConstraints().length===0;var a=new f(this.baseConcept,this.rootFacetNode,e);var n=new i(a);var v=new s(n);if(t&&r){console.log("Detected that declared properties could be used")}var E=new h;var w=g.createMappedConceptBestLabel(E);var j=m.createLookupServiceMappedConcept(this.sparqlService,w);var k=function(e){var t;if(e){var r=d.createRelationPrefLabels(E);t=p.createConceptRegex(r,e)}else{t=null}return t};var L=new o(this.sparqlService,v);L=new l(L,k);L=new u(L,j);var q=this;var A=function(e){var t=b.createFacetRelationIndex(a,e);var r=new S(q.sparqlService,t);var n=new C(q.sparqlService,t);var i=new y(r,n);var s=new x({id:new _,countInfo:i,labelInfo:j});return s};L=new c(L,A);return L}});module.exports=E},{"../../ext/Class":2,"../../service/lookup_service/LookupServiceKeyMap":120,"../../service/lookup_service/LookupServiceMulti":121,"../../sparql/BestLabelConfig":153,"../../sparql/ConceptUtils":156,"../../sparql/LabelUtils":166,"../../sparql/search/KeywordSearchUtils":231,"../../sponate/LookupServiceUtils":238,"../../sponate/MappedConceptUtils":241,"../ConstraintManager":4,"../FacetConfig":9,"../FacetNode":10,"../FacetUtils":15,"../facet_concept_supplier/FacetConceptSupplierExact":34,"../facet_concept_supplier/FacetConceptSupplierMeta":35,"../facet_service/FacetServiceClientIndex":37,"../facet_service/FacetServiceLookup":38,"../facet_service/FacetServiceSparql":40,"../facet_service/FacetServiceTransformConcept":42,"../lookup_service/LookupServiceFacetCount":50,"../lookup_service/LookupServiceFacetExactCount":51,"../lookup_service/LookupServiceFacetPreCount":52}],45:[function(e,module,t){var r=e("../../ext/Class");var a=e("../Step");var n=e("../Path");var i=e("../PathHead");var s=e("../../util/shared");var o=s.Promise;var l={fetchFacetTree:function(e,t,r){r=r||new n;var s=t.getState(r);var u=s.getExpansionState();var c;if(u>0){c=new i(r,false)}else if(u<0){c=new i(r,true)}else{c=null}var d;if(c){d=e.createListService(c).then(function(e){return e.fetchItems(s.getFilter(),s.getLimit(),s.getOffset())}).then(function(n){var i=n.map(function(n){var i=n.id;var s=new a(i.getUri(),c.isInverse());var o=r.copyAppendStep(s);var u=l.fetchFacetTree(e,t,o);return u});var s=o.all(i).then(function(e){for(var t=0;t<n.length;++t){var r=n[t];var a=e[t];if(c.isInverse()){r.incoming=a}else{r.outgoing=a}}return n});return s})}else{d=o.resolve([])}return d}};module.exports=l},{"../../ext/Class":2,"../../util/shared":300,"../Path":16,"../PathHead":17,"../Step":20}],46:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({prepareConcept:function(e,t){throw new Error("Method not overridden")}});module.exports=a},{"../../ext/Class":2}],47:[function(e,module,t){var r=e("../../ext/Class");var a=e("./FacetValueConceptService");var n=e("../FacetUtils");var i=e("../../util/shared");var s=i.Promise;var o=r.create({initialize:function(e){this.facetConfig=e},prepareConcept:s.method(function(e,t){var r=n.createConceptResources(this.facetConfig,e,t);return r})});module.exports=o},{"../../ext/Class":2,"../../util/shared":300,"../FacetUtils":15,"./FacetValueConceptService":46}],48:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/Relation");var n=e("../../sparql/RelationUtils");var i=e("../FacetUtils.js");var s=e("../../sparql/ElementUtils");var o=e("../../sparql/ConceptUtils");var l=e("../../service/ServiceUtils");var u=e("../../service/list_service/ListServiceSparqlQuery");var c=e("../../sparql/SortCondition");var d=r.create({initialize:function(e,t,r){this.sparqlService=e;this.rowLimit=r||1e5;this.facetConfig=t},prepareTableService:function(e,t){var r=i.createConceptResources(this.facetConfig,e,t);console.log("FacetValueConcept: "+r+" config: ",this.facetConfig);var d=this.facetConfig.getRootFacetNode().getVar();var p=this;var f=l.fetchCountRows(this.sparqlService,r.getElement(),this.rowLimit).then(function(e){var t=e.hasMoreItems===false;var i;var l;if(t){var f=new a(r.getElement(),r.getVar(),d);var v=s.freshVar(f.getElement(),"c");l=n.createQueryDistinctValueCount(f,v);l.getOrderBy().push(new c(l.getProject().getExpr(v),"desc"));i=new u(p.sparqlService,l,r.getVar())}else{l=o.createQueryList(r);i=new u(p.sparqlService,l,r.getVar())}return i});return f}});module.exports=d},{"../../ext/Class":2,"../../service/ServiceUtils":99,"../../service/list_service/ListServiceSparqlQuery":110,"../../sparql/ConceptUtils":156,"../../sparql/ElementUtils":158,"../../sparql/Relation":172,"../../sparql/RelationUtils":173,"../../sparql/SortCondition":174,"../FacetUtils.js":15}],49:[function(e,module,t){"use strict";var r={ConstraintManager:e("./ConstraintManager"),ConstraintUtils:e("./ConstraintUtils"),CountUtils:e("./CountUtils"),ElementUtils:e("./ElementUtils"),ElementsAndExprs:e("./ElementsAndExprs"),FacetConfig:e("./FacetConfig"),FacetNode:e("./FacetNode"),FacetNodeState:e("./FacetNodeState"),FacetRelationIndex:e("./FacetRelationIndex"),FacetTreeConfig:e("./FacetTreeConfig"),FacetTreeUtils:e("./FacetTreeUtils"),FacetUtils:e("./FacetUtils"),Path:e("./Path"),PathHead:e("./PathHead"),QueryUtils:e("./QueryUtils"),ServiceUtils:e("./ServiceUtils"),Step:e("./Step"),StepRelation:e("./StepRelation"),StepUtils:e("./StepUtils"),VarNode:e("./VarNode"),Constraint:e("./constraint/Constraint"),ConstraintBasePath:e("./constraint/ConstraintBasePath"),ConstraintBasePathValue:e("./constraint/ConstraintBasePathValue"),ConstraintConcept:e("./constraint/ConstraintConcept"),ConstraintElementFactoryBBoxRange:e("./constraint/ConstraintElementFactoryBBoxRange"),ConstraintEquals:e("./constraint/ConstraintEquals"),ConstraintExists:e("./constraint/ConstraintExists"),ConstraintLang:e("./constraint/ConstraintLang"),ConstraintRegex:e("./constraint/ConstraintRegex"),FacetConceptSupplier:e("./facet_concept_supplier/FacetConceptSupplier"),FacetConceptSupplierExact:e("./facet_concept_supplier/FacetConceptSupplierExact"),FacetConceptSupplierMeta:e("./facet_concept_supplier/FacetConceptSupplierMeta"),FacetService:e("./facet_service/FacetService"),FacetServiceClientIndex:e("./facet_service/FacetServiceClientIndex"),FacetServiceLookup:e("./facet_service/FacetServiceLookup"),FacetServiceMeta:e("./facet_service/FacetServiceMeta"),FacetServiceSparql:e("./facet_service/FacetServiceSparql"),FacetServiceTagger:e("./facet_service/FacetServiceTagger"),FacetServiceTransformConcept:e("./facet_service/FacetServiceTransformConcept"),FacetSystem:e("./facet_system/FacetSystem"),FacetSystemSparql:e("./facet_system/FacetSystemSparql"),FacetTreeService:e("./facet_tree_service/FacetTreeService"),FacetValueConceptService:e("./facet_value_concept_service/FacetValueConceptService"),FacetValueConceptServiceExact:e("./facet_value_concept_service/FacetValueConceptServiceExact"),FacetValueService:e("./facet_value_service/FacetValueService"),LookupServiceFacetCount:e("./lookup_service/LookupServiceFacetCount"),LookupServiceFacetExactCount:e("./lookup_service/LookupServiceFacetExactCount"),LookupServiceFacetPreCount:e("./lookup_service/LookupServiceFacetPreCount"),Aggregator:e("./table/Aggregator"),ColumnView:e("./table/ColumnView"),FilterString:e("./table/FilterString"),QueryFactoryFacetTable:e("./table/QueryFactoryFacetTable"),SortCondition:e("./table/SortCondition"),TableConfigFacet:e("./table/TableConfigFacet"),TableMod:e("./table/TableMod"),TableUtils:e("./table/TableUtils")};Object.freeze(r);module.exports=r},{"./ConstraintManager":4,"./ConstraintUtils":5,"./CountUtils":6,"./ElementUtils":7,"./ElementsAndExprs":8,"./FacetConfig":9,"./FacetNode":10,"./FacetNodeState":11,"./FacetRelationIndex":12,"./FacetTreeConfig":13,"./FacetTreeUtils":14,"./FacetUtils":15,"./Path":16,"./PathHead":17,"./QueryUtils":18,"./ServiceUtils":19,"./Step":20,"./StepRelation":21,"./StepUtils":22,"./VarNode":23,"./constraint/Constraint":24,"./constraint/ConstraintBasePath":25,"./constraint/ConstraintBasePathValue":26,"./constraint/ConstraintConcept":27,"./constraint/ConstraintElementFactoryBBoxRange":28,"./constraint/ConstraintEquals":29,"./constraint/ConstraintExists":30,"./constraint/ConstraintLang":31,"./constraint/ConstraintRegex":32,"./facet_concept_supplier/FacetConceptSupplier":33,"./facet_concept_supplier/FacetConceptSupplierExact":34,"./facet_concept_supplier/FacetConceptSupplierMeta":35,"./facet_service/FacetService":36,"./facet_service/FacetServiceClientIndex":37,"./facet_service/FacetServiceLookup":38,"./facet_service/FacetServiceMeta":39,"./facet_service/FacetServiceSparql":40,"./facet_service/FacetServiceTagger":41,"./facet_service/FacetServiceTransformConcept":42,"./facet_system/FacetSystem":43,"./facet_system/FacetSystemSparql":44,"./facet_tree_service/FacetTreeService":45,"./facet_value_concept_service/FacetValueConceptService":46,"./facet_value_concept_service/FacetValueConceptServiceExact":47,"./facet_value_service/FacetValueService":48,"./lookup_service/LookupServiceFacetCount":50,"./lookup_service/LookupServiceFacetExactCount":51,"./lookup_service/LookupServiceFacetPreCount":52,"./table/Aggregator":53,"./table/ColumnView":54,"./table/FilterString":55,"./table/QueryFactoryFacetTable":56,"./table/SortCondition":57,"./table/TableConfigFacet":58,"./table/TableMod":59,"./table/TableUtils":60}],50:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashMap");var n=e("../../sparql/VarUtils");var i=e("../CountUtils");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.lsPreCount=e;this.lsExactCount=t},lookup:function(e){var t=this;var r=this.lsPreCount.lookup(e).then(function(e){var r=e.entries();var a=[];r.forEach(function(e){var t=e.key;var r=e.val;if(!r.hasMoreItems){a.push(t)}});var n=t.lsExactCount.lookup(a);return[e,n]}).spread(function(t,r){var n=new a;e.forEach(function(e){var a=r.get(e);a=a||t.get(e);if(!a){throw new Error("Should not happen")}n.put(e,a)});return n});return r}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":113,"../../sparql/VarUtils":178,"../../util/collection/HashMap":291,"../CountUtils":6}],51:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/VarUtils");var n=e("../CountUtils");var i=e("../../util/collection/HashMap");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.sparqlService=e;this.facetRelationIndex=t},lookup:function(e){var t=a.c;var r=n.createQueriesExactCount(this.facetRelationIndex,t,e,this.rowLimit);var s=n.execQueries(this.sparqlService,r,this.facetRelationIndex.getSourceVar(),t);var o=s.then(function(e){var t=new i;var r=e.entries();r.forEach(function(e){var r=e.key;var a=e.val;var n={count:a,hasMoreItems:false};t.put(r,n)});return t});return o}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":113,"../../sparql/VarUtils":178,"../../util/collection/HashMap":291,"../CountUtils":6}],52:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/VarUtils");var n=e("../CountUtils");var i=e("../../util/collection/HashMap");var s=e("../../service/lookup_service/LookupService");var o=r.create(s,{initialize:function(e,t){this.sparqlService=e;this.facetRelationIndex=t;this.rowLimit=1e4},lookup:function(e){var t=this.rowLimit;var r=a.c;var s=n.createQueriesPreCount(this.facetRelationIndex,r,e,t+1);var o=n.execQueries(this.sparqlService,s,this.facetRelationIndex.getSourceVar(),r);var l=o.then(function(e){var r=new i;var a=e.entries();a.forEach(function(e){var a=e.key;var n=e.val;var i={count:n,hasMoreItems:n>t};r.put(a,i)});return r});return l}});module.exports=o},{"../../ext/Class":2,"../../service/lookup_service/LookupService":113,"../../sparql/VarUtils":178,"../../util/collection/HashMap":291,"../CountUtils":6}],53:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.name=e;this.attrs=t},getName:function(){return this.name},getAttrs:function(){return this.attrs}});module.exports=a},{"../../ext/Class":2}],54:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.tableMod=e;this.columnId=t},getId:function(){return this.columnId},getSortConditions:function(){var e={};var t=this.columnId;this.tableMod.getSortConditions().forEach(function(r){var a=r.getColumnId();if(a===t){var n=r.getSortType();e[n]=r.getSortDir()}});return e},getAggregator:function(){var e=this.tableMod.getAggregator(this.columnId);return e},setAggregator:function(e){this.tableMod.getAggregators()[this.columnId]=e}});module.exports=a},{"../../ext/Class":2}],55:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.str=e;this.mode=t}})},{"../../ext/Class":2}],56:[function(e,module,t){},{}],57:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t,r){this.columnId=e;this.sortDir=t==null?1:t;this.sortType=r||"data"},getColumnId:function(){return this.columnId},getSortType:function(){return this.sortType},setSortType:function(e){this.sortType=e},getSortDir:function(){return this.sortDir},setSortDir:function(e){this.sortDir=e}});module.exports=a},{"../../ext/Class":2}],58:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ArrayUtils");var n=e("./TableMod");var i=e("../ElementUtils");var s=e("../Path");var o=e("../../sparql/Concept");var l=r.create({initialize:function(e,t,r){this.facetConfig=e;this.tableMod=t||new n;this.paths=r||[]},getFacetConfig:function(){return this.facetConfig},getTableMod:function(){return this.tableMod},getPaths:function(){return this.paths},getPath:function(e){var t=this.tableMod.getColumnIds().indexOf(e);var r=this.paths[t];return r},getColumnId:function(e){var t=this.paths.firstIndexOf(e);var r=this.tableMod.getColumnIds()[t];return r},removeColumn:function(e){var t=this.getPath(e);this.paths.remove(t)},getColIdForPath:function(e){var t=this.facetConfig.getRootFacetNode();var r=t.forPath(e);var a=r.getVar().getName();return a},togglePath:function(e){var t=a.toggleItem(this.paths,e);var r=this.getColIdForPath(e);if(t){this.tableMod.addColumn(r)}else{this.tableMod.removeColumn(r)}},createDataConcept:function(){var e=new s;var t=this.paths.slice(0);if(!this.paths.contains(e)){t.push(e)}var r=i.createElementTable(this.facetConfig,t);var a=this.facetConfig.getRootFacetNode();var n=a.getVar();var l=new o(r,n);return l}})},{"../../ext/Class":2,"../../sparql/Concept":155,"../../util/ArrayUtils":273,"../ElementUtils":7,"../Path":16,"./TableMod":59}],59:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ArrayUtils");var n=e("./ColumnView");var i=e("../../util/collection/HashMap");var s=r.create({initialize:function(){this.columnIds=[];this.colIdToColView=new i;this.sortConditions=[];this.colIdToAgg=new i;this.limit=null;this.offset=null;this._isDistinct=true},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e},isDistinct:function(){return this._isDistinct},setDistinct:function(e){this._isDistinct=e},getColumnIds:function(){return this.columnIds},getColumn:function(e){return this.colIdToColView[e]},getColumns:function(){var e=this;var t=this.columnIds.map(function(t){var r=e.colIdToColView[t];return r});return t},getSortConditions:function(){return this.sortConditions},getLimitAndOffset:function(){return this.limitAndOffset},getAggregator:function(e){var t=this.colIdToAgg[e];return t},getAggregators:function(){return this.colIdToAgg},addColumn:function(e,t){var r=this.colIdToColView[e];if(r){throw"Column "+e+" already part of the table"}r=new n(this,e);this.colIdToColView[e]=r;if(!t){this.columnIds.push(e)}return r},removeColumn:function(e){delete this.colIdToColView[e];var t=this;a.filter(this.columnIds,function(t){var r=e!=t;return r});a.filter(this.sortConditions,function(t){var r=e!=t.getColumnId()});delete this.colIdToAgg[e]}});module.exports=s},{"../../ext/Class":2,"../../util/ArrayUtils":273,"../../util/collection/HashMap":291,"./ColumnView":54}],60:[function(e,module,t){var r={createNgGridColumnDefs:function(e){var t=e.getColumns();var r=t.forEach(function(e){var t={field:e.getId(),displayName:e.getId()};return t});return r}};module.exports=r},{}],61:[function(e,module,t){var r=e("./util/shared");var Jassa=function(t,a){r.Promise=t;r.ajax=a;return{util:e("./util"),rdf:e("./rdf"),vocab:e("./vocab"),sparql:e("./sparql"),service:e("./service"),sponate:e("./sponate"),facete:e("./facete")}};module.exports=Jassa},{"./facete":49,"./rdf":76,"./service":104,"./sparql":223,"./sponate":272,"./util":299,"./util/shared":300,"./vocab":301}],62:[function(e,module,t){var r=e("../ext/Class");var a=r.create({classLabel:"AnonId",getLabelString:function(){throw new Error("not implemented")}});module.exports=a},{"../ext/Class":2}],63:[function(e,module,t){var r=e("../ext/Class");var a=e("./AnonId");var n=r.create(a,{classLabel:"AnonIdStr",initialize:function(e){this.label=e},getLabelString:function(){return this.label},toString:function(){return this.label}});module.exports=n},{"../ext/Class":2,"./AnonId":62}],64:[function(e,module,t){var r=e("../ext/Class");var a=e("./node/Node_Concrete");var n=function(e){return e};var i=r.create(a,{classLabel:"jassa.rdf.LiteralLabel",initialize:function(e,t,r,a){this.val=e;this.lex=t;this.lang=r;this.dtype=a},getValue:function(){return this.val},getLexicalForm:function(){return this.lex instanceof String?this.lex:this.lex.toString()},getLanguage:function(){return this.lang},getDatatype:function(){return this.dtype},toString:function(){var e=this.dtype?this.dtype.getUri():null;var t=n(this.lex);var r;if(e){r='"'+t+'"^^<'+e+">"}else{r='"'+t+'"'+(this.lang?"@"+this.lang:"")}return r}});module.exports=i},{"../ext/Class":2,"./node/Node_Concrete":79}],65:[function(e,module,t){var r=e("./AnonIdStr");var a=e("./node/Var");var n=e("./node/Node");var i=e("./node/Node_Uri");var s=e("./node/Node_Blank");var o=e("./node/Node_Literal");var l=e("./LiteralLabel");var u=e("./TypeMapper");var c=e("./rdf_datatype/DefaultRdfDatatypes");var d=/"([^"\\]*(\\.[^"\\]*)*)"/;var p=function(e){var t;if(e.charAt(0)==="<"){t=e.slice(1,-1)}else{console.log("[ERROR] Cannot deal with "+e);throw"Not implemented"}return t};var f={createAnon:function(e){return new s(e)},createUri:function(e){return new i(e)},createVar:function(e){return new a(e)},createPlainLiteral:function(e,t){if(t==null){t=""}var r=new l(e,e,t);return new o(r)},createTypedLiteralFromValue:function(e,t){var r=c[t];if(!r){var a=u.getInstance();r=a.getSafeTypeByName(t)}var n=r.unparse(e);var i=null;var s=new l(e,n,i,r);return new o(s)},createTypedLiteralFromString:function(e,t){var r=c[t];if(!r){var a=u.getInstance();r=a.getSafeTypeByName(t)}var n=r.parse(e);var i=e;var s="";var d=new l(n,i,s,r);return new o(d)},createFromTalisRdfJson:function(e){if(!e||typeof e.type==="undefined"){throw"Invalid node: "+JSON.stringify(e)}var t;switch(e.type){case"bnode":var a=new r(e.value);t=new f.createAnon(a);break;case"uri":t=f.createUri(e.value);break;case"literal":var n=e.lang||e["xml:lang"];t=f.createPlainLiteral(e.value,n);break;case"typed-literal":t=f.createTypedLiteralFromString(e.value,e.datatype);break;default:console.log("Unknown type: '"+e.type+"'");throw"Bailing out"}return t},parseRdfTerm:function(e){if(!e){console.log("[ERROR] Null Pointer Exception");throw"Bailing out"}e=e.trim();if(e.length===0){console.log("[ERROR] Empty string");throw"Bailing out"}var t=e.charAt(0);var a;switch(t){case"<":var n=e.slice(1,-1);a=f.createUri(n);break;case"_":var i=new r(e);a=f.createAnon(i);break;case'"':var s=d.exec(e);var o=s[0];var l=o.slice(1,-1);var u=o.length;var c=e.charAt(u);if(!c){a=f.createTypedLiteralFromString(l,"http://www.w3.org/2001/XMLSchema#string")}switch(c){case"":case"@":var v=e.substr(u+1);a=f.createPlainLiteral(l,v);break;case"^":var h=e.substr(u+2);var g=p(h);a=f.createTypedLiteralFromString(l,g);break;default:console.log("[ERROR] Excepted @ or ^^");throw"Bailing out"}break;default:console.log("Could not parse "+e);throw"Not implemented"}return a}};module.exports=f},{"./AnonIdStr":63,"./LiteralLabel":64,"./TypeMapper":70,"./node/Node":77,"./node/Node_Blank":78,"./node/Node_Literal":81,"./node/Node_Uri":82,"./node/Var":84,"./rdf_datatype/DefaultRdfDatatypes":86}],66:[function(e,module,t){var r={getSubstitute:function(e,t){var r=t(e);if(!r){r=e}return r},pushVar:function(e,t){if(t.isVariable()){var r=false;e.forEach(function(e){r=r||t.equals(e)});if(!r){e.push(t)}}return e},getLang:function(e){var t=e&&e.isLiteral()?e.getLiteralLanguage():null;return t},getUri:function(e){var t=e&&e.isUri()?e.getUri():null;return t},getValue:function(e){var t;if(e==null){t=null}else if(e.isUri()){t=e.getUri()}else if(e.isBlank()){t=e.toString()}else if(e.isLiteral()){t=e.getLiteralValue()}else{throw new Error("Unknow node type: ",e)}return t}};module.exports=r},{}],67:[function(e,module,t){var r=e("../ext/Class");var a=function(e,t){if(t===""){return true}if(e==null||t==null){return false}e=String(e);t=String(t);return e.length>=t.length&&e.slice(0,t.length)===t};var n=function(e){return typeof e==="function"};var i=function(e,t){var r;for(r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}return e};var s=r.create({initialize:function(e){this.prefixes=e?e:{}},expandPrefix:function(){throw"Not implemented yet - sorry"},getNsPrefixMap:function(){return this.prefixes},getNsPrefixURI:function(e){return this.prefixes[e]},getNsURIPrefix:function(e){var t=null;var r=null;for(var n in this.prefixes){if(this.prefixes.hasOwnProperty(n)){var i=this.prefixes[n];if(a(e,i)){if(!r||i.length>r.length){t=n;r=i}}}}return t},qnameFor:function(){},removeNsPrefix:function(e){delete this.prefixes[e]},samePrefixMappingAs:function(){throw"Not implemented yet - Sorry"},setNsPrefix:function(e,t){this.prefixes[e]=t;return this},setNsPrefixes:function(e){var t=n(e.getNsPrefixMap)?e.getNsPrefixMap():e;for(var r in t){if(t.hasOwnProperty(r)){var a=t[r];this.setNsPrefix(r,a)}}return this},shortForm:function(e){var t=this.getNsURIPrefix(e);var r;if(t){var a=this.prefixes[t];var n=e.substring(a.length);r=t+":"+n}else{r=e}return r},addPrefix:function(e,t){this.prefixes[e]=t},getPrefix:function(e){var t=this.prefixes[e];return t},addJson:function(e){i(this.prefixes,e)},getJson:function(){return this.prefixes}});module.exports=s},{"../ext/Class":2}],68:[function(e,module,t){var r=e("../ext/Class");var a=e("./NodeUtils");var n=r.create({classLabel:"jassa.rdf.Triple",initialize:function(e,t,r){this.subject=e;this.predicate=t;this.object=r},toString:function(){return this.subject+" "+this.predicate+" "+this.object},copySubstitute:function(e){var t=new n(a.getSubstitute(this.subject,e),a.getSubstitute(this.predicate,e),a.getSubstitute(this.object,e));return t},getSubject:function(){return this.subject},getPredicate:function(){return this.predicate},getObject:function(){return this.object},getVarsMentioned:function(){var e=[];a.pushVar(e,this.subject);a.pushVar(e,this.predicate);a.pushVar(e,this.object);return e}});module.exports=n},{"../ext/Class":2,"./NodeUtils":66}],69:[function(e,module,t){var r=e("lodash.uniq");var a={uniqTriples:function(e){var t=r(e,false,function(e){return e.toString()});return t}};module.exports=a},{"lodash.uniq":468}],70:[function(e,module,t){var r=e("../ext/Class");var a=e("./rdf_datatype/DefaultRdfDatatypes");var n=e("./rdf_datatype/BaseDatatype");var i={enableSilentAcceptanceOfUnknownDatatypes:true};var s=null;var o=r.create({classLabel:"jassa.rdf.TypeMapper",initialize:function(e){this.uriToDt=e},getSafeTypeByName:function(e){var t=this.uriToDt;var r=t[e];if(r==null){if(e==null){return null}else{if(i.enableSilentAcceptanceOfUnknownDatatypes){r=new n(e);this.registerDatatype(r)}else{console.log("Attempted to created typed literal using an unknown datatype - "+e);throw"Bailing out"}}}return r},registerDatatype:function(e){var t=e.getUri();this.uriToDt[t]=e}});o.staticInstance=null;o.getInstance=function(){if(o.staticInstance==null){o.staticInstance=new o(a)}return o.staticInstance};module.exports=o},{"../ext/Class":2,"./rdf_datatype/BaseDatatype":85,"./rdf_datatype/DefaultRdfDatatypes":86}],71:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"DatatypeLabel",parse:function(){throw new Error("Not implemented")},unparse:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2}],72:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelFloat",parse:function(e){return parseFloat(e)},unparse:function(e){return e.toString()}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":71}],73:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelInteger",parse:function(e){return parseInt(e,10)},unparse:function(e){return e.toString()}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":71}],74:[function(e,module,t){var r=e("../../ext/Class");var a=e("./DatatypeLabel");var n=r.create(a,{classLabel:"jassa.rdf.DatatypeLabelString",parse:function(e){return e},unparse:function(e){return e.toString()}});module.exports=n},{"../../ext/Class":2,"./DatatypeLabel":71}],75:[function(e,module,t){var r=e("./DatatypeLabelInteger");var a=e("./DatatypeLabelFloat");var n=e("./DatatypeLabelString");var i={xinteger:new r,xfloat:new a,xdouble:new a,xstring:new n,decimal:new a};module.exports=i},{"./DatatypeLabelFloat":72,"./DatatypeLabelInteger":73,"./DatatypeLabelString":74}],76:[function(e,module,t){"use strict";var r={AnonId:e("./AnonId"),AnonIdStr:e("./AnonIdStr"),LiteralLabel:e("./LiteralLabel"),NodeFactory:e("./NodeFactory"),NodeUtils:e("./NodeUtils"),PrefixMappingImpl:e("./PrefixMappingImpl"),Triple:e("./Triple"),TripleUtils:e("./TripleUtils"),TypeMapper:e("./TypeMapper"),DatatypeLabel:e("./datatype/DatatypeLabel"),DatatypeLabelFloat:e("./datatype/DatatypeLabelFloat"),DatatypeLabelInteger:e("./datatype/DatatypeLabelInteger"),DatatypeLabelString:e("./datatype/DatatypeLabelString"),DefaultDatatypeLabels:e("./datatype/DefaultDatatypeLabels"),Node:e("./node/Node"),Node_Blank:e("./node/Node_Blank"),Node_Concrete:e("./node/Node_Concrete"),Node_Fluid:e("./node/Node_Fluid"),Node_Literal:e("./node/Node_Literal"),Node_Uri:e("./node/Node_Uri"),Node_Variable:e("./node/Node_Variable"),Var:e("./node/Var"),BaseDatatype:e("./rdf_datatype/BaseDatatype"),DefaultRdfDatatypes:e("./rdf_datatype/DefaultRdfDatatypes"),RdfDatatype:e("./rdf_datatype/RdfDatatype"),RdfDatatypeBase:e("./rdf_datatype/RdfDatatypeBase"),RdfDatatypeLabel:e("./rdf_datatype/RdfDatatypeLabel"),TypedValue:e("./rdf_datatype/TypedValue")};
Object.freeze(r);module.exports=r},{"./AnonId":62,"./AnonIdStr":63,"./LiteralLabel":64,"./NodeFactory":65,"./NodeUtils":66,"./PrefixMappingImpl":67,"./Triple":68,"./TripleUtils":69,"./TypeMapper":70,"./datatype/DatatypeLabel":71,"./datatype/DatatypeLabelFloat":72,"./datatype/DatatypeLabelInteger":73,"./datatype/DatatypeLabelString":74,"./datatype/DefaultDatatypeLabels":75,"./node/Node":77,"./node/Node_Blank":78,"./node/Node_Concrete":79,"./node/Node_Fluid":80,"./node/Node_Literal":81,"./node/Node_Uri":82,"./node/Node_Variable":83,"./node/Var":84,"./rdf_datatype/BaseDatatype":85,"./rdf_datatype/DefaultRdfDatatypes":86,"./rdf_datatype/RdfDatatype":87,"./rdf_datatype/RdfDatatypeBase":88,"./rdf_datatype/RdfDatatypeLabel":89,"./rdf_datatype/TypedValue":90}],77:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"Node",getUri:function(){throw new Error("not a URI node")},getName:function(){throw new Error("is not a variable node")},getBlankNodeId:function(){throw new Error("is not a blank node")},getBlankNodeLabel:function(){return this.getBlankNodeId().getLabelString()},getLiteral:function(){throw new Error("is not a literal node")},getLiteralValue:function(){throw new Error("is not a literal node")},getLiteralLexicalForm:function(){throw new Error("is not a literal node")},getLiteralDatatype:function(){throw new Error("is not a literal node")},getLiteralDatatypeUri:function(){throw new Error("is not a literal node")},isBlank:function(){return false},isUri:function(){return false},isLiteral:function(){return false},isVariable:function(){return false},equals:function(e){var t=false;if(e==null){t=false}else if(this.isLiteral()){if(e.isLiteral()){var r=this.getLiteralLexicalForm()===e.getLiteralLexicalForm();var a=this.getLiteralDatatypeUri()===e.getLiteralDatatypeUri();var n=this.getLiteralLanguage()===e.getLiteralLanguage();t=r&&a&&n}}else if(this.isUri()){if(e.isUri()){t=this.getUri()===e.getUri()}}else if(this.isVariable()){if(e.isVariable()){t=this.getName()===e.getName()}}else if(this.isBlank()){if(e.isBlank()){t=this.getBlankNodeLabel()===e.getBlankNodeLabel()}}else{throw new Error("not implemented yet")}return t}});module.exports=a},{"../../ext/Class":2}],78:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Concrete");var n=r.create(a,{classLabel:"jassa.rdf.Node_Blank",initialize:function(e){this.anonId=e},isBlank:function(){return true},getBlankNodeId:function(){return this.anonId},toString:function(){return"_:"+this.anonId}});module.exports=n},{"../../ext/Class":2,"./Node_Concrete":79}],79:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node");var n=r.create(a,{classLabel:"jassa.rdf.Node_Concrete",isConcrete:function(){return true}});module.exports=n},{"../../ext/Class":2,"./Node":77}],80:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node");var n=r.create(a,{classLabel:"jassa.rdf.Node_Fluid",isConcrete:function(){return false}});module.exports=n},{"../../ext/Class":2,"./Node":77}],81:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Concrete");var n=r.create(a,{classLabel:"Node_Literal",initialize:function(e){this.literalLabel=e},isLiteral:function(){return true},getLiteral:function(){return this.literalLabel},getLiteralValue:function(){return this.literalLabel.getValue()},getLiteralLexicalForm:function(){return this.literalLabel.getLexicalForm()},getLiteralDatatype:function(){return this.literalLabel.getDatatype()},getLiteralDatatypeUri:function(){var e=this.getLiteralDatatype();var t=e?e.getUri():null;return t},getLiteralLanguage:function(){return this.literalLabel.getLanguage()},toString:function(){return this.literalLabel.toString()}});module.exports=n},{"../../ext/Class":2,"./Node_Concrete":79}],82:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Concrete");var n=r.create(a,{classLabel:"jassa.rdf.Node_Uri",initialize:function(e){this.uri=e},isUri:function(){return true},getUri:function(){return this.uri},toString:function(){return"<"+this.uri+">"}});module.exports=n},{"../../ext/Class":2,"./Node_Concrete":79}],83:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Fluid");var n=r.create(a,{classLabel:"jassa.rdf.Node_Variable",isVariable:function(){return true}});module.exports=n},{"../../ext/Class":2,"./Node_Fluid":80}],84:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Node_Variable");var n=r.create(a,{classLabel:"Var",initialize:function(e){this.name=e},getName:function(){return this.name},toString:function(){return"?"+this.name}});module.exports=n},{"../../ext/Class":2,"./Node_Variable":83}],85:[function(e,module,t){var r=e("../../ext/Class");var a=e("./RdfDatatype");var n=e("./TypedValue");var i=r.create(a,{classLabel:"jassa.rdf.BaseDatatype",initialize:function(e){this.datatypeUri=e},getUri:function(){return this.datatypeUri},unparse:function(e){var t;if(e instanceof n){t=e.getLexicalValue()}else{t=e.toString()}return t},parse:function(e){return new n(e,this.datatypeUri)},toString:function(){return"Datatype ["+this.datatypeUri+"]"}});module.exports=i},{"../../ext/Class":2,"./RdfDatatype":87,"./TypedValue":90}],86:[function(e,module,t){var r=e("../../vocab/xsd");var a=e("../datatype/DefaultDatatypeLabels");var n=e("./RdfDatatypeLabel");var i={};var s=function(e,t){var r=e.getUri();i[r]=new n(r,t)};s(r.xint,a.xinteger);s(r.xlong,a.xinteger);s(r.xinteger,a.xinteger);s(r.xstring,a.xstring);s(r.xfloat,a.xfloat);s(r.xdouble,a.xdouble);s(r.decimal,a.xfloat);module.exports=i},{"../../vocab/xsd":306,"../datatype/DefaultDatatypeLabels":75,"./RdfDatatypeLabel":89}],87:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"RdfDatatype",getUri:function(){throw new Error("Not implemented")},unparse:function(){throw new Error("Not implemented")},parse:function(){throw new Error("Not implemented")}});module.exports=a},{"../../ext/Class":2}],88:[function(e,module,t){var r=e("../../ext/Class");var a=e("./RdfDatatype");var n=r.create(a,{classLabel:"jassa.rdf.RdfDatatypeBase",initialize:function(e){this.uri=e},getUri:function(){return this.uri}});module.exports=n},{"../../ext/Class":2,"./RdfDatatype":87}],89:[function(e,module,t){var r=e("../../ext/Class");var a=e("./RdfDatatypeBase");var n=r.create(a,{classLabel:"jassa.rdf.RdfDatatype_Label",initialize:function($super,e,t){$super(e);this.datatypeLabel=t},parse:function(e){return this.datatypeLabel.parse(e)},unparse:function(e){return this.datatypeLabel.unparse(e)}});module.exports=n},{"../../ext/Class":2,"./RdfDatatypeBase":88}],90:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.rdf.TypedValue",initialize:function(e,t){this.lexicalValue=e;this.datatypeUri=t},getLexicalValue:function(){return this.lexicalValue},getDatatypeUri:function(){return this.datatypeUri}});module.exports=a},{"../../ext/Class":2}],91:[function(e,module,t){var r=e("lodash.defaults");var a={createSparqlRequestAjaxSpec:function(e,t,a,n,i){var s=t;if(s&&s.length===1){s=s[0]}var o={query:a,"default-graph-uri":s};var l={url:e,dataType:"json",crossDomain:true,traditional:true,data:o};r(o,n);r(l,i);return l}};module.exports=a},{"lodash.defaults":307}],92:[function(e,module,t){var r=e("../ext/Class");var a=e("../sparql/ExprUtils");var n=r.create({initialize:function(e,t){this.sparqlService=e;this.element=t},lookupByIterator:function(e){var t=[];while(e.hasNext()){var r=e.nextBinding();var n=a.bindingToExprs(r);var i=n.join(", ");t.push({binding:r,exprs:n,exprsKey:i})}}});module.exports=n},{"../ext/Class":2,"../sparql/ExprUtils":162}],93:[function(e,module,t){var r=e("../util/collection/HashMap");var a=e("../util/shared");var n=a.Promise;var i={lookup:function(e,t){var r;if(!e||!t){r=n.resolve([])}else{r=e.lookup(t)}return r},zip:function(e,t){var a=n.all(t).then(function(){var t=new r;for(var a=0;a<e.length;++a){var n=e[a];var i=arguments[a];t.put(n,i)}return t});return a},unmapKeys:function(e,t,a){var n=new r;e.forEach(function(e){var r=t(e);var i=a.get(r);n.put(e,i)});return n},fetchItemsMapped:function(e,t,r){var a=t.map(r);var n=e.fetchItems(a).then(function(e){var a=i.unmapKeys(t,r,e);return a});return n},fetchCountsMapped:function(e,t,r){var a=t.map(r);var n=e.fetchCounts(a).then(function(e){var a=i.unmapKeys(t,r,e);return a});return n}};module.exports=i},{"../util/collection/HashMap":291,"../util/shared":300}],94:[function(e,module,t){var r={computeRange:function(e,t,r){var a=t||0;var n=a%r;a-=n;var i=e;var s;if(i){s=i;var o=i%r;i+=r-o}var l={limit:i,offset:a,subLimit:s,subOffset:n};return l}};module.exports=r},{}],95:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.query=e;var r=e.getOffset();var a=e.getLimit();this.nextOffset=r||0;this.nextRemaining=a==null?null:a;this.pageSize=t},getPageSize:function(){return this.pageSize},next:function(){var e=this.nextOffset===0?null:this.nextOffset;this.query.setOffset(e);if(this.nextRemaining==null){this.query.setLimit(this.pageSize);this.nextOffset+=this.pageSize}else{var t=Math.min(this.pageSize,this.nextRemaining);this.nextOffset+=t;this.nextRemaining-=t;if(t===0){return null}this.query.setLimit(t)}return this.query}});module.exports=a},{"../ext/Class":2}],96:[function(e,module,t){var r=e("../ext/Class");var a=e("./cache/CacheSimple");var n=r.create({initialize:function(e,t){this.executionCache=e?e:{};this.resultCache=t?t:new a},getExecutionCache:function(){return this.executionCache},getResultCache:function(){return this.resultCache}});module.exports=n},{"../ext/Class":2,"./cache/CacheSimple":102}],97:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.varNames=e||[];this.bindings=t||[]},getVarNames:function(){return this.varNames},getBindings:function(){return this.bindings},toString:function(){return"ResultSetPart: vars="+this.varNames+", bindings="+this.bindings}});module.exports=a},{"../ext/Class":2}],98:[function(e,module,t){var r=e("../util/collection/HashMap");var a=e("../util/collection/IteratorArray");var n=e("../sparql/VarUtils");var i=e("./result_set/ResultSetArrayIteratorBinding");var s=e("./ResultSetPart");var o=e("../sparql/Binding");var l={jsonToResultSet:function(e){var t=e.head.vars;var r=e.results.bindings;var n=r.map(function(e){var t=o.fromTalisJson(e);return t});var s=new a(n);var l=new i(s,t);return l},partition:function(e,t){var a=e.getVarNames();var n=new r;while(e.hasNext()){var i=e.next();var o=i.get(t);var l=n.get(o);if(l==null){l=new s(a);n.put(o,l)}l.getBindings().push(i)}return n},createResultSetFromBindings:function(e,t){var r=new a(e);var n=new i(r,t);return n},createEmptyResultSet:function(e){var t=e.getProjectVars();var r=n.getVarNames(t);var a=this.createResultSetFromBindings([],r);return a}};module.exports=l},{"../sparql/Binding":154,"../sparql/VarUtils":178,"../util/collection/HashMap":291,"../util/collection/IteratorArray":295,"./ResultSetPart":97,"./result_set/ResultSetArrayIteratorBinding":135}],99:[function(e,module,t){var r=e("lodash.union");var a=e("../util/shared");var n=a.Promise;var i=e("./result_set/ResultSetArrayIteratorBinding");var s=e("../util/ArrayUtils");var o=e("../util/collection/IteratorArray");var l=e("../sparql/expr/ExprVar");var u=e("../sparql/element/ElementFilter");var c=e("../sparql/expr/E_OneOf");var d=e("../sparql/element/ElementSubQuery");var p=e("../sparql/VarUtils");var f=e("../sparql/Binding");var v=e("../sparql/ConceptUtils");var h=e("../sparql/ElementUtils");var g=e("../sparql/QueryUtils");var m={constrainQueryVar:function(e,t,r){var a=new l(t);var n=this.constrainQueryExprVar(e,a,r);return n},constrainQueryExprVar:function(e,t,r){var a=e.clone();var n=new u(new c(t,r));a.getElements().push(n);return a},chunkQuery:function(e,t,r,a){var n=s.chunk(r,a);var i=new l(t);var o=this;var u=n.map(function(){var t=o.constrainQueryExprVar(e,i,r);return t});return u},mergeResultSets:function(e){var t=[];var a=[];e.forEach(function(e){var n=e.getVarNames();a=r(a,n);var i=e.getIterator().getArray();t.push.apply(t,i)});var n=new o(t);var s=new i(n,a);return s},execSelectForNodes:function(e,t,r,a,i){var s=this.chunkQuery(t,r,a,i);var o=s.map(function(t){var r=e.createQueryExecution(t);var a=r.execSelect();return a});var l=n.all(o);var u=this;var c=l.then(function(){var e=u.mergeResultSets(arguments);return e});return c},consumeResultSet:function(e){while(e.hasNext()){e.nextBinding()}},resultSetToList:function(e,t){var r=[];while(e.hasNext()){var a=e.nextBinding();var n=a.get(t);r.push(n)}return r},resultSetToInt:function(e,t){var r=null;if(e.hasNext()){var a=e.nextBinding();var n=a.get(t);r=n.getLiteralValue()}return r},fetchList:function(e,t){var r=this;var a=e.execSelect().then(function(e){var a=r.resultSetToList(e,t);return a});return a},fetchInt:function(e,t,r){var a=e.createQueryExecution(t);var n=this.fetchIntQe(a,r);return n},fetchIntQe:function(e,t){var r=this;var a=e.execSelect().then(function(e){var a=r.resultSetToInt(e,t);return a});return a},fetchCountConcept:n.method(function(e,t,r,a){var n=v.freshVar(t);var i=r==null?null:r+1;var s=a==null?null:a+1;var o=v.createQueryCount(t,n,i,s);return m.fetchInt(e,o,n).then(function(e){var t=a?null:e>r;var n={hasMoreItems:t,count:t?r:e,itemLimit:r,rowLimit:a};return n})}),fetchCountRows:function(e,t,r){var a=h.freshVar(t,"c");var n=h.createQueryCountRows(t,a,r+1);var i=this.fetchInt(e,n,a).then(function(e){var t={count:Math.min(e,r),hasMoreItems:e>r,rowLimit:r};return t});return i},fetchCountQuery:n.method(function(e,t,r,a){var n=[new d(t)];var i=t.getVarsMentioned();var s=p.createVarGen("c",i);var o=s.next();var l=g.createQueryCount(n,null,null,o,null,null,null);var u=e.createQueryExecution(l);u.setTimeout(r);return m.fetchIntQe(u,o).then(function(e){return{count:e,limit:null,hasMoreItems:false}}).caught(function(){var t=g.createQueryCount(n,a+1,null,o,null,null,null);var r=e.createQueryExecution(t);return m.fetchIntQe(r,o).then(function(e){return{count:e,limit:a,hasMoreItems:e>a}})})}),fetchItemsConcept:function(e,t,r,a){var n=v.createQueryList(t,r,a);var i=e.createQueryExecution(n);var s=i.execSelect().then(function(e){var r=m.resultSetToList(e,t.getVar());return r});return s}};module.exports=m},{"../sparql/Binding":154,"../sparql/ConceptUtils":156,"../sparql/ElementUtils":158,"../sparql/QueryUtils":171,"../sparql/VarUtils":178,"../sparql/element/ElementFilter":183,"../sparql/element/ElementSubQuery":187,"../sparql/expr/E_OneOf":208,"../sparql/expr/ExprVar":220,"../util/ArrayUtils":273,"../util/collection/IteratorArray":295,"../util/shared":300,"./result_set/ResultSetArrayIteratorBinding":135,"lodash.union":445}],100:[function(e,module,t){var r=e("lodash.uniq");var a=e("../sparql/VarUtils");var n=e("./ServiceUtils");var i=e("../util/collection/IteratorArray");var s=e("./result_set/ResultSetArrayIteratorBinding");var o=e("../util/shared");var l=o.Promise;var u={bindingToJsMap:function(e,t){var r={};e.forEach(function(e){var a=e.getName();r[a]=t.get(e)});return r},createNgGridOptionsFromQuery:function(e){if(!e){return[]}var t=e.getProjectVars();var r=a.getVarNames(t);var n=r.map(function(e){var t={field:e,displayName:e};return t});return n},fetchCount:function(e,t,r,a){var i;if(!e||!t){i=new l(function(e){e(0)})}else{t=t.clone();t.setLimit(null);t.setOffset(null);i=n.fetchCountQuery(e,t,r,a)}return i},fetchData:function(e,t,r,a){if(!e||!t){var n=new i([]);var o=[];var c=new s(n,o);return new l(function(e){e(c)})}t=t.clone();t.setLimit(r);t.setOffset(a);var d=e.createQueryExecution(t);var p=d.execSelect().then(function(e){var r=[];var a=t.getProjectVars();while(e.hasNext()){var n=e.next();var i=u.bindingToJsMap(a,n);r.push(i)}return r});return p},collectNodes:function(e){var t=[];e.forEach(function(e){e.forEach(function(e){t.push(e)})});t=r(t,false,function(e){return e.toString()});return t},fetchSchemaTableConfigFacet:function(e,t){var r=e.getPaths().getArray();var a=t.lookup(r);var n=a.then(function(t){var a=r.map(function(r){var a={field:e.getColumnId(r),displayName:t.get(r),path:r};return a});var n={colDefs:a};return n});return n},transformToNodeLabels:function(e,t){var r=this.collectNodes(t);var a=e.lookup(r);var n=a.then(function(e){var r=t.map(function(t){var r={};t.forEach(function(t,a){var n=e.get(t);r[a]={node:t,displayLabel:n}});return r});return r});return n}};module.exports=u},{"../sparql/VarUtils":178,"../util/collection/IteratorArray":295,"../util/shared":300,"./ServiceUtils":99,"./result_set/ResultSetArrayIteratorBinding":135,"lodash.uniq":468}],101:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getItem:function(e){console.log("not implemented");throw"not implemented"},setItem:function(e,t){console.log("not implemented");throw"not implemented"}});module.exports=a},{"../../ext/Class":2}],102:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Cache");var n=r.create(a,{initialize:function(e){this.data=e||{}},getItem:function(e){var t=this.data[e];return t},setItem:function(e,t){this.data[e]=t}});module.exports=n},{"../../ext/Class":2,"./Cache":101}],103:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({fetchData:function(){console.log("Not implemented");throw"Not implemented"}});module.exports=a},{"../../ext/Class":2}],104:[function(e,module,t){"use strict";var r={AjaxUtils:e("./AjaxUtils"),BindingLookup:e("./BindingLookup"),LookupServiceUtils:e("./LookupServiceUtils"),PageExpandUtils:e("./PageExpandUtils"),QueryPaginator:e("./QueryPaginator"),RequestCache:e("./RequestCache"),ResultSetPart:e("./ResultSetPart"),ResultSetUtils:e("./ResultSetUtils"),ServiceUtils:e("./ServiceUtils"),TableServiceUtils:e("./TableServiceUtils"),Cache:e("./cache/Cache"),CacheSimple:e("./cache/CacheSimple"),DataService:e("./data_service/DataService"),ListService:e("./list_service/ListService"),ListServiceArray:e("./list_service/ListServiceArray"),ListServiceConcept:e("./list_service/ListServiceConcept"),ListServiceConceptKeyLookup:e("./list_service/ListServiceConceptKeyLookup"),ListServicePageExpand:e("./list_service/ListServicePageExpand"),ListServiceSparqlQuery:e("./list_service/ListServiceSparqlQuery"),ListServiceTransformConcept:e("./list_service/ListServiceTransformConcept"),ListServiceTransformItem:e("./list_service/ListServiceTransformItem"),LookupService:e("./lookup_service/LookupService"),LookupServiceBase:e("./lookup_service/LookupServiceBase"),LookupServiceCache:e("./lookup_service/LookupServiceCache"),LookupServiceChunker:e("./lookup_service/LookupServiceChunker"),LookupServiceConst:e("./lookup_service/LookupServiceConst"),LookupServiceDelegateBase:e("./lookup_service/LookupServiceDelegateBase"),LookupServiceIdFilter:e("./lookup_service/LookupServiceIdFilter"),LookupServiceKeyMap:e("./lookup_service/LookupServiceKeyMap"),LookupServiceMulti:e("./lookup_service/LookupServiceMulti"),LookupServiceSparqlQuery:e("./lookup_service/LookupServiceSparqlQuery"),LookupServiceTimeout:e("./lookup_service/LookupServiceTimeout"),LookupServiceTransform:e("./lookup_service/LookupServiceTransform"),QueryCacheBindingHashSingle:e("./query_cache/QueryCacheBindingHashSingle"),QueryCacheNodeFactory:e("./query_cache/QueryCacheNodeFactory"),QueryCacheNodeFactoryImpl:e("./query_cache/QueryCacheNodeFactoryImpl"),QueryExecution:e("./query_execution/QueryExecution"),QueryExecutionCache:e("./query_execution/QueryExecutionCache"),QueryExecutionDelegate:e("./query_execution/QueryExecutionDelegate"),QueryExecutionHttp:e("./query_execution/QueryExecutionHttp"),QueryExecutionPageExpand:e("./query_execution/QueryExecutionPageExpand"),QueryExecutionPaginate:e("./query_execution/QueryExecutionPaginate"),ResultSet:e("./result_set/ResultSet"),ResultSetArrayIteratorBinding:e("./result_set/ResultSetArrayIteratorBinding"),ResultSetHashJoin:e("./result_set/ResultSetHashJoin"),SparqlService:e("./sparql_service/SparqlService"),SparqlServiceBaseString:e("./sparql_service/SparqlServiceBaseString"),SparqlServiceCache:e("./sparql_service/SparqlServiceCache"),SparqlServiceConsoleLog:e("./sparql_service/SparqlServiceConsoleLog"),SparqlServiceFactory:e("./sparql_service/SparqlServiceFactory"),SparqlServiceFactoryConst:e("./sparql_service/SparqlServiceFactoryConst"),SparqlServiceFactoryDefault:e("./sparql_service/SparqlServiceFactoryDefault"),SparqlServiceHttp:e("./sparql_service/SparqlServiceHttp"),SparqlServicePageExpand:e("./sparql_service/SparqlServicePageExpand"),SparqlServicePaginate:e("./sparql_service/SparqlServicePaginate"),SparqlServiceVirtFix:e("./sparql_service/SparqlServiceVirtFix"),TableService:e("./table_service/TableService"),TableServiceDelegateBase:e("./table_service/TableServiceDelegateBase"),TableServiceFacet:e("./table_service/TableServiceFacet"),TableServiceNodeLabels:e("./table_service/TableServiceNodeLabels"),TableServiceQuery:e("./table_service/TableServiceQuery")};Object.freeze(r);module.exports=r},{"./AjaxUtils":91,"./BindingLookup":92,"./LookupServiceUtils":93,"./PageExpandUtils":94,"./QueryPaginator":95,"./RequestCache":96,"./ResultSetPart":97,"./ResultSetUtils":98,"./ServiceUtils":99,"./TableServiceUtils":100,"./cache/Cache":101,"./cache/CacheSimple":102,"./data_service/DataService":103,"./list_service/ListService":105,"./list_service/ListServiceArray":106,"./list_service/ListServiceConcept":107,"./list_service/ListServiceConceptKeyLookup":108,"./list_service/ListServicePageExpand":109,"./list_service/ListServiceSparqlQuery":110,"./list_service/ListServiceTransformConcept":111,"./list_service/ListServiceTransformItem":112,"./lookup_service/LookupService":113,"./lookup_service/LookupServiceBase":114,"./lookup_service/LookupServiceCache":115,"./lookup_service/LookupServiceChunker":116,"./lookup_service/LookupServiceConst":117,"./lookup_service/LookupServiceDelegateBase":118,"./lookup_service/LookupServiceIdFilter":119,"./lookup_service/LookupServiceKeyMap":120,"./lookup_service/LookupServiceMulti":121,"./lookup_service/LookupServiceSparqlQuery":122,"./lookup_service/LookupServiceTimeout":123,"./lookup_service/LookupServiceTransform":124,"./query_cache/QueryCacheBindingHashSingle":125,"./query_cache/QueryCacheNodeFactory":126,"./query_cache/QueryCacheNodeFactoryImpl":127,"./query_execution/QueryExecution":128,"./query_execution/QueryExecutionCache":129,"./query_execution/QueryExecutionDelegate":130,"./query_execution/QueryExecutionHttp":131,"./query_execution/QueryExecutionPageExpand":132,"./query_execution/QueryExecutionPaginate":133,"./result_set/ResultSet":134,"./result_set/ResultSetArrayIteratorBinding":135,"./result_set/ResultSetHashJoin":136,"./sparql_service/SparqlService":137,"./sparql_service/SparqlServiceBaseString":138,"./sparql_service/SparqlServiceCache":139,"./sparql_service/SparqlServiceConsoleLog":140,"./sparql_service/SparqlServiceFactory":141,"./sparql_service/SparqlServiceFactoryConst":142,"./sparql_service/SparqlServiceFactoryDefault":143,"./sparql_service/SparqlServiceHttp":144,"./sparql_service/SparqlServicePageExpand":145,"./sparql_service/SparqlServicePaginate":146,"./sparql_service/SparqlServiceVirtFix":147,"./table_service/TableService":148,"./table_service/TableServiceDelegateBase":149,"./table_service/TableServiceFacet":150,"./table_service/TableServiceNodeLabels":151,"./table_service/TableServiceQuery":152}],105:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({fetchItems:function(e,t,r){console.log("Not implemented");throw"Not implemented"},fetchCount:function(e,t,r){console.log("Not implemented");throw"Not implemented"}});module.exports=a},{"../../ext/Class":2}],106:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ServiceUtils");var n=e("./ListService");var i=e("../../util/shared");var s=i.Promise;var o=r.create(n,{initialize:function(e,t){this.items=e;this.fnFilterSupplier=t},fetchItems:function(e,t,r){var a=this.fnFilterSupplier(e);var n=this.items.filter(a);var i=r||0;var o=t?i+t:n.length;var l=n.slice(i,o);return s.resolve(l)},fetchCount:function(e,t,r){var a=this.fnFilterSupplier(e);var n=this.items.filter(a);var i=n.length;var o=Math.min(i,t);var l={count:o,hasMoreItems:o<i};return s.resolve(l)}});module.exports=o},{"../../ext/Class":2,"../../util/shared":300,"../ServiceUtils":99,"./ListService":105}],107:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ServiceUtils");var n=e("./ListService");var i=r.create(n,{initialize:function(e){this.sparqlService=e},fetchItems:function(e,t,r){var n=a.fetchItemsConcept(this.sparqlService,e,t,r);return n},fetchCount:function(e,t,r){var n=a.fetchCountConcept(this.sparqlService,e,t,r);return n}});module.exports=i},{"../../ext/Class":2,"../ServiceUtils":99,"./ListService":105}],108:[function(e,module,t){var r=e("lodash.values");var a=e("../../ext/Class");var n=e("./ListService");var i=e("../ServiceUtils");var s=e("../../util/shared");var o=s.Promise;var l=e("../../sparql/ConceptUtils");var u=a.create(n,{initialize:function(e,t,r){this.keyListService=e;this.keyLookupService=t;this.isLeftJoin=r==null?true:r},fetchItems:o.method(function(e,t,a){var n=this;var i=this.keyListService.fetchItems(e,t,a).then(function(e){return n.keyLookupService.lookup(e)}).then(function(e){var t=e.entries();var a=r(t);return a});return i}),fetchCount:o.method(function(e,t,r){var a;if(this.isLeftJoin){a=this.keyListService.fetchCount(e,t,r)}else{var n=this;a=this.keyListService.fetchItems(e,t).then(function(e){return n.keyLookupService.lookup(e)}).then(function(e){var r=e.keys();var a=r.length;var n={count:a,hasMoreItems:t==null?false:null};return n})}return a})});module.exports=u},{"../../ext/Class":2,"../../sparql/ConceptUtils":156,"../../util/shared":300,"../ServiceUtils":99,"./ListService":105,"lodash.values":523}],109:[function(e,module,t){var r=e("../../ext/Class");var a=e("../PageExpandUtils");var n=e("./ListService");var i=r.create(n,{initialize:function(e,t){this.listService=e;this.pageSize=t},fetchItems:function(e,t,r){var n=a.computeRange(t,r,this.pageSize);var i=this.listService.fetchItems(e,n.limit,n.offset);var s=i.then(function(e){var t=n.subLimit?n.subOffset+n.subLimit:e.length;var r=e.slice(n.subOffset,t);return r});return s},fetchCount:function(e,t,r){var a=this.listService.fetchCount(e,t,r);return a}});module.exports=i},{"../../ext/Class":2,"../PageExpandUtils":94,"./ListService":105}],110:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.values");var n=e("../../util/shared");var i=n.Promise;var s=e("../../sparql/Concept");var o=e("../../sparql/ConceptUtils");var l=e("../ServiceUtils");var u=e("../ResultSetUtils");var c=e("./ListService");var d=r.create(c,{initialize:function(e,t,r,a){if(t.getLimit()||t.getOffset()){console.log("Limit and offset in attribute queries not yet supported");throw"Limit and offset in attribute queries not yet supported"}this.sparqlService=e;this.attrQuery=t;this.attrVar=r;this.isLeftJoin=a},fetchItems:function(e,t,r){var n=this.attrVar;if(!e){e=o.createSubjectConcept()}var i=o.createAttrQuery(this.attrQuery,n,this.isLeftJoin,e,t,r);var s=this.sparqlService.createQueryExecution(i);var l=s.execSelect().then(function(e){var t=u.partition(e,n);var r=t.entries();var i=a(r);return i});return l},fetchCount:function(e,t,r){if(!e){e=o.createSubjectConcept()}var a;if(this.isLeftJoin){var n=o.createAttrQuery(this.attrQuery,this.attrVar,this.isLeftJoin,e,t,null);a=new s(n.getQueryPattern(),this.attrVar)}else{var i=new s(this.attrQuery.getQueryPattern(),this.attrVar);a=o.createCombinedConcept(i,e,true,false,false)}var u=l.fetchCountConcept(this.sparqlService,a,t,r);return u}});module.exports=d},{"../../ext/Class":2,"../../sparql/Concept":155,"../../sparql/ConceptUtils":156,"../../util/shared":300,"../ResultSetUtils":98,"../ServiceUtils":99,"./ListService":105,"lodash.values":523}],111:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=r.create(a,{initialize:function(e,t){this.listService=e;this.fnTransformConcept=t;if(!t){throw new Error("No transformation function provided")}},fetchItems:function(e,t,r){var a=this.fnTransformConcept(e);var n=this.listService.fetchItems(a,t,r);return n},fetchCount:function(e,t,r){var a=this.fnTransformConcept(e);var n=this.listService.fetchCount(a,t,r);return n}});module.exports=n},{"../../ext/Class":2,"./ListService":105}],112:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ListService");var n=r.create(a,{initialize:function(e,t){this.listService=e;this.fnTransformItem=t},fetchItems:function(e,t,r){var a=this;var n=this.listService.fetchItems(e,t,r).then(function(e){var t=e.map(a.fnTransformItem);return t});return n},fetchCount:function(e,t,r){var a=this.listService.fetchCount(e,t,r);return a}});module.exports=n},{"../../ext/Class":2,"./ListService":105}],113:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getIdStr:function(){console.log("Not overridden");throw"Not overridden"},lookup:function(e){console.log("Not overridden");throw"Not overridden"}});module.exports=a},{"../../ext/Class":2}],114:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=r.create(a,{getIdStr:function(e){var t=e.toString();return t}});module.exports=n},{"../../ext/Class":2,"./LookupService":113}],115:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.uniq");var n=e("./LookupServiceDelegateBase");var i=e("../RequestCache");var s=e("../../util/collection/HashMap");var o=e("../../util/shared");var l=o.Promise;var u=r.create(n,{initialize:function($super,e,t){$super(e);this.requestCache=t||new i},lookup:function(e){var t=this;var r=a(e,false,function(e){var r=t.getIdStr(e);return r});var n=new s;var i=this.requestCache.getResultCache();var o=this.requestCache.getExecutionCache();var u=[];var c=[];var d=[];r.forEach(function(e){var r=t.getIdStr(e);var a=i.getItem(r);if(!a){var s=o[r];if(s){c.push(e);var l=d.find(function(e){var t=e===s;return t});if(!l){d.push(s)}}else{u.push(e);c.push(e)}}else{n.put(e,a)}});if(u.length>0){var p=this.fetchAndCache(u);d.push(p)}var f=l.all(d).then(function(){var e=arguments;c.forEach(function(t){var r=null;e.find(function(e){r=e.get(t);return Boolean(r)});if(r){n.put(t,r)}});return n});return f},fetchAndCache:function(e){var t=this.requestCache.getResultCache();var r=this.requestCache.getExecutionCache();var a=this;var n=this.delegate.lookup(e);var i=n.then(function(n){var i=new s;e.forEach(function(e){var r=a.getIdStr(e);var s=n.get(e);t.setItem(r,s);i.put(e,s)});e.forEach(function(e){var t=a.getIdStr(e);delete r[t]});return i});e.forEach(function(e){var t=a.getIdStr(e);r[t]=i});return i}});module.exports=u},{"../../ext/Class":2,"../../util/collection/HashMap":291,"../../util/shared":300,"../RequestCache":96,"./LookupServiceDelegateBase":118,"lodash.uniq":468}],116:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.uniq");var n=e("../../util/ArrayUtils");var i=e("../../util/collection/HashMap");var s=e("./LookupServiceDelegateBase");var o=e("../../util/shared");var l=o.Promise;var u=r.create(s,{initialize:function($super,e,t){$super(e);this.maxChunkSize=t},lookup:function(e){var t=this;var r=a(e,false,function(e){var r=t.getIdStr(e);return r});var s=n.chunk(r,this.maxChunkSize);var o=s.map(function(e){var r=t.delegate.lookup(e);return r});var u=l.app(o).then(function(){var e=new i;arguments.forEach(function(t){e.putAll(t)});return e});return u}});module.exports=u},{"../../ext/Class":2,"../../util/ArrayUtils":273,"../../util/collection/HashMap":291,"../../util/shared":300,"./LookupServiceDelegateBase":118,"lodash.uniq":468}],117:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e){this.data=e},lookup:function(e){var t=new n;var r=this;e.forEach(function(e){t.put(e,r.data)});var a=s.resolve(t);return a}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":291,"../../util/shared":300,"./LookupServiceBase":114}],118:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=r.create(a,{initialize:function(e){this.delegate=e
},getIdStr:function(e){var t=this.delegate.getIdStr(e);return t}});module.exports=n},{"../../ext/Class":2,"./LookupService":113}],119:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=r.create(a,{initialize:function($super,e,t){$super(e);this.predicateFn=t},lookup:function(e){var t=e.filter(this.predicateFn);var r=this.delegate.lookup(t);return r}});module.exports=n},{"../../ext/Class":2,"./LookupServiceDelegateBase":118}],120:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=e("../../util/ObjectUtils");var i=e("../../util/collection/HashMap");var s=e("../../util/shared");var o=s.Promise;var l=r.create(a,{initialize:function(e){this.fnTransformKey=e||n.identity},lookup:function(e){var t=new i;var r=this;e.forEach(function(e){var a=r.fnTransformKey(e);t.put(e,a)});return o.resolve(t)}});module.exports=l},{"../../ext/Class":2,"../../util/ObjectUtils":280,"../../util/collection/HashMap":291,"../../util/shared":300,"./LookupService":113}],121:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupService");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e){this.attrToLookupService=e},lookup:function(e){var t=this;var r={};var a=Object.keys(this.attrToLookupService);a.forEach(function(a){var n=t.attrToLookupService[a];r[a]=n.lookup(e)});var i=s.props(r).then(function(t){var r=new n;e.forEach(function(e){var n={};a.forEach(function(r){var a=t[r];var i=a?a.get(e):null;n[r]=i});r.put(e,n)});return r});return i}});module.exports=o},{"../../ext/Class":2,"../../util/collection/HashMap":291,"../../util/shared":300,"./LookupService":113}],122:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/shared");var n=a.Promise;var i=e("../../util/collection/HashMap");var s=e("../../sparql/expr/ExprVar");var o=e("../../sparql/expr/E_OneOf");var l=e("../../sparql/element/ElementFilter");var u=e("../../sparql/element/ElementGroup");var c=e("../ResultSetUtils");var d=e("./LookupServiceBase");var p=r.create(d,{initialize:function(e,t,r){this.sparqlService=e;this.query=t;this.v=r},lookup:n.method(function(e){var t=this.v;var r;if(e.length===0){r=n.resolve(new i)}else{var a=this.query.clone();var d=new l(new o(new s(t),e));var p=new u([a.getQueryPattern(),d]);a.setQueryPattern(p);var f=this.sparqlService.createQueryExecution(a);r=f.execSelect().then(function(e){var r=c.partition(e,t);return r})}return r})});module.exports=p},{"../../ext/Class":2,"../../sparql/element/ElementFilter":183,"../../sparql/element/ElementGroup":184,"../../sparql/expr/E_OneOf":208,"../../sparql/expr/ExprVar":220,"../../util/collection/HashMap":291,"../../util/shared":300,"../ResultSetUtils":98,"./LookupServiceBase":114}],123:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=e("../../util/collection/HashMap");var i=e("../../util/shared");var s=i.Promise;var o=function(){var e;var t;var r=new s(function(){e=arguments[0];t=arguments[1]});return{resolve:e,reject:t,promise:r}};var l=r.create(a,{initialize:function($super,e,t,r){$super(e);this.delayInMs=t;this.maxRefreshCount=r||0;this.idStrToId={};this.currentDeferred=null;this.currentPromise=null;this.currentTimer=null;this.currentRefreshCount=0},getIdStr:function(e){var t=this.delegate.getIdStr(e);return t},lookup:function(e){if(!this.currentDeferred){this.currentDeferred=o();this.currentPromise=this.currentDeferred.promise()}var t=this;e.forEach(function(e){var r=t.getIdStr(e);var a=t.idStrToId[r];if(!a){t.idStrToId[r]=e}});if(!this.currentTimer){this.startTimer()}var r=this.currentPromise.then(function(t){var r=new n;e.forEach(function(e){var a=t.get(e);r.put(e,a)});return r});return r},startTimer:function(){var e=this;var t=this.currentRefreshCount;var r=e.currentDeferred;this.currentTimer=setTimeout(function(){if(e.maxRefreshCount<0||t<e.maxRefreshCount){++e.currentRefreshCount;e.startTimer();return}var a=[];for(var n in e.idStrToId){a.push(e.idStrToId[n])}e.idStrToId={};e.currentRefreshCount=0;e.currentDeferred=null;e.currentTimer=null;e.delegate.lookup(a).then(function(e){r.resolve(e)})},this.delayInMs)}});module.exports=l},{"../../ext/Class":2,"../../util/collection/HashMap":291,"../../util/shared":300,"./LookupServiceDelegateBase":118}],124:[function(e,module,t){var r=e("../../ext/Class");var a=e("./LookupServiceDelegateBase");var n=r.create(a,{initialize:function($super,e,t,r){$super(e);this.fnTransform=t;this.fnNullHandler=r},lookup:function(e){var t=this.fnTransform;var r=this.fnNullHandler;var a=this.delegate.lookup(e).then(function(a){e.forEach(function(e){var n=a.get(e);if(n!=null){var i=t(n,e);a.put(e,i)}else if(r){n=r(e);if(n!=null){a.put(e,n)}}});return a});return a}});module.exports=n},{"../../ext/Class":2,"./LookupServiceDelegateBase":118}],125:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../sparql/ExprEvaluatorImpl");var n=e("../../util/collection/IteratorArray");var i=e("../result_set/ResultSetArrayIteratorBinding");var s=e("../../sparql/expr/E_OneOf");var o=e("../../sparql/element/ElementFilter");var l=e("../../util/shared");var u=l.Promise;var c=r.create({initialize:function(e,t,r){this.sparqlService=e;this.query=t;this.indexExpr=r;this.maxChunkSize=50;this.exprEvaluator=new a;this.nodeToBindings={};this.nodeMisses={}},fetchResultSet:function(e){var t=this;var r=this.nodeToBindings;var a=this.analyze(e);var s=[];a.cachedNodes.forEach(function(e){var t=r.getItem(e.toString());s.push.apply(s,t)});var o=a.nonCachedChunks.map(function(e){var r=t.fetchChunk(e);return r});var l=u.all(o);var c=this.exprEvaluator;var d=this.indexExpr;return l.then(function(){var e={};for(var t=0;t<arguments.length;++t){var a=arguments[t];while(a.hasNext()){var o=a.nextBinding();s.push(o);var l=c.eval(d,o);var u=l.toString();e[u]=l;var p=r.getItem(u);if(p==null){p=[];r.setItem(u,p)}p.push(o)}}var f=new n(s);var v=new i(f);return v})},fetchChunk:function(e){var t=this.query.clone();var r=new s(this.indexExpr,e);var a=new o([r]);t.getElements().push(a);var n=this.sparqlService.createQueryExecution(t);var i=n.execSelect();return i},analyze:function(e){var t=this.nodeToBindings;var r=[];var a=[];e.forEach(function(e){var n=t.getItem(e.toString());if(n==null){a.push(e)}else{r.push(e)}});var n=this.maxChunkSize;var i=[];for(var s=0;s<a.length;s+=n){var o=e.slice(s,s+n);i.push(o)}var l={cachedNodes:r,nonCachedNodes:a,nonCachedChunks:i,maxChunkSize:n};return l}});module.exports=c},{"../../ext/Class":2,"../../sparql/ExprEvaluatorImpl":160,"../../sparql/element/ElementFilter":183,"../../sparql/expr/E_OneOf":208,"../../util/collection/IteratorArray":295,"../../util/shared":300,"../result_set/ResultSetArrayIteratorBinding":135}],126:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createQueryCache:function(){throw"Not overridden"}});module.exports=a},{"../../ext/Class":2}],127:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryCacheNodeFactory");var n=e("./QueryCacheBindingHashSingle");var i=r.create(a,{initialize:function(){this.keyToCache={}},createQueryCache:function(e,t,r){var a="cache:/"+e.getServiceId()+"/"+e.getServiceState()+"/"+t+"/"+r;console.log("cache requested with id: "+a);var i=this.keyToCache.getItem(a);if(i==null){i=new n(e,t,r);this.keyToCache.addItem(a,i)}return i}});module.exports=i},{"../../ext/Class":2,"./QueryCacheBindingHashSingle":125,"./QueryCacheNodeFactory":126}],128:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({execSelect:function(){throw"Not overridden"},execAsk:function(){throw"Not overridden"},execDescribeTriples:function(){throw"Not overridden"},execConstructTriples:function(){throw"Not overridden"},setTimeout:function(){throw"Not overridden"}});module.exports=a},{"../../ext/Class":2}],129:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../../util/collection/IteratorArray");var i=e("../result_set/ResultSetArrayIteratorBinding");var s=e("../../util/shared");var o=s.Promise;var l=r.create(a,{initialize:function(e,t,r){this.queryExecution=e;this.cacheKey=t;this.requestCache=r},createResultSetFromCacheData:function(e){var t=new n(e.bindings);var r=e.varNames;var a=new i(t,r);return a},setTimeout:function(e){this.queryExecution.setTimeout(e)},execSelect:function(){var e=this.cacheKey;var t=this.requestCache;var r=t.getResultCache();var a=t.getExecutionCache();var n=a[e];if(!n){var i=r.getItem(e);if(i){n=o.resolve(i)}else{var s=this.queryExecution.execSelect();var l=s.then(function(e){var t={bindings:e.getBindings(),varNames:e.getVarNames()};return t});var u=false;n=l.then(function(t){u=true;delete a[e];r.setItem(e,t);return t});if(!u){a[e]=n}}}else{console.log("[INFO] Joined query execution for: "+e)}var c=this;var d=n.then(function(e){var t=c.createResultSetFromCacheData(e);return t});return d}});module.exports=l},{"../../ext/Class":2,"../../util/collection/IteratorArray":295,"../../util/shared":300,"../result_set/ResultSetArrayIteratorBinding":135,"./QueryExecution":128}],130:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=r.create(a,{initialize:function(e,t){this.sparqlService=e;this.query=t;this.timeout=null},setTimeout:function(e){this.timeout=e},createQueryExecution:function(e){var t=this.sparqlService.createQueryExecution(e||this.query);t.setTimeout(this.timeout);return t},execSelect:function(){var e=this.createQueryExecution().execSelect(this.query);return e},execAsk:function(){var e=this.createQueryExecution().execAsk(this.query);return e}});module.exports=n},{"../../ext/Class":2,"./QueryExecution":128}],131:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../ResultSetUtils");var i=e("../AjaxUtils");var s=e("../../util/shared");var o=s.ajax;var l=s.Promise;var u=r.create(a,{initialize:function(e,t,r,a,n){this.queryString=e;this.serviceUri=t;this.defaultGraphUris=r;this.ajaxOptions=a||{};this.httpArgs=n},execSelect:function(){var e=this.execAny().then(function(e){var t;try{t=n.jsonToResultSet(e)}catch(r){console.log("Error processing result set. Response was: ",e);throw r}return t});return e},execAsk:function(){var e=this.execAny().then(function(e){return e.boolean});return e},execConstructTriples:function(){throw"Not implemented yet"},execDescribeTriples:function(){throw"Not implemented yet"},setTimeout:function(e){this.ajaxOptions.timeout=e},getTimeout:function(){return this.ajaxOptions.timeout},execAny:function(){var e=i.createSparqlRequestAjaxSpec(this.serviceUri,this.defaultGraphUris,this.queryString,this.httpArgs,this.ajaxOptions);var t=o(e);return t}});module.exports=u},{"../../ext/Class":2,"../../util/shared":300,"../AjaxUtils":91,"../ResultSetUtils":98,"./QueryExecution":128}],132:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecutionDelegate");var n=e("../PageExpandUtils");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=r.create(a,{initialize:function($super,e,t,r){$super(e,t);this.pageSize=r},execSelect:function(){var e=this.query.clone();var t=n.computeRange(e.getLimit(),e.getOffset(),this.pageSize);e.setLimit(t.limit);e.setOffset(t.offset);var r=this.createQueryExecution(e);var a=r.execSelect();var o=a.then(function(e){var r=e.getIterator().getArray();var a=t.subLimit?t.subOffset+t.subLimit:r.length;var n=r.slice(t.subOffset,a);var o=e.getVarNames();var l=new i(n);var u=new s(l,o);return u});return o}});module.exports=o},{"../../ext/Class":2,"../../util/collection/IteratorArray":295,"../PageExpandUtils":94,"../result_set/ResultSetArrayIteratorBinding":135,"./QueryExecutionDelegate":130}],133:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryExecution");var n=e("../QueryPaginator");var i=e("../../util/collection/IteratorArray");var s=e("../result_set/ResultSetArrayIteratorBinding");var o=e("../../util/shared");var l=o.Promise;var u=r.create(a,{initialize:function(e,t,r){this.defaultPageSize=1e3;this.sparqlService=e;this.query=t;this.pageSize=r;this.timeoutInMillis=null},executeSelectRec:l.method(function(e,t){var r=e.next();if(!r){return t}var a=this;var n=this.sparqlService.createQueryExecution(r);n.setTimeout(this.timeoutInMillis);var o=n.execSelect().then(function(n){if(!n){throw"Null result set for query: "+r}var o;if(!t){o=n}else{var l=t.getIterator().getArray();var u=n.getIterator().getArray();var c=l.concat(u);var d=new i(c);o=new s(d)}var p=n.getIterator().getArray().length;var f=e.getPageSize();var v=p===0||p<f;if(!v){o=a.executeSelectRec(e,n)}return o});return o}),execSelect:function(){var e=this.query.clone();var t=this.pageSize||u.defaultPageSize;var r=new n(e,t);return this.executeSelectRec(r,null)},setTimeout:function(e){this.timeoutInMillis=e;if(!this.timeoutMsgShown){console.log("[WARN] Only preliminary timeout implementation for paginated query execution.");this.timeoutMsgShown=true}}});module.exports=u},{"../../ext/Class":2,"../../util/collection/IteratorArray":295,"../../util/shared":300,"../QueryPaginator":95,"../result_set/ResultSetArrayIteratorBinding":135,"./QueryExecution":128}],134:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/Iterator");var n=r.create(a,{getVarNames:function(){throw"Override me"}});module.exports=n},{"../../ext/Class":2,"../../util/collection/Iterator":293}],135:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ResultSet");var n=r.create(a,{initialize:function(e,t){this.itBinding=e;this.varNames=t},hasNext:function(){return this.itBinding.hasNext()},next:function(){return this.nextBinding()},nextBinding:function(){return this.itBinding.next()},getVarNames:function(){return this.varNames},getBindings:function(){return this.itBinding.getArray()},getIterator:function(){return this.itBinding}});module.exports=n},{"../../ext/Class":2,"./ResultSet":134}],136:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/IteratorAbstract");var n=r.create(a,{initialize:function(e,t,r,a){this.rsA=e;this.serviceB=t;this.elementB=r;this.expr=a;e.getVarsMentioned();a.getVarsMentioned()},$prefetch:function(){}});module.exports=n},{"../../ext/Class":2,"../../util/collection/IteratorAbstract":294}],137:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({getServiceId:function(){console.log("[ERROR] Method not overridden");throw"[ERROR] Method not overridden"},getStateHash:function(){console.log("[ERROR] Method not overridden");throw"[ERROR] Method not overridden"},createQueryExecution:function(){console.log("[ERROR] Method not overridden");throw"[ERROR] Method not overridden"}});module.exports=a},{"../../ext/Class":2}],138:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=r.create(a,{createQueryExecution:function(e){var t;if(Object.toString(e)==="[object String]"){t=this.createQueryExecutionStr(e)}else{t=this.createQueryExecutionObj(e)}return t},createQueryExecutionObj:function(e){var t=e.toString();var r=this.createQueryExecutionStr(t);return r},createQueryExecutionStr:function(){throw"Not implemented"}});module.exports=n},{"../../ext/Class":2,"./SparqlService":137}],139:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlServiceBaseString");var n=e("../RequestCache");var i=e("../query_execution/QueryExecutionCache");var s=r.create(a,{initialize:function(e){this.qef=e;this.requestCache=new n},getServiceId:function(){return this.qef.getServiceId()},getStateHash:function(){return this.qef.getStateHash()},hashCode:function(){return"cached:"+this.qef.hashCode()},createQueryExecutionStr:function(e){var t=this.qef.getServiceId();var r=this.qef.getStateHash();var a=t+"-"+r+e;var n=this.qef.createQueryExecution(e);var s=new i(n,a,this.requestCache);return s}});module.exports=s},{"../../ext/Class":2,"../RequestCache":96,"../query_execution/QueryExecutionCache":129,"./SparqlServiceBaseString":138}],140:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=r.create(a,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"console-log:"+this.sparqlService.hashCode()},createQueryExecution:function(e){console.log("SparqlServiceConsoleLog saw query: "+e);var t=this.sparqlService.createQueryExecution(e);return t}});module.exports=n},{"../../ext/Class":2,"./SparqlService":137}],141:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createSparqlService:function(){throw"Not overridden"}});module.exports=a},{"../../ext/Class":2}],142:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.sparqlService=e},createSparqlService:function(){var e=this.sparqlService;if(e==null){console.log("[ERROR] Creation of a SPARQL service requested, but none was provided");throw"Bailing out"}return e},setSparqlService:function(e){this.sparqlService=e}});module.exports=a},{"../../ext/Class":2}],143:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlServiceHttp");var n=e("./SparqlServiceCache");var i=r.create({initialize:function(){this.hashToCache={}},createSparqlService:function(e,t){var r=new a(e,t);r=new n(r);var i=r.getStateHash();var s=this.hashToCache[i];var o;if(s){o=s}else{this.hashToCache[i]=r;o=r}return o}});module.exports=i},{"../../ext/Class":2,"./SparqlServiceCache":139,"./SparqlServiceHttp":144}],144:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.defaults");var n=e("./SparqlServiceBaseString");var i=e("../query_execution/QueryExecutionHttp");var s=e("../../ext/JSONCanonical");var o=r.create(n,{initialize:function(e,t,r,a){this.serviceUri=e;this.defaultGraphUris=t;this.ajaxOptions=r;this.httpArgs=a},getServiceId:function(){return this.serviceUri},getStateHash:function(){var e=s.stringify(this.defaultGraphUris);e+=s.stringify(this.httpArgs);return e},hashCode:function(){return this.getServiceId()+"/"+this.getStateHash()},setDefaultGraphs:function(e){this.defaultGraphUris=e},getDefaultGraphs:function(){return this.defaultGraphUris},createQueryExecutionStr:function(e){var t=a({},this.ajaxOptions);var r=new i(e,this.serviceUri,this.defaultGraphUris,t,this.httpArgs);return r},createQueryExecutionObj:function($super,e){if(true){if(e.flatten){var t=e;e=t.flatten()}}var r=$super(e);return r}});module.exports=o},{"../../ext/Class":2,"../../ext/JSONCanonical":3,"../query_execution/QueryExecutionHttp":131,"./SparqlServiceBaseString":138,"lodash.defaults":307}],145:[function(e,module,t){var r=e("../../ext/Class");var a=e("../query_execution/QueryExecutionPageExpand");var n=e("./SparqlService");var i=r.create(n,{initialize:function(e,t){this.sparqlService=e;this.pageSize=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"page-expand:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=new a(this.sparqlService,e,this.pageSize);return t}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionPageExpand":132,"./SparqlService":137}],146:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../query_execution/QueryExecutionPaginate");var i=r.create(a,{initialize:function(e,t){this.defaultPageSize=1e3;this.sparqlService=e;this.pageSize=t},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"paginate:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=new n(this.sparqlService,e,this.pageSize);return t}});module.exports=i},{"../../ext/Class":2,"../query_execution/QueryExecutionPaginate":133,"./SparqlService":137}],147:[function(e,module,t){var r=e("../../ext/Class");var a=e("./SparqlService");var n=e("../../sparql/expr/ExprAggregator");var i=e("../../sparql/Query");var s=e("../../sparql/element/ElementSubQuery");var o=r.create(a,{initialize:function(e){this.sparqlService=e},getServiceId:function(){return this.sparqlService.getServiceId()},getStateHash:function(){return this.sparqlService.getStateHash()},hashCode:function(){return"virtfix:"+this.sparqlService.hashCode()},createQueryExecution:function(e){var t=e.getOrderBy();var r=e.getLimit();var a=e.getOffset();var n=a!=null&&r==null;var o=e.getAggregators().length>0;var l=t.length>0&&(r||a)||o;var u=n||l;var c=u?e.clone():e;if(n){r=2e9;c.setLimit(r)}if(l){var d=c;d.setLimit(null);d.setOffset(null);var p=new s(d);c=new i;c.setQueryPattern(p);c.setLimit(r);c.setOffset(a);c.setQueryResultStar(true)}var f=this.sparqlService.createQueryExecution(c);return f}});module.exports=o},{"../../ext/Class":2,"../../sparql/Query":169,"../../sparql/element/ElementSubQuery":187,"../../sparql/expr/ExprAggregator":212,"./SparqlService":137}],148:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({fetchSchema:function(){throw new Error("Override me")},fetchCount:function(e){throw new Error("Override me")},fetchData:function(e,t){throw new Error("Override me")}});module.exports=a},{"../../ext/Class":2}],149:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableService");var n=r.create(a,{initialize:function(e){this.delegate=e},fetchSchema:function(){var e=this.delegate.fetchSchema();return e},fetchCount:function(){var e=this.delegate.fetchCount();return e},fetchData:function(){var e=this.delegate.fetchData();return e}});module.exports=n},{"../../ext/Class":2,"./TableService":148}],150:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableServiceNodeLabels");var n=e("../TableServiceUtils");var i=r.create(a,{initialize:function($super,e,t,r,a){$super(e,r);this.tableConfigFacet=t;this.lookupServicePathLabels=a},fetchSchema:function(){var e=n.fetchSchemaTableConfigFacet(this.tableConfigFacet,this.lookupServicePathLabels);return e}});module.exports=i},{"../../ext/Class":2,"../TableServiceUtils":100,"./TableServiceNodeLabels":151}],151:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableServiceDelegateBase");var n=e("../TableServiceUtils");var i=r.create(a,{initialize:function($super,e,t){$super(e);this.lookupServiceNodeLabels=t},fetchData:function(e,t){var r=this.delegate.fetchData(e,t);var a=this;var i=r.then(function(e){var t=n.transformToNodeLabels(a.lookupServiceNodeLabels,e);return t});return i}});module.exports=i},{"../../ext/Class":2,"../TableServiceUtils":100,"./TableServiceDelegateBase":149}],152:[function(e,module,t){var r=e("../../ext/Class");var a=e("./TableService");var n=e("../TableServiceUtils");var i=e("../../util/shared");var s=i.Promise;var o=r.create(a,{initialize:function(e,t,r,a){this.sparqlService=e;this.query=t;this.timeoutInMillis=r||3e3;this.secondaryCountLimit=a||1e3},fetchSchema:function(){var e={colDefs:n.createNgGridOptionsFromQuery(this.query)};return new s(function(t){t(e)})},fetchCount:function(){var e=n.fetchCount(this.sparqlService,this.query,this.timeoutInMillis,this.secondaryCountLimit);return e},fetchData:function(e,t){var r=n.fetchData(this.sparqlService,this.query,e,t);return r}});module.exports=o},{"../../ext/Class":2,"../../util/shared":300,"../TableServiceUtils":100,"./TableService":148}],153:[function(e,module,t){var r=e("../ext/Class");var a=e("../vocab/rdfs");var n=e("./VarUtils");var i=r.create({initialize:function(e,t,r,i,s){this.langs=e||["en",""];this.predicates=t||[a.label];this.subjectVar=i||n.x;this.predicateVar=s||n.y;this.objectVar=r||n.z},getLangs:function(){return this.langs},getPredicates:function(){return this.predicates},getSubjectVar:function(){return this.subjectVar},getPredicateVar:function(){return this.predicateVar},getObjectVar:function(){return this.objectVar},toString:function(){var e=["BestLabelConfig",this.langs,this.predicates,this.subjectVar,this.predicateVar,this.objectVar].join(", ");return e}});module.exports=i},{"../ext/Class":2,"../vocab/rdfs":304,"./VarUtils":178}],154:[function(e,module,t){var r=e("../rdf/NodeFactory");var a=e("../rdf/node/Var");var n=function(e){this.varNameToEntry=e?e:{}};n.create=function(e){var t={};for(var a in e){var i=e[a];t[a]={v:r.createVar(a),node:i}}var s=new n(t);return s};n.fromTalisJson=function(e){var t={};for(var a in e){var i=e[a];var s=r.createFromTalisRdfJson(i);t[a]=s}var o=n.create(t);return o};n.prototype={put:function(e,t){this.varNameToEntry[e.getName()]={v:e,node:t}},get:function(e){if(!(e instanceof a)){throw"var not an instance of Var"}var t=e.getName();var r=this.varNameToEntry[t];var n=r?r.node:null;return n},entries:function(){var e=[];for(var t in this.varNameToEntry){var r=this.varNameToEntry[t];e.push(r)}var a=e.sort(function(e,t){return e.v.getName()>t.v.getName()?1:-1});return a},toString:function(){var e=this.entries();var t=e.map(function(e){return'"'+e.v.getName()+'": "'+e.node+'"'});var r="{"+t.join(", ")+"}";return r},getVars:function(){var e=[];for(var t in this.varNameToEntry){var r=this.varNameToEntry[t];e.push(r.v)}return e}};module.exports=n},{"../rdf/NodeFactory":65,"../rdf/node/Var":84}],155:[function(e,module,t){var r=e("../ext/Class");var a=e("./ElementUtils");var n=e("./element/ElementGroup");var i=e("./element/ElementTriplesBlock");var s=r.create({classLabel:"jassa.sparql.Concept",initialize:function(e,t){this.element=e;this.variable=t},toJson:function(){var e={element:JSON.parse(JSON.stringify(this.element)),variable:this.variable};return e},getElement:function(){return this.element},getVarsMentioned:function(){var e=this.getElement().getVarsMentioned();return e},hasTriples:function(){var e=this.getElements();var t=a.getElementsDirectTriples(e);var r=t.length>0;return r},getElements:function(){var e;if(this.element instanceof n){e=this.element.elements}else{e=[this.element]}return e},getVar:function(){return this.variable},getVariable:function(){if(!this.warningShown){this.warningShown=true}return this.getVar()},toString:function(){return""+this.element+"; "+this.variable},isSubjectConcept:function(){var e=false;var t=this.variable;var r=this.element;if(r instanceof i){var a=r.triples;if(a.length===1){var n=a[0];var s=n.getSubject();var o=n.getPredicate();var l=n.getObject();e=t.equals(s)&&o.isVariable()&&l.isVariable()}}return e},createOptimizedConcept:function(){var e=this.getElement();var t=e.flatten();var r=new s(t,this.variable);return r},getOptimizedElement:function(){return null}});s.createFromElements=function(e,t){var r;if(e.length==1){r=e[0]}else{r=new n(e)}var a=new s(r,t);return a};module.exports=s},{"../ext/Class":2,"./ElementUtils":158,"./element/ElementGroup":184,"./element/ElementTriplesBlock":188}],156:[function(e,module,t){var r=e("../rdf/node/Node");var a=e("../rdf/NodeFactory");var n=e("../rdf/Triple");var i=e("../util/collection/HashMap");var s=e("./../vocab/rdf");var o=e("./VarUtils");var l=e("./ElementUtils");var u=e("./expr/ExprAggregator");var c=e("./agg/AggCount");var d=e("./expr/ExprVar");var p=e("./expr/E_Equals");var f=e("./element/ElementTriplesBlock");var v=e("./element/ElementOptional");var h=e("./element/ElementSubQuery");var g=e("./element/ElementGroup");var m=e("./element/ElementFilter");var x=e("./QueryUtils");var _=e("./NodeValueUtils");var b=e("./Query");var y=e("./Concept");var S={createVarMap:function(e,t){var r=e.getElement();var a=t.getElement();var n=e.getVar();var i=r.getVarsMentioned();var s=a.getVarsMentioned();var o=[e.getVar()];var u=[t.getVar()];var c=l.createJoinVarMap(i,s,o,u);return c},createRenamedConcept:function(e,t){var r=this.createVarMap(e,t);var a=e.getVar();var n=t.getElement();var i=l.createRenamedElement(n,r);var s=new y(i,a);return s},renameVars:function(e,t){var r=o.fnSubst(t);var a=r(e.getVar());var n=e.getElement().copySubstitute(r);var i=new y(n,a);return i},createCombinedConcept:function(e,t,r,a,n){var s=e.getVar();var o=t.getVar();if(!o.equals(s)){var l=new i;l.put(o,s);t=this.renameVars(t,l)}var u;if(r){u=this.createRenamedConcept(e,t)}else{u=t}var c=u.getElements();var d=e.getElement();var p;if(c.length>0){if(u.isSubjectConcept()){p=e.getElement()}else{var f=[];if(a){d=new v(e.getElement())}f.push(d);if(n){c=[new h(u.asQuery())]}f.push.apply(f,c);p=new g(f);p=p.flatten()}}else{p=d}var m=new y(p,s);return m},createSubjectConcept:function(e,t,r){e=e||o.s;t=t||o._p_;r=r||o._o_;var a=new f([new n(e,t,r)]);var i=new y(a,e);return i},createTypeConcept:function(e,t){var i=e instanceof r?e:a.createUri(e);var o=!t?a.createVar("s"):t instanceof r?t:a.createVar(t);var l=new y(new f([new n(o,s.type,i)]),o);return l},createQueryList:function(e,t,r){var a=new b;a.setDistinct(true);a.setLimit(t);a.setOffset(r);a.getProject().add(e.getVar());a.setQueryPattern(e.getElement());return a},freshVar:function(e,t){t=t||"c";var r=e.getVarsMentioned();var a=o.createVarGen(t,r);var n=a.next();return n},wrapAsSubQuery:function(e,t){var r=new h(e);var a=new b;a.setQuerySelectType();a.getProject().add(t);a.setQueryPattern(r);return a},createQueryCount:function(e,t,r,a){var n=this.createQueryList(e);if(a!=null){n.setDistinct(false);n.setLimit(a);n=this.wrapAsSubQuery(n,e.getVar());n.setDistinct(true)}if(r!=null){n.setLimit(r)}var i=new h(n);var s=new b;s.setQuerySelectType();s.getProject().add(t,new u(null,new c));s.setQueryPattern(i);return s},createQueryRawSize:function(e,t,r,a){var n=e.getVar();var i=e.getElement();var s=new d(n);var o=_.makeNode(t);var l=new m(new p(s,o));var f=new g([i,l]).flatten();if(a!=null){var v=new b;v.setQuerySelectType();v.getProject().add(n);v.setQueryPattern(f);v.setLimit(a);f=new h(v)}var x=new b;x.setQuerySelectType();x.getProject().add(n);x.getProject().add(r,new u(null,new c));x.setQueryPattern(f);x.getGroupBy().push(s);return x},isGroupedOnlyByVar:function(e,t){var r=false;var a=e.getGroupBy().length===1;if(a){var n=e.getGroupBy()[0];if(n instanceof d){var i=n.asVar();r=i.equals(t)}}return r},isDistinctConceptVar:function(e,t){var r=e.isDistinct();var a=e.getProjectVars();var n=!e.isQueryResultStar()&&a&&a.length===1;var i=r&&n&&a[0].equals(t);return i},isConceptQuery:function(e,t){var r=this.isGroupedOnlyByVar(e,t);var a=this.isDistinctConceptVar(e,t);var n=r||a;return n},createAttrQuery:function(e,t,r,a,n,i){var s=new y(new h(e),t);var o=S.createRenamedConcept(s,a);var l=this.isConceptQuery(e,t);var u;if(l){u=e.clone();if(!o.isSubjectConcept()){var c=new g([e.getQueryPattern(),o.getElement()]);c=c.flatten();u.setQueryPattern(c)}u.setLimit(n);u.setOffset(i)}else{var d=n!=null||i!=null;var p;if(d){var f;if(r){f=o}else{var m;if(o.isSubjectConcept()){m=e.getQueryPattern()}else{m=new g([e.getQueryPattern(),o.getElement()])}f=new y(m,t)}var x=S.createQueryList(f,n,i);p=new h(x)}else{p=o.getElement()}var _=e.clone();var b=_.getQueryPattern();var C;if(!d&&(!a||a.isSubjectConcept())){C=b}else{if(r){C=new g([p,new v(b)])}else{C=new g([b,p])}}_.setQueryPattern(C);u=_}return u}};module.exports=S},{"../rdf/NodeFactory":65,"../rdf/Triple":68,"../rdf/node/Node":77,"../util/collection/HashMap":291,"./../vocab/rdf":303,"./Concept":155,"./ElementUtils":158,"./NodeValueUtils":167,"./Query":169,"./QueryUtils":171,"./VarUtils":178,"./agg/AggCount":179,"./element/ElementFilter":183,"./element/ElementGroup":184,"./element/ElementOptional":185,"./element/ElementSubQuery":187,"./element/ElementTriplesBlock":188,"./expr/E_Equals":197,"./expr/ExprAggregator":212,"./expr/ExprVar":220}],157:[function(e,module,t){var r={joinElements:function(e,t){var r=t.map(function(e){return e.toString()});var a=r.filter(function(e){return e.length!==0});return a.join(e)}};module.exports=r},{}],158:[function(e,module,t){var r=e("lodash.uniq");var a=e("./element/ElementTriplesBlock");var n=e("./element/ElementFilter");var i=e("./element/ElementGroup");var s=e("./element/ElementSubQuery");var o=e("./../rdf/TripleUtils");var l=e("./VarUtils");var u=e("./GenSym");var c=e("./GeneratorBlacklist");var d=e("../util/collection/HashBidiMap");var p=e("../rdf/NodeFactory");
var f=e("./Query");var v=e("./expr/ExprAggregator");var h=e("./agg/AggCount");var g={createQueryCountRows:function(e,t,r){var a;if(r==null){a=e}else{var n=new f;n.setQuerySelectType();n.setQueryPattern(e);n.setQueryResultStar(true);n.setLimit(r);a=new s(e)}var i=new f;i.setQuerySelectType();i.setQueryPattern(a);i.getProject().add(t,new v(null,new h));return i},createFilterElements:function(e){var t=e.map(function(e){var t=new n(e);return t});return t},createElementsTriplesBlock:function(e){var t=[];if(e.length>0){var r=new a(e);t.push(r)}return t},createDistinctVarMap:function(e,t,r){var a=e.map(l.getVarName);if(r==null){var n=new u("v");r=new c(n,a)}var i=new d;t.forEach(function(e){var t=e.getName();var n;if(a.indexOf(t)!==-1){var s=r.next();n=p.createVar(s)}else{n=e}i.put(e,n)});return i},createJoinVarMap:function(e,t,r,a,n){if(r.length!==a.length){console.log("[ERROR] Cannot join on different number of columns");throw"Bailing out"}var i=g.createDistinctVarMap(e,t,n);for(var s=0;s<r.length;++s){var o=r[s];var l=a[s];i.put(l,o)}return i},createRenamedElement:function(e,t){var r=l.fnSubst(t);var a=e.copySubstitute(r);return a},getElementsDirectTriples:function(e){var t=[];for(var r=0;r<e.length;++r){var n=e[r];if(n instanceof a){t.push.apply(t,n.triples)}}return t},freshVar:function(e,t){var r=this.freshVarGen(e,t);var a=r.next();console.log("freshVar: "+a);return a},freshVarGen:function(e,t){t=t||"v";var r=e.getVarsMentioned();var a=l.freshVarGen(t,r);return a}};module.exports=g},{"../rdf/NodeFactory":65,"../util/collection/HashBidiMap":290,"./../rdf/TripleUtils":69,"./GenSym":163,"./GeneratorBlacklist":165,"./Query":169,"./VarUtils":178,"./agg/AggCount":179,"./element/ElementFilter":183,"./element/ElementGroup":184,"./element/ElementSubQuery":187,"./element/ElementTriplesBlock":188,"./expr/ExprAggregator":212,"lodash.uniq":468}],159:[function(e,module,t){var r=e("../ext/Class");var a=r.create({eval:function(){throw"Not overridden"}});module.exports=a},{"../ext/Class":2}],160:[function(e,module,t){var r=e("../ext/Class");var a=e("./expr/NodeValue");var n=e("./ExprEvaluator");var i=r.create(n,{eval:function(e,t){var r;var a;if(e.isVar()){a=e.getExprVar();r=this.evalExprVar(a,t)}else if(e.isFunction()){a=e.getFunction();r=this.evalExprFunction(a,t)}else if(e.isConstant()){a=e.getConstant();r=this.evalConstant(a,t)}else{throw"Unsupported expr type"}return r},evalExprVar:function(e,t){var r=e.asVar();var n=t.get(r);var i;if(n==null){return a.nvNothing}else{i=a.makeNode(n)}return i},evalExprFunction:function(){},evalNodeValue:function(){}});module.exports=i},{"../ext/Class":2,"./ExprEvaluator":159,"./expr/NodeValue":221}],161:[function(e,module,t){var r={newBinaryExpr:function(e,t){if(t.length!==2){throw"Invalid argument"}var r=t[0];var a=t[1];var n=new e(r,a);return n},newUnaryExpr:function(e,t){if(t.length!==1){throw"Invalid argument"}var r=t[0];var a=new e(r);return a},joinElements:function(e,t){var r=t.map(function(e){return e.toString()});var a=r.filter(function(e){return e.length!==0});return a.join(e)}};module.exports=r},{}],162:[function(e,module,t){var r=e("./expr/ExprVar");var a=e("./expr/NodeValue");var n=e("./expr/E_Equals");var i=e("./expr/E_LogicalAnd");var s=e("./expr/E_LogicalOr");var o={copySubstitute:function(e,t){var r=function(e){var r=null;if(e.isVar()){var a=t.get(e);if(a!=null){r=a}}if(r==null){r=e}return r};var a=e.copySubstitute(r);return a},bindingToExprs:function(e,t){if(t==null){t=e.getVars()}var i=[];t.forEach(function(t){var s=new r(t);var o=e.get(t);var l=a.makeNode(o);var u=new n(s,l);i.push(u)});return i},opify:function(e,t){var r=e;var a=[];while(r.length>1){for(var n=0;n<r.length;n+=2){var i=r[n];if(n+1===r.length){a.push(i);break}var s=r[n+1];var o=t(i,s);a.push(o)}r=a;a=[]}return r[0]},andify:function(e){var t=this.opify(e,function(e,t){return new i(e,t)});return t},orify:function(e){var t=this.opify(e,function(e,t){return new s(e,t)});return t}};module.exports=o},{"./expr/E_Equals":197,"./expr/E_LogicalAnd":204,"./expr/E_LogicalOr":206,"./expr/ExprVar":220,"./expr/NodeValue":221}],163:[function(e,module,t){var r=e("../ext/Class");var a=e("./Generator");var n=r.create(a,{initialize:function(e,t){this.prefix=e?e:"v";this.nextValue=t?t:0},next:function(){++this.nextValue;var e=this.prefix+"_"+this.nextValue;return e}});n.create=function(e){var t=new n(e,0);return t};module.exports=n},{"../ext/Class":2,"./Generator":164}],164:[function(e,module,t){var r=e("../ext/Class");var a=r.create({next:function(){throw"Override me"}});module.exports=a},{"../ext/Class":2}],165:[function(e,module,t){var r=e("../ext/Class");var a=e("./Generator");var n=r.create(a,{initialize:function(e,t){this.generator=e;this.blacklist=t},next:function(){var e;do{e=this.generator.next()}while(this.blacklist.indexOf(e)!==-1);return e}});module.exports=n},{"../ext/Class":2,"./Generator":164}],166:[function(e,module,t){var r=e("../rdf/Triple");var a=e("../rdf/NodeFactory");var n=e("./NodeValueUtils");var i=e("./expr/ExprVar");var s=e("./expr/E_OneOf");var o=e("./expr/E_LangMatches");var l=e("./expr/E_LogicalOr");var u=e("./expr/E_Lang");var c=e("./expr/E_Bound");var d=e("./expr/E_Regex");var p=e("./expr/E_Str");var f=e("./ExprUtils");var v=e("./Concept");var h=e("./Relation");var g=e("./ConceptUtils");var m=e("./element/ElementTriplesBlock");var x=e("./element/ElementGroup");var _=e("./element/ElementOptional");var b=e("./element/ElementFilter");var y=e("./VarUtils");var S={createRelationPrefLabels:function(e){var t=e.getLangs();var a=e.getPredicates();var l=e.getSubjectVar();var c=e.getPredicateVar();var d=e.getObjectVar();var p=new i(l);var v=new i(c);var g=new i(d);var _=t.map(function(e){var t=new o(new u(g),n.makeString(e));return t});var y=f.orify(_);var S=new s(v,a);var C=[];C.push(new m([new r(l,c,d)]));C.push(new b(S));C.push(new b(y));var E=new x(C);var w=new h(E,l,d);return w}};module.exports=S},{"../rdf/NodeFactory":65,"../rdf/Triple":68,"./Concept":155,"./ConceptUtils":156,"./ExprUtils":162,"./NodeValueUtils":167,"./Relation":172,"./VarUtils":178,"./element/ElementFilter":183,"./element/ElementGroup":184,"./element/ElementOptional":185,"./element/ElementTriplesBlock":188,"./expr/E_Bound":195,"./expr/E_Lang":200,"./expr/E_LangMatches":201,"./expr/E_LogicalOr":206,"./expr/E_OneOf":208,"./expr/E_Regex":209,"./expr/E_Str":210,"./expr/ExprVar":220}],167:[function(e,module,t){var r=e("../rdf/NodeFactory");var a=e("./expr/NodeValue");var n=e("./expr/NodeValueNode");var i=e("../rdf/AnonIdStr");var s=e("../vocab/xsd");var o={nvNothing:new a(r.createAnon(new i("node value nothing"))),createLiteral:function(e,t){var a=r.createTypedLiteralFromValue(e,t);var i=new n(a);return i},makeString:function(e){return o.createLiteral(e,s.xstring.getUri())},makeInteger:function(e){return o.createLiteral(e,s.xint.getUri())},makeDecimal:function(e){return o.createLiteral(e,s.decimal.getUri())},makeFloat:function(e){return o.createLiteral(e,s.xfloat.getUri())},makeNode:function(e){var t=new n(e);return t}};module.exports=o},{"../rdf/AnonIdStr":63,"../rdf/NodeFactory":65,"../vocab/xsd":306,"./expr/NodeValue":221,"./expr/NodeValueNode":222}],168:[function(e,module,t){var r=e("lodash.union");var a=function(e){return typeof e==="function"};var n={getVarsMentioned:function(e){var t=e.reduce(function(e,t){var n=t.getVarsMentioned;if(!n||!a(n)){console.log("[ERROR] .getVarsMentioned not found on object ",t)}var i=t.getVarsMentioned();var s=r(e,i);return s},[]);return t}};module.exports=n},{"lodash.union":445}],169:[function(e,module,t){var r=e("../ext/Class");var a=e("lodash.union");var n=e("../util/ObjectUtils");var i=e("./VarExprList");var s=e("../util/ArrayUtils");var o=e("./ElementHelpers");var l=e("./ElementUtils");var u=e("./QueryType");var c=e("./expr/ExprAggregator");var d=r.create({classLabel:"jassa.sparql.Query",initialize:function(){this.type=0;this.distinct=false;this.reduced=false;this.queryResultStar=false;this.projectVars=new i;this.groupBy=[];this.orderBy=[];this.queryPattern=null;this.constructTemplate=null;this.limit=null;this.offset=null},getAggregators:function(){var e=this.getProject().entries();var t=[];e.forEach(function(e){var r=e.expr;if(r instanceof c){var a=r.getAggregator();t.push(a)}});return t},setQuerySelectType:function(){this.type=0},isQueryResultStar:function(){return this.queryResultStar},setQueryResultStar:function(e){this.queryResultStar=e},getQueryPattern:function(){return this.queryPattern},setQueryPattern:function(e){this.queryPattern=e},getProjectVars:function(){var e=this.projectVars?this.projectVars.getVars():null;return e},setProjectVars:function(e){this.projectVars=e},getProject:function(){return this.projectVars},getGroupBy:function(){return this.groupBy},getOrderBy:function(){return this.orderBy},getLimit:function(){return this.limit},getOffset:function(){return this.offset},toStringOrderBy:function(){var e=this.orderBy&&this.orderBy.length>0?"Order By "+this.orderBy.join(" ")+" ":"";return e},toStringGroupBy:function(){var e=this.groupBy&&this.groupBy.length>0?"Group By "+this.groupBy.join(" ")+" ":"";return e},clone:function(){return this.copySubstitute(n.identity)},flatten:function(){var e=this.clone();e.queryPattern=this.queryPattern?this.queryPattern.flatten():null;return e},getVarsMentioned:function(){console.log("sparql.Query.getVarsMentioned(): Not implemented properly yet. Things may break!");var e=this.queryPattern.getVarsMentioned();return e},copySubstitute:function(e){var t=new d;t.type=this.type;t.distinct=this.distinct;t.reduced=this.reduced;t.queryResultStar=this.queryResultStar;t.limit=this.limit;t.offset=this.offset;t.projectVars=this.projectVars.copySubstitute(e);if(this.constructTemplate){t.constructTemplate=this.constructTemplate.copySubstitute(e)}t.orderBy=this.orderBy==null?null:this.orderBy.map(function(t){return t.copySubstitute(e)});t.groupBy=this.groupBy==null?null:this.groupBy.map(function(t){return t.copySubstitute(e)});t.queryPattern=this.queryPattern.copySubstitute(e);return t},setOptions:function(e){if(typeof e==="undefined"){return}if(typeof e.limit!=="undefined"){this.setLimit(e.limit)}if(typeof e.offset!=="undefined"){this.setOffset(e.offset)}if(typeof e.distinct!=="undefined"){this.setDistinct(e.distinct)}},setOffset:function(e){this.offset=e?e:null},setLimit:function(e){if(e===0){this.limit=0}else{this.limit=e?e:null}},isDistinct:function(){return this.distinct},setDistinct:function(e){this.distinct=e===true},isReduced:function(){return this.reduced},setReduced:function(e){this.reduced=e===true},toString:function(){switch(this.type){case u.Select:return this.toStringSelect();case u.Construct:return this.toStringConstruct()}},toStringProjection:function(){var e=this.queryResultStar?"*":this.projectVars.toString();return e},toStringLimitOffset:function(){var e="";if(this.limit!=null){e+=" Limit "+this.limit}if(this.offset!=null){e+=" Offset "+this.offset}return e},toStringSelect:function(){var e=this.distinct?"Distinct ":"";var t="Select "+e+this.toStringProjection()+" {"+this.queryPattern+"} "+this.toStringGroupBy()+this.toStringOrderBy()+this.toStringLimitOffset();return t},toStringConstruct:function(){var e="Construct "+this.constructTemplate+" {"+this.queryPattern+"}"+this.toStringOrderBy()+this.toStringLimitOffset();return e}});module.exports=d},{"../ext/Class":2,"../util/ArrayUtils":273,"../util/ObjectUtils":280,"./ElementHelpers":157,"./ElementUtils":158,"./QueryType":170,"./VarExprList":176,"./expr/ExprAggregator":212,"lodash.union":445}],170:[function(e,module,t){var r={};r.Unknown=-1;r.Select=0;r.Construct=1;r.Ask=2;r.Describe=3;module.exports=r},{}],171:[function(e,module,t){var r=e("./expr/ExprVar");var a=e("./expr/ExprAggregator");var n=e("./agg/AggCount");var i=e("./element/ElementGroup");var s=e("./element/ElementUnion");var o=e("./element/ElementSubQuery");var l=e("./Query");var u={createQueryCount:function(e,t,s,u,c,d,p){var f=e.length===1?e[0]:new i(e);var v=s?new r(s):null;var h;var g=t||d||c&&c.length>0;if(g){var m=new l;m.setQueryPattern(f);if(c){for(var x=0;x<c.length;++x){var _=c[x];m.getProject().add(_)}}if(s){m.getProject().add(s)}if(m.getProjectVars().length===0){m.setQueryResultStar(true)}m.setDistinct(d);m.setLimit(t);h=new o(m)}else{h=new i(e)}var b=new l;b.setQueryPattern(h);if(c){c.forEach(function(e){b.getProject().add(e);b.getGroupBy().push(new r(e))})}b.getProject().add(u,new a(null,new n));return b},createQueryUnionSubQueries:function(e,t){var r;if(e.length===0){r=null}else{if(e.length===1){r=e[0]}else{t=t||e[0].getProjectVars();var a=e.map(function(e){var t=new o(e);return t});var n=new s(a);r=new l;r.setQuerySelectType();t.forEach(function(e){r.getProject().add(e)});r.setQueryPattern(n)}}return r}};module.exports=u},{"./Query":169,"./agg/AggCount":179,"./element/ElementGroup":184,"./element/ElementSubQuery":187,"./element/ElementUnion":189,"./expr/ExprAggregator":212,"./expr/ExprVar":220}],172:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.element=e;this.sourceVar=t;this.targetVar=r},getElement:function(){return this.element},getSourceVar:function(){return this.sourceVar},getTargetVar:function(){return this.targetVar},toString:function(){var e="("+[this.element,this.sourceVar,this.targetVar].join("; ")+")";return e}});module.exports=a},{"../ext/Class":2}],173:[function(e,module,t){var r=e("./Relation");var a=e("./Query");var n=e("./expr/ExprVar");var i=e("./expr/ExprAggregator");var s=e("./element/ElementSubQuery");var o=e("./agg/AggCountVarDistinct");var l=e("./Concept");var u=e("./ConceptUtils");var c={createQueryDistinctValueCount:function(e,t){var r=new a;var s=r.getProject();s.add(e.getSourceVar());s.add(t,new i(null,new o(new n(e.getTargetVar()))));r.setQueryPattern(e.getElement());r.getGroupBy().push(new n(e.getSourceVar()));return r},createQueryRawSize:function(e,t,r,a){var n=new l(e.getElement(),e.getSourceVar());var i=u.createQueryRawSize(n,t,r,a);return i},createQueryValueCount:function(e,t,r,s){var l=this.createRelationWithLimit(e,s);var u=new a;var c=u.getProject();c.add(e.getSourceVar());c.add(r,new i(null,new o(new n(e.getTargetVar()))));u.setQueryPattern(e.getElement());u.getGroupBy().push(new n(e.getSourceVar()))},createRelationDistinctValueCount:function(e,t){var a=this.createQueryDistinctValueCount(e,t);var n=new s(a);var i=new r(n,e.getSourceVar(),t);return i}};module.exports=c},{"./Concept":155,"./ConceptUtils":156,"./Query":169,"./Relation":172,"./agg/AggCountVarDistinct":180,"./element/ElementSubQuery":187,"./expr/ExprAggregator":212,"./expr/ExprVar":220}],174:[function(e,module,t){var r=e("../ext/Class");var a=r.create({classLabel:"jassa.sparql.SortCondition",initialize:function(e,t){this.expr=e;this.direction=t},getExpr:function(){return this.expr},getDirection:function(){return this.direction},toString:function(){var e;if(this.direction==="asc"){e="Asc("+this.expr+")"}else if(this.direction==="desc"){e="Desc("+this.expr+")"}else{e=""+this.expr}return e},copySubstitute:function(e){var t=this.expr.copySubstitute(e);var r=new a(t,this.direction);return r}});module.exports=a},{"../ext/Class":2}],175:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeFactory");var n=e("./VarUtils");var i=r.create({classLabel:"jassa.sparql.SparqlString",initialize:function(e,t){this.value=e;this.varsMentioned=t?t:[]},toString:function(){return this.value},getString:function(){return this.value},copySubstitute:function(e){var t=this.value;var r=[];var a="@@@@";var n=new RegExp(a,"g");this.varsMentioned.forEach(function(n){var i="\\?"+n.getName()+"([^\\w])?";var s=new RegExp(i,"g");var o=e(n);if(o){var l;if(o.isVariable()){l=a+o.getName();r.push(o)}else{l=o.toString()}t=t.replace(s,l+"$1")}else{r.push(n)}});t=t.replace(n,"?");return new i(t,r)},getVarsMentioned:function(){return this.varsMentioned}});i.create=function(e,t){var r;if(t!=null){r=t.map(function(e){return a.createVar(e)})}else{r=n.extractSparqlVars(e)}var s=new i(e,r);return s};module.exports=i},{"../ext/Class":2,"../rdf/NodeFactory":65,"./VarUtils":178}],176:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/collection/HashMap");var n=r.create({initialize:function(){this.vars=[];this.varToExpr=new a},contains:function(e){var t=this.vars.some(function(t){var r=t.equals(e);return r});return t},getVars:function(){return this.vars},getExpr:function(e){var t=this.varToExpr.get(e);return t},getExprMap:function(){return this.varToExpr},add:function(e,t){this.vars.push(e);if(t){this.varToExpr.put(e,t)}},addAll:function(e){this.vars.push.apply(this.vars,e)},entries:function(){var e=this;var t=this.vars.map(function(t){var r=e.varToExpr.get(t);return{v:t,expr:r}});return t},copySubstitute:function(e){var t=new n;var r=this.entries();for(var a=0;a<r.length;++a){var i=r[a];var s=e(i.v);var o=i.expr?i.expr.copySubstitute(e):null;t.add(s,o)}return t},toString:function(){var e=[];var t=this.entries();for(var r=0;r<t.length;++r){var a=t[r];var n=a.v;var i=a.expr;if(i){e.push("("+i+" As "+n+")")}else{e.push(n.toString())}}var s=e.join(" ");return s}});module.exports=n},{"../ext/Class":2,"../util/collection/HashMap":291}],177:[function(e,module,t){var r=e("../ext/Class");var a=e("../rdf/NodeFactory");var n=r.create({initialize:function(e){this.genSym=e},next:function(){var e=this.genSym.next();var t=a.createVar(e);return t}});module.exports=n},{"../ext/Class":2,"../rdf/NodeFactory":65}],178:[function(e,module,t){var r=e("./GenSym");var a=e("./GeneratorBlacklist");var n=e("./VarGen");var i=e("../rdf/NodeFactory");var s=e("../util/StringUtils");var o={g:i.createVar("g"),s:i.createVar("s"),p:i.createVar("p"),o:i.createVar("o"),_s_:i.createVar("_s_"),_p_:i.createVar("_p_"),_o_:i.createVar("_o_"),x:i.createVar("x"),y:i.createVar("y"),z:i.createVar("z"),a:i.createVar("a"),b:i.createVar("b"),c:i.createVar("c"),createVars:function(e){var t=e.map(function(e){return i.createVar(e)});return t},getVarName:function(e){return e.getName()},getVarNames:function(e){var t=e.map(function(e){return e.getName()});return t},createVarGen:function(e,t){if(!e){e="v"}var i=this.getVarNames(t);var s=r.create(e);var o=new a(s,i);var l=new n(o);return l},varPattern:/\?(\w+)/g,extractSparqlVars:function(e){var t=s.extractAllRegexMatches(this.varPattern,e,1);var r=[];for(var a=0;a<t.length;++a){var n=t[a];var o=i.createVar(n);r.push(o)}return r},freshVarGen:function(e,t){var i=o.getVarNames(t);var s=r.create(e);var l=new a(s,i);var u=new n(l);return u},freshVar:function(e,t){var r=this.freshVarGen(e,t);var a=r.next();return a},fnSubst:function(e){var t=function(t){var r=e.get(t);return r};return t}};module.exports=o},{"../rdf/NodeFactory":65,"../util/StringUtils":285,"./GenSym":163,"./GeneratorBlacklist":165,"./VarGen":177}],179:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(){},copySubstitute:function(e){return new a},getVarsMentioned:function(){return[]},toString:function(){return"Count(*)"}});module.exports=a},{"../../ext/Class":2}],180:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){var t=this.expr.copySubstitute(e);var r=new a(t);return r},getVarsMentioned:function(){return this.expr.getVarsMentioned()},toString:function(){var e="Count(Distinct "+this.expr+")";return e}});module.exports=a},{"../../ext/Class":2}],181:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.sparql.Element"});module.exports=a},{"../../ext/Class":2}],182:[function(e,module,t){var r=e("../../ext/Class");var a=e("lodash.union");var n=e("../../rdf/NodeUtils");var i=e("./Element");var s=r.create(i,{classLabel:"jassa.sparql.ElementBind",initialize:function(e,t){this.expr=t;this.variable=e},getArgs:function(){return[]},getExpr:function(){return this.expr},getVar:function(){return this.variable},getVarsMentioned:function(){return a(this.expr.getVarsMentioned(),this.variable)},copy:function(){return new s(this.variable,this.expr)},copySubstitute:function(e){return new s(n.getSubstitute(this.variable,e),this.expr.copySubstitute(e))},flatten:function(){return this},toString:function(){return"bind("+this.expr+" as "+this.variable+")"}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeUtils":66,"./Element":181,"lodash.union":445}],183:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprUtils");var n=e("./Element");var i=r.create(n,{classLabel:"jassa.sparql.ElementFilter",initialize:function(e){if(Array.isArray(e)){throw new Error("[WARN] Array argument for filter is deprecated")}this.expr=e},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw"Invalid argument"}var t=new i(this.expr);return t},copySubstitute:function(e){var t=this.expr.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},flatten:function(){return this},toString:function(){return"Filter("+this.expr+")"}});module.exports=i},{"../../ext/Class":2,"../ExprUtils":162,"./Element":181}],184:[function(e,module,t){var r=e("lodash.uniq");var a=e("../../ext/Class");var n=e("./Element");var i=e("./ElementFilter");var s=e("./ElementTriplesBlock");var o=e("../../rdf/TripleUtils");var l=e("./../ElementHelpers");var u=e("../PatternUtils");var c=a.create(n,{classLabel:"jassa.sparql.ElementGroup",initialize:function(e){this.elements=e?e:[];if(!Array.isArray(this.elements)){throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)}},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new c(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new c(t)},getVarsMentioned:function(){var e=u.getVarsMentioned(this.elements);return e},toString:function(){return l.joinElements(" . ",this.elements)},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t});var t=[];e.forEach(function(e){if(e instanceof c){t.push.apply(t,e.elements)}else{t.push(e)}});var a=[];var n=[];var l=[];t.forEach(function(e){if(e instanceof s){a.push.apply(a,e.getTriples())}else if(e instanceof i){n.push(e)}else{l.push(e)}});var u=[];if(a.length>0){var d=o.uniqTriples(a);u.push(new s(d))}u.push.apply(u,l);var p=r(n,false,function(e){return e.toString()});u.push.apply(u,p);var f=u.length===1?u[0]:new c(u);return f}});module.exports=c},{"../../ext/Class":2,"../../rdf/TripleUtils":69,"../PatternUtils":168,"./../ElementHelpers":157,"./Element":181,"./ElementFilter":183,"./ElementTriplesBlock":188,"lodash.uniq":468}],185:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Element");var n=r.create(a,{classLabel:"jassa.sparql.ElementOptional",initialize:function(e){this.optionalElement=e;if(!(e instanceof a)){throw new Error(this.classLabel+" only accepts an instance of Element as the argument")}},getArgs:function(){return[this.optionalElement]},copy:function(e){if(e.length!==1){throw"Invalid argument"}var t=new n(e[0]);return t},getVarsMentioned:function(){return this.optionalElement.getVarsMentioned()},copySubstitute:function(e){return new n(this.optionalElement.copySubstitute(e))},flatten:function(){var e=new n(this.optionalElement.flatten());return e},toString:function(){return"Optional {"+this.optionalElement+"}"}});module.exports=n},{"../../ext/Class":2,"./Element":181}],186:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Element");var n=e("../SparqlString");var i=r.create(a,{classLabel:"jassa.sparql.ElementString",initialize:function(e){this.sparqlString=e},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw new Error("Invalid argument")}return this},toString:function(){return this.sparqlString.getString()},copySubstitute:function(e){var t=this.sparqlString.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},flatten:function(){return this}});i.create=function(e,t){var r=n.create(e,t);var a=new i(r);return a};module.exports=i},{"../../ext/Class":2,"../SparqlString":175,"./Element":181}],187:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Element");var n=r.create(a,{classLabel:"jassa.sparql.ElementSubQuery",initialize:function(e){this.query=e},getQuery:function(){return this.query},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw"Invalid argument"}var t=new n(this.query);return t},toString:function(){return"{ "+this.query+" }"},copySubstitute:function(e){return new n(this.query.copySubstitute(e))},flatten:function(){return new n(this.query.flatten())},getVarsMentioned:function(){return this.query.getVarsMentioned()}});module.exports=n},{"../../ext/Class":2,"./Element":181}],188:[function(e,module,t){var r=e("lodash.union");var a=e("../../ext/Class");var n=e("../../rdf/TripleUtils");var i=e("./Element");var s=a.create(i,{classLabel:"jassa.sparql.ElementTriplesBlock",initialize:function(e){this.triples=e?e:[]},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw"Invalid argument"}var t=new s(this.triples);return t},getTriples:function(){return this.triples},addTriples:function(e){this.triples=this.triples.concat(e)},uniq:function(){this.triples=n.uniqTriples(this.triples)},copySubstitute:function(e){var t=this.triples.map(function(t){return t.copySubstitute(e)});return new s(t)},getVarsMentioned:function(){var e=[];this.triples.forEach(function(t){e=r(e,t.getVarsMentioned())});return e},flatten:function(){var e=n.uniqTriples(this.triples);var t=new s(e);return t},toString:function(){return this.triples.join(" . ")}});module.exports=s},{"../../ext/Class":2,"../../rdf/TripleUtils":69,"./Element":181,"lodash.union":445}],189:[function(e,module,t){var r=e("lodash.uniq");var a=e("../../ext/Class");var n=e("./Element");var i=e("./ElementFilter");var s=e("./ElementTriplesBlock");var o=e("../../rdf/TripleUtils");var l=e("./../ElementHelpers");var u=e("../PatternUtils");var c=a.create(n,{classLabel:"jassa.sparql.ElementUnion",initialize:function(e){this.elements=e?e:[];if(!Array.isArray(this.elements)){throw new Error(this.classLabel+" expects a single argument of type array, got ["+arguments.length+"] args; "+typeof e+": "+e)}},addElement:function(e){this.elements.push(e)},getArgs:function(){return this.elements},copy:function(e){var t=new c(e);return t},copySubstitute:function(e){var t=this.elements.map(function(t){return t.copySubstitute(e)});return new c(t)},getVarsMentioned:function(){var e=u.getVarsMentioned(this.elements);return e},toString:function(){var e="{"+this.elements.join(" } Union {")+"}";return e},flatten:function(){var e=this.elements.map(function(e){var t=e.flatten();return t});var t=new c(e);return t}});module.exports=c},{"../../ext/Class":2,"../../rdf/TripleUtils":69,"../PatternUtils":168,"./../ElementHelpers":157,"./Element":181,"./ElementFilter":183,"./ElementTriplesBlock":188,"lodash.uniq":468}],190:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({createElement:function(){throw"Not overridden"}});module.exports=a},{"../../ext/Class":2}],191:[function(e,module,t){var r=e("../../ext/Class");var a=e("../element/ElementGroup");var n=e("./ElementFactory");var i=r.create(n,{initialize:function(e,t,r){this.simplify=e;this.elementFactories=t;this.forceGroup=r},isSimplify:function(){return this.simplify},getElementFactories:function(){return this.elementFactories},isForceGroup:function(){return this.forceGroup},createElement:function(){var e=this.elementFactories.map(function(e){var t=e.createElement();return t});var t=e.filter(function(e){return e!=null});var r=new a(t);if(this.simplify){r=r.flatten()}if(!this.forceGroup){var n=r.getArgs();if(n.length===1){r=n[0]}}return r}});module.exports=i},{"../../ext/Class":2,"../element/ElementGroup":184,"./ElementFactory":190}],192:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ElementFactory");var n=r.create(a,{initialize:function(e){this.element=e},createElement:function(){return this.element}});module.exports=n},{"../../ext/Class":2,"./ElementFactory":190}],193:[function(e,module,t){var r=e("../../ext/Class");var a=e("../join/JoinType");var n=e("../ElementUtils");var i=e("../element/ElementOptional");var s=e("../element/ElementGroup");var o=e("./ElementFactory");var l=r.create(o,{initialize:function(e,t,r,n,i){this.elementFactoryA=e;this.elementFactoryB=t;this.joinVarsA=r;this.joinVarsB=n;this.joinType=i?i:a.INNER_JOIN},createElement:function(){var e=this.elementFactoryA.createElement();var t=this.elementFactoryB.createElement();var r=e.getVarsMentioned();var o=t.getVarsMentioned();var l=n.createJoinVarMap(o,r,this.joinVarsB,this.joinVarsA);e=n.createRenamedElement(e,l);if(this.joinType===a.LEFT_JOIN){t=new i(t)}var u=new s([e,t]);return u}});module.exports=l},{"../../ext/Class":2,"../ElementUtils":158,"../element/ElementGroup":184,"../element/ElementOptional":185,"../join/JoinType":230,"./ElementFactory":190}],194:[function(e,module,t){var r=e("../../ext/Class");var a=e("../join/JoinType");var n=e("../join/JoinBuilder");var i=e("../element/ElementGroup");var s=e("./ElementFactory");var o=r.create(s,{initialize:function(e,t,r){this.conceptFactoryA=e;this.conceptFactoryB=t;this.joinType=r||a.INNER_JOIN},createElement:function(){var e=this.conceptFactoryA.createConcept();var t=this.conceptFactoryB.createConcept();var r=e.getElement();var a=t.getElement();if(t.isSubjectConcept()){return r}var s=[e.getVar()];var o=[t.getVar()];var l=n.create(r);var u=l.joinAny(this.joinType,s,a,o);var c=u.getJoinBuilder();var d=c.getElements();var p=new i(d);return p}});module.exports=o},{"../../ext/Class":2,"../element/ElementGroup":184,"../join/JoinBuilder":224,"../join/JoinType":230,"./ElementFactory":190}],195:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new n(this.expr.copySubstitute(e))},getVarsMentioned:function(){var e=this.expr.getVarsMentioned();return e},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){return"bound("+this.expr+")"}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":161}],196:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.expr=e;this.node=t},copySubstitute:function(e){return new a(this.expr.copySubstitute(e),this.node.copySubstitute(e))}});module.exports=a},{"../../ext/Class":2}],197:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=r.create(a,{initialize:function($super,e,t){$super("=",e,t)},copySubstitute:function(e){return new n(this.left.copySubstitute(e),this.right.copySubstitute(e))},$copy:function(e,t){return new n(e,t)},toString:function(){return"("+this.left+" = "+this.right+")"},eval:function(){}});module.exports=n},{"../../ext/Class":2,"./ExprFunction2":216}],198:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionN");var n=r.create(a,{initialize:function($super,e,t){$super(e,t)},copy:function(e){var t=new n(this.name,e);return t}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionN":218}],199:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=e("../ExprHelpers");var i=r.create(a,{initialize:function($super,e,t){$super(">",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" > "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":161,"./ExprFunction2":216}],200:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e){this.expr=e},copySubstitute:function(e){return new n(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){return"lang("+this.expr+")"
},getVarsMentioned:function(){return this.expr.getVarsMentioned()}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":161}],201:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=e("../PatternUtils");var i=r.create({initialize:function(e,t){this.left=e;this.right=t},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},getArgs:function(){return[this.left,this.right]},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"langMatches("+this.left+", "+this.right+")"},getVarsMentioned:function(){var e=n.getVarsMentioned(this.getArgs());return e}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":161,"../PatternUtils":168}],202:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=e("../ExprHelpers");var i=r.create(a,{initialize:function($super,e,t){$super("<",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" < "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":161,"./ExprFunction2":216}],203:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=r.create({initialize:function(e,t){this.expr=e;this.pattern=t},copySubstitute:function(e){return new n(this.expr.copySubstitute(e),this.pattern)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(n,e);return t},toString:function(){var e=this.pattern.replace("'","\\'");return"("+this.expr+" Like '"+e+"')"}});module.exports=n},{"../../ext/Class":2,"../ExprHelpers":161}],204:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=e("./ExprFunction2");var i=r.create(n,{initialize:function($super,e,t){$super("&&",e,t)},copySubstitute:function(e){return new i(this.left.copySubstitute(e),this.right.copySubstitute(e))},copy:function(e){return a.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" && "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":161,"./ExprFunction2":216}],205:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ExprHelpers");var n=e("./ExprFunction1");var i=r.create(n,{initialize:function(e){this.expr=e},copySubstitute:function(e){return new i(this.expr.copySubstitute(e))},getArgs:function(){return[this.expr]},copy:function(e){var t=a.newUnaryExpr(i,e);return t},toString:function(){return"(!"+this.expr+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":161,"./ExprFunction1":215}],206:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction2");var n=e("../ExprHelpers");var i=r.create(a,{initialize:function($super,e,t){$super("||",e,t)},copySubstitute:function(e){var t=this.left.copySubstitute(e);var r=this.right.copySubstitute(e);var a=new i(t,r);return a},getArgs:function(){return[this.left,this.right]},copy:function(e){return n.newBinaryExpr(i,e)},toString:function(){return"("+this.left+" || "+this.right+")"}});module.exports=i},{"../../ext/Class":2,"../ExprHelpers":161,"./ExprFunction2":216}],207:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction0");var n=r.create(a,{initialize:function($super,e){$super("jassa.sparql.E_NotExists");this.element=e},getVarsMentioned:function(){return this.element.getVarsMentioned()},$copy:function(){return new n(this.element)},toString:function(){return"Not Exists ("+this.element+") "}});module.exports=n},{"../../ext/Class":2,"./ExprFunction0":214}],208:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=function(e,t){var r=t(e);if(!r){r=e}return r};var i=r.create(a,{initialize:function(e,t){this.lhsExpr=e;if(!Array.isArray(t)){throw new Error("nodes must be an array")}this.nodes=t},getVarsMentioned:function(){var e=this.lhsExpr.getVarsMentioned();return e},copySubstitute:function(e){var t=this.nodes.map(function(t){return n(t,e)});return new i(this.lhsExpr.copySubstitute(e),t)},toString:function(){if(!this.nodes||this.nodes.length===0){return"FALSE"}else{return"("+this.lhsExpr+" in ("+this.nodes.join(", ")+"))"}}});module.exports=i},{"../../ext/Class":2,"./Expr":211}],209:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=r.create(a,{initialize:function(e,t,r){this.expr=e;this.pattern=t;this.flags=r},copySubstitute:function(e){return new n(this.expr.copySubstitute(e),this.pattern,this.flags)},getVarsMentioned:function(){return this.expr.getVarsMentioned()},getArgs:function(){return[this.expr]},copy:function(e){if(e.length!==1){throw"Invalid argument"}var t=e[0];var r=new n(t,this.pattern,this.flags);return r},toString:function(){var e=this.pattern.replace('"','\\"');var t=this.flags?', "'+this.flags.replace('"','\\"')+'"':"";return"regex("+this.expr+', "'+e+'"'+t+")"}});module.exports=n},{"../../ext/Class":2,"./Expr":211}],210:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunction1");var n=r.create(a,{initialize:function($super,e){$super("str",e)},getVarsMentioned:function(){return this.subExpr.getVarsMentioned()},copy:function(e){return new n(e[0])},toString:function(){return"str("+this.subExpr+")"}});module.exports=n},{"../../ext/Class":2,"./ExprFunction1":215}],211:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({isFunction:function(){return false},isVar:function(){return false},isConstant:function(){return false},getFunction:function(){console.log("Override me");throw"Override me"},getExprVar:function(){console.log("Override me");throw"Override me"},getConstant:function(){console.log("Override me");throw"Override me"},copySubstitute:function(){console.log("Override me");throw"Override me"},copy:function(){console.log("Override me");throw"Override me"}});module.exports=a},{"../../ext/Class":2}],212:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeUtils");var n=e("../ExprHelpers");var i=r.create({initialize:function(e,t){this.v=e;this.agg=t},copySubstitute:function(e){var t=a.getSubstitute(this.v,e);var r=this.agg.copySubstitute(e);var n=new i(t,r);return n},getAggregator:function(){return this.agg},getArgs:function(){return[]},copy:function(e){var t=new i(this.v,this.agg);return t},toString:function(){return this.agg.toString()},getVarsMentioned:function(){var e=this.agg.getVarsMentioned();return e}});module.exports=i},{"../../ext/Class":2,"../../rdf/NodeUtils":66,"../ExprHelpers":161}],213:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=r.create(a,{getName:function(){console.log("Implement me");throw"Implement me"},isFunction:function(){return true},getFunction:function(){return this}});module.exports=n},{"../../ext/Class":2,"./Expr":211}],214:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e){$super(e)},getArgs:function(){return[]},copy:function(e){if(e&&e.length>0){throw"Invalid argument"}var t=this.$copy(e);return t}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":217}],215:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e,t){$super(e);this.subExpr=t},getArgs:function(){return[this.subExpr]},copy:function(e){if(e.length!==1){throw"Invalid argument"}var t=this.$copy(e);return t},getSubExpr:function(){return this.subExpr}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":217}],216:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e,t,r){$super(e);this.left=t;this.right=r},getArgs:function(){return[this.left,this.right]},copy:function(e){if(e.length!==2){throw"Invalid argument"}var t=this.$copy(e[0],e[1]);return t},getLeft:function(){return this.left},getRight:function(){return this.right}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":217}],217:[function(e,module,t){var r=e("../../ext/Class");var a=e("../PatternUtils");var n=e("./ExprFunction");var i=r.create(n,{initialize:function(e){this.name=e},copySubstitute:function(e){var t=this.getArgs();var r=t.map(function(t){var r=t.copySubstitute(e);return r});var a=this.copy(r);return a},getVarsMentioned:function(){var e=a.getVarsMentioned(this.getArgs());return e},toString:function(){var e=this.name+"("+this.getArgs().join(", ")+")";return e}});module.exports=i},{"../../ext/Class":2,"../PatternUtils":168,"./ExprFunction":213}],218:[function(e,module,t){var r=e("../../ext/Class");var a=e("./ExprFunctionBase");var n=r.create(a,{initialize:function($super,e,t){$super(e,t);this.args=t},getArgs:function(){return this.args}});module.exports=n},{"../../ext/Class":2,"./ExprFunctionBase":217}],219:[function(e,module,t){var r=e("../../ext/Class");var a=e("../SparqlString");var n=e("./Expr");var i=r.create(n,{classLabel:"jassa.sparql.ExprString",initialize:function(e){this.sparqlString=e},copySubstitute:function(e){var t=this.sparqlString.copySubstitute(e);return new i(t)},getVarsMentioned:function(){return this.sparqlString.getVarsMentioned()},getArgs:function(){return[]},copy:function(e){if(e.length!==0){throw"Invalid argument"}return this},toString:function(){return"(!"+this.expr+")"},create:function(e,t){var r=new i(a.create(e,t));return r}});module.exports=i},{"../../ext/Class":2,"../SparqlString":175,"./Expr":211}],220:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=e("./../NodeValueUtils");var i=r.create(a,{classLabel:"ExprVar",initialize:function(e){this.v=e},eval:function(e){var t=e.get(this.v);var r=n.makeNode(t);return r},copySubstitute:function(e){var t=e(this.v);var r;if(t==null){r=this}else if(t.isVariable()){r=new i(t)}else{r=n.makeNode(t)}return r},getArgs:function(){return[]},copy:function(e){if(e&&e.length>0){throw"Invalid argument"}var t=new i(this.v);return t},isVar:function(){return true},getExprVar:function(){return this},asVar:function(){return this.v},getVarsMentioned:function(){return[this.v]},toString:function(){return this.v.toString()}});module.exports=i},{"../../ext/Class":2,"./../NodeValueUtils":167,"./Expr":211}],221:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Expr");var n=e("../../vocab/xsd");var i=e("../../rdf/NodeFactory");var s=r.create(a,{initialize:function(e){this.node=e},isConstant:function(){return true},getConstant:function(){return this},getArgs:function(){return[]},getVarsMentioned:function(){return[]},asNode:function(){throw"makeNode is not overridden"},copySubstitute:function(){return this},toString:function(){var e=this.node;var t;if(e.isLiteral()){if(e.getLiteralDatatypeUri()===n.xstring.getUri()){t="'"+e.getLiteralLexicalForm()+"'"}else if(e.dataType===n.xdouble.value){return parseFloat(this.node.value)}}else{t=e.toString()}return t}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":65,"../../vocab/xsd":306,"./Expr":211}],222:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../vocab/xsd");var n=e("./NodeValue");var i=r.create(n,{initialize:function(e){this.node=e},asNode:function(){return this.node},toString:function(){var e=this.node;var t=null;if(e.isLiteral()){if(e.getLiteralDatatypeUri()===a.xstring.getUri()){t='"'+e.getLiteralLexicalForm()+'"'}}if(t==null){t=e.toString()}return t}});module.exports=i},{"../../ext/Class":2,"../../vocab/xsd":306,"./NodeValue":221}],223:[function(e,module,t){"use strict";var r={BestLabelConfig:e("./BestLabelConfig"),Binding:e("./Binding"),Concept:e("./Concept"),ConceptUtils:e("./ConceptUtils"),ElementHelpers:e("./ElementHelpers"),ElementUtils:e("./ElementUtils"),ExprEvaluator:e("./ExprEvaluator"),ExprEvaluatorImpl:e("./ExprEvaluatorImpl"),ExprHelpers:e("./ExprHelpers"),ExprUtils:e("./ExprUtils"),GenSym:e("./GenSym"),Generator:e("./Generator"),GeneratorBlacklist:e("./GeneratorBlacklist"),LabelUtils:e("./LabelUtils"),NodeValueUtils:e("./NodeValueUtils"),PatternUtils:e("./PatternUtils"),Query:e("./Query"),QueryType:e("./QueryType"),QueryUtils:e("./QueryUtils"),Relation:e("./Relation"),RelationUtils:e("./RelationUtils"),SortCondition:e("./SortCondition"),SparqlString:e("./SparqlString"),VarExprList:e("./VarExprList"),VarGen:e("./VarGen"),VarUtils:e("./VarUtils"),AggCount:e("./agg/AggCount"),AggCountVarDistinct:e("./agg/AggCountVarDistinct"),Element:e("./element/Element"),ElementBind:e("./element/ElementBind"),ElementFilter:e("./element/ElementFilter"),ElementGroup:e("./element/ElementGroup"),ElementOptional:e("./element/ElementOptional"),ElementString:e("./element/ElementString"),ElementSubQuery:e("./element/ElementSubQuery"),ElementTriplesBlock:e("./element/ElementTriplesBlock"),ElementUnion:e("./element/ElementUnion"),ElementFactory:e("./element_factory/ElementFactory"),ElementFactoryCombine:e("./element_factory/ElementFactoryCombine"),ElementFactoryConst:e("./element_factory/ElementFactoryConst"),ElementFactoryJoin:e("./element_factory/ElementFactoryJoin"),ElementFactoryJoinConcept:e("./element_factory/ElementFactoryJoinConcept"),E_Bound:e("./expr/E_Bound"),E_Cast:e("./expr/E_Cast"),E_Equals:e("./expr/E_Equals"),E_Function:e("./expr/E_Function"),E_GreaterThan:e("./expr/E_GreaterThan"),E_Lang:e("./expr/E_Lang"),E_LangMatches:e("./expr/E_LangMatches"),E_LessThan:e("./expr/E_LessThan"),E_Like:e("./expr/E_Like"),E_LogicalAnd:e("./expr/E_LogicalAnd"),E_LogicalNot:e("./expr/E_LogicalNot"),E_LogicalOr:e("./expr/E_LogicalOr"),E_NotExists:e("./expr/E_NotExists"),E_OneOf:e("./expr/E_OneOf"),E_Regex:e("./expr/E_Regex"),E_Str:e("./expr/E_Str"),Expr:e("./expr/Expr"),ExprAggregator:e("./expr/ExprAggregator"),ExprFunction:e("./expr/ExprFunction"),ExprFunction0:e("./expr/ExprFunction0"),ExprFunction1:e("./expr/ExprFunction1"),ExprFunction2:e("./expr/ExprFunction2"),ExprFunctionBase:e("./expr/ExprFunctionBase"),ExprFunctionN:e("./expr/ExprFunctionN"),ExprString:e("./expr/ExprString"),ExprVar:e("./expr/ExprVar"),NodeValue:e("./expr/NodeValue"),NodeValueNode:e("./expr/NodeValueNode"),JoinBuilder:e("./join/JoinBuilder"),JoinBuilderUtils:e("./join/JoinBuilderUtils"),JoinInfo:e("./join/JoinInfo"),JoinNode:e("./join/JoinNode"),JoinNodeInfo:e("./join/JoinNodeInfo"),JoinTargetState:e("./join/JoinTargetState"),JoinType:e("./join/JoinType"),KeywordSearchUtils:e("./search/KeywordSearchUtils")};Object.freeze(r);module.exports=r},{"./BestLabelConfig":153,"./Binding":154,"./Concept":155,"./ConceptUtils":156,"./ElementHelpers":157,"./ElementUtils":158,"./ExprEvaluator":159,"./ExprEvaluatorImpl":160,"./ExprHelpers":161,"./ExprUtils":162,"./GenSym":163,"./Generator":164,"./GeneratorBlacklist":165,"./LabelUtils":166,"./NodeValueUtils":167,"./PatternUtils":168,"./Query":169,"./QueryType":170,"./QueryUtils":171,"./Relation":172,"./RelationUtils":173,"./SortCondition":174,"./SparqlString":175,"./VarExprList":176,"./VarGen":177,"./VarUtils":178,"./agg/AggCount":179,"./agg/AggCountVarDistinct":180,"./element/Element":181,"./element/ElementBind":182,"./element/ElementFilter":183,"./element/ElementGroup":184,"./element/ElementOptional":185,"./element/ElementString":186,"./element/ElementSubQuery":187,"./element/ElementTriplesBlock":188,"./element/ElementUnion":189,"./element_factory/ElementFactory":190,"./element_factory/ElementFactoryCombine":191,"./element_factory/ElementFactoryConst":192,"./element_factory/ElementFactoryJoin":193,"./element_factory/ElementFactoryJoinConcept":194,"./expr/E_Bound":195,"./expr/E_Cast":196,"./expr/E_Equals":197,"./expr/E_Function":198,"./expr/E_GreaterThan":199,"./expr/E_Lang":200,"./expr/E_LangMatches":201,"./expr/E_LessThan":202,"./expr/E_Like":203,"./expr/E_LogicalAnd":204,"./expr/E_LogicalNot":205,"./expr/E_LogicalOr":206,"./expr/E_NotExists":207,"./expr/E_OneOf":208,"./expr/E_Regex":209,"./expr/E_Str":210,"./expr/Expr":211,"./expr/ExprAggregator":212,"./expr/ExprFunction":213,"./expr/ExprFunction0":214,"./expr/ExprFunction1":215,"./expr/ExprFunction2":216,"./expr/ExprFunctionBase":217,"./expr/ExprFunctionN":218,"./expr/ExprString":219,"./expr/ExprVar":220,"./expr/NodeValue":221,"./expr/NodeValueNode":222,"./join/JoinBuilder":224,"./join/JoinBuilderUtils":225,"./join/JoinInfo":226,"./join/JoinNode":227,"./join/JoinNodeInfo":228,"./join/JoinTargetState":229,"./join/JoinType":230,"./search/KeywordSearchUtils":231}],224:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashBidiMap");var n=e("../GenSym");var i=e("../GeneratorBlacklist");var s=e("../ElementUtils");var o=e("../element/ElementGroup");var l=e("../element/ElementOptional");var u=e("../VarUtils");var c=e("./JoinNode");var d=e("./JoinTargetState");var p=e("./JoinInfo");var f=e("./JoinType");var v=r.create({initialize:function(e,t,r,s){if(e==null){console.log("[Error] Root element must not be null");throw"Bailing out"}this.usedVarNames=[];this.usedVars=[];this.aliasGenerator=new n("a");this.varNameGenerator=new i(new n("v"),this.usedVarNames);this.aliasToState={};this.rootAlias=r?r:this.aliasGenerator.next();if(s==null){s=[]}var o=this.createTargetState(this.rootAlias,new a,s,e,t,s);this.aliasToState[this.rootAlias]=o;this.rootNode=o.getJoinNode()},getRootNode:function(){return this.rootNode},getJoinNode:function(e){var t=this.aliasToState[e];var r=t?t.getJoinNode():null;return r},getState:function(e){return this.aliasToState[e]},getElement:function(e){var t=this.aliasToState[e];var r=t?t.getElement():null;return r},addVars:function(e){var t=this;e.forEach(function(e){var r=e.getName();var a=t.usedVarNames.indexOf(r)!==-1;if(!a){t.usedVarNames.push(r);t.usedVars.push(e)}})},createTargetState:function(e,t,r,a,n,i){var o=r.map(function(e){var r=t.get(e);return r});var l=s.createJoinVarMap(this.usedVars,n,o,i,this.varNameGenerator);var u=null;if(a!=null){u=s.createRenamedElement(a,l)}var p=l.getInverse().keys();this.addVars(p);var f=new c(this,e,i);var v=new d(l,f,u,p);return v},addJoin:function(e,t,r,a,n,i){var s=this.aliasToState[t];var o=s.getVarMap();if(!i){i=this.aliasGenerator.next()}var l=a.getVarsMentioned();var u=this.createTargetState(i,o,r,a,l,n);var c=new p(i,e);s.getJoinInfos().push(c);this.aliasToState[i]=u;var d=u.getJoinNode();return d},getElementsRec:function(e){var t=[];var r=e.getElement();if(r!=null){t.push(r)}var a=e.getJoinNodeInfos();var n=this;a.forEach(function(e){var r=e.getJoinNode();var a=n.getElementsRec(r);var i=new o(a);var s=e.getJoinType();switch(s){case f.LEFT_JOIN:i=new l(i);break;case f.INNER_JOIN:break;default:console.log("[ERROR] Unsupported join type: "+s);throw"Bailing out"}t.push(i)});return t},getElements:function(){var e=this.getRootNode();var t=this.getElementsRec(e);return t},getAliasToVarMap:function(){var e={};this.aliasToState.forEach(function(t,r){e[r]=t.varMap});return e},create:function(e,t,r){var a=e.getVarsMentioned();var n=new v(e,a,t,r);var i=n.getRootNode();return i},createWithEmptyRoot:function(e,t){var r=u.varNamesToNodes(e);var a=new v(null,r,t);var n=a.getRootNode();return n}});module.exports=v},{"../../ext/Class":2,"../../util/collection/HashBidiMap":290,"../ElementUtils":158,"../GenSym":163,"../GeneratorBlacklist":165,"../VarUtils":178,"../element/ElementGroup":184,"../element/ElementOptional":185,"./JoinInfo":226,"./JoinNode":227,"./JoinTargetState":229,"./JoinType":230}],225:[function(e,module,t){var r={getChildren:function(e){return e.getJoinNodes()}};module.exports=r},{}],226:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.alias=e;this.joinType=t},getAlias:function(){return this.alias},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.alias}});module.exports=a},{"../../ext/Class":2}],227:[function(e,module,t){var r=e("../../ext/Class");var a=e("./JoinNodeInfo");var n=e("./JoinType");var i=r.create({initialize:function(e,t,r){this.joinBuilder=e;this.alias=t;this.targetJoinVars=r},getJoinBuilder:function(){return this.joinBuilder},getJoinVars:function(){return this.targetJoinVars},getElement:function(){return this.joinBuilder.getElement(this.alias)},getVarMap:function(){return this.joinBuilder.getVarMap(this.alias)},getJoinNodeInfos:function(){var e=this.joinBuilder.getState(this.alias);var t=this;var r=e.getJoinInfos().map(function(e){var r=e.getAlias();var n=t.joinBuilder.getJoinNode(r);var i=new a(n,e.getJoinType());return i});return r},joinAny:function(e,t,r,a,n){var i=this.joinBuilder.addJoin(e,this.alias,t,r,a,n);return i},join:function(e,t,r,a){var i=this.joinAny(n.INNER_JOIN,e,t,r,a);return i},leftJoin:function(e,t,r,a){var i=this.joinAny(n.LEFT_JOIN,e,t,r,a);return i},joinTree:function(){},leftJoinTree:function(){},joinTreeAny:function(){}});module.exports=i},{"../../ext/Class":2,"./JoinNodeInfo":228,"./JoinType":230}],228:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.joinNode=e;this.joinType=t},getJoinNode:function(){return this.joinNode},getJoinType:function(){return this.joinType},toString:function(){return this.joinType+" "+this.joinNode}});module.exports=a},{"../../ext/Class":2}],229:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t,r,a){this.varMap=e;this.joinNode=t;this.element=r;this.elementVars=a;this.joinInfos=[]},getVarMap:function(){return this.varMap},getJoinNode:function(){return this.joinNode},getElement:function(){return this.element},getElementVars:function(){return this.elementVars},getJoinInfos:function(){return this.joinInfos}});module.exports=a},{"../../ext/Class":2}],230:[function(e,module,t){var r={INNER_JOIN:"inner_join",LEFT_JOIN:"left_join"};module.exports=r},{}],231:[function(e,module,t){var r=e("../expr/ExprVar");var a=e("../expr/E_LangMatches");var n=e("../expr/E_LogicalOr");var i=e("../expr/E_Lang");var s=e("../expr/E_Bound");var o=e("../expr/E_Regex");var l=e("../expr/E_Str");var u=e("../expr/E_Function");var c=e("../Concept");var d=e("../element/ElementGroup");var p=e("../element/ElementOptional");var f=e("../element/ElementFilter");var v=e("../NodeValueUtils");var h=e("../LabelUtils");var g={createConceptRegex:function(e,t,r){var a=r?this.createConceptRegexIncludeSubject(e,t):this.createConceptRegexLabelOnly(e,t);return a},createConceptRegexLabelOnly:function(e,t){var a;if(t){var n=new d([e.getElement(),new f(new o(new l(new r(e.getTargetVar())),t,"i"))]);a=new c(n,e.getSourceVar())}else{a=null}return a},createConceptRegexIncludeSubject:function(e,t){var a;if(t){var i=e.getElement();var u=e.getSourceVar();var v=e.getTargetVar();var h=new r(u);var g=new r(v);var m=new o(new l(g),t,"i");var x=new n(new o(new l(h),t,"i"),new s(g));var _=new d([new p(new d([i,new f(m)])),new f(x)]);a=new c(_,u)}else{a=null}return a},createConceptBifContains:function(e,t){var a;if(t){var n=e.getElement();var i=e.getTargetVar();var s=new r(i);var o=v.makeString(t);var l=new d([e.getElement(),new f(new u("<bif:contains>",[s,o]))]);var p=e.getSourceVar();a=new c(l,p)}else{a=null}return a}};module.exports=g},{"../Concept":155,"../LabelUtils":166,"../NodeValueUtils":167,"../element/ElementFilter":183,"../element/ElementGroup":184,"../element/ElementOptional":185,"../expr/E_Bound":195,"../expr/E_Function":198,"../expr/E_Lang":200,"../expr/E_LangMatches":201,"../expr/E_LogicalOr":206,"../expr/E_Regex":209,"../expr/E_Str":210,"../expr/ExprVar":220}],232:[function(e,module,t){var r=e("./acc/AccRef");var a=e("./acc/AccTransform");var n={unwrapAccTransform:function(e){var t=e;while(t instanceof a){t=t.getSubAcc()}return t},getRefs:function(e,t){t=t||[];if(Array.isArray(e)){e.forEach(function(e){n.getRefs(e,t)})}else if(e instanceof r){t.push(e)}else{var a=e.getSubAccs();n.getRefs(a,t)}return t}};module.exports=n},{"./acc/AccRef":254,"./acc/AccTransform":255}],233:[function(e,module,t){var r=e("./agg/AggRef");var a=e("./agg/AggTransform");var n={unwrapAggTransform:function(e){var t=e;while(t instanceof a){t=t.getSubAgg()}return t},getRefs:function(e,t){t=t||[];if(e instanceof r){t.push(e)}else{var a=e.getSubAggs();a.forEach(function(e){n.getRefs(e,t)})}return t}};module.exports=n},{"./agg/AggRef":263,"./agg/AggTransform":264}],234:[function(e,module,t){var r=e("../ext/Class");var a=e("../util/ObjectUtils");var n=r.create({classLabel:"jassa.sponate.AttrPath",initialize:function(e){this.steps=e?e:[]},getSteps:function(){return this.steps},toString:function(){return this.steps.join(".")},slice:function(e,t){var r=this.steps.slice(e,t);return r},first:function(){return this.steps[0]},at:function(e){return this.steps[e]},isEmpty:function(){return this.steps.length===0},size:function(){return this.steps.length},concat:function(e){var t=this.steps.concat(e.getSteps());var r=new n(t);return r},find:function(e){var t=e;var r=this.steps;for(var n=0;n<r.length;++n){var i=r[n];if(!a.isObject(t)){console.log("[ERROR] Cannot access attribute of non-object",this.steps,e,t);throw"Bailing out"}t=t[i]}return t}});n.parse=function(e){var t=e.split(".");return new n(t)};module.exports=n},{"../ext/Class":2,"../util/ObjectUtils":280}],235:[function(e,module,t){var r=e("../ext/Class");var a=e("./SponateUtils");var n=e("./MappedConceptSource");var i=e("../util/ObjectUtils");var s=r.create({initialize:function(e){this.prefixMapping=e;this.nameToSource={};this.nameToMappedConcept={}},getSource:function(e){return this.nameToSource[e]},addTemplate:function(e){var t=e.name;if(!t){throw new Error("Sponate spec must have a name")}var r=a.parseSpec(e,this.prefixMapping);this.nameToMappedConcept[t]=r},add:function(e){var t=e.name;if(!t){throw new Error("Sponate spec must have a name")}var r=e.service;if(!r){throw new Error("No service provided for ",e)}var s;if(i.isString(e.template)){var o=e.template;s=this.nameToMappedConcept[o];if(!s){throw new Error("No template with name "+o+" registered.")}}else{s=a.parseSpec(e,this.prefixMapping)}var l=new n(s,r);this.nameToSource[t]=l}});module.exports=s},{"../ext/Class":2,"../util/ObjectUtils":280,"./MappedConceptSource":240,"./SponateUtils":246}],236:[function(e,module,t){var r=e("../ext/Class");var a=e("./ListServiceUtils");var n=e("./AccUtils");var i=e("../util/collection/HashMap");var s=e("../util/collection/HashSet");var o=e("./LookupServiceUtils");var a=e("./ListServiceUtils");var l=e("../util/ObjectUtils");var u=e("lodash.foreach");var c=e("../util/shared");var d=c.Promise;var p=r.create({initialize:function(){this.mappingToKeyToAcc={}}});var f=function(e,t,r){var a=e[t];if(!a){a=new i;e[t]=a}a.putAll(r)};var v=function(e,t){t.forEach(function(t){var r=t.getRefSpec();var a=r.getTargetSourceName();var n=t.getRefValue();var i;if(!(a in e)){i=new s;e[a]=i}else{i=e[a]}i.add(n)})};var h=function(e,t){var r=[];t.forEach(function(t){var a=t.getRefSpec();var n=a.getTargetSourceName();var i=t.getRefValue();var s=e[n];var o=s.containsKey(i);if(!o){r.push(t)}});return r};var g=r.create({initialize:function(e){this.sparqlService=e},execList:function(){},execMap:function(){},createLookupService:function(e,t){var r=e.getSource(t);if(!r){throw new Error("No source mapping with name "+t+" found")}var a=r.getSparqlService();var n=r.getMappedConcept();var i=o.createLookupServiceMappedConceptAcc(a,n);return i},exec:function(e,t){var r=t.getSourceName();var s=e.getSource(r);if(!s){throw new Error("No source mapping with name "+r+" found")}var o=t.getLimit();var c=t.getOffset();var p=t.getFilterConcept();var f=s.getSparqlService();var h=s.getMappedConcept();var g=a.createListServiceAcc(f,h,t.isLeftJoin());var m={};var x=this;var _=g.fetchItems(p,o,c);var b=d.resolve(_);var y=b.then(function(t){var a=t.map(function(e){return e.key});var s=new i;var o={};t.forEach(function(e){var t=e.val;var r=t.getState();s.putAll(r);var a=n.getRefs(t);v(o,a)});m[r]=s;var l=x.resolveRefs(e,o,m);return[a,l]}).spread(function(e,t){var a={};u(m,function(e,t){var r=new i;a[t]=r;e.entries().forEach(function(e){var t=e.key;r.put(t,{})})});var s=[];u(m,function(e){var t=e.values();var r=n.getRefs(t);s.push.apply(s,r)});s.forEach(function(e){var t=e.getRefSpec();var r=t.getTargetSourceName();var n=e.getRefValue();var i=a[r];if(!i){throw new Error("Something went wrong")}var s=i.get(n);e.setValue(s)});u(m,function(e,t){e.entries().forEach(function(e){var r=e.key;var n=e.val;var i=n.getValue();var s=a[t];var o=s.get(r);l.extend(o,i)})});var o=e.map(function(e){var t=a[r];var n=t.get(e);var i={key:e,val:n};return i});return o});return y},resolveRefs:d.method(function(e,t,r){var a=this;var i=Object.keys(t);var s=i.map(function(i){var s=t[i];var o=a.createLookupService(e,i);var l=s.entries();var u=o.lookup(l).then(function(t){var s=t.values();f(r,i,t);var o=n.getRefs(s);var l=h(r,o);var u={};v(u,l);return a.resolveRefs(e,u,r)});return u});return d.all(s)})});module.exports=g},{"../ext/Class":2,"../util/ObjectUtils":280,"../util/collection/HashMap":291,"../util/collection/HashSet":292,"../util/shared":300,"./AccUtils":232,"./ListServiceUtils":237,"./LookupServiceUtils":238,"lodash.foreach":382}],237:[function(e,module,t){var r=e("../sparql/Concept");var a=e("../sparql/ConceptUtils");var n=e("./ServiceUtils");var i=e("../service/list_service/ListServiceSparqlQuery");var s=e("../service/list_service/ListServiceTransformItem");var o={createListServiceAcc:function(e,t,r){r=!!r;var n=t.getConcept();var o=a.createQueryList(n);var l=t.getAgg();o.setQueryResultStar(true);var u=new i(e,o,n.getVar(),r);var c=new s(u,function(e){var t=e.key;var r=e.val.getBindings();var a=l.createAcc();r.forEach(function(e){a.accumulate(e)});var n={key:t,val:a};return n});return c},createListServiceMappedConcept:function(e,t,r){var a=this.createListServiceAcc(e,t,r);var n=new s(a,function(e){var t=e.map(function(e){var t=e.val.getValue();return t});return t});return n}};module.exports=o},{"../service/list_service/ListServiceSparqlQuery":110,"../service/list_service/ListServiceTransformItem":112,"../sparql/Concept":155,"../sparql/ConceptUtils":156,"./ServiceUtils":245}],238:[function(e,module,t){var r=e("../sparql/ConceptUtils");var a=e("../service/lookup_service/LookupServiceSparqlQuery");var n=e("../service/lookup_service/LookupServiceTransform");var i=e("./AccUtils");var s={createTransformAccResultSetPart:function(e){var t=function(t){var r=e.createAcc();var a=t.getBindings();a.forEach(function(e){r.accumulate(e)});return r};return t},createLookupServiceMappedConcept:function(e,t){var r=this.createLookupServiceMappedConceptAcc(e,t);var a=new n(r,function(e){var t=e.getValue();return t});return a},createLookupServiceMappedConceptAcc:function(e,t){var i=t.getConcept();var s=r.createQueryList(i);var o=i.getVar();s.setQueryResultStar(true);var l=t.getAgg();var u=l.getSubAgg();var c=new a(e,s,o);var d=this.createTransformAccResultSetPart(u);var p=new n(c,d);return p}};module.exports=s},{"../service/lookup_service/LookupServiceSparqlQuery":122,"../service/lookup_service/LookupServiceTransform":124,"../sparql/ConceptUtils":156,"./AccUtils":232}],239:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.concept=e;this.agg=t},getConcept:function(){return this.concept},getAgg:function(){return this.agg}});module.exports=a},{"../ext/Class":2}],240:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t){this.mappedConcept=e;this.sparqlService=t},getMappedConcept:function(){return this.mappedConcept},getSparqlService:function(){return this.sparqlService}});module.exports=a},{"../ext/Class":2}],241:[function(e,module,t){var r=e("../rdf/NodeUtils");var a=e("../sparql/LabelUtils");var n=e("../sparql/VarUtils");var i=e("../sparql/expr/ExprVar");var s=e("./agg/AggArray");var o=e("./agg/AggLiteral");var l=e("./agg/AggMap");var u=e("./agg/AggObject");var c=e("./agg/AggBestLabel");var d=e("./agg/AggTransform");var p=e("./binding_mapper/BindingMapperExpr");var f=e("./binding_mapper/BindingMapperTransform");var v=e("../sparql/Concept");var h=e("./MappedConcept");var g={createMappedConceptBestLabel:function(e){var t=a.createRelationPrefLabels(e);var n=t.getSourceVar();var l=t.getTargetVar();
var f=new u({id:new o(new p(new i(n))),displayLabel:new d(new c(e),r.getValue),hiddenLabels:new s(new d(new o(new p(new i(l))),r.getValue))});var g=new v(t.getElement(),t.getSourceVar());var m=new h(g,f);return m}};module.exports=g},{"../rdf/NodeUtils":66,"../sparql/Concept":155,"../sparql/LabelUtils":166,"../sparql/VarUtils":178,"../sparql/expr/ExprVar":220,"./MappedConcept":239,"./agg/AggArray":257,"./agg/AggBestLabel":258,"./agg/AggLiteral":260,"./agg/AggMap":261,"./agg/AggObject":262,"./agg/AggTransform":264,"./binding_mapper/BindingMapperExpr":266,"./binding_mapper/BindingMapperTransform":268}],242:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r){this.mapName=e;this.tableRef=t},getMapName:function(){return this.mapName},getTableRef:function(){return this.tableRef},getAttrPath:function(){return this.attrPath},toString:function(){var e=this.patternRef+"/"+this.tableRef+"@"+this.attrPath;return e}});module.exports=a},{"../ext/Class":2}],243:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e,t,r,a,n,i,s){this.sourceName=e;this.criteria=t;this.limit=r;this.offset=a;this.filterConcept=n;this._isLeftJoin=i;this.nodes=s},shallowClone:function(){var e=new a(this.sourceName,this.criteria,this.limit,this.offset,this.filterConcept,this._isLeftJoin,this.nodes);return e},getSourceName:function(){return this.sourceName},setSourceName:function(e){this.sourceName=e},getCriteria:function(){return this.criteria},setCriteria:function(e){this.criteria=e},getLimit:function(){return this.limit},setLimit:function(e){this.limit=e},getOffset:function(){return this.offset},setOffset:function(e){this.offset=e},getFilterConcept:function(){return this.filterConcept},setFilterConcept:function(e){this.filterConcept=e},isLeftJoin:function(){return this._isLeftJoin},setLeftJoin:function(e){this._isLeftJoin=e},getNodes:function(){return this.nodes},setNodes:function(e){this.nodes=e}});module.exports=a},{"../ext/Class":2}],244:[function(e,module,t){var r=e("../ext/Class");var a=r.create({initialize:function(e){this.targetSourceName=e},getTargetSourceName:function(){return this.targetSourceName}});module.exports=a},{"../ext/Class":2}],245:[function(e,module,t){var r={processResultSet:function(e,t){while(e.hasNext()){var r=e.next();t.accumulate(r)}var a=t.getValue();return a},processBindings:function(e,t){e.forEach(function(e){t.accumulate(e)});var r=t.getValue();return r},execAgg:function(e,t,r){var a=r.createAcc();var n=this.execAcc(e,t,a);return n},execAcc:function(e,t,a){var n=e.createQueryExecution(t);var i=n.execSelect().then(function(e){var t=r.processResultSet(e,a);return t});return i}};module.exports=r},{}],246:[function(e,module,t){var r=e("../util/ObjectUtils");var a=e("../util/PrefixUtils");var n=e("../sparql/element/Element");var i=e("../sparql/element/ElementString");var s=e("./TemplateParser");var o=e("./ListServiceUtils");var l=e("./agg/AggMap");var u=e("./MappedConcept");var c=e("../sparql/expr/ExprVar");var d=e("../sparql/Concept");var p=e("./AggUtils");var f={parseSpec:function(e,t,o){o=o||new s;var f=e.template;var v=e.from;var h;if(r.isString(v)){var g=v;if(t!=null){var m=t.getNsPrefixMap();g=a.expandPrefixes(m,g)}h=new i.create(g)}else if(v instanceof n){h=v}else if(r.isFunction(v)){throw new Error("ElementFactories / functions in the FROM part not supported anymore")}else{throw new Error("Unknown argument type for FROM attribute",v)}var x=o.parseAgg(f);var _=p.unwrapAggTransform(x);var b;if(_ instanceof l){var y=_.getKeyBindingMapper();b=y.getExpr()}else{throw new Error("Could not obtain ID attribute from aggregator")}var S;if(b instanceof c){S=b.asVar()}else{throw new Error("Variable required for ID attribute, got an expression instead: "+b)}var C=new d(h,S);var E=new u(C,_);return E}};module.exports=f},{"../sparql/Concept":155,"../sparql/element/Element":181,"../sparql/element/ElementString":186,"../sparql/expr/ExprVar":220,"../util/ObjectUtils":280,"../util/PrefixUtils":281,"./AggUtils":233,"./ListServiceUtils":237,"./MappedConcept":239,"./TemplateParser":247,"./agg/AggMap":261}],247:[function(e,module,t){var r=e("lodash.uniq");var a=e("../ext/Class");var n=e("../util/ObjectUtils");var i=e("../rdf/NodeUtils");var s=e("../rdf/node/Node");var o=e("../rdf/NodeFactory");var l=e("../sparql/expr/Expr");var u=e("../sparql/expr/ExprVar");var c=e("../sparql/expr/NodeValue");var d=e("./agg/AggLiteral");var p=e("./agg/AggObject");var f=e("./agg/AggMap");var v=e("./agg/AggMap");var h=e("./agg/AggRef");var g=e("./agg/AggArray");var m=e("./agg/AggTransform");var x=e("./AggUtils");var _=e("./RefSpec");var b=e("./binding_mapper/BindingMapperExpr");var y=a.create({initialize:function(){this.attrs={id:"id",ref:"$ref"}},parseArray:function(e){if(e.length!==1){throw new Error("[ERROR] Arrays must have exactly one element that is either a string or an object",e)}var t=e[0];var r;if(n.isString(t)){r=this.parseArrayLiteral(t)}else if(Array.isArray(t)){if(t.length===1){var a=t[0];r=this.parseArrayConfig(a);var i=Object.keys(a);var s=i.length===2&&i.indexOf("id")>=0&&i.indexOf("$value")>=0;r=new m(r,function(e){var t={};e.forEach(function(e){t[e.id]=s?e.$value:e});return t})}else{throw new Error("Not implemented")}}else if(n.isObject(t)){r=this.parseArrayConfig(t)}else{throw new Error("Bailing out")}return r},parseArrayConfig:function(e){var t=this.attrs.id;var r=this.attrs.ref;var a=e[t]!=null;var n=e[r]!=null;if(a&&n){throw new Error("[ERROR] id and ref are mutually exclusive")}var i;if(a){var s=this.parseObject(e);var o=s.getAttrToAgg();var l=o[t];l=x.unwrapAggTransform(l);var u=l.getBindingMapper();i=new f(u,s);i=new m(i,function(e){return e.values()})}else if(n){i=this.parseArrayRef(e)}else{throw new Error("[ERROR] Not implemented")}return i},parseArrayRef:function(e){var t=new h(e);return t},parseArrayLiteral:function(e){var t=this.parseExprString(e);var a=new m(new g(new d(new b(t))),function(e){return r(e,function(e){return""+e})});return a},parseLiteral:function(e){var t=e.split("|").map(function(e){return e.trim()});var r=t[0];var a=this.parseExprString(r);var n=new d(new b(a));var s=t[1];if(s!=="node"){n=new m(n,i.getValue)}return n},parseObject:function(e){var t=e[this.attrs.ref];var r=t!=null?this.parseRef(t):this.parseObjectData(e);return r},parseRef:function(e){var t=e.target;if(!t){throw new Error("Missing target attribute in ref: ",e)}var r=new _(t);var a=e.on;var n=this.parseExprString(a);var i=new b(n);var s=new h(i,r);return s},parseObjectData:function(e){var t={};var r=this;var a=Object.keys(e);a.forEach(function(a){var n=e[a];var i=r.parseAgg(n);if(i==null){throw new Error("Failed to create aggregator for attribute ["+a+"] in "+JSON.stringify(e))}t[a]=i});var n=new p(t);return n},parseAgg:function(e){var t;if(n.isString(e)){t=this.parseLiteral(e)}else if(Array.isArray(e)){t=this.parseArray(e)}else if(n.isFunction(e)){throw new Error("Implement this case")}else if(e instanceof s&&e.isVariable()){var r=new u(e);t=new d(r)}else if(e instanceof l){t=new d(e)}else if(n.isObject(e)){var a=e.createAgg;if(a){t=new v(e)}else{t=this.parseObject(e)}}else{console.log("[ERROR] Unknown item type: ",e);throw"Unkown item type"}return t},parseExpr:function(e){var t;if(n.isString(e)){t=this.parseExprString(e)}return t},parseExprString:function(e){var t;if(e.charAt(0)==="?"){var r=e.substr(1);var a=o.createVar(r);t=new u(a)}else{t=c.makeString(e)}return t}});module.exports=y},{"../ext/Class":2,"../rdf/NodeFactory":65,"../rdf/NodeUtils":66,"../rdf/node/Node":77,"../sparql/expr/Expr":211,"../sparql/expr/ExprVar":220,"../sparql/expr/NodeValue":221,"../util/ObjectUtils":280,"./AggUtils":233,"./RefSpec":244,"./agg/AggArray":257,"./agg/AggLiteral":260,"./agg/AggMap":261,"./agg/AggObject":262,"./agg/AggRef":263,"./agg/AggTransform":264,"./binding_mapper/BindingMapperExpr":266,"lodash.uniq":468}],248:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.sponate.acc",accumulate:function(e){throw new Error("override me")},getValue:function(){throw new Error("override me")},getSubAccs:function(){throw new Error("override me")}});module.exports=a},{"../../ext/Class":2}],249:[function(e,module,t){var r=e("../../ext/Class");var a=e("../binding_mapper/BindingMapperIndex");var n=e("./Acc");var i=r.create(n,{classLabel:"jassa.sponate.AccFn",initialize:function(e,t){var r=this;this.i=0;this.subAgg=e;this.indexBindingMapper=t||new a;this.subAccs=[]},accumulate:function(e){var t=this.indexBindingMapper.map(e,this.i++);if(t!=null){var r=this.subAccs[t];if(!r){r=this.subAgg.createAcc();this.subAccs[t]=r}r.accumulate(e)}},getValue:function(){var e=[];this.subAccs.forEach(function(t,r){var a=t.getValue();e[r]=a});return e},getSubAccs:function(){var e=[];this.subAccs.forEach(function(t){if(t){e.push(t)}});return e}});module.exports=i},{"../../ext/Class":2,"../binding_mapper/BindingMapperIndex":267,"./Acc":248}],250:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeUtils");var n=e("./Acc");var i=function(e,t){var r=[];var a=Math.max(e.length,t.length);for(var n=0;n<a;++n){var i=[e[n],t[n]];r.push(n)}return r};var s=function(e,t,r){var a=false;var n=Math.max(e.length,t.length);for(var i=0;i<n;++i){var s=e[i];var o=t[i];if(r(s,o)){if(r(o,s)){continue}a=true;break}else{if(!r(o,s)){continue}a=false;break}}return a};var o=function(e,t){return e<t};var l=function(e,t){var r=-1;for(var a=0;a<e.length;++a){var n=e[a];if(n.equals(t)){r=a;break}}return r};var u=r.create(n,{initialize:function(e){this.bestLiteralConfig=e;this.bestMatchNode=null;this.bestMatchScore=[1e3,1e3]},getSubAccs:function(){return[]},accumulate:function(e){var t=this.bestLiteralConfig;var r=e.get(t.getSubjectVar());var n=e.get(t.getPredicateVar());var i=e.get(t.getObjectVar());if(this.bestMatchNode==null){this.bestMatchNode=r}var u=a.getLang(i);var c=l(t.getPredicates(),n);var d=t.getLangs().indexOf(u);var p=[c,d];var f=p.every(function(e){return e>=0});if(f){var v=s(p,this.bestMatchScore,o);if(v===true){this.bestMatchScore=p;this.bestMatchNode=i}}},getValue:function(){return this.bestMatchNode}});module.exports=u},{"../../ext/Class":2,"../../rdf/NodeUtils":66,"./Acc":248}],251:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/ObjectUtils");var n=e("./Acc");var i=r.create(n,{classLabel:"jassa.sponate.AccLiteral",initialize:function(e){this.bindingMapper=e;this.value=null},accumulate:function(e){var t=this.bindingMapper.map(e,0);if(false){if(this.value!=null&&!a.isEqual(this.value,t)){console.log("[WARN] Reassigned value: Original",this.value," New: ",t)}}this.value=t},getValue:function(){return this.value},getSubAccs:function(){return[]}});module.exports=i},{"../../ext/Class":2,"../../util/ObjectUtils":280,"./Acc":248}],252:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../util/collection/HashMap");var n=e("./Acc");var i=r.create(n,{classLabel:"jassa.sponate.AccMap",initialize:function(e,t){this.keyBindingMapper=e;this.subAgg=t;this.state=new a},getState:function(){return this.state},accumulate:function(e){var t=this.keyBindingMapper.map(e,0);var r=this.state.get(t);if(!r){r=this.subAgg.createAcc();this.state.put(t,r)}r.accumulate(e)},getValue:function(){var e=new a;var t=this.state.entries();t.forEach(function(t){var r=t.key;var a=t.val;var n=a.getValue();e.put(r,n)});return e},getSubAccs:function(){var e=[];var t=this.state.entries();t.forEach(function(t){e.push(t.val)});return e}});module.exports=i},{"../../ext/Class":2,"../../util/collection/HashMap":291,"./Acc":248}],253:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("./Acc");var i=a.create(n,{classLabel:"jassa.sponate.AccObject",initialize:function(e){this.attrToAcc=e},accumulate:function(e){r(this.attrToAcc,function(t){t.accumulate(e)})},getValue:function(){var e={};r(this.attrToAcc,function(t,r){var a=t.getValue();e[r]=a});return e},getSubAccs:function(){var e=[];r(this.attrToAcc,function(t){e.push(t)});return e}});module.exports=i},{"../../ext/Class":2,"./Acc":248,"lodash.foreach":382}],254:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Acc");var n=r.create(a,{classLabel:"jassa.sponate.AccRef",initialize:function(e,t){this.bindingMapper=e;this.refSpec=t;this.refValue=null;this.value=null},getSubAccs:function(){return[]},getRefSpec:function(){return this.refSpec},getRefValue:function(){return this.refValue},accumulate:function(e){var t=this.bindingMapper.map(e,0);this.refValue=t},getValue:function(){return this.value},setValue:function(e){this.value=e}});module.exports=n},{"../../ext/Class":2,"./Acc":248}],255:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Acc");var n=r.create(a,{classLabel:"jassa.sponate.AccTransform",initialize:function(e,t){this.subAcc=e;this.fn=t},getSubAcc:function(){return this.subAcc},accumulate:function(e){this.subAcc.accumulate(e)},getValue:function(){var e=this.subAcc.getValue();var t=this.fn(e);return t},getSubAccs:function(){return[this.subAcc]}});module.exports=n},{"../../ext/Class":2,"./Acc":248}],256:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({classLabel:"jassa.sponate.Agg",createAcc:function(){throw new Error("override me")},getSubAggs:function(){throw new Error("override me")}});module.exports=a},{"../../ext/Class":2}],257:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccArray");var i=r.create(a,{classLabel:"jassa.sponate.AggArray",initialize:function(e,t){this.subAgg=e;this.indexBindingMapper=t},createAcc:function(){var e=new n(this.subAgg,this.indexBindingMapper);return e},getSubAgg:function(){return this.subAgg},getIndexBindingMapper:function(){return this.indexBindingMapper},getSubAggs:function(){return[this.subAgg]},toString:function(){return this.expr.toString()}});module.exports=i},{"../../ext/Class":2,"../acc/AccArray":249,"./Agg":256}],258:[function(e,module,t){var r=e("lodash.union");var a=e("../../ext/Class");var n=e("./Agg");var i=e("../acc/AccBestLabel");var s=a.create(n,{initialize:function(e){this.bestLiteralConfig=e},createAcc:function(){var e=new i(this.bestLiteralConfig);return e},getSubAggs:function(){return[]},toString:function(){var e="bestLabel["+this.bestLiteralConfig+"]"}});module.exports=s},{"../../ext/Class":2,"../acc/AccBestLabel":250,"./Agg":256,"lodash.union":445}],259:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=r.create(a,{classLabel:"jassa.sponate.AggCustomAgg",initialize:function(e){this.fnAcc=e},getSubAggs:function(){return[]}});module.exports=n},{"../../ext/Class":2,"./Agg":256}],260:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccLiteral");var i=r.create(a,{classLabel:"jassa.sponate.AggLiteral",initialize:function(e){this.bindingMapper=e},getBindingMapper:function(){return this.bindingMapper},getSubAggs:function(){return[]},createAcc:function(){var e=new n(this.bindingMapper);return e}});module.exports=i},{"../../ext/Class":2,"../acc/AccLiteral":251,"./Agg":256}],261:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Agg");var n=e("../acc/AccMap");var i=r.create(a,{classLabel:"jassa.sponate.AggMap",initialize:function(e,t){this.keyBindingMapper=e;this.subAgg=t},getKeyBindingMapper:function(){return this.keyBindingMapper},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=new n(this.keyBindingMapper,this.subAgg);return e},toString:function(){var e="["+this.keyExpr+" -> "+this.subAgg+"]";return e}});module.exports=i},{"../../ext/Class":2,"../acc/AccMap":252,"./Agg":256}],262:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("./Agg");var i=e("../acc/AccObject");var s=a.create(n,{classLabel:"jassa.sponate.AggObject",initialize:function(e){this.attrToAgg=e},getAttrToAgg:function(){return this.attrToAgg},createAcc:function(){var e={};r(this.attrToAgg,function(t,r){var a=t.createAcc();e[r]=a});var t=new i(e);return t},getSubAggs:function(){var e=[];r(this.attrToAgg,function(t){e.push(t)});return e},toString:function(){var e=[];r(this.attrToAgg,function(t,r){e.push('"'+r+'": '+t)});var t="{"+e.join(",")+"}";return t}});module.exports=s},{"../../ext/Class":2,"../acc/AccObject":253,"./Agg":256,"lodash.foreach":382}],263:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeFactory");var n=e("../acc/AccRef");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggRef",initialize:function(e,t){this.bindingMapper=e;this.refSpec=t},getBindingMapper:function(){return this.bindingMapper},getRefSpec:function(){return this.refSpec},getSubAggs:function(){return[]},createAcc:function(){var e=new n(this.bindingMapper,this.refSpec);return e},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":65,"../acc/AccRef":254,"./Agg":256}],264:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/NodeFactory");var n=e("../acc/AccTransform");var i=e("./Agg");var s=r.create(i,{classLabel:"jassa.sponate.AggTransform",initialize:function(e,t){this.subAgg=e;this.fn=t},getSubAgg:function(){return this.subAgg},getSubAggs:function(){return[this.subAgg]},createAcc:function(){var e=this.subAgg.createAcc();var t=new n(e,this.fn);return t},toString:function(){return JSON.stringify(this)}});module.exports=s},{"../../ext/Class":2,"../../rdf/NodeFactory":65,"../acc/AccTransform":255,"./Agg":256}],265:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({map:function(e,t){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],266:[function(e,module,t){var r=e("../../ext/Class");var a=e("./BindingMapper");var n=r.create(a,{initialize:function(e){this.expr=e},getExpr:function(){return this.expr},map:function(e,t){var r=this.expr.eval(e);var a=r.asNode();return a}});module.exports=n},{"../../ext/Class":2,"./BindingMapper":265}],267:[function(e,module,t){var r=e("../../ext/Class");var a=e("./BindingMapper");var n=r.create(a,{map:function(e,t){return t}});module.exports=n},{"../../ext/Class":2,"./BindingMapper":265}],268:[function(e,module,t){var r=e("../../ext/Class");var a=e("./BindingMapper");var n=r.create(a,{initialize:function(e,t){this.subBindingMapper=e;this.fn=t},map:function(e,t){var r=this.subBindingMapper.map(e,t);var a=this.fn(r);return a}});module.exports=n},{"../../ext/Class":2,"./BindingMapper":265}],269:[function(e,module,t){var r=e("../../ext/Class");var a=e("./QueryFlow");var n=r.create({initialize:function(e,t){this.storeFacade=e;this.mappingName=t},find:function(e){if(e){throw new Error("Criteria queries are currently not supported anymore - Sorry :/")}var t=new a(this.storeFacade,this.mappingName,e);return t}});module.exports=n},{"../../ext/Class":2,"./QueryFlow":270}],270:[function(e,module,t){var r=e("../../ext/Class");var a=e("../Query");var n=r.create({initialize:function(e,t,r){this.storeFacade=e;this.query=new a;this.query.setSourceName(t);this.query.setCriteria(r)},concept:function(e,t){this.query.setFilterConcept(e);this.query.setLeftJoin(t);return this},nodes:function(e){this.query.setNodes(e);return this},skip:function(e){this.query.setOffset(e);return this},limit:function(e){this.query.setLimit(e);return this},offset:function(e){this.query.setOffset(e);return this},list:function(){var e=this.storeFacade.getEngine();var t=this.storeFacade.getContext();var r=e.exec(t,this.query);return r},count:function(){}});module.exports=n},{"../../ext/Class":2,"../Query":243}],271:[function(e,module,t){var r=e("../../ext/Class");var a=e("../../rdf/PrefixMappingImpl");var n=e("../../util/ObjectUtils");var i=e("../Context");var s=e("../Engine");var o=e("./CollectionFacade");var n=e("../../util/ObjectUtils");var l=r.create({initialize:function(e,t){this.engine=new s(e);this.defaultSparqlService=e;t=t?t instanceof a?t:new a(t):new a;this.context=new i(t)},getEngine:function(){return this.engine},getContext:function(){return this.context},addTemplate:function(e){this.context.addTemplate(e)},addMap:function(e){if(!e.service){n.extend({},e);e.service=this.defaultSparqlService}this.context.add(e);var t=e.name;this[t]=new o(this,t)},createListService:function(e){this.engine.exec(this.context,e)}});module.exports=l},{"../../ext/Class":2,"../../rdf/PrefixMappingImpl":67,"../../util/ObjectUtils":280,"../Context":235,"../Engine":236,"./CollectionFacade":269}],272:[function(e,module,t){"use strict";var r={AccUtils:e("./AccUtils"),AttrPath:e("./AttrPath"),Context:e("./Context"),Engine:e("./Engine"),ListServiceUtils:e("./ListServiceUtils"),LookupServiceUtils:e("./LookupServiceUtils"),MappedConcept:e("./MappedConcept"),MappedConceptUtils:e("./MappedConceptUtils"),MappingRef:e("./MappingRef"),Query:e("./Query"),RefSpec:e("./RefSpec"),ServiceUtils:e("./ServiceUtils"),SponateUtils:e("./SponateUtils"),TemplateParser:e("./TemplateParser"),Acc:e("./acc/Acc"),AccArray:e("./acc/AccArray"),AccBestLabel:e("./acc/AccBestLabel"),AccLiteral:e("./acc/AccLiteral"),AccMap:e("./acc/AccMap"),AccObject:e("./acc/AccObject"),AccRef:e("./acc/AccRef"),AccTransform:e("./acc/AccTransform"),Agg:e("./agg/Agg"),AggArray:e("./agg/AggArray"),AggBestLabel:e("./agg/AggBestLabel"),AggCustomAcc:e("./agg/AggCustomAcc"),AggLiteral:e("./agg/AggLiteral"),AggMap:e("./agg/AggMap"),AggObject:e("./agg/AggObject"),AggRef:e("./agg/AggRef"),AggTransform:e("./agg/AggTransform"),BindingMapper:e("./binding_mapper/BindingMapper"),BindingMapperExpr:e("./binding_mapper/BindingMapperExpr"),BindingMapperIndex:e("./binding_mapper/BindingMapperIndex"),BindingMapperTransform:e("./binding_mapper/BindingMapperTransform"),CollectionFacade:e("./facade/CollectionFacade"),QueryFlow:e("./facade/QueryFlow"),StoreFacade:e("./facade/StoreFacade")};Object.freeze(r);module.exports=r},{"./AccUtils":232,"./AttrPath":234,"./Context":235,"./Engine":236,"./ListServiceUtils":237,"./LookupServiceUtils":238,"./MappedConcept":239,"./MappedConceptUtils":241,"./MappingRef":242,"./Query":243,"./RefSpec":244,"./ServiceUtils":245,"./SponateUtils":246,"./TemplateParser":247,"./acc/Acc":248,"./acc/AccArray":249,"./acc/AccBestLabel":250,"./acc/AccLiteral":251,"./acc/AccMap":252,"./acc/AccObject":253,"./acc/AccRef":254,"./acc/AccTransform":255,"./agg/Agg":256,"./agg/AggArray":257,"./agg/AggBestLabel":258,"./agg/AggCustomAcc":259,"./agg/AggLiteral":260,"./agg/AggMap":261,"./agg/AggObject":262,"./agg/AggRef":263,"./agg/AggTransform":264,"./binding_mapper/BindingMapper":265,"./binding_mapper/BindingMapperExpr":266,"./binding_mapper/BindingMapperIndex":267,"./binding_mapper/BindingMapperTransform":268,"./facade/CollectionFacade":269,"./facade/QueryFlow":270,"./facade/StoreFacade":271}],273:[function(e,module,t){var r=e("./ObjectUtils");var a={addAll:function(e,t){return e.push.apply(e,t)},chunk:function(e,t){var r=[];for(var a=0;a<e.length;a+=t){var n=e.slice(a,a+t);r.push(n)}return r},clear:function(e){while(e.length>0){e.pop()}},replace:function(e,t){this.clear(e);if(t){e.push.apply(e,t)}},filter:function(e,t){var r=e.filter(t);this.replace(e,r);return e},indexOf:function(e,t,a){a=a||r.isEqual;var n=-1;for(var i=0;i<e.length;++i){var s=e[i];if(a(t,s)){n=i;break}}return n},indexesOf:function(e,t,a){a=a||r.isEqual;var n=[];e.forEach(function(e,r){var i=a(t,e);if(i){n.push(r)}});return n},grep:function(e,t){var r=[];e.forEach(function(e,a){var n=t(e,a);if(n){r.push(a)}});return r},copyWithoutIndexes:function(e,t){var r={};t.forEach(function(e){r[e]=true});var a=[];for(var n=0;n<e.length;++n){var i=r[n];if(!i){a.push(e[n])}}return a},removeIndexes:function(e,t){var r=this.copyWithoutIndexes(e,t);this.replace(e,r);return e},removeByGrep:function(e,t){var r=this.grep(e,t);this.removeIndexes(e,r)}};module.exports=a},{"./ObjectUtils":280}],274:[function(e,module,t){var r={indexPredicates:function(e,t,r,a){var n=e.id.getUri();var i=r[n];if(!i){i=n}var s=t[i];if(!s){s={id:i,valueToMember:{}};t[i]=s}var o=s.valueToMember;e.values.forEach(function(t){var r=t.toString();var n=o[r];if(!n){n={predicate:e.id,value:t,sources:[]};o[r]=n}var i=n.sources;if(i.indexOf(a)<0){i.push(a)}})},clusterLink:function(e,t,a){a=a||{};e.source.predicates.forEach(function(e){r.indexPredicates(e,a,t,"source")});e.target.predicates.forEach(function(e){r.indexPredicates(e,a,t,"target")});return a}};module.exports=r},{}],275:[function(e,module,t){var r={toggleItem:function(e,t){var r;if(e.contains(t)){e.remove(t);r=false}else{e.add(t);r=true}return r}};module.exports=r},{}],276:[function(e,module,t){var r=e("../ext/JSONCanonical");var a=function(e){var t=typeof e;return t==="function"||t==="object"&&Boolean(e)};var n={stringifyCyclic:function(e,t){var n=[];var i=r.stringify(e,function(e,r){if(a(r)){if(n.indexOf(r)>=0){return}n.push(r);if(t){r=t(e,r)}}return r});return i}};module.exports=n},{"../ext/JSONCanonical":3}],277:[function(e,module,t){var r=e("./collection/HashMap");var a=e("./ObjectUtils");var n={indexBy:function(e,t,n){n=n||new r;var i;if(a.isString(t)){i=function(e){return e[t]}}else{i=t}e.forEach(function(e){var t=i(e);n.put(t,e)});return n}};module.exports=n},{"./ObjectUtils":280,"./collection/HashMap":291}],278:[function(e,module,t){var r={get:function(e,t){return t in e?e[t]:[]},put:function(e,t,r){var a;if(t in e){a=e[t]}else{a=[];e[t]=a}a.push(r)},clear:function(e){var t=Object.keys(e);t.forEach(function(t){delete e[t]})}};module.exports=r},{}],279:[function(e,module,t){var r=e("../ext/Class");var a=e("lodash.flatten");var n=r.create({classLabel:"jassa.util.NestedList",initialize:function(){this.subLists=[]},getArray:function(){var e=this.subLists.forEach(function(e){return e.getArray()});var t=a(e,true);return t},contains:function(e){var t=this.subLists.find(function(t){var r=t.contains(e);return r});var r=Boolean(t);return r}});module.exports=n},{"../ext/Class":2,"lodash.flatten":313}],280:[function(e,module,t){var r=e("lodash.isequal");var a=e("./JsonUtils");var n={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&Boolean(e)},isFunction:function(e){return typeof e==="function"},isString:function(e){return Object.prototype.toString.call(e)==="[object String]"},extend:function(e,t){for(var r in t){if(hasOwnProperty.call(t,r)){e[r]=t[r]}}return e},isEqual:function(e,t){var a;if(e&&e.equals){a=e.equals(t)}else if(t&&t.equals){a=t.equals(e)}else{a=r(e,t)}return a},defaultHashCode:function(e){var t;if(e&&e.hashCode){t=e.hashCode()}else{t=e.toString()}return t},identity:function(e){return e},hashCode:function(e,t){var r=a.stringifyCyclic(e,function(e,r){var a=null;if(!t&&n.isObject(r)){var i=null;n.defaultHashFnNames.some(function(e){if(n.isFunction(r[e])){i=e;return true}});var s=r[i];if(s){a=s.apply(r)}else{a=r}}else{a=r}if(t){t=false}return a});return r}};n.defaultHashFnNames=["hashCode"];module.exports=n},{"./JsonUtils":276,"lodash.isequal":412}],281:[function(e,module,t){var r=e("./StringUtils");var a={prefixPattern:/((\w|-)+):(\w|-)+/g,extractPrefixes:function(e){var t=r.extractAllRegexMatches(this.prefixPattern,e,1);return t},expandPrefixes:function(e,t){var r=this.extractPrefixes(t);var a=t;r.forEach(function(t){var r=e[t];if(r){var n=new RegExp(t+":(\\w+)","g");a=a.replace(n,"<"+r+"$1>")}});return a}};module.exports=a},{"./StringUtils":285}],282:[function(e,module,t){var r={};module.exports=r},{}],283:[function(e,module,t){var r=e("../ext/Class");var a=e("./collection/HashMap");var n=e("./ObjectUtils");var i=r.create({initialize:function(){this._nextId=1;this.objToId=new a(function(e,t){return e===t},function(e){return n.hashCode(e)});this.idToState={}},nextId:function(){var e=(this._nextId++).toString();return e},getIdToState:function(){return this.idToState},getObjToId:function(){return this.objToId}});module.exports=i},{"../ext/Class":2,"./ObjectUtils":280,"./collection/HashMap":291}],284:[function(e,module,t){var r=e("../ext/Class");var a=e("./ObjectUtils");var n=e("./SerializationContext");var i=r.create({initialize:function(){this.classNameToClass={};this.classNameToFnSerialize={};this.classNameToFnDeserialize={};this.classNameToPrototype={}},registerOverride:function(e,t,r){this.classNameToFnSerialize[e]=t;this.classNameToFnDeserialize[e]=r},indexClasses:function(e){var t=this.findClasses(e);a.extend(this.classNameToClass,t);return t},findClasses:function(e){var t={};e.forEach(function(e){var r=e.classLabel||(e.prototype?e.prototype.classLabel:null);if(r){t[r]=e}});return t},getLabelForClass:function(e){var t=Object.getPrototypeOf(e);var r;this.classNameToClass.find(function(e,a){if(t===e.prototype){r=a;return true}});return r},getClassForLabel:function(e){var t;this.classNameToClass.find(function(r,a){if(a===e){t=r;return true}});return t},serialize:function(e,t){t=t||new n;var r=this.serializeRec(e,t);var a={root:r,idToState:t.getIdToState()};return a},serializeRec:function(e,t){var r;var n=t.getObjToId();var i=n.get(e);if(!i){i=t.nextId();n.put(e,i)}var s=t.getIdToState();var o=s[i];if(o){r={ref:i}}else if(a.isFunction(e)){r=undefined}else if(a.isObject(e)){r={};var l=this.getLabelForClass(e);var u=function(e){var t=Boolean(e)||Object.toString.call(e)==="[object Number]"||Object.toString.call(e)==="[object Date]"||Object.toString.call(e)==="[object String]"||Object.toString.call(e)==="[object RegExp]";return t};var c=function(e){var t=e.prototype;var r=a.isObject(e)&&!u(e);var n=r&&t==null;return n};var d=u(e)||c(e)||Array.isArray(e);if(l==null&&!d){console.log("Failed to serialize instance without class label",e);throw"Failed to serialize instance without class label"}var p;if(l){p=this.classNameToPrototype[l];if(!p){var f=this.getClassForLabel(l);if(f){try{p=new f;this.classNameToPrototype[l]=p}catch(v){console.log("[WARN] Failed to create a prototype instance of class "+l,v)}}}}if(!p){p={}}var h=this.serializeAttrs(e,t,p);var g={};if(l){g.classLabel=l}if(Object.keys(h).length>0){g.attrs=h.attrs;if(h.parent!=null){g.parent=h.parent}}if(Array.isArray(e)){g.length=e.length}s[i]=g;r={ref:i}}else{r={value:e}}return r},serializeAttrs:function(e,t,r){var n={};var i=n;var s=i.attrs={};var o=this;var l=Object.keys(e);l.forEach(function(n){var i=e[n];var l=o.serializeRec(i,t);var u=r[n];var c=a.isEqual(l,u)||l==null&&u==null;if(c){return}if(l){s[n]=l}});return n},deserialize:function(e){var t=e.root;var r=e.idToState;var a={};var n=this.deserializeRef(t,r,a);return n},deserializeRef:function(e,t,r){var a=e.ref;var n=e.value;var i;if(a!=null){var s=a in r;if(s){i=r[a]}else{i=this.deserializeState(a,t,r)}}else{i=n}return i},deserializeState:function(e,t,r){var n;var i=t[e];if(i==null||!a.isObject(i)){console.log("State must be an object, was: ",i);throw"Deserialization error"}var s=i.attrs;var o=i.classLabel;var l=i.length;if(o){var u=this.getClassForLabel(o);if(!u){throw"Unknown class label encountered in deserialization: "+o}n=new u}else if(l!=null){n=[]}else{n={}}r[e]=n;var c=this;if(s!=null){var d=Object.keys(s);d.forEach(function(e){var a=s[e];var i=c.deserializeRef(a,t,r);n[e]=i})}if(l!=null){n.length=l}return n}});module.exports=new i},{"../ext/Class":2,"./ObjectUtils":280,"./SerializationContext":283}],285:[function(e,module,t){var r=e("lodash.uniq");var a={extractAllRegexMatches:function(e,t,a){var n;var i=[];while((n=e.exec(t))!=null){i.push(n[a])}i=r(i);return i}};module.exports=a},{"lodash.uniq":468}],286:[function(e,module,t){var r={visitDepthFirst:function(e,t,a){var n=a(e);if(n){var i=t(e);i.forEach(function(e){r.visitDepthFirst(e,t,a)})}},flattenTree:function(e,t,r){if(r==null){r=[]}if(e){r.push(e)}var a=e[t];var n=this;if(a){a.forEach(function(e){n.flattenTree(e,t,r)})}return r}};module.exports=r},{}],287:[function(e,module,t){var r={extractLabel:function(e){var t=e.lastIndexOf("#");var r=e.lastIndexOf("/");var a=Math.max(t,r);var n=a===e.length?e:e.substring(a+1);if(n===""){n=e}return n}};module.exports=r},{}],288:[function(e,module,t){var r=e("../../ext/Class");var a=e("../ObjectUtils");var n=r.create({initialize:function(e){this.items=[];this.fnEquals=e||a.isEqual},setItems:function(e){this.items=e
},getArray:function(){return this.items},get:function(e){var t=this.items[e];return t},add:function(e){this.items.push(e)},indexesOf:function(e){var t=this.items;var r=this.fnEquals;var a=[];t.forEach(function(t,n){var i=r(e,t);if(i){a.push(n)}});return a},contains:function(e){var t=this.indexesOf(e);var r=t.length>0;return r},firstIndexOf:function(e){var t=this.indexesOf(e);var r=t.length>0?t[0]:-1;return r},lastIndexOf:function(e){var t=this.indexesOf(e);var r=t.length>0?t[t.length-1]:-1;return r},remove:function(e){var t=this.firstIndexOf(e);if(t>=0){this.removeByIndex(t)}},removeByIndex:function(e){this.items.splice(e,1)},size:function(){return this.items.length}});module.exports=n},{"../../ext/Class":2,"../ObjectUtils":280}],289:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e,t){this.key=e;this.value=t},getKey:function(){return this.key},getValue:function(){return this.value},toString:function(){return this.key+"->"+this.value}});module.exports=a},{"../../ext/Class":2}],290:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashMap");var n=r.create({initialize:function(e,t,r){this.forward=new a(e,t);this.inverse=r?r:new n(e,t,this)},getInverse:function(){return this.inverse},put:function(e,t){this.remove(e);this.forward.put(e,t);this.inverse.forward.put(t,e)},remove:function(e){var t=this.get(e);if(t!==null){this.inverse.forward.remove(t)}this.forward.remove(e)},getMap:function(){return this.forward},get:function(e){var t=this.forward.get(e);return t},keyList:function(){var e=this.forward.keys();return e}});module.exports=n},{"../../ext/Class":2,"./HashMap":291}],291:[function(e,module,t){var r=e("lodash.foreach");var a=e("../../ext/Class");var n=e("./../ObjectUtils");var i=a.create({initialize:function(e,t){this.fnEquals=e?e:n.isEqual;this.fnHash=t?t:n.hashCode;this.hashToBucket={}},clear:function(){this.hashToBucket={}},putAll:function(e){var t=this;e.entries().forEach(function(e){t.put(e.key,e.val)});return this},put:function(e,t){var r=this.fnHash(e);var a=this.hashToBucket[r];if(a==null){a=[];this.hashToBucket[r]=a}var n=this._indexOfKey(a,e);if(n>=0){a[n].val=t;return}var i={key:e,val:t};a.push(i)},_indexOfKey:function(e,t){if(e!=null){for(var r=0;r<e.length;++r){var a=e[r];var n=a.key;if(this.fnEquals(n,t)){return r}}}return-1},get:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var a=this._indexOfKey(r,e);var n=a>=0?r[a].val:null;return n},remove:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var a=this._indexOfKey(r,e);var n=a>=0;if(n){r.splice(a,1)}return n},containsKey:function(e){var t=this.fnHash(e);var r=this.hashToBucket[t];var a=this._indexOfKey(r,e)>=0;return a},keys:function(){var e=[];r(this.hashToBucket,function(t){var r=[];t.forEach(function(e){if(e.key){r.push(e.key)}});e.push.apply(e,r)});return e},values:function(){var e=this.entries();var t=e.map(function(e){return e.val});return t},entries:function(){var e=[];r(this.hashToBucket,function(t){e.push.apply(e,t)});return e},toString:function(){var e=this.entries();var t=e.map(function(e){return e.key+": "+e.val});var r="{"+t.join(", ")+"}";return r}});module.exports=i},{"../../ext/Class":2,"./../ObjectUtils":280,"lodash.foreach":382}],292:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashMap");var n=r.create({initialize:function(e,t){this.map=new a(e,t)},add:function(e){this.map.put(e,true)},contains:function(e){var t=this.map.containsKey(e);return t},remove:function(e){this.map.remove(e)},entries:function(){var e=this.map.entries().map(function(e){return e.key});return e},clear:function(){this.map.clear()},toString:function(){var e=this.entries();var t="{"+e.join(", ")+"}";return t}});module.exports=n},{"../../ext/Class":2,"./HashMap":291}],293:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({next:function(){throw new Error("Not overridden")},hasNext:function(){throw new Error("Not overridden")}});module.exports=a},{"../../ext/Class":2}],294:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Iterator");var n=r.create(a,{initialize:function(){this.current=null;this.advance=true;this.finished=false},finish:function(){this.finished=true;this.close();return null},$prefetch:function(){this.current=this.prefetch()},hasNext:function(){if(this.advance){this.$prefetch();this.advance=false}return this.finished===false},next:function(){if(this.finished){throw"No more elments"}if(this.advance){this.$prefetch()}this.advance=true;return this.current},prefetch:function(){throw"Not overridden"}});module.exports=n},{"../../ext/Class":2,"./Iterator":293}],295:[function(e,module,t){var r=e("../../ext/Class");var a=e("./Iterator");var n=r.create(a,{initialize:function(e,t){this.array=e;this.offset=t?t:0},getArray:function(){return this.array},hasNext:function(){var e=this.offset<this.array.length;return e},next:function(){var e=this.hasNext();var t;if(e){t=this.array[this.offset];++this.offset}else{t=null}return t}});module.exports=n},{"../../ext/Class":2,"./Iterator":293}],296:[function(e,module,t){var r=e("../../ext/Class");var a=e("./HashMap");var n=r.create({initialize:function(e,t){this.map=new a(e,t);this.keys=[]},put:function(e,t){var r=this.map.get(e);if(r){throw new Error("Key "+e+" already inserted")}this.keys.push(e);this.map.put(e,t)},get:function(e){var t=this.map.get(e);return t},getByIndex:function(e){var t=this.keys[e];var r=this.map.get(t);return r},entries:function(){var e=this;var t=this.keys.map(function(t){var r=e.map.get(t);var a={key:t,val:r};return a});return t},remove:function(e){for(var t=0;t<this.keys.length;t++){var r=this.keys[t];if(r===e){this.keys.splice(t,1);break}}this.map.remove(e)},removeByIndex:function(e){var t=this.keys[e];this.remove(t)},keyList:function(){return this.keys},size:function(){return this.keys.length}});module.exports=n},{"../../ext/Class":2,"./HashMap":291}],297:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(){this.entries={}},clone:function(){var e=new a;e.addMultiMap(this);return e},clear:function(){var e=Object.keys(this.entries);var t=this;e.forEach(function(e){delete t.entries[e]})},addMultiMap:function(e){for(var t in e.entries){var r=e.entries[t];for(var a=0;a<r.length;++a){var n=r[a];this.put(t,n)}}},get:function(e){return e in this.entries?this.entries[e]:[]},put:function(e,t){var r;if(e in this.entries){r=this.entries[e]}else{r=[];this.entries[e]=r}r.push(t)},removeKey:function(e){delete this.entries[e]}});module.exports=a},{"../../ext/Class":2}],298:[function(e,module,t){var r=e("../../ext/Class");var a=r.create({initialize:function(e){this.data=e?e:{}},get:function(e){return this.data[e]},put:function(e,t){this.data[e]=t},remove:function(e){delete this.data[e]},entries:function(){throw"Not implemented"},toString:function(){return JSON.stringify(this.data)}});module.exports=a},{"../../ext/Class":2}],299:[function(e,module,t){"use strict";var r={ArrayUtils:e("./ArrayUtils"),ClusterUtils:e("./ClusterUtils"),CollectionUtils:e("./CollectionUtils"),JsonUtils:e("./JsonUtils"),MapUtils:e("./MapUtils"),MultiMapUtils:e("./MultiMapUtils"),NestedList:e("./NestedList"),ObjectUtils:e("./ObjectUtils"),PrefixUtils:e("./PrefixUtils"),PromiseUtils:e("./PromiseUtils"),SerializationContext:e("./SerializationContext"),Serializer:e("./Serializer"),StringUtils:e("./StringUtils"),TreeUtils:e("./TreeUtils"),UriUtils:e("./UriUtils"),shared:e("./shared"),ArrayList:e("./collection/ArrayList"),Entry:e("./collection/Entry"),HashBidiMap:e("./collection/HashBidiMap"),HashMap:e("./collection/HashMap"),HashSet:e("./collection/HashSet"),Iterator:e("./collection/Iterator"),IteratorAbstract:e("./collection/IteratorAbstract"),IteratorArray:e("./collection/IteratorArray"),ListMap:e("./collection/ListMap"),MultiMapObjectArray:e("./collection/MultiMapObjectArray"),ObjectMap:e("./collection/ObjectMap")};Object.freeze(r);module.exports=r},{"./ArrayUtils":273,"./ClusterUtils":274,"./CollectionUtils":275,"./JsonUtils":276,"./MapUtils":277,"./MultiMapUtils":278,"./NestedList":279,"./ObjectUtils":280,"./PrefixUtils":281,"./PromiseUtils":282,"./SerializationContext":283,"./Serializer":284,"./StringUtils":285,"./TreeUtils":286,"./UriUtils":287,"./collection/ArrayList":288,"./collection/Entry":289,"./collection/HashBidiMap":290,"./collection/HashMap":291,"./collection/HashSet":292,"./collection/Iterator":293,"./collection/IteratorAbstract":294,"./collection/IteratorArray":295,"./collection/ListMap":296,"./collection/MultiMapObjectArray":297,"./collection/ObjectMap":298,"./shared":300}],300:[function(e,module,t){var r={Promise:null,ajax:function(){throw new Error("not set!")}};module.exports=r},{}],301:[function(e,module,t){var r={xsd:e("./xsd"),rdf:e("./rdf"),rdfs:e("./rdfs"),owl:e("./owl"),wgs84:e("./wgs84")};module.exports=r},{"./owl":302,"./rdf":303,"./rdfs":304,"./wgs84":305,"./xsd":306}],302:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/2002/07/owl#";var n={Class:r.createUri(a+"Class"),DatatypeProperty:r.createUri(a+"DatatypeProperty"),ObjectProperty:r.createUri(a+"ObjectProperty"),AnnotationProperty:r.createUri(a+"AnnotationProperty")};module.exports=n},{"../rdf/NodeFactory":65}],303:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/1999/02/22-rdf-syntax-ns#";var n={type:r.createUri(a+"type"),Property:r.createUri(a+"Property")};module.exports=n},{"../rdf/NodeFactory":65}],304:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/2000/01/rdf-schema#";var n={label:r.createUri(a+"label"),subClassOf:r.createUri(a+"subClassOf")};module.exports=n},{"../rdf/NodeFactory":65}],305:[function(e,module,t){var r=e("../rdf/NodeFactory");var a="http://www.w3.org/2003/01/geo/wgs84_pos#";var n={lon:r.createUri(a+"long"),lat:r.createUri(a+"lat")};module.exports=n},{"../rdf/NodeFactory":65}],306:[function(e,module,t){var r="http://www.w3.org/2001/XMLSchema#";var a=e("../rdf/node/Node_Uri");var n={xboolean:new a(r+"boolean"),xint:new a(r+"int"),xinteger:new a(r+"integer"),xlong:new a(r+"long"),decimal:new a(r+"decimal"),xfloat:new a(r+"float"),xdouble:new a(r+"double"),xstring:new a(r+"string"),date:new a(r+"date"),dateTime:new a(r+"dateTime")};module.exports=n},{"../rdf/node/Node_Uri":82}],307:[function(e,module,t){var r=e("lodash.keys"),a=e("lodash._objecttypes");var n=function(e,t,n){var i,s=e,o=s;if(!s)return o;var l=arguments,u=0,c=typeof n=="number"?2:l.length;while(++u<c){s=l[u];if(s&&a[typeof s]){var d=-1,p=a[typeof s]&&r(s),f=p?p.length:0;while(++d<f){i=p[d];if(typeof o[i]=="undefined")o[i]=s[i]}}}return o};module.exports=n},{"lodash._objecttypes":308,"lodash.keys":309}],308:[function(e,module,t){var r={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};module.exports=r},{}],309:[function(e,module,t){var r=e("lodash._isnative"),a=e("lodash.isobject"),n=e("lodash._shimkeys");var i=r(i=Object.keys)&&i;var s=!i?n:function(e){if(!a(e)){return[]}return i(e)};module.exports=s},{"lodash._isnative":310,"lodash._shimkeys":311,"lodash.isobject":312}],310:[function(e,module,t){var r=Object.prototype;var a=r.toString;var n=RegExp("^"+String(a).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");function i(e){return typeof e=="function"&&n.test(e)}module.exports=i},{}],311:[function(e,module,t){var r=e("lodash._objecttypes");var a=Object.prototype;var n=a.hasOwnProperty;var i=function(e){var t,a=e,i=[];if(!a)return i;if(!r[typeof e])return i;for(t in a){if(n.call(a,t)){i.push(t)}}return i};module.exports=i},{"lodash._objecttypes":308}],312:[function(e,module,t){var r=e("lodash._objecttypes");function a(e){return!!(e&&r[typeof e])}module.exports=a},{"lodash._objecttypes":308}],313:[function(e,module,t){var r=e("lodash._baseflatten"),a=e("lodash.map");function n(e,t,n,i){if(typeof t!="boolean"&&t!=null){i=n;n=typeof t!="function"&&i&&i[t]===e?null:t;t=false}if(n!=null){e=a(e,n,i)}return r(e,t)}module.exports=n},{"lodash._baseflatten":314,"lodash.map":318}],314:[function(e,module,t){var r=e("lodash.isarguments"),a=e("lodash.isarray");function n(e,t,i,s){var o=(s||0)-1,l=e?e.length:0,u=[];while(++o<l){var c=e[o];if(c&&typeof c=="object"&&typeof c.length=="number"&&(a(c)||r(c))){if(!t){c=n(c,t,i)}var d=-1,p=c.length,f=u.length;u.length+=p;while(++d<p){u[f++]=c[d]}}else if(!i){u.push(c)}}return u}module.exports=n},{"lodash.isarguments":315,"lodash.isarray":316}],315:[function(e,module,t){var r="[object Arguments]";var a=Object.prototype;var n=a.toString;function i(e){return e&&typeof e=="object"&&typeof e.length=="number"&&n.call(e)==r||false}module.exports=i},{}],316:[function(e,module,t){var r=e("lodash._isnative");var a="[object Array]";var n=Object.prototype;var i=n.toString;var s=r(s=Array.isArray)&&s;var o=s||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&i.call(e)==a||false};module.exports=o},{"lodash._isnative":317}],317:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],318:[function(e,module,t){var r=e("lodash.createcallback"),a=e("lodash.forown");function n(e,t,n){var i=-1,s=e?e.length:0;t=r(t,n,3);if(typeof s=="number"){var o=Array(s);while(++i<s){o[i]=t(e[i],i,e)}}else{o=[];a(e,function(e,r,a){o[++i]=t(e,r,a)})}return o}module.exports=n},{"lodash.createcallback":319,"lodash.forown":355}],319:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash._baseisequal"),n=e("lodash.isobject"),i=e("lodash.keys"),s=e("lodash.property");function o(e,t,o){var l=typeof e;if(e==null||l=="function"){return r(e,t,o)}if(l!="object"){return s(e)}var u=i(e),c=u[0],d=e[c];if(u.length==1&&d===d&&!n(d)){return function(e){var t=e[c];return d===t&&(d!==0||1/d==1/t)}}return function(t){var r=u.length,n=false;while(r--){if(!(n=a(t[u[r]],e[u[r]],null,true))){break}}return n}}module.exports=o},{"lodash._basecreatecallback":320,"lodash._baseisequal":339,"lodash.isobject":348,"lodash.keys":350,"lodash.property":354}],320:[function(e,module,t){var r=e("lodash.bind"),a=e("lodash.identity"),n=e("lodash._setbinddata"),i=e("lodash.support");var s=/^\s*function[ \n\r\t]+\w/;var o=/\bthis\b/;var l=Function.prototype.toString;function u(e,t,u){if(typeof e!="function"){return a}if(typeof t=="undefined"||!("prototype"in e)){return e}var c=e.__bindData__;if(typeof c=="undefined"){if(i.funcNames){c=!e.name}c=c||!i.funcDecomp;if(!c){var d=l.call(e);if(!i.funcNames){c=!s.test(d)}if(!c){c=o.test(d);n(e,c)}}}if(c===false||c!==true&&c[1]&1){return e}switch(u){case 1:return function(r){return e.call(t,r)};case 2:return function(r,a){return e.call(t,r,a)};case 3:return function(r,a,n){return e.call(t,r,a,n)};case 4:return function(r,a,n,i){return e.call(t,r,a,n,i)}}return r(e,t)}module.exports=u},{"lodash._setbinddata":321,"lodash.bind":324,"lodash.identity":336,"lodash.support":337}],321:[function(e,module,t){var r=e("lodash._isnative"),a=e("lodash.noop");var n={configurable:false,enumerable:false,value:null,writable:false};var i=function(){try{var e={},t=r(t=Object.defineProperty)&&t,a=t(e,e,e)&&t}catch(n){}return a}();var s=!i?a:function(e,t){n.value=t;i(e,"__bindData__",n)};module.exports=s},{"lodash._isnative":322,"lodash.noop":323}],322:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],323:[function(e,module,t){function r(){}module.exports=r},{}],324:[function(e,module,t){var r=e("lodash._createwrapper"),a=e("lodash._slice");function n(e,t){return arguments.length>2?r(e,17,a(arguments,2),null,t):r(e,1,null,null,t)}module.exports=n},{"lodash._createwrapper":325,"lodash._slice":335}],325:[function(e,module,t){var r=e("lodash._basebind"),a=e("lodash._basecreatewrapper"),n=e("lodash.isfunction"),i=e("lodash._slice");var s=[];var o=s.push,l=s.unshift;function u(e,t,s,c,d,p){var f=t&1,v=t&2,h=t&4,g=t&8,m=t&16,x=t&32;if(!v&&!n(e)){throw new TypeError}if(m&&!s.length){t&=~16;m=s=false}if(x&&!c.length){t&=~32;x=c=false}var _=e&&e.__bindData__;if(_&&_!==true){_=i(_);if(_[2]){_[2]=i(_[2])}if(_[3]){_[3]=i(_[3])}if(f&&!(_[1]&1)){_[4]=d}if(!f&&_[1]&1){t|=8}if(h&&!(_[1]&4)){_[5]=p}if(m){o.apply(_[2]||(_[2]=[]),s)}if(x){l.apply(_[3]||(_[3]=[]),c)}_[1]|=t;return u.apply(null,_)}var b=t==1||t===17?r:a;return b([e,t,s,c,d,p])}module.exports=u},{"lodash._basebind":326,"lodash._basecreatewrapper":330,"lodash._slice":335,"lodash.isfunction":334}],326:[function(e,module,t){var r=e("lodash._basecreate"),a=e("lodash.isobject"),n=e("lodash._setbinddata"),i=e("lodash._slice");var s=[];var o=s.push;function l(e){var t=e[0],s=e[2],l=e[4];function u(){if(s){var e=i(s);o.apply(e,arguments)}if(this instanceof u){var n=r(t.prototype),c=t.apply(n,e||arguments);return a(c)?c:n}return t.apply(l,e||arguments)}n(u,e);return u}module.exports=l},{"lodash._basecreate":327,"lodash._setbinddata":321,"lodash._slice":335,"lodash.isobject":348}],327:[function(e,module,t){(function(t){var r=e("lodash._isnative"),a=e("lodash.isobject"),n=e("lodash.noop");var i=r(i=Object.create)&&i;function s(e,t){return a(e)?i(e):{}}if(!i){s=function(){function e(){}return function(r){if(a(r)){e.prototype=r;var n=new e;e.prototype=null}return n||t.Object()}}()}module.exports=s}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._isnative":328,"lodash.isobject":348,"lodash.noop":329}],328:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],329:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],330:[function(e,module,t){var r=e("lodash._basecreate"),a=e("lodash.isobject"),n=e("lodash._setbinddata"),i=e("lodash._slice");var s=[];var o=s.push;function l(e){var t=e[0],s=e[1],u=e[2],c=e[3],d=e[4],p=e[5];var f=s&1,v=s&2,h=s&4,g=s&8,m=t;function x(){var e=f?d:this;if(u){var n=i(u);o.apply(n,arguments)}if(c||h){n||(n=i(arguments));if(c){o.apply(n,c)}if(h&&n.length<p){s|=16&~32;return l([t,g?s:s&~3,n,null,d,p])}}n||(n=arguments);if(v){t=e[m]}if(this instanceof x){e=r(t.prototype);var _=t.apply(e,n);return a(_)?_:e}return t.apply(e,n)}n(x,e);return x}module.exports=l},{"lodash._basecreate":331,"lodash._setbinddata":321,"lodash._slice":335,"lodash.isobject":348}],331:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":332,"lodash.isobject":348,"lodash.noop":333}],332:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],333:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],334:[function(e,module,t){function r(e){return typeof e=="function"}module.exports=r},{}],335:[function(e,module,t){function r(e,t,r){t||(t=0);if(typeof r=="undefined"){r=e?e.length:0}var a=-1,n=r-t||0,i=Array(n<0?0:n);while(++a<n){i[a]=e[t+a]}return i}module.exports=r},{}],336:[function(e,module,t){function r(e){return e}module.exports=r},{}],337:[function(e,module,t){(function(t){var r=e("lodash._isnative");var a=/\bthis\b/;var n={};n.funcDecomp=!r(t.WinRTError)&&a.test(function(){return this});n.funcNames=typeof Function.name=="string";module.exports=n}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._isnative":338}],338:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],339:[function(e,module,t){var r=e("lodash.forin"),a=e("lodash._getarray"),n=e("lodash.isfunction"),i=e("lodash._objecttypes"),s=e("lodash._releasearray");var o="[object Arguments]",l="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Number]",p="[object Object]",f="[object RegExp]",v="[object String]";var h=Object.prototype;var g=h.toString;var m=h.hasOwnProperty;function x(e,t,h,_,b,y){if(h){var S=h(e,t);if(typeof S!="undefined"){return!!S}}if(e===t){return e!==0||1/e==1/t}var C=typeof e,E=typeof t;if(e===e&&!(e&&i[C])&&!(t&&i[E])){return false}if(e==null||t==null){return e===t}var w=g.call(e),j=g.call(t);if(w==o){w=p}if(j==o){j=p}if(w!=j){return false}switch(w){case u:case c:return+e==+t;case d:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case f:case v:return e==String(t)}var k=w==l;if(!k){var L=m.call(e,"__wrapped__"),q=m.call(t,"__wrapped__");if(L||q){return x(L?e.__wrapped__:e,q?t.__wrapped__:t,h,_,b,y)}if(w!=p){return false}var A=e.constructor,V=t.constructor;if(A!=V&&!(n(A)&&A instanceof A&&n(V)&&V instanceof V)&&("constructor"in e&&"constructor"in t)){return false}}var N=!b;b||(b=a());y||(y=a());var U=b.length;while(U--){if(b[U]==e){return y[U]==t}}var T=0;S=true;b.push(e);y.push(t);if(k){U=e.length;T=t.length;S=T==U;if(S||_){while(T--){var F=U,M=t[T];if(_){while(F--){if(S=x(e[F],M,h,_,b,y)){break}}}else if(!(S=x(e[T],M,h,_,b,y))){break}}}}else{r(t,function(t,r,a){if(m.call(a,r)){T++;return S=m.call(e,r)&&x(e[r],t,h,_,b,y)}});if(S&&!_){r(e,function(e,t,r){if(m.call(r,t)){return S=--T>-1}})}}b.pop();y.pop();if(N){s(b);s(y)}return S}module.exports=x},{"lodash._getarray":340,"lodash._objecttypes":342,"lodash._releasearray":343,"lodash.forin":346,"lodash.isfunction":347}],340:[function(e,module,t){var r=e("lodash._arraypool");function a(){return r.pop()||[]}module.exports=a},{"lodash._arraypool":341}],341:[function(e,module,t){var r=[];module.exports=r},{}],342:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],343:[function(e,module,t){var r=e("lodash._arraypool"),a=e("lodash._maxpoolsize");function n(e){e.length=0;if(r.length<a){r.push(e)}}module.exports=n},{"lodash._arraypool":344,"lodash._maxpoolsize":345}],344:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],345:[function(e,module,t){var r=40;module.exports=r},{}],346:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash._objecttypes");var n=function(e,t,n){var i,s=e,o=s;if(!s)return o;if(!a[typeof s])return o;t=t&&typeof n=="undefined"?t:r(t,n,3);for(i in s){if(t(s[i],i,e)===false)return o}return o};module.exports=n},{"lodash._basecreatecallback":320,"lodash._objecttypes":342}],347:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],348:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":349}],349:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],350:[function(e,module,t){module.exports=e(309)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":309,"lodash._isnative":351,"lodash._shimkeys":352,"lodash.isobject":348}],351:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],352:[function(e,module,t){module.exports=e(311)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":311,"lodash._objecttypes":353}],353:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],354:[function(e,module,t){function r(e){return function(t){return t[e]}}module.exports=r},{}],355:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash.keys"),n=e("lodash._objecttypes");var i=function(e,t,i){var s,o=e,l=o;if(!o)return l;if(!n[typeof o])return l;t=t&&typeof i=="undefined"?t:r(t,i,3);var u=-1,c=n[typeof o]&&a(o),d=c?c.length:0;while(++u<d){s=c[u];if(t(o[s],s,e)===false)return l}return l};module.exports=i},{"lodash._basecreatecallback":356,"lodash._objecttypes":377,"lodash.keys":378}],356:[function(e,module,t){module.exports=e(320)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":320,"lodash._setbinddata":357,"lodash.bind":360,"lodash.identity":374,"lodash.support":375}],357:[function(e,module,t){module.exports=e(321)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":321,"lodash._isnative":358,"lodash.noop":359}],358:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],359:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],360:[function(e,module,t){module.exports=e(324)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":324,"lodash._createwrapper":361,"lodash._slice":373}],361:[function(e,module,t){module.exports=e(325)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":325,"lodash._basebind":362,"lodash._basecreatewrapper":367,"lodash._slice":373,"lodash.isfunction":372}],362:[function(e,module,t){module.exports=e(326)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":326,"lodash._basecreate":363,"lodash._setbinddata":357,"lodash._slice":373,"lodash.isobject":366}],363:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":364,"lodash.isobject":366,"lodash.noop":365}],364:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],365:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],366:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":377}],367:[function(e,module,t){module.exports=e(330)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":330,"lodash._basecreate":368,"lodash._setbinddata":357,"lodash._slice":373,"lodash.isobject":371}],368:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":369,"lodash.isobject":371,"lodash.noop":370}],369:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],370:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],371:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":377}],372:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],373:[function(e,module,t){module.exports=e(335)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":335}],374:[function(e,module,t){module.exports=e(336)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":336}],375:[function(e,module,t){module.exports=e(337)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":337,"lodash._isnative":376}],376:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],377:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],378:[function(e,module,t){module.exports=e(309)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":309,"lodash._isnative":379,"lodash._shimkeys":380,"lodash.isobject":381}],379:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],380:[function(e,module,t){module.exports=e(311)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":311,"lodash._objecttypes":377}],381:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":377}],382:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash.forown");function n(e,t,n){var i=-1,s=e?e.length:0;t=t&&typeof n=="undefined"?t:r(t,n,3);if(typeof s=="number"){while(++i<s){if(t(e[i],i,e)===false){break}}}else{a(e,t)}return e}module.exports=n
},{"lodash._basecreatecallback":383,"lodash.forown":406}],383:[function(e,module,t){module.exports=e(320)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":320,"lodash._setbinddata":384,"lodash.bind":387,"lodash.identity":403,"lodash.support":404}],384:[function(e,module,t){module.exports=e(321)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":321,"lodash._isnative":385,"lodash.noop":386}],385:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],386:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],387:[function(e,module,t){module.exports=e(324)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":324,"lodash._createwrapper":388,"lodash._slice":402}],388:[function(e,module,t){module.exports=e(325)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":325,"lodash._basebind":389,"lodash._basecreatewrapper":395,"lodash._slice":402,"lodash.isfunction":401}],389:[function(e,module,t){module.exports=e(326)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":326,"lodash._basecreate":390,"lodash._setbinddata":384,"lodash._slice":402,"lodash.isobject":393}],390:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":391,"lodash.isobject":393,"lodash.noop":392}],391:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],392:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],393:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":394}],394:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],395:[function(e,module,t){module.exports=e(330)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":330,"lodash._basecreate":396,"lodash._setbinddata":384,"lodash._slice":402,"lodash.isobject":399}],396:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":397,"lodash.isobject":399,"lodash.noop":398}],397:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],398:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],399:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":400}],400:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],401:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],402:[function(e,module,t){module.exports=e(335)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":335}],403:[function(e,module,t){module.exports=e(336)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":336}],404:[function(e,module,t){module.exports=e(337)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":337,"lodash._isnative":405}],405:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],406:[function(e,module,t){module.exports=e(355)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.forown/index.js":355,"lodash._basecreatecallback":383,"lodash._objecttypes":407,"lodash.keys":408}],407:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],408:[function(e,module,t){module.exports=e(309)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":309,"lodash._isnative":409,"lodash._shimkeys":410,"lodash.isobject":411}],409:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],410:[function(e,module,t){module.exports=e(311)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":311,"lodash._objecttypes":407}],411:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":407}],412:[function(e,module,t){var r=e("lodash._basecreatecallback"),a=e("lodash._baseisequal");function n(e,t,n,i){return a(e,t,typeof n=="function"&&r(n,i,2))}module.exports=n},{"lodash._basecreatecallback":413,"lodash._baseisequal":436}],413:[function(e,module,t){module.exports=e(320)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":320,"lodash._setbinddata":414,"lodash.bind":417,"lodash.identity":433,"lodash.support":434}],414:[function(e,module,t){module.exports=e(321)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":321,"lodash._isnative":415,"lodash.noop":416}],415:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],416:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],417:[function(e,module,t){module.exports=e(324)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":324,"lodash._createwrapper":418,"lodash._slice":432}],418:[function(e,module,t){module.exports=e(325)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":325,"lodash._basebind":419,"lodash._basecreatewrapper":425,"lodash._slice":432,"lodash.isfunction":431}],419:[function(e,module,t){module.exports=e(326)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":326,"lodash._basecreate":420,"lodash._setbinddata":414,"lodash._slice":432,"lodash.isobject":423}],420:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":421,"lodash.isobject":423,"lodash.noop":422}],421:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],422:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],423:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":424}],424:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],425:[function(e,module,t){module.exports=e(330)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":330,"lodash._basecreate":426,"lodash._setbinddata":414,"lodash._slice":432,"lodash.isobject":429}],426:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":427,"lodash.isobject":429,"lodash.noop":428}],427:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],428:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],429:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":430}],430:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],431:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],432:[function(e,module,t){module.exports=e(335)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":335}],433:[function(e,module,t){module.exports=e(336)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":336}],434:[function(e,module,t){module.exports=e(337)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":337,"lodash._isnative":435}],435:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],436:[function(e,module,t){module.exports=e(339)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":339,"lodash._getarray":437,"lodash._objecttypes":439,"lodash._releasearray":440,"lodash.forin":443,"lodash.isfunction":444}],437:[function(e,module,t){module.exports=e(340)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":340,"lodash._arraypool":438}],438:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],439:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],440:[function(e,module,t){module.exports=e(343)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":343,"lodash._arraypool":441,"lodash._maxpoolsize":442}],441:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],442:[function(e,module,t){module.exports=e(345)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":345}],443:[function(e,module,t){module.exports=e(346)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":346,"lodash._basecreatecallback":413,"lodash._objecttypes":439}],444:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],445:[function(e,module,t){var r=e("lodash._baseflatten"),a=e("lodash._baseuniq");function n(){return a(r(arguments,true,true))}module.exports=n},{"lodash._baseflatten":446,"lodash._baseuniq":450}],446:[function(e,module,t){module.exports=e(314)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/index.js":314,"lodash.isarguments":447,"lodash.isarray":448}],447:[function(e,module,t){module.exports=e(315)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/node_modules/lodash.isarguments/index.js":315}],448:[function(e,module,t){module.exports=e(316)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash._baseflatten/node_modules/lodash.isarray/index.js":316,"lodash._isnative":449}],449:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],450:[function(e,module,t){var r=e("lodash._baseindexof"),a=e("lodash._cacheindexof"),n=e("lodash._createcache"),i=e("lodash._getarray"),s=e("lodash._largearraysize"),o=e("lodash._releasearray"),l=e("lodash._releaseobject");function u(e,t,u){var c=-1,d=r,p=e?e.length:0,f=[];var v=!t&&p>=s,h=u||v?i():f;if(v){var g=n(h);d=a;h=g}while(++c<p){var m=e[c],x=u?u(m,c,e):m;if(t?!c||h[h.length-1]!==x:d(h,x)<0){if(u||v){h.push(x)}f.push(m)}}if(v){o(h.array);l(h)}else if(u){o(h)}return f}module.exports=u},{"lodash._baseindexof":451,"lodash._cacheindexof":452,"lodash._createcache":454,"lodash._getarray":459,"lodash._largearraysize":461,"lodash._releasearray":462,"lodash._releaseobject":465}],451:[function(e,module,t){function r(e,t,r){var a=(r||0)-1,n=e?e.length:0;while(++a<n){if(e[a]===t){return a}}return-1}module.exports=r},{}],452:[function(e,module,t){var r=e("lodash._baseindexof"),a=e("lodash._keyprefix");function n(e,t){var n=typeof t;e=e.cache;if(n=="boolean"||t==null){return e[t]?0:-1}if(n!="number"&&n!="string"){n="object"}var i=n=="number"?t:a+t;e=(e=e[n])&&e[i];return n=="object"?e&&r(e,t)>-1?0:-1:e?0:-1}module.exports=n},{"lodash._baseindexof":451,"lodash._keyprefix":453}],453:[function(e,module,t){var r="__1335248838000__";module.exports=r},{}],454:[function(e,module,t){var r=e("lodash._cachepush"),a=e("lodash._getobject"),n=e("lodash._releaseobject");function i(e){var t=-1,n=e.length,i=e[0],s=e[n/2|0],o=e[n-1];if(i&&typeof i=="object"&&s&&typeof s=="object"&&o&&typeof o=="object"){return false}var l=a();l["false"]=l["null"]=l["true"]=l["undefined"]=false;var u=a();u.array=e;u.cache=l;u.push=r;while(++t<n){u.push(e[t])}return u}module.exports=i},{"lodash._cachepush":455,"lodash._getobject":457,"lodash._releaseobject":465}],455:[function(e,module,t){var r=e("lodash._keyprefix");function a(e){var t=this.cache,a=typeof e;if(a=="boolean"||e==null){t[e]=true}else{if(a!="number"&&a!="string"){a="object"}var n=a=="number"?e:r+e,i=t[a]||(t[a]={});if(a=="object"){(i[n]||(i[n]=[])).push(e)}else{i[n]=true}}}module.exports=a},{"lodash._keyprefix":456}],456:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":453}],457:[function(e,module,t){var r=e("lodash._objectpool");function a(){return r.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}module.exports=a},{"lodash._objectpool":458}],458:[function(e,module,t){var r=[];module.exports=r},{}],459:[function(e,module,t){module.exports=e(340)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":340,"lodash._arraypool":460}],460:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],461:[function(e,module,t){var r=75;module.exports=r},{}],462:[function(e,module,t){module.exports=e(343)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":343,"lodash._arraypool":463,"lodash._maxpoolsize":464}],463:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],464:[function(e,module,t){module.exports=e(345)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":345}],465:[function(e,module,t){var r=e("lodash._maxpoolsize"),a=e("lodash._objectpool");function n(e){var t=e.cache;if(t){n(t)}e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null;if(a.length<r){a.push(e)}}module.exports=n},{"lodash._maxpoolsize":466,"lodash._objectpool":467}],466:[function(e,module,t){module.exports=e(345)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":345}],467:[function(e,module,t){module.exports=e(458)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":458}],468:[function(e,module,t){var r=e("lodash._baseuniq"),a=e("lodash.createcallback");function n(e,t,n,i){if(typeof t!="boolean"&&t!=null){i=n;n=typeof t!="function"&&i&&i[t]===e?null:t;t=false}if(n!=null){n=a(n,i,3)}return r(e,t,n)}module.exports=n},{"lodash._baseuniq":469,"lodash.createcallback":487}],469:[function(e,module,t){module.exports=e(450)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/index.js":450,"lodash._baseindexof":470,"lodash._cacheindexof":471,"lodash._createcache":473,"lodash._getarray":478,"lodash._largearraysize":480,"lodash._releasearray":481,"lodash._releaseobject":484}],470:[function(e,module,t){module.exports=e(451)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._baseindexof/index.js":451}],471:[function(e,module,t){module.exports=e(452)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/index.js":452,"lodash._baseindexof":470,"lodash._keyprefix":472}],472:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":453}],473:[function(e,module,t){module.exports=e(454)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/index.js":454,"lodash._cachepush":474,"lodash._getobject":476,"lodash._releaseobject":484}],474:[function(e,module,t){module.exports=e(455)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._cachepush/index.js":455,"lodash._keyprefix":475}],475:[function(e,module,t){module.exports=e(453)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._cacheindexof/node_modules/lodash._keyprefix/index.js":453}],476:[function(e,module,t){module.exports=e(457)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/index.js":457,"lodash._objectpool":477}],477:[function(e,module,t){module.exports=e(458)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":458}],478:[function(e,module,t){module.exports=e(340)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":340,"lodash._arraypool":479}],479:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],480:[function(e,module,t){module.exports=e(461)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._largearraysize/index.js":461}],481:[function(e,module,t){module.exports=e(343)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":343,"lodash._arraypool":482,"lodash._maxpoolsize":483}],482:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],483:[function(e,module,t){module.exports=e(345)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":345}],484:[function(e,module,t){module.exports=e(465)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._releaseobject/index.js":465,"lodash._maxpoolsize":485,"lodash._objectpool":486}],485:[function(e,module,t){module.exports=e(345)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":345}],486:[function(e,module,t){module.exports=e(458)},{"/pipeline/build/node_modules/lodash.union/node_modules/lodash._baseuniq/node_modules/lodash._createcache/node_modules/lodash._getobject/node_modules/lodash._objectpool/index.js":458}],487:[function(e,module,t){module.exports=e(319)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/index.js":319,"lodash._basecreatecallback":488,"lodash._baseisequal":507,"lodash.isobject":516,"lodash.keys":518,"lodash.property":522}],488:[function(e,module,t){module.exports=e(320)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/index.js":320,"lodash._setbinddata":489,"lodash.bind":492,"lodash.identity":504,"lodash.support":505}],489:[function(e,module,t){module.exports=e(321)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/index.js":321,"lodash._isnative":490,"lodash.noop":491}],490:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],491:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],492:[function(e,module,t){module.exports=e(324)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/index.js":324,"lodash._createwrapper":493,"lodash._slice":503}],493:[function(e,module,t){module.exports=e(325)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/index.js":325,"lodash._basebind":494,"lodash._basecreatewrapper":498,"lodash._slice":503,"lodash.isfunction":502}],494:[function(e,module,t){module.exports=e(326)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/index.js":326,"lodash._basecreate":495,"lodash._setbinddata":489,"lodash._slice":503,"lodash.isobject":516}],495:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":496,"lodash.isobject":516,"lodash.noop":497}],496:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],497:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],498:[function(e,module,t){module.exports=e(330)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basecreatewrapper/index.js":330,"lodash._basecreate":499,"lodash._setbinddata":489,"lodash._slice":503,"lodash.isobject":516}],499:[function(e,module,t){module.exports=e(327)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":327,"lodash._isnative":500,"lodash.isobject":516,"lodash.noop":501}],500:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],501:[function(e,module,t){module.exports=e(323)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":323}],502:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],503:[function(e,module,t){module.exports=e(335)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._slice/index.js":335}],504:[function(e,module,t){module.exports=e(336)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.identity/index.js":336}],505:[function(e,module,t){module.exports=e(337)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.support/index.js":337,"lodash._isnative":506}],506:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],507:[function(e,module,t){module.exports=e(339)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/index.js":339,"lodash._getarray":508,"lodash._objecttypes":510,"lodash._releasearray":511,"lodash.forin":514,"lodash.isfunction":515}],508:[function(e,module,t){module.exports=e(340)
},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/index.js":340,"lodash._arraypool":509}],509:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],510:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],511:[function(e,module,t){module.exports=e(343)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/index.js":343,"lodash._arraypool":512,"lodash._maxpoolsize":513}],512:[function(e,module,t){module.exports=e(341)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":341}],513:[function(e,module,t){module.exports=e(345)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash._releasearray/node_modules/lodash._maxpoolsize/index.js":345}],514:[function(e,module,t){module.exports=e(346)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._baseisequal/node_modules/lodash.forin/index.js":346,"lodash._basecreatecallback":488,"lodash._objecttypes":510}],515:[function(e,module,t){module.exports=e(334)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash.isfunction/index.js":334}],516:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":517}],517:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],518:[function(e,module,t){module.exports=e(309)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":309,"lodash._isnative":519,"lodash._shimkeys":520,"lodash.isobject":516}],519:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],520:[function(e,module,t){module.exports=e(311)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":311,"lodash._objecttypes":521}],521:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],522:[function(e,module,t){module.exports=e(354)},{"/pipeline/build/node_modules/lodash.flatten/node_modules/lodash.map/node_modules/lodash.createcallback/node_modules/lodash.property/index.js":354}],523:[function(e,module,t){var r=e("lodash.keys");function a(e){var t=-1,a=r(e),n=a.length,i=Array(n);while(++t<n){i[t]=e[a[t]]}return i}module.exports=a},{"lodash.keys":524}],524:[function(e,module,t){module.exports=e(309)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/index.js":309,"lodash._isnative":525,"lodash._shimkeys":526,"lodash.isobject":528}],525:[function(e,module,t){module.exports=e(310)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":310}],526:[function(e,module,t){module.exports=e(311)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":311,"lodash._objecttypes":527}],527:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}],528:[function(e,module,t){module.exports=e(312)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash.keys/node_modules/lodash.isobject/index.js":312,"lodash._objecttypes":529}],529:[function(e,module,t){module.exports=e(308)},{"/pipeline/build/node_modules/lodash.defaults/node_modules/lodash._objecttypes/index.js":308}]},{},[1]);